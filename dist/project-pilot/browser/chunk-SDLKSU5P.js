import{a as Et}from"./chunk-NGE6N3H6.js";import{a as Ft}from"./chunk-65TANLOM.js";import{a as Nt,b as _e,f as Dt}from"./chunk-HUCT2AA2.js";import{a as $,d as $e}from"./chunk-UQBFF3T4.js";import{$ as v,$c as Ct,Ab as We,Ac as pt,Bb as Ge,Bc as ct,Cb as Xe,Cc as mt,Da as U,Db as Je,Dc as ut,Ea as p,Ec as dt,Fa as Ne,Fb as xe,Fc as _t,G as H,Ga as S,Gb as Ze,Hb as Z,Hd as It,Ia as Fe,Ic as se,Ja as k,Jc as le,K as T,Ka as V,L as q,La as I,Oa as h,Pa as Ce,Pb as Ke,Qb as F,R as _,S as f,Sa as M,Sb as Ye,Sc as ft,Ta as B,Tb as Qe,Tc as zt,U as Se,Ua as G,Ub as E,Uc as pe,Va as he,Vb as D,Vc as ce,Wb as j,Xb as R,Xc as me,Yb as et,Yc as gt,Z as W,Zb as tt,Zc as ue,_ as r,_c as de,a as ve,ac as nt,ad as ht,bc as K,bd as xt,cb as Ee,cc as Y,cd as vt,db as De,dd as yt,eb as X,ed as bt,f as P,fa as d,fb as N,fc as Q,gd as St,h as ye,hc as C,hd as wt,ia as a,ic as ee,ja as we,jb as J,jc as te,jd as Mt,ka as b,kb as je,kc as it,kd as Ot,la as Me,lb as Re,lc as ne,ld as Pt,ma as ge,mb as Ae,md as Tt,na as Oe,nc as rt,nd as kt,oa as Pe,oc as ie,od as Vt,pa as Te,qa as ke,ra as o,rc as re,sa as s,sb as Ue,sc as oe,ta as m,tb as Be,ua as Ve,ub as Le,uc as ot,v as be,va as Ie,vc as at,wc as ae,xa as g,xb as He,xc as st,ya as z,yc as lt,za as l,zb as qe}from"./chunk-RYV5VKQF.js";function on(t,c){if(t&1){let e=g();o(0,"nz-list-item",9),z("click",function(){let n=_(e).$implicit,u=l(3);return f(u.setClient(n))}),o(1,"nz-list-item-meta",10)(2,"nz-list-item-meta-title"),p(3),o(4,"b"),p(5),s(),p(6," \xA0 "),o(7,"b"),p(8),M(9,"currency"),s()(),o(10,"nz-list-item-meta-description"),p(11),s()(),o(12,"ul",11)(13,"nz-list-item-action")(14,"span",12),z("click",function(){let n=_(e).$implicit,u=l(3);return f(u.showModal(!1,n.id))}),s()()()()}if(t&2){let e=c.$implicit;r(),a("nzAvatar",e.filename?e.filename:"A"),r(2),S(" ",e.name," "),r(2),S("",e.projectDuration," hours"),r(3),Ne(G(9,5,e.projectBudget,e.currency||"PKR")),r(3),S(" ",e.projectDescription," ")}}function an(t,c){t&1&&m(0,"nz-list-empty")}function sn(t,c){if(t&1&&(Ve(0),o(1,"nz-list",7),Te(2,on,15,8,"nz-list-item",8,Pe),d(4,an,1,0,"nz-list-empty"),s(),Ie()),t&2){let e=l(2);r(),a("nzLoading",e.loading),r(),ke(e.data),r(2),Oe(e.data.length===0?4:-1)}}function ln(t,c){if(t&1&&m(0,"nz-option",29),t&2){let e=c.$implicit;a("nzValue",e==null?null:e.id)("nzLabel",e==null?null:e.name)}}function pn(t,c){if(t&1&&m(0,"nz-option",29),t&2){let e=c.$implicit;a("nzValue",e.key)("nzLabel",e.key)}}function cn(t,c){if(t&1&&(o(0,"nz-select",30),d(1,pn,1,2,"nz-option",18),M(2,"keyvalue"),s()),t&2){let e=l(3);r(),a("ngForOf",B(2,1,e.currency))}}function mn(t,c){if(t&1&&m(0,"img",31),t&2){let e,i=l(3);a("src",(e=i.addOrgForm.get("filename"))==null?null:e.value,W)}}function un(t,c){if(t&1){let e=g();o(0,"nz-form",13)(1,"nz-form-item")(2,"nz-form-label",14),p(3,"Client Name"),s(),o(4,"nz-form-control",15),m(5,"input",16),s()(),o(6,"nz-form-item")(7,"nz-form-label",14),p(8,"Owner"),s(),o(9,"nz-form-control",15)(10,"nz-select",17),d(11,ln,1,2,"nz-option",18),s()()(),o(12,"nz-form-item")(13,"nz-form-label",14),p(14,"Contact"),s(),o(15,"nz-form-control",15),m(16,"input",19),s()(),o(17,"nz-form-item")(18,"nz-form-label",14),p(19,"Project Description"),s(),o(20,"nz-form-control",20),m(21,"textarea",21),s()(),o(22,"nz-form-item")(23,"nz-form-label",14),p(24,"Project Duration in Hours"),s(),o(25,"nz-form-control",20),m(26,"nz-input-number",22),s()(),o(27,"nz-form-item")(28,"nz-form-label",14),p(29,"Project Budget"),s(),o(30,"nz-form-control",23)(31,"nz-input-group",24),m(32,"nz-input-number",25),s(),d(33,cn,3,3,"ng-template",null,1,he),s()(),o(35,"nz-form-item")(36,"nz-form-label",14),p(37,"Client Image"),s(),o(38,"nz-form-control",15)(39,"section")(40,"div"),d(41,mn,1,1,"img",26),s(),o(42,"button",27),z("click",function(){_(e);let n=l(2);return f(n.compressFile())}),m(43,"span",28),p(44," Upload "),s()()()()()}if(t&2){let e,i=U(34),n=l(2);a("formGroup",n.addOrgForm),r(11),a("ngForOf",n.listOfData),r(15),a("nzStep",1),r(5),a("nzSuffix",i),r(),a("nzStep",1),r(9),a("ngIf",(e=n.addOrgForm.get("filename"))==null?null:e.value)}}function dn(t,c){if(t&1){let e=g();o(0,"nz-drawer",3),z("nzOnClose",function(){_(e);let n=l();return f(n.close())}),d(1,sn,5,2,"ng-container",4),o(2,"nz-modal",5),I("nzVisibleChange",function(n){_(e);let u=l();return V(u.isModalVisible,n)||(u.isModalVisible=n),f(n)}),z("nzOnCancel",function(){_(e);let n=l();return f(n.handleCancel())})("nzOnOk",function(){_(e);let n=l();return f(n.handleOk())}),d(3,un,45,6,"nz-form",6),s()()}if(t&2){let e=l(),i=U(2);a("nzClosable",!1)("nzVisible",e.visible)("nzTitle",i),r(2),k("nzVisible",e.isModalVisible),a("nzTitle",e.newItem?"Add Client":"Edit Client")}}function _n(t,c){if(t&1){let e=g();o(0,"div")(1,"button",34),z("click",function(){_(e);let n=l(2);return f(n.showModal())}),p(2,"+"),s()()}}function fn(t,c){if(t&1&&(o(0,"div",32)(1,"h4"),p(2,"Clients"),s(),d(3,_n,3,0,"div",33),s()),t&2){let e=l();r(3),a("appHasPermission",e.appPermissions.AddClients)}}var Wt=(()=>{class t{constructor(e,i,n,u){this.appService=e,this.fb=i,this.imageCompress=n,this.userService=u,this.loading=!1,this.data=[],this.visible=!1,this.closeDrawer=new Se,this.appPermissions=$,this.isModalVisible=!1,this.apiUrl=Ze.apiUrl,this.currency={},this.beforeUpload=(x,ze)=>new ye(y=>{let w=x.type==="image/jpeg"||x.type==="image/png";if(!w){this.msg.error("You can only upload JPG file!"),y.complete();return}let A=x.size/1024/1024<2;if(!A){this.msg.error("Image must smaller than 2MB!"),y.complete();return}y.next(w&&A),y.complete()}),this.addOrgForm=this.fb.group({name:["",[C.required]],contact:["",[C.required]],filename:["",[C.required]],projectDescription:["",[C.required]],projectDuration:[0,C.required],projectBudget:[0,C.required],owner:[null,[C.required]],currency:[null,[C.required]],id:[""]})}ngOnInit(){this.loadProjectsProjectsAndUsers(),this.getAndSetClient(),this.currency=this.appService.getCurrencies()||{}}getUserInitials(e){return e.trim().split(" ").map(u=>u.charAt(0)).join("").toUpperCase()}close(){this.closeDrawer.emit(!0)}handleCancel(){this.isModalVisible=!1}showModal(e=!0,i=0){if(this.newItem=e,this.newItem&&(this.addOrgForm.reset(),this.avatarUrl=""),i){let n=this.data.find(u=>u.id==i)||{name:"",filename:"",projectDescription:"",projectDuration:0,projectBudget:0,currency:"",contact:"",owner:{id:0}};this.addOrgForm=this.fb.group({name:[n.name,[C.required]],filename:[n.filename,[C.required]],contact:[n.contact,[C.required]],projectDescription:[n.projectDescription,[C.required]],projectDuration:[n.projectDuration,[C.required]],projectBudget:[n.projectBudget,[C.required]],currency:[n.currency,[C.required]],owner:[n.owner&&n.owner.id||0,[C.required]],id:[i]}),this.avatarUrl=n.filename||""}this.isModalVisible=!0}handleOk(){return P(this,null,function*(){this.newItem?yield this.appService.createClient(this.addOrgForm.getRawValue()):yield this.appService.updateClient(this.addOrgForm.getRawValue()),this.isModalVisible=!1,this.getAndSetClient()})}loadProjectsProjectsAndUsers(){return P(this,null,function*(){})}compressFile(){return this.imageCompress.uploadFile().then(({image:e,orientation:i,fileName:n})=>{console.warn("File Name:",n),console.warn(`Original: ${e.substring(0,50)}... (${e.length} characters)`),console.warn("Size in bytes was:",this.imageCompress.byteCount(e)),this.imageCompress.compressFile(e,i,50,80,800,800).then(u=>{console.warn(`Compressed: ${u.substring(0,50)}... (${u.length} characters)`),console.warn("Size in bytes is now:",this.imageCompress.byteCount(u)),this.addOrgForm.patchValue({filename:u})})})}b64toBlob(e,i="",n=512){for(e=e.replace(/[^A-Za-z0-9+/=]/g,"");e.length%4!==0;)e+="=";let u=atob(e),x=[];for(let y=0;y<u.length;y+=n){let w=u.slice(y,y+n),A=new Array(w.length);for(let L=0;L<w.length;L++)A[L]=w.charCodeAt(L);let Kt=new Uint8Array(A);x.push(Kt)}return new Blob(x,{type:i})}getBase64(e,i){let n=new FileReader;n.addEventListener("load",()=>i(n.result.toString())),n.readAsDataURL(e)}handleChange(e){this.getBase64(e.file.originFileObj,i=>{this.loading=!1,this.avatarUrl=i})}getAndSetClient(){return P(this,null,function*(){this.listOfData=yield this.userService.getOrganizationUsers(),this.listOfData=this.listOfData.filter(e=>e.is_client),this.loading=!0,this.data=yield this.appService.getClient(!0),this.loading=!1})}setClient(e){this.appService.setClient(e),localStorage.setItem("selectedOrganzation",JSON.stringify(e)),this.closeDrawer.emit(!0)}static{this.\u0275fac=function(i){return new(i||t)(v(F),v(oe),v(Ft),v(Z))}}static{this.\u0275cmp=T({type:t,selectors:[["app-organization-selector"]],inputs:{visible:"visible"},outputs:{closeDrawer:"closeDrawer"},decls:3,vars:1,consts:[["organization",""],["currencySelect",""],["nzPlacement","right",3,"nzClosable","nzVisible","nzTitle","nzOnClose",4,"appHasPermission"],["nzPlacement","right",3,"nzOnClose","nzClosable","nzVisible","nzTitle"],[4,"nzDrawerContent"],[3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible","nzTitle"],[3,"formGroup",4,"nzModalContent"],["nzItemLayout","horizontal",3,"nzLoading"],["nz-button","","nzType","text",1,"selectedItem",2,"padding","4px"],["nz-button","","nzType","text",1,"selectedItem",2,"padding","4px",3,"click"],[3,"nzAvatar"],["nz-list-item-actions","",2,"border","0px !important"],["nz-icon","","nzType","edit","nzTheme","outline",3,"click"],[3,"formGroup"],["nzRequired",""],["nzHasFeedback","","nzErrorTip","Please input Organization name"],["nz-input","","formControlName","name"],["id","owner","formControlName","owner","placeholder","Select user"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nz-input","","formControlName","contact"],["nzHasFeedback","","nzErrorTip","Please input project name and details"],["rows","5","nz-input","","formControlName","projectDescription"],["formControlName","projectDuration",3,"nzStep"],["nzHasFeedback","","nzErrorTip","Please input project budget and select currency"],[3,"nzSuffix"],["formControlName","projectBudget","nzPrefix","Rs.",2,"width","70%",3,"nzStep"],["style",`
    max-width: 200px;
    max-height: 200px;
    box-shadow: 0 10px 16px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19) !important;`,"alt","",3,"src",4,"ngIf"],["nz-button","","nzType","primary","nzSize","default","nzShape","round",2,"margin","10px auto",3,"click"],["nz-icon","","nzType","upload"],[3,"nzValue","nzLabel"],["nzShowSearch","","formControlName","currency",2,"width","30%"],["alt","",2,"max-width","200px","max-height","200px","box-shadow","0 10px 16px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19) !important",3,"src"],[1,"flex","space-between","center"],[4,"appHasPermission"],["nz-button","","nzType","primary",3,"click"]],template:function(i,n){i&1&&d(0,dn,4,5,"nz-drawer",2)(1,fn,4,1,"ng-template",null,0,he),i&2&&a("appHasPermission",n.appPermissions.SwitchClients)},dependencies:[X,N,Q,ee,te,ie,re,R,D,j,E,zt,ft,ce,pe,me,de,ue,ae,lt,st,Ct,kt,Tt,Vt,Mt,St,wt,Pt,Ot,Y,K,se,le,_e,Re,J],styles:[".ant-input-suffix{display:contents!important}"]})}}return t})();function gn(t,c){if(t&1&&m(0,"nz-option",20),t&2){let e=c.$implicit;a("nzValue",e.key)("nzLabel",e.key+"("+e.value+")")}}function Cn(t,c){if(t&1&&m(0,"nz-option",20),t&2){let e=c.$implicit;a("nzValue",e.key)("nzLabel",e.key+"("+e.value+")")}}function hn(t,c){if(t&1&&(o(0,"div",21)(1,"p"),p(2),M(3,"number"),s()()),t&2){let e=l(2);r(2),Fe(" ",e.converterForm.value.amount," ",e.converterForm.value.fromCurrency," = ",G(3,4,e.convertedAmount,"1.2-2")," ",e.converterForm.value.toCurrency," ")}}function xn(t,c){if(t&1){let e=g();o(0,"div",7)(1,"form",8),z("ngSubmit",function(){_(e);let n=l();return f(n.convertCurrency())}),o(2,"nz-row",9)(3,"nz-col",10)(4,"nz-form-item")(5,"nz-form-label",11),p(6,"Amount "),s(),o(7,"nz-form-control",12),m(8,"input",13),s()()(),o(9,"nz-col",10)(10,"nz-form-item")(11,"nz-form-label",14),p(12,"From "),s(),o(13,"nz-form-control",12)(14,"nz-select",15),d(15,gn,1,2,"nz-option",16),M(16,"keyvalue"),s()()()(),o(17,"nz-col",10)(18,"nz-form-item")(19,"nz-form-label",17),p(20,"To "),s(),o(21,"nz-form-control",12)(22,"nz-select",18),d(23,Cn,1,2,"nz-option",16),M(24,"keyvalue"),s()()()()()(),d(25,hn,4,7,"div",19),s()}if(t&2){let e=l();r(),a("formGroup",e.converterForm),r(2),a("nzMd",24)("nzSm",24)("nzXs",24),r(2),a("nzMd",8)("nzSm",24)("nzXs",12),r(2),a("nzSm",14)("nzXs",24),r(2),a("nzMd",12)("nzSm",12)("nzXs",12),r(2),a("nzMd",8)("nzSm",24)("nzXs",12),r(2),a("nzSm",14)("nzXs",24),r(2),a("ngForOf",B(16,28,e.conversionRates)),r(2),a("nzMd",12)("nzSm",12)("nzXs",12),r(2),a("nzMd",8)("nzSm",24)("nzXs",12),r(2),a("nzSm",14)("nzXs",24),r(2),a("ngForOf",B(24,30,e.conversionRates)),r(2),a("ngIf",e.convertedAmount!==null)}}var Gt=(()=>{class t{constructor(e){this.appService=e,this.amount=0,this.fromCurrency="USD",this.toCurrency="EUR",this.convertedAmount=null,this.conversionRates={USD_EUR:.85,USD_GBP:.75,USD_INR:73.5,USD_JPY:110,EUR_USD:1.18,EUR_GBP:.88,EUR_INR:86.5,EUR_JPY:129}}ngOnInit(){this.conversionRates=JSON.parse(localStorage.getItem("currency")||"{}"),this.converterForm=new it({amount:new ne(0,[C.required]),fromCurrency:new ne("USD",[C.required]),toCurrency:new ne("USD",[C.required])})}showModal(){this.isVisible=!0}convertCurrency(){this.convertedAmount=this.appService.convertCurrency(this.converterForm.value.amount,this.converterForm.value.fromCurrency,this.converterForm.value.toCurrency)}handleOk(){this.convertCurrency()}handleCancel(){this.isVisible=!1}static{this.\u0275fac=function(i){return new(i||t)(v(F))}}static{this.\u0275cmp=T({type:t,selectors:[["app-currency-converter"]],decls:9,vars:1,consts:[["nz-button","","nzType","default",2,"float","right","width","auto","background","transparent","color","black",3,"click"],[2,"display","flex"],["nz-icon","","nzType","dollar-circle"],["nz-icon","","nzType","swap","nzTheme","outline"],["nz-icon","","nzType","euro"],["nzTitle","Currency Converter","nzOkText","Convert",3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible"],["style","width:100%",4,"nzModalContent"],[2,"width","100%"],["nz-form","",3,"ngSubmit","formGroup"],["nzGutter","2",2,"margin-bottom","12px"],[3,"nzMd","nzSm","nzXs"],["nzRequired","","nzFor","amount",3,"nzMd","nzSm","nzXs"],["nzErrorTip","The input is not valid date!",3,"nzSm","nzXs"],["nz-input","","formControlName","amount"],["nzRequired","","nzFor","fromCurrency",3,"nzMd","nzSm","nzXs"],["nzShowSearch","","formControlName","fromCurrency",2,"width","100%"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzRequired","","nzFor","toCurrency",3,"nzMd","nzSm","nzXs"],["nzShowSearch","","formControlName","toCurrency",2,"width","100%"],["class","result",4,"ngIf"],[3,"nzValue","nzLabel"],[1,"result"]],template:function(i,n){i&1&&(o(0,"button",0),z("click",function(){return n.showModal()}),o(1,"span",1),m(2,"span",2),p(3," \xA0 "),m(4,"span",3),p(5," \xA0 "),m(6,"span",4),s()(),o(7,"nz-modal",5),I("nzVisibleChange",function(x){return V(n.isVisible,x)||(n.isVisible=x),x}),z("nzOnCancel",function(){return n.handleCancel()})("nzOnOk",function(){return n.handleOk()}),d(8,xn,26,32,"div",6),s()),i&2&&(r(7),k("nzVisible",n.isVisible))},dependencies:[X,N,rt,Q,ee,te,ie,re,R,D,j,E,ce,pe,gt,me,de,ue,ae,Y,K,se,le,je,J],styles:[".currency-converter[_ngcontent-%COMP%]{max-width:400px;margin:auto;border:1px solid #ccc;padding:20px;border-radius:8px;background-color:#f9f9f9}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{width:100%;padding:8px;font-size:16px;margin-bottom:10px;border:1px solid #ccc;border-radius:4px}button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.result[_ngcontent-%COMP%]{margin-top:20px;font-size:18px;font-weight:700;color:#333}"]})}}return t})();var yn=()=>["/"],O=()=>({tracingId:123}),bn=()=>["/task/board"],Xt=t=>({status:t}),Sn=()=>["/task/list"],wn=()=>["/task/report"],Mn=()=>["/employee"],On=()=>["/employee","pay-processing"],Pn=()=>["/employee","client-processing"],Tn=()=>["/team"],kn=()=>["/team/roles"];function Vn(t,c){if(t&1&&(o(0,"span",15),p(1),s()),t&2){let e=l();r(),S(" ",e.organization?e.organization.name:"VEINS"," ")}}function In(t,c){if(t&1){let e=g();o(0,"span",16),z("click",function(){_(e);let n=l();return f(n.isCollapsed=!n.isCollapsed)}),s()}if(t&2){let e=l();ge(!e.isCollapsed&&e.isMobile()?"lightFont":"darkFont"),a("nzType",e.isCollapsed?"menu-unfold":"menu-fold")}}function Nn(t,c){if(t&1){let e=g();o(0,"li",17),m(1,"span",18),o(2,"span")(3,"a",19),z("click",function(){_(e);let n=l();return f(n.isMobile()?n.isCollapsed=!0:null)}),p(4),s()()()}if(t&2){let e=l();b("selected-route",e.currentRoutes.length==0),r(3),a("routerLink",h(5,yn))("state",h(6,O)),r(),S(" ",e.isCollapsed?"":"Dashboard"," ")}}function Fn(t,c){if(t&1){let e=g();o(0,"li",17),m(1,"span",22),o(2,"span")(3,"a",19),z("click",function(){_(e);let n=l(2);return f(n.isMobile()?n.isCollapsed=!0:null)}),p(4," Tasks "),s()()()}if(t&2){let e=l(2);b("selected-route",e.currentRoutes.indexOf("customers")==-1&&e.currentRoutes.indexOf("list")>-1&&e.currentRoutes.indexOf("sales")==-1&&e.currentRoutes.indexOf("sale")==-1&&e.currentRoutes.indexOf("sales?status="+e.saleState.Quote)==-1&&e.currentRoutes.indexOf("sales?status="+e.saleState.Invoiced)==-1),r(3),a("routerLink",h(4,Sn))("state",h(5,O))}}function En(t,c){if(t&1){let e=g();o(0,"li",17),m(1,"span",20),o(2,"span")(3,"a",21),z("click",function(){_(e);let n=l(2);return f(n.isMobile()?n.isCollapsed=!0:null)}),p(4),s()()()}if(t&2){let e=l(2);b("selected-route",e.currentRoutes.indexOf("report")>-1),r(3),a("routerLink",h(5,wn))("queryParams",Ce(6,Xt,e.saleState.Invoiced)),r(),S(" ",e.isCollapsed?"":"Timeline"," ")}}function Dn(t,c){if(t&1){let e=g();o(0,"ul",10)(1,"li",17),m(2,"span",20),o(3,"span")(4,"a",21),z("click",function(){_(e);let n=l();return f(n.isMobile()?n.isCollapsed=!0:null)}),p(5),s()()(),d(6,Fn,5,6,"li",11)(7,En,5,8,"li",11),s()}if(t&2){let e=l();r(),b("selected-route",e.currentRoutes.indexOf("board")>-1&&(e.currentRoutes.indexOf("status="+e.saleState.Invoiced)>-1||e.currentRoutes.join("").indexOf("INVOICE=")>-1)),r(3),a("routerLink",h(7,bn))("queryParams",Ce(8,Xt,e.saleState.Invoiced)),r(),S(" ",e.isCollapsed?"":"Board"," "),r(),a("appHasPermission",e.appPermissions.ViewTasks),r(),a("appHasPermission",e.appPermissions.ViewTasks)}}function jn(t,c){if(t&1){let e=g();o(0,"li",23),m(1,"span",26),o(2,"span")(3,"a",19),z("click",function(){_(e);let n=l(2);return f(n.isMobile()?n.isCollapsed=!0:null)}),p(4," Client Payments "),s()()()}if(t&2){let e=l(2);b("selected-route",e.currentRoutes.indexOf("pay-processing")>-1),r(3),a("routerLink",h(4,On))("state",h(5,O))}}function Rn(t,c){if(t&1){let e=g();o(0,"li",23),m(1,"span",26),o(2,"span")(3,"a",19),z("click",function(){_(e);let n=l(2);return f(n.isMobile()?n.isCollapsed=!0:null)}),p(4," Budget Summary "),s()()()}if(t&2){let e=l(2);b("selected-route",e.currentRoutes.indexOf("client-processing")>-1),r(3),a("routerLink",h(4,Pn))("state",h(5,O))}}function An(t,c){if(t&1){let e=g();o(0,"ul",10)(1,"li",23),m(2,"span",24),o(3,"span")(4,"a",19),z("click",function(){_(e);let n=l();return f(n.isMobile()?n.isCollapsed=!0:null)}),p(5," Employee "),s()()(),d(6,jn,5,6,"li",25)(7,Rn,5,6,"li",25),s()}if(t&2){let e=l();r(),b("selected-route",e.currentRoutes.indexOf("employee")>-1&&e.currentRoutes.indexOf("worklog")===-1&&e.currentRoutes.indexOf("pay-processing")===-1&&e.currentRoutes.indexOf("client-processing")===-1),r(3),a("routerLink",h(6,Mn))("state",h(7,O)),r(2),a("appHasPermission",e.appPermissions.AddUpdatePayments),r(),a("appHasPermission",e.appPermissions.AddUpdatePayments)}}function Un(t,c){if(t&1){let e=g();o(0,"li",23),m(1,"span",27),o(2,"span")(3,"a",19),z("click",function(){_(e);let n=l(2);return f(n.isMobile()?n.isCollapsed=!0:null)}),p(4," Users "),s()()()}if(t&2){let e=l(2);b("selected-route",e.currentRoutes.indexOf("team")>-1&&e.currentRoutes.indexOf("roles")==-1),r(3),a("routerLink",h(4,Tn))("state",h(5,O))}}function Bn(t,c){if(t&1){let e=g();o(0,"li",23),m(1,"span",28),o(2,"span")(3,"a",19),z("click",function(){_(e);let n=l(2);return f(n.isMobile()?n.isCollapsed=!0:null)}),p(4," Permissions "),s()()()}if(t&2){let e=l(2);b("selected-route",e.currentRoutes.indexOf("team")>-1&&e.currentRoutes.indexOf("roles")>-1),r(3),a("routerLink",h(4,kn))("state",h(5,O))}}function Ln(t,c){if(t&1&&(o(0,"ul",10),d(1,Un,5,6,"li",25)(2,Bn,5,6,"li",25),s()),t&2){let e=l();r(),a("appHasPermission",e.appPermissions.ViewUsers),r(),a("appHasPermission",e.appPermissions.UpdatePermissions)}}function Hn(t,c){t&1&&(o(0,"nz-footer"),p(1,"Eleware system \xA92024 Implement By SA3"),s())}function qn(t,c){if(t&1){let e=g();o(0,"span",44),z("click",function(){_(e);let n=l(2);return f(n.isCollapsed=!n.isCollapsed)}),s()}if(t&2){let e=l(2);a("nzType",e.isCollapsed?"menu-unfold":"menu-fold")}}function Wn(t,c){t&1&&m(0,"app-currency-converter")}function Gn(t,c){t&1&&m(0,"span",45)}function Xn(t,c){if(t&1){let e=g();o(0,"app-organization-selector",46),z("closeDrawer",function(){_(e);let n=l(2);return f(n.toggleClients())}),s()}if(t&2){let e=l(2);a("visible",e.showClients)}}function Jn(t,c){if(t&1){let e=g();o(0,"nz-layout",29)(1,"nz-header")(2,"div",30)(3,"span",31),d(4,qn,1,1,"span",32)(5,Wn,1,0,"app-currency-converter",33),s(),o(6,"span",5)(7,"span")(8,"button",34),z("click",function(){_(e);let n=l();return f(n.toggleClients())}),m(9,"nz-avatar",35),p(10),d(11,Gn,1,0,"span",36),s(),d(12,Xn,1,1,"app-organization-selector",37),s(),o(13,"button",38),m(14,"nz-avatar",39)(15,"span",40),s(),o(16,"nz-dropdown-menu",null,0)(18,"ul",41)(19,"li",42),z("click",function(){_(e);let n=l();return f(n.logout())}),p(20,"Logout "),s(),o(21,"li",42),z("click",function(){_(e);let n=l();return f(n.openChangePasswordModal())}),p(22,"Change Password"),s()()()()()(),o(23,"nz-content",43),m(24,"router-outlet"),s()()}if(t&2){let e=U(17),i=l();a("ngClass",i.isMobile()?"height-greater-than-width":""),r(4),a("ngIf",i.isMobile()||!i.isMobile()&&i.isCollapsed),r(),a("appHasPermission",i.appPermissions.AddUpdatePayments),r(),we("width",i.isMobile()?"100%":"auto"),r(3),a("nzSrc",i.currentClient==null?null:i.currentClient.filename),r(),S(" ",i.currentClient==null?null:i.currentClient.name," "),r(),a("appHasPermission",i.appPermissions.SwitchClients),r(),a("appHasPermission",i.appPermissions.SwitchClients),r(),a("nzDropdownMenu",e),r(),a("nzText",i.getUserInitials(i.loggedInUser.name))}}var Jt=(()=>{class t{constructor(e,i,n,u,x,ze,y,w){this.userService=e,this.appService=i,this.fb=n,this.media=u,this.router=x,this.route=ze,this.modal=y,this.titleService=w,this.isCollapsed=!1,this.isMobileDevice=!0,this.loggedInUser={},this.sites=[],this.site={},this.showClients=!1,this.currentRoutes=[],this.saleState=$e,this.appPermissions=$,this.initialLoaded=!0,this.isMobile=this.appService.isMobile,this.siteForm=this.fb.group({site:[]})}ngOnInit(){this.isMobile()&&(this.isCollapsed=!0),this.loggedInUser=this.userService.getUserDetails(),this.appService.getClient(!0),this.organization=this.appService.organization,this.titleService.setTitle(this.organization.name),this.setFavicon(this.organization.icon),this.setProjectsData(),this.onSiteChange(),this.extractRoutePath(this.router.url),this.router.events.pipe(be(i=>i instanceof qe)).subscribe(i=>{this.currentUrl=i.url,this.extractRoutePath(this.currentUrl)})}setFavicon(e){let i=document.querySelector("link[rel*='icon']")||document.createElement("link");i.type="image/png",i.rel="shortcut icon",i.href=e,document.getElementsByTagName("head")[0].appendChild(i)}extractRoutePath(e){e=e.replace(/(https?:\/\/[^\/]+)?\/?/,""),this.currentRoutes=e.split(/[/?]/).filter(i=>i),console.log(this.currentRoutes)}toggleClients(){this.showClients=!this.showClients}onSiteChange(){this.siteSubscription=this.siteForm.valueChanges.subscribe(e=>{this.setCurrentSite(e.site)}),this.clientSubscription=this.appService.currentClient.subscribe(e=>{e&&e.id>0&&this.currentOrganizationId!=e.id&&(this.currentClient=e,this.currentOrganizationId=e.id)})}setProjectsData(){return P(this,null,function*(){let e=yield this.appService.getAndSetProjects(),i=e&&e.length?e.map(n=>ve({label:n.name},n)):[];this.sites=[...i],this.appService.setProjects(this.sites),this.siteForm.patchValue({site:this.sites[0]}),this.setCurrentSite(void 0)})}setCurrentSite(e){this.appService.setCurrentSite(e||this.sites[0])}logout(){this.userService.logout(),this.appService.setClient({id:0,name:""})}ngOnDestroy(){this.siteSubscription&&this.siteSubscription.unsubscribe(),this.clientSubscription&&this.clientSubscription.unsubscribe()}getUserInitials(e){return e.trim().split(" ").map(u=>u.charAt(0)).join("").toUpperCase()}openChangePasswordModal(){this.modal.create({nzTitle:"Change Password ("+this.userService.loggedInUser.name+")",nzContent:Nt,nzFooter:null,nzData:{user:this.userService.loggedInUser}}).afterClose.subscribe(i=>{i&&console.log("Password changed",i)})}static{this.\u0275fac=function(i){return new(i||t)(v(Z),v(F),v(oe),v(Ke),v(Xe),v(We),v(nt),v(He))}}static{this.\u0275cmp=T({type:t,selectors:[["app-shell"]],decls:17,vars:17,consts:[["menu1","nzDropdownMenu"],[1,"app-shell"],[2,"height","100%"],["nzCollapsible","",1,"appbackground",3,"nzCollapsedChange","nzCollapsed","nzTrigger","nzWidth","nzCollapsedWidth"],[2,"display","flow-root"],[1,"flex","center","space-between"],["alt","",3,"src"],["class","heading",4,"ngIf"],["class","trigger","nz-icon","",3,"nzType","class","click",4,"ngIf"],[1,"sideMenuItems"],["nz-menu","","nzTheme","dark","nzMode","inline"],["nz-menu-item","",3,"selected-route",4,"appHasPermission"],["nz-menu","","nzTheme","dark","nzMode","inline",4,"appHasPermission"],[4,"ngIf"],["class","appbackground",3,"ngClass",4,"ngIf"],[1,"heading"],["nz-icon","",1,"trigger",3,"click","nzType"],["nz-menu-item",""],["nz-icon","","nzType","bar-chart",2,"font-size","18px"],[1,"nav-link",3,"click","routerLink","state"],["nz-icon","","nzType","file-done",2,"font-size","18px"],[1,"nav-link",3,"click","routerLink","queryParams"],["nz-icon","","nzType","pull-request",2,"font-size","18px"],["nz-menu-item","",2,"margin-top","12px"],["nz-icon","","nzType","profile","size","",2,"font-size","18px"],["nz-menu-item","","style","margin-top: 12px;",3,"selected-route",4,"appHasPermission"],["nz-icon","","nzType","schedule","size","",2,"font-size","18px"],["nz-icon","","nzType","team","size","",2,"font-size","18px"],["nz-icon","","nzType","sliders","size","",2,"font-size","18px"],[1,"appbackground",3,"ngClass"],[1,"flex","space-between","center",2,"flex-wrap","wrap"],[1,"flex","center"],["class","trigger","nz-icon","","style","font-size: 18px;",3,"nzType","click",4,"ngIf"],[4,"appHasPermission"],["nz-button","",1,"header-button",2,"color","#836d89","font-size","12px",3,"click"],[2,"width","24px","height","24px","margin-right","5px",3,"nzSrc"],["nz-icon","","style","font-size: 12px;","nzType","down",4,"appHasPermission"],[3,"visible","closeDrawer",4,"appHasPermission"],["nz-button","","nzType","text","nz-dropdown","",1,"userbtn",3,"nzDropdownMenu"],[2,"background-color","#BB86FC","font-size","12px","margin-right","5px",3,"nzText"],["nz-icon","","nzType","down",2,"font-size","12px","color","black"],["nz-menu",""],["nz-menu-item","","nz-button","","nzType","text",3,"click"],[1,"content-main"],["nz-icon","",1,"trigger",2,"font-size","18px",3,"click","nzType"],["nz-icon","","nzType","down",2,"font-size","12px"],[3,"closeDrawer","visible"]],template:function(i,n){i&1&&(o(0,"div",1)(1,"nz-layout",2)(2,"nz-sider",3),I("nzCollapsedChange",function(x){return V(n.isCollapsed,x)||(n.isCollapsed=x),x}),o(3,"span",4)(4,"div")(5,"span",5),m(6,"img",6),d(7,Vn,2,1,"span",7),s(),d(8,In,1,3,"span",8),s()(),o(9,"div",9)(10,"ul",10),d(11,Nn,5,7,"li",11),s(),d(12,Dn,8,10,"ul",12)(13,An,8,8,"ul",12)(14,Ln,3,2,"ul",12),s(),d(15,Hn,2,0,"nz-footer",13),s(),d(16,Jn,25,11,"nz-layout",14),s()()),i&2&&(r(2),k("nzCollapsed",n.isCollapsed),a("nzTrigger",null)("nzWidth",!n.isCollapsed&&n.isMobile()?"100%":"20%")("nzCollapsedWidth",65),r(2),Me((n.isCollapsed,"padding-left:12px")),ge(n.isCollapsed?"logo flex center space-around":"logo flex center space-between"),r(2),a("src",n.organization?n.organization.icon:"../../../assets/veins-ico.png",W),r(),a("ngIf",!n.isCollapsed),r(),a("ngIf",!n.isCollapsed&&n.isMobile()),r(3),a("appHasPermission",n.appPermissions.MainDashboard),r(),a("appHasPermission",n.appPermissions.ViewTasks),r(),a("appHasPermission",n.appPermissions.AddUpdatePayments),r(),a("appHasPermission",n.appPermissions.ViewUsers||n.appPermissions.UpdatePermissions),r(),a("ngIf",!n.isCollapsed),r(),a("ngIf",!n.isMobile()||n.isCollapsed&&n.isMobile()))},dependencies:[De,N,Ge,Je,pt,R,D,j,E,mt,ct,ut,_t,dt,bt,vt,ht,xt,yt,_e,Wt,Gt],styles:[".trigger[_ngcontent-%COMP%]{font-size:18px;line-height:50px;padding:0 16px;margin-top:3px;cursor:pointer;transition:color .3s}.ant-layout-header[_ngcontent-%COMP%]{line-height:42px;height:42px;border-bottom:.1px solid #80808017}.header-text[_ngcontent-%COMP%]{letter-spacing:2px;text-transform:uppercase;margin:auto}.logo[_ngcontent-%COMP%]{height:32px;margin-top:5px;margin-bottom:5px!important;padding-left:24px}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:24px;width:24px}.sideMenuItems[_ngcontent-%COMP%]{overflow:auto;height:calc(100% - 56px);background:#21263c}.ant-menu-inline[_ngcontent-%COMP%]{background:inherit!important}  .ant-menu-submenu-title{margin-bottom:0!important;margin-top:0!important;padding-top:5px;padding-bottom:5px}.ant-menu-item[_ngcontent-%COMP%]:hover, .ant-menu-submenu[_ngcontent-%COMP%]:hover{background:#343434;color:#c9c6c6}.ant-menu-item[_ngcontent-%COMP%], .ant-menu-submenu[_ngcontent-%COMP%]{margin:0 8px!important;width:auto!important;border-radius:8px;padding-left:12px!important;font-size:12px!important;height:32px}.ant-menu-item-selected[_ngcontent-%COMP%]{background:inherit!important}.selected-route[_ngcontent-%COMP%]{background:#bb86fc!important}ul[_ngcontent-%COMP%]{padding-top:5px;padding-bottom:5px}.height-greater-than-width[_ngcontent-%COMP%]   .ant-layout-header[_ngcontent-%COMP%]{height:auto!important;line-height:22px;padding-bottom:5px}@media (max-width: 600px){.sideMenuItems[_ngcontent-%COMP%]{overflow:auto;height:calc(100% - 72px)}.ant-layout-header[_ngcontent-%COMP%]{height:72px;line-height:22px}  .ant-menu-submenu-title{margin-bottom:0!important;margin-top:0!important;min-height:60px;padding-top:10px}.selected-route[_ngcontent-%COMP%]{background:#bb86fc!important}.ant-menu-item[_ngcontent-%COMP%], .ant-menu-submenu[_ngcontent-%COMP%]{border-bottom:1px solid #343434;margin:0!important;font-size:16px!important;min-height:60px;padding-top:10px;padding-left:20px!important;border-radius:0!important}.anticon[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{line-height:1;font-size:16px!important}.trigger[_ngcontent-%COMP%]{line-height:33px;margin-top:3px}.logo[_ngcontent-%COMP%]{margin-top:20px!important;margin-bottom:20px!important;margin:0;padding-left:24px}}.trigger[_ngcontent-%COMP%]:hover{color:#1890ff}nz-header[_ngcontent-%COMP%]{padding:0}nz-content[_ngcontent-%COMP%]{background:#fff;padding:6px;overflow:auto}nz-breadcrumb[_ngcontent-%COMP%]{margin:16px 0}.inner-content[_ngcontent-%COMP%]{padding:24px;min-height:360px}nz-footer[_ngcontent-%COMP%]{padding:5px;color:#fff;font-size:9px;background:inherit;position:absolute;bottom:0;width:100%}.app-shell[_ngcontent-%COMP%], app-shell[_ngcontent-%COMP%]{width:100%!important}.userbtn[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px;padding:0!important;color:#fff}.full-width[_ngcontent-%COMP%]{width:100%!important}.nav-link[_ngcontent-%COMP%]{color:#fff}.lightFont[_ngcontent-%COMP%]{color:#fff!important}.heading[_ngcontent-%COMP%]{font-family:revert;color:#fff;font-weight:800;font-size:16px;white-space:pre;letter-spacing:.4em}"]})}}return t})();var $n=[{path:"",component:Jt,children:[{path:"",loadChildren:()=>import("./chunk-KWKFGLGY.js").then(t=>t.DashboardModule),data:{name:"Dashboard"}},{path:"team",loadChildren:()=>import("./chunk-BT72MQCT.js").then(t=>t.TeamModule),data:{name:"Team"}},{path:"sites",loadChildren:()=>import("./chunk-3GJJT3XO.js").then(t=>t.ProjectsModule),data:{name:"Projects"}},{path:"task",loadChildren:()=>import("./chunk-VOOCY4G3.js").then(t=>t.TaskModule),data:{name:"Task"}},{path:"project",loadChildren:()=>import("./chunk-P2J624QT.js").then(t=>t.ProjectModule),data:{name:"Project"}},{path:"inventory",loadChildren:()=>import("./chunk-XOFRE7OO.js").then(t=>t.InventoryManagementModule),data:{name:"Inventory"}},{path:"employee",loadChildren:()=>import("./chunk-HTWLSX7H.js").then(t=>t.EmployeeManagementModule),data:{name:"Employee"}}]}],$t=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=q({type:t})}static{this.\u0275inj=H({imports:[xe.forChild($n),xe]})}}return t})();Ee(Et);var Zt=Ye,Kn=Object.keys(Zt).map(t=>Zt[t]),Zi=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=q({type:t})}static{this.\u0275inj=H({providers:[{provide:tt,useValue:et},{provide:Qe,useValue:Kn},Ue(Be(),Le())],imports:[Ae,ot,at,$t,It,Dt]})}}return t})();export{Zi as a};
