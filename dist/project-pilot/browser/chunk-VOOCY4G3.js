import{a as zo}from"./chunk-65TANLOM.js";import{a as Wx}from"./chunk-C2GOQEZE.js";import{a as qx}from"./chunk-E7PBODKY.js";import{a as iu,b as nu}from"./chunk-MXRUSZEU.js";import{a as ou}from"./chunk-MQLXLLFS.js";import{b as Cr,c as wr,d as ru,f as su}from"./chunk-HUCT2AA2.js";import{a as Wn}from"./chunk-WES5WHKE.js";import{a as ti,d as Di,e as ho,j as ii,k as uo,l as po,n as qt,q as hr,r as zh,s as qn,t as fo,u as mo,v as ur}from"./chunk-UQBFF3T4.js";import{a as Dr}from"./chunk-US7SBZSK.js";import{$ as Ie,$a as bh,$c as jh,A as eo,Aa as Bn,Ab as Ei,Ad as Cn,B as ol,Ba as Vn,Bb as cr,Bd as wn,C as rr,Ca as Gn,Cb as Ri,Cd as Dn,D as gh,Da as We,Db as dr,Dd as Jh,Ea as ue,F as ki,Fa as Ot,Fb as fl,G as ji,Ga as at,Gb as pr,Gd as eu,H as sn,Ha as or,Hb as ln,Hd as tu,I as Tt,Ib as go,Ic as yo,J as sr,Ja as Qt,Jb as Th,Jc as bo,K as vt,Ka as Jt,Kb as Mi,Kc as xr,L as Ui,La as ei,Lb as ml,Lc as Fh,M as $r,Ma as Yr,Mb as Qr,Mc as Bh,Na as ul,Nb as _o,Nc as fn,Oa as ut,Ob as Jr,Oc as Vh,P as _h,Pa as wt,Pb as fr,Pc as Gh,Q as al,Qa as pl,Qb as kt,Qc as qh,R as Se,Rc as Wh,S as Ce,Sa as nt,Sb as Ih,Sc as mn,T as vh,Ta as oo,Tb as kh,Tc as gn,U as Pt,Ua as dt,Ub as fi,Uc as jt,V as Fn,Va as $e,Vb as Wt,Vc as Ut,W as to,Wb as mi,Wc as yr,Xa as yh,Xb as gi,Xc as _n,Y as on,Yb as Eh,Yc as br,Z as io,Za as ao,Zb as Rh,Zc as vn,_ as W,_a as Zr,_c as xn,a as it,ab as Sh,ac as vo,b as At,bb as Xi,bc as Mh,c as ah,ca as ll,cc as mr,d as lh,da as cl,db as Ch,e as Qs,ea as no,eb as pi,f as Oe,fa as xe,fb as Gt,fc as _i,fd as So,g as Nn,ga as xh,gb as lo,gd as Uh,h as Wi,ha as dl,hb as wh,hc as xt,hd as Hh,i as ot,ia as B,ib as an,ic as vi,id as Xh,j as ch,ja as hl,jb as co,jc as cn,jd as Kh,k as rl,ka as ro,kc as xo,lb as ar,lc as ge,m as dh,mb as Dh,mc as gr,na as so,nc as _r,nd as $h,o as hh,ob as lr,oc as dn,od as Yh,pc as Ah,pd as Co,qc as Ph,qd as wo,r as uh,ra as M,rc as hn,rd as Do,s as ph,sa as O,sc as un,t as Js,ta as ye,ua as Ct,uc as Oh,ud as yn,v as fh,va as It,vc as Lh,vd as Zh,w as sl,wa as Hi,wc as xi,wd as Sr,x as mh,xa as Re,xc as vr,xd as bn,ya as ze,yc as pn,yd as Qh,za as ce,zc as Nh,zd as Sn}from"./chunk-RYV5VKQF.js";var pu=lh((kr,os)=>{"use strict";(function(){var o,a="4.17.21",i=200,r="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",l="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",m=500,w="__lodash_placeholder__",A=1,V=2,ie=4,Z=1,$=2,K=1,F=2,N=4,E=8,L=16,Q=32,R=64,G=128,q=256,Y=512,se=30,j="...",U=800,de=16,g=1,k=2,p=3,x=1/0,C=9007199254740991,d=17976931348623157e292,f=NaN,v=4294967295,S=v-1,H=v>>>1,T=[["ary",G],["bind",K],["bindKey",F],["curry",E],["curryRight",L],["flip",Y],["partial",Q],["partialRight",R],["rearg",q]],b="[object Arguments]",I="[object Array]",D="[object AsyncFunction]",z="[object Boolean]",J="[object Date]",ne="[object DOMException]",ee="[object Error]",oe="[object Function]",ae="[object GeneratorFunction]",ve="[object Map]",_e="[object Number]",De="[object Null]",be="[object Object]",we="[object Promise]",Fe="[object Proxy]",Be="[object RegExp]",He="[object Set]",je="[object String]",Je="[object Symbol]",et="[object Undefined]",mt="[object WeakMap]",Ai="[object WeakSet]",Tn="[object ArrayBuffer]",ri="[object DataView]",Mr="[object Float32Array]",Ar="[object Float64Array]",Bo="[object Int8Array]",Vo="[object Int16Array]",Go="[object Int32Array]",qo="[object Uint8Array]",Wo="[object Uint8ClampedArray]",jo="[object Uint16Array]",Uo="[object Uint32Array]",lp=/\b__p \+= '';/g,cp=/\b(__p \+=) '' \+/g,dp=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ml=/&(?:amp|lt|gt|quot|#39);/g,Al=/[&<>"']/g,hp=RegExp(Ml.source),up=RegExp(Al.source),pp=/<%-([\s\S]+?)%>/g,fp=/<%([\s\S]+?)%>/g,Pl=/<%=([\s\S]+?)%>/g,mp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gp=/^\w*$/,_p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ho=/[\\^$.*+?()[\]{}|]/g,vp=RegExp(Ho.source),Xo=/^\s+/,xp=/\s/,yp=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,bp=/\{\n\/\* \[wrapped with (.+)\] \*/,Sp=/,? & /,Cp=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,wp=/[()=,{}\[\]\/\s]/,Dp=/\\(\\)?/g,zp=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ol=/\w*$/,Tp=/^[-+]0x[0-9a-f]+$/i,Ip=/^0b[01]+$/i,kp=/^\[object .+?Constructor\]$/,Ep=/^0o[0-7]+$/i,Rp=/^(?:0|[1-9]\d*)$/,Mp=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ds=/($^)/,Ap=/['\n\r\u2028\u2029\\]/g,hs="\\ud800-\\udfff",Pp="\\u0300-\\u036f",Op="\\ufe20-\\ufe2f",Lp="\\u20d0-\\u20ff",Ll=Pp+Op+Lp,Nl="\\u2700-\\u27bf",Fl="a-z\\xdf-\\xf6\\xf8-\\xff",Np="\\xac\\xb1\\xd7\\xf7",Fp="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Bp="\\u2000-\\u206f",Vp=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Bl="A-Z\\xc0-\\xd6\\xd8-\\xde",Vl="\\ufe0e\\ufe0f",Gl=Np+Fp+Bp+Vp,Ko="['\u2019]",Gp="["+hs+"]",ql="["+Gl+"]",us="["+Ll+"]",Wl="\\d+",qp="["+Nl+"]",jl="["+Fl+"]",Ul="[^"+hs+Gl+Wl+Nl+Fl+Bl+"]",$o="\\ud83c[\\udffb-\\udfff]",Wp="(?:"+us+"|"+$o+")",Hl="[^"+hs+"]",Yo="(?:\\ud83c[\\udde6-\\uddff]){2}",Zo="[\\ud800-\\udbff][\\udc00-\\udfff]",Un="["+Bl+"]",Xl="\\u200d",Kl="(?:"+jl+"|"+Ul+")",jp="(?:"+Un+"|"+Ul+")",$l="(?:"+Ko+"(?:d|ll|m|re|s|t|ve))?",Yl="(?:"+Ko+"(?:D|LL|M|RE|S|T|VE))?",Zl=Wp+"?",Ql="["+Vl+"]?",Up="(?:"+Xl+"(?:"+[Hl,Yo,Zo].join("|")+")"+Ql+Zl+")*",Hp="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Xp="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Jl=Ql+Zl+Up,Kp="(?:"+[qp,Yo,Zo].join("|")+")"+Jl,$p="(?:"+[Hl+us+"?",us,Yo,Zo,Gp].join("|")+")",Yp=RegExp(Ko,"g"),Zp=RegExp(us,"g"),Qo=RegExp($o+"(?="+$o+")|"+$p+Jl,"g"),Qp=RegExp([Un+"?"+jl+"+"+$l+"(?="+[ql,Un,"$"].join("|")+")",jp+"+"+Yl+"(?="+[ql,Un+Kl,"$"].join("|")+")",Un+"?"+Kl+"+"+$l,Un+"+"+Yl,Xp,Hp,Wl,Kp].join("|"),"g"),Jp=RegExp("["+Xl+hs+Ll+Vl+"]"),ef=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,tf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],nf=-1,st={};st[Mr]=st[Ar]=st[Bo]=st[Vo]=st[Go]=st[qo]=st[Wo]=st[jo]=st[Uo]=!0,st[b]=st[I]=st[Tn]=st[z]=st[ri]=st[J]=st[ee]=st[oe]=st[ve]=st[_e]=st[be]=st[Be]=st[He]=st[je]=st[mt]=!1;var rt={};rt[b]=rt[I]=rt[Tn]=rt[ri]=rt[z]=rt[J]=rt[Mr]=rt[Ar]=rt[Bo]=rt[Vo]=rt[Go]=rt[ve]=rt[_e]=rt[be]=rt[Be]=rt[He]=rt[je]=rt[Je]=rt[qo]=rt[Wo]=rt[jo]=rt[Uo]=!0,rt[ee]=rt[oe]=rt[mt]=!1;var rf={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},sf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},of={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},af={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},lf=parseFloat,cf=parseInt,ec=typeof global=="object"&&global&&global.Object===Object&&global,df=typeof self=="object"&&self&&self.Object===Object&&self,yt=ec||df||Function("return this")(),Jo=typeof kr=="object"&&kr&&!kr.nodeType&&kr,In=Jo&&typeof os=="object"&&os&&!os.nodeType&&os,tc=In&&In.exports===Jo,ea=tc&&ec.process,si=function(){try{var te=In&&In.require&&In.require("util").types;return te||ea&&ea.binding&&ea.binding("util")}catch{}}(),ic=si&&si.isArrayBuffer,nc=si&&si.isDate,rc=si&&si.isMap,sc=si&&si.isRegExp,oc=si&&si.isSet,ac=si&&si.isTypedArray;function Ht(te,he,le){switch(le.length){case 0:return te.call(he);case 1:return te.call(he,le[0]);case 2:return te.call(he,le[0],le[1]);case 3:return te.call(he,le[0],le[1],le[2])}return te.apply(he,le)}function hf(te,he,le,ke){for(var Le=-1,Ye=te==null?0:te.length;++Le<Ye;){var gt=te[Le];he(ke,gt,le(gt),te)}return ke}function oi(te,he){for(var le=-1,ke=te==null?0:te.length;++le<ke&&he(te[le],le,te)!==!1;);return te}function uf(te,he){for(var le=te==null?0:te.length;le--&&he(te[le],le,te)!==!1;);return te}function lc(te,he){for(var le=-1,ke=te==null?0:te.length;++le<ke;)if(!he(te[le],le,te))return!1;return!0}function Ki(te,he){for(var le=-1,ke=te==null?0:te.length,Le=0,Ye=[];++le<ke;){var gt=te[le];he(gt,le,te)&&(Ye[Le++]=gt)}return Ye}function ps(te,he){var le=te==null?0:te.length;return!!le&&Hn(te,he,0)>-1}function ta(te,he,le){for(var ke=-1,Le=te==null?0:te.length;++ke<Le;)if(le(he,te[ke]))return!0;return!1}function lt(te,he){for(var le=-1,ke=te==null?0:te.length,Le=Array(ke);++le<ke;)Le[le]=he(te[le],le,te);return Le}function $i(te,he){for(var le=-1,ke=he.length,Le=te.length;++le<ke;)te[Le+le]=he[le];return te}function ia(te,he,le,ke){var Le=-1,Ye=te==null?0:te.length;for(ke&&Ye&&(le=te[++Le]);++Le<Ye;)le=he(le,te[Le],Le,te);return le}function pf(te,he,le,ke){var Le=te==null?0:te.length;for(ke&&Le&&(le=te[--Le]);Le--;)le=he(le,te[Le],Le,te);return le}function na(te,he){for(var le=-1,ke=te==null?0:te.length;++le<ke;)if(he(te[le],le,te))return!0;return!1}var ff=ra("length");function mf(te){return te.split("")}function gf(te){return te.match(Cp)||[]}function cc(te,he,le){var ke;return le(te,function(Le,Ye,gt){if(he(Le,Ye,gt))return ke=Ye,!1}),ke}function fs(te,he,le,ke){for(var Le=te.length,Ye=le+(ke?1:-1);ke?Ye--:++Ye<Le;)if(he(te[Ye],Ye,te))return Ye;return-1}function Hn(te,he,le){return he===he?If(te,he,le):fs(te,dc,le)}function _f(te,he,le,ke){for(var Le=le-1,Ye=te.length;++Le<Ye;)if(ke(te[Le],he))return Le;return-1}function dc(te){return te!==te}function hc(te,he){var le=te==null?0:te.length;return le?oa(te,he)/le:f}function ra(te){return function(he){return he==null?o:he[te]}}function sa(te){return function(he){return te==null?o:te[he]}}function uc(te,he,le,ke,Le){return Le(te,function(Ye,gt,tt){le=ke?(ke=!1,Ye):he(le,Ye,gt,tt)}),le}function vf(te,he){var le=te.length;for(te.sort(he);le--;)te[le]=te[le].value;return te}function oa(te,he){for(var le,ke=-1,Le=te.length;++ke<Le;){var Ye=he(te[ke]);Ye!==o&&(le=le===o?Ye:le+Ye)}return le}function aa(te,he){for(var le=-1,ke=Array(te);++le<te;)ke[le]=he(le);return ke}function xf(te,he){return lt(he,function(le){return[le,te[le]]})}function pc(te){return te&&te.slice(0,_c(te)+1).replace(Xo,"")}function Xt(te){return function(he){return te(he)}}function la(te,he){return lt(he,function(le){return te[le]})}function Pr(te,he){return te.has(he)}function fc(te,he){for(var le=-1,ke=te.length;++le<ke&&Hn(he,te[le],0)>-1;);return le}function mc(te,he){for(var le=te.length;le--&&Hn(he,te[le],0)>-1;);return le}function yf(te,he){for(var le=te.length,ke=0;le--;)te[le]===he&&++ke;return ke}var bf=sa(rf),Sf=sa(sf);function Cf(te){return"\\"+af[te]}function wf(te,he){return te==null?o:te[he]}function Xn(te){return Jp.test(te)}function Df(te){return ef.test(te)}function zf(te){for(var he,le=[];!(he=te.next()).done;)le.push(he.value);return le}function ca(te){var he=-1,le=Array(te.size);return te.forEach(function(ke,Le){le[++he]=[Le,ke]}),le}function gc(te,he){return function(le){return te(he(le))}}function Yi(te,he){for(var le=-1,ke=te.length,Le=0,Ye=[];++le<ke;){var gt=te[le];(gt===he||gt===w)&&(te[le]=w,Ye[Le++]=le)}return Ye}function ms(te){var he=-1,le=Array(te.size);return te.forEach(function(ke){le[++he]=ke}),le}function Tf(te){var he=-1,le=Array(te.size);return te.forEach(function(ke){le[++he]=[ke,ke]}),le}function If(te,he,le){for(var ke=le-1,Le=te.length;++ke<Le;)if(te[ke]===he)return ke;return-1}function kf(te,he,le){for(var ke=le+1;ke--;)if(te[ke]===he)return ke;return ke}function Kn(te){return Xn(te)?Rf(te):ff(te)}function bi(te){return Xn(te)?Mf(te):mf(te)}function _c(te){for(var he=te.length;he--&&xp.test(te.charAt(he)););return he}var Ef=sa(of);function Rf(te){for(var he=Qo.lastIndex=0;Qo.test(te);)++he;return he}function Mf(te){return te.match(Qo)||[]}function Af(te){return te.match(Qp)||[]}var Pf=function te(he){he=he==null?yt:Zi.defaults(yt.Object(),he,Zi.pick(yt,tf));var le=he.Array,ke=he.Date,Le=he.Error,Ye=he.Function,gt=he.Math,tt=he.Object,da=he.RegExp,Of=he.String,ai=he.TypeError,gs=le.prototype,Lf=Ye.prototype,$n=tt.prototype,_s=he["__core-js_shared__"],vs=Lf.toString,Qe=$n.hasOwnProperty,Nf=0,vc=function(){var e=/[^.]+$/.exec(_s&&_s.keys&&_s.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),xs=$n.toString,Ff=vs.call(tt),Bf=yt._,Vf=da("^"+vs.call(Qe).replace(Ho,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ys=tc?he.Buffer:o,Qi=he.Symbol,bs=he.Uint8Array,xc=ys?ys.allocUnsafe:o,Ss=gc(tt.getPrototypeOf,tt),yc=tt.create,bc=$n.propertyIsEnumerable,Cs=gs.splice,Sc=Qi?Qi.isConcatSpreadable:o,Or=Qi?Qi.iterator:o,kn=Qi?Qi.toStringTag:o,ws=function(){try{var e=Pn(tt,"defineProperty");return e({},"",{}),e}catch{}}(),Gf=he.clearTimeout!==yt.clearTimeout&&he.clearTimeout,qf=ke&&ke.now!==yt.Date.now&&ke.now,Wf=he.setTimeout!==yt.setTimeout&&he.setTimeout,Ds=gt.ceil,zs=gt.floor,ha=tt.getOwnPropertySymbols,jf=ys?ys.isBuffer:o,Cc=he.isFinite,Uf=gs.join,Hf=gc(tt.keys,tt),_t=gt.max,Dt=gt.min,Xf=ke.now,Kf=he.parseInt,wc=gt.random,$f=gs.reverse,ua=Pn(he,"DataView"),Lr=Pn(he,"Map"),pa=Pn(he,"Promise"),Yn=Pn(he,"Set"),Nr=Pn(he,"WeakMap"),Fr=Pn(tt,"create"),Ts=Nr&&new Nr,Zn={},Yf=On(ua),Zf=On(Lr),Qf=On(pa),Jf=On(Yn),em=On(Nr),Is=Qi?Qi.prototype:o,Br=Is?Is.valueOf:o,Dc=Is?Is.toString:o;function _(e){if(ht(e)&&!Ne(e)&&!(e instanceof Xe)){if(e instanceof li)return e;if(Qe.call(e,"__wrapped__"))return zd(e)}return new li(e)}var Qn=function(){function e(){}return function(t){if(!ct(t))return{};if(yc)return yc(t);e.prototype=t;var n=new e;return e.prototype=o,n}}();function ks(){}function li(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=o}_.templateSettings={escape:pp,evaluate:fp,interpolate:Pl,variable:"",imports:{_}},_.prototype=ks.prototype,_.prototype.constructor=_,li.prototype=Qn(ks.prototype),li.prototype.constructor=li;function Xe(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=v,this.__views__=[]}function tm(){var e=new Xe(this.__wrapped__);return e.__actions__=Nt(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Nt(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Nt(this.__views__),e}function im(){if(this.__filtered__){var e=new Xe(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function nm(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ne(e),c=t<0,u=n?e.length:0,y=mg(0,u,this.__views__),P=y.start,X=y.end,re=X-P,pe=c?X:P-1,fe=this.__iteratees__,me=fe.length,Te=0,Ee=Dt(re,this.__takeCount__);if(!n||!c&&u==re&&Ee==re)return $c(e,this.__actions__);var Ae=[];e:for(;re--&&Te<Ee;){pe+=t;for(var Ge=-1,Pe=e[pe];++Ge<me;){var Ue=fe[Ge],Ke=Ue.iteratee,Yt=Ue.type,Mt=Ke(Pe);if(Yt==k)Pe=Mt;else if(!Mt){if(Yt==g)continue e;break e}}Ae[Te++]=Pe}return Ae}Xe.prototype=Qn(ks.prototype),Xe.prototype.constructor=Xe;function En(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var c=e[t];this.set(c[0],c[1])}}function rm(){this.__data__=Fr?Fr(null):{},this.size=0}function sm(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function om(e){var t=this.__data__;if(Fr){var n=t[e];return n===h?o:n}return Qe.call(t,e)?t[e]:o}function am(e){var t=this.__data__;return Fr?t[e]!==o:Qe.call(t,e)}function lm(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Fr&&t===o?h:t,this}En.prototype.clear=rm,En.prototype.delete=sm,En.prototype.get=om,En.prototype.has=am,En.prototype.set=lm;function Pi(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var c=e[t];this.set(c[0],c[1])}}function cm(){this.__data__=[],this.size=0}function dm(e){var t=this.__data__,n=Es(t,e);if(n<0)return!1;var c=t.length-1;return n==c?t.pop():Cs.call(t,n,1),--this.size,!0}function hm(e){var t=this.__data__,n=Es(t,e);return n<0?o:t[n][1]}function um(e){return Es(this.__data__,e)>-1}function pm(e,t){var n=this.__data__,c=Es(n,e);return c<0?(++this.size,n.push([e,t])):n[c][1]=t,this}Pi.prototype.clear=cm,Pi.prototype.delete=dm,Pi.prototype.get=hm,Pi.prototype.has=um,Pi.prototype.set=pm;function Oi(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var c=e[t];this.set(c[0],c[1])}}function fm(){this.size=0,this.__data__={hash:new En,map:new(Lr||Pi),string:new En}}function mm(e){var t=qs(this,e).delete(e);return this.size-=t?1:0,t}function gm(e){return qs(this,e).get(e)}function _m(e){return qs(this,e).has(e)}function vm(e,t){var n=qs(this,e),c=n.size;return n.set(e,t),this.size+=n.size==c?0:1,this}Oi.prototype.clear=fm,Oi.prototype.delete=mm,Oi.prototype.get=gm,Oi.prototype.has=_m,Oi.prototype.set=vm;function Rn(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Oi;++t<n;)this.add(e[t])}function xm(e){return this.__data__.set(e,h),this}function ym(e){return this.__data__.has(e)}Rn.prototype.add=Rn.prototype.push=xm,Rn.prototype.has=ym;function Si(e){var t=this.__data__=new Pi(e);this.size=t.size}function bm(){this.__data__=new Pi,this.size=0}function Sm(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Cm(e){return this.__data__.get(e)}function wm(e){return this.__data__.has(e)}function Dm(e,t){var n=this.__data__;if(n instanceof Pi){var c=n.__data__;if(!Lr||c.length<i-1)return c.push([e,t]),this.size=++n.size,this;n=this.__data__=new Oi(c)}return n.set(e,t),this.size=n.size,this}Si.prototype.clear=bm,Si.prototype.delete=Sm,Si.prototype.get=Cm,Si.prototype.has=wm,Si.prototype.set=Dm;function zc(e,t){var n=Ne(e),c=!n&&Ln(e),u=!n&&!c&&rn(e),y=!n&&!c&&!u&&ir(e),P=n||c||u||y,X=P?aa(e.length,Of):[],re=X.length;for(var pe in e)(t||Qe.call(e,pe))&&!(P&&(pe=="length"||u&&(pe=="offset"||pe=="parent")||y&&(pe=="buffer"||pe=="byteLength"||pe=="byteOffset")||Bi(pe,re)))&&X.push(pe);return X}function Tc(e){var t=e.length;return t?e[wa(0,t-1)]:o}function zm(e,t){return Ws(Nt(e),Mn(t,0,e.length))}function Tm(e){return Ws(Nt(e))}function fa(e,t,n){(n!==o&&!Ci(e[t],n)||n===o&&!(t in e))&&Li(e,t,n)}function Vr(e,t,n){var c=e[t];(!(Qe.call(e,t)&&Ci(c,n))||n===o&&!(t in e))&&Li(e,t,n)}function Es(e,t){for(var n=e.length;n--;)if(Ci(e[n][0],t))return n;return-1}function Im(e,t,n,c){return Ji(e,function(u,y,P){t(c,u,n(u),P)}),c}function Ic(e,t){return e&&Ti(t,bt(t),e)}function km(e,t){return e&&Ti(t,Bt(t),e)}function Li(e,t,n){t=="__proto__"&&ws?ws(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ma(e,t){for(var n=-1,c=t.length,u=le(c),y=e==null;++n<c;)u[n]=y?o:$a(e,t[n]);return u}function Mn(e,t,n){return e===e&&(n!==o&&(e=e<=n?e:n),t!==o&&(e=e>=t?e:t)),e}function ci(e,t,n,c,u,y){var P,X=t&A,re=t&V,pe=t&ie;if(n&&(P=u?n(e,c,u,y):n(e)),P!==o)return P;if(!ct(e))return e;var fe=Ne(e);if(fe){if(P=_g(e),!X)return Nt(e,P)}else{var me=zt(e),Te=me==oe||me==ae;if(rn(e))return Qc(e,X);if(me==be||me==b||Te&&!u){if(P=re||Te?{}:_d(e),!X)return re?og(e,km(P,e)):sg(e,Ic(P,e))}else{if(!rt[me])return u?e:{};P=vg(e,me,X)}}y||(y=new Si);var Ee=y.get(e);if(Ee)return Ee;y.set(e,P),Hd(e)?e.forEach(function(Pe){P.add(ci(Pe,t,n,Pe,e,y))}):jd(e)&&e.forEach(function(Pe,Ue){P.set(Ue,ci(Pe,t,n,Ue,e,y))});var Ae=pe?re?Oa:Pa:re?Bt:bt,Ge=fe?o:Ae(e);return oi(Ge||e,function(Pe,Ue){Ge&&(Ue=Pe,Pe=e[Ue]),Vr(P,Ue,ci(Pe,t,n,Ue,e,y))}),P}function Em(e){var t=bt(e);return function(n){return kc(n,e,t)}}function kc(e,t,n){var c=n.length;if(e==null)return!c;for(e=tt(e);c--;){var u=n[c],y=t[u],P=e[u];if(P===o&&!(u in e)||!y(P))return!1}return!0}function Ec(e,t,n){if(typeof e!="function")throw new ai(s);return Xr(function(){e.apply(o,n)},t)}function Gr(e,t,n,c){var u=-1,y=ps,P=!0,X=e.length,re=[],pe=t.length;if(!X)return re;n&&(t=lt(t,Xt(n))),c?(y=ta,P=!1):t.length>=i&&(y=Pr,P=!1,t=new Rn(t));e:for(;++u<X;){var fe=e[u],me=n==null?fe:n(fe);if(fe=c||fe!==0?fe:0,P&&me===me){for(var Te=pe;Te--;)if(t[Te]===me)continue e;re.push(fe)}else y(t,me,c)||re.push(fe)}return re}var Ji=nd(zi),Rc=nd(_a,!0);function Rm(e,t){var n=!0;return Ji(e,function(c,u,y){return n=!!t(c,u,y),n}),n}function Rs(e,t,n){for(var c=-1,u=e.length;++c<u;){var y=e[c],P=t(y);if(P!=null&&(X===o?P===P&&!$t(P):n(P,X)))var X=P,re=y}return re}function Mm(e,t,n,c){var u=e.length;for(n=Ve(n),n<0&&(n=-n>u?0:u+n),c=c===o||c>u?u:Ve(c),c<0&&(c+=u),c=n>c?0:Kd(c);n<c;)e[n++]=t;return e}function Mc(e,t){var n=[];return Ji(e,function(c,u,y){t(c,u,y)&&n.push(c)}),n}function St(e,t,n,c,u){var y=-1,P=e.length;for(n||(n=yg),u||(u=[]);++y<P;){var X=e[y];t>0&&n(X)?t>1?St(X,t-1,n,c,u):$i(u,X):c||(u[u.length]=X)}return u}var ga=rd(),Ac=rd(!0);function zi(e,t){return e&&ga(e,t,bt)}function _a(e,t){return e&&Ac(e,t,bt)}function Ms(e,t){return Ki(t,function(n){return Vi(e[n])})}function An(e,t){t=tn(t,e);for(var n=0,c=t.length;e!=null&&n<c;)e=e[Ii(t[n++])];return n&&n==c?e:o}function Pc(e,t,n){var c=t(e);return Ne(e)?c:$i(c,n(e))}function Et(e){return e==null?e===o?et:De:kn&&kn in tt(e)?fg(e):Tg(e)}function va(e,t){return e>t}function Am(e,t){return e!=null&&Qe.call(e,t)}function Pm(e,t){return e!=null&&t in tt(e)}function Om(e,t,n){return e>=Dt(t,n)&&e<_t(t,n)}function xa(e,t,n){for(var c=n?ta:ps,u=e[0].length,y=e.length,P=y,X=le(y),re=1/0,pe=[];P--;){var fe=e[P];P&&t&&(fe=lt(fe,Xt(t))),re=Dt(fe.length,re),X[P]=!n&&(t||u>=120&&fe.length>=120)?new Rn(P&&fe):o}fe=e[0];var me=-1,Te=X[0];e:for(;++me<u&&pe.length<re;){var Ee=fe[me],Ae=t?t(Ee):Ee;if(Ee=n||Ee!==0?Ee:0,!(Te?Pr(Te,Ae):c(pe,Ae,n))){for(P=y;--P;){var Ge=X[P];if(!(Ge?Pr(Ge,Ae):c(e[P],Ae,n)))continue e}Te&&Te.push(Ae),pe.push(Ee)}}return pe}function Lm(e,t,n,c){return zi(e,function(u,y,P){t(c,n(u),y,P)}),c}function qr(e,t,n){t=tn(t,e),e=bd(e,t);var c=e==null?e:e[Ii(hi(t))];return c==null?o:Ht(c,e,n)}function Oc(e){return ht(e)&&Et(e)==b}function Nm(e){return ht(e)&&Et(e)==Tn}function Fm(e){return ht(e)&&Et(e)==J}function Wr(e,t,n,c,u){return e===t?!0:e==null||t==null||!ht(e)&&!ht(t)?e!==e&&t!==t:Bm(e,t,n,c,Wr,u)}function Bm(e,t,n,c,u,y){var P=Ne(e),X=Ne(t),re=P?I:zt(e),pe=X?I:zt(t);re=re==b?be:re,pe=pe==b?be:pe;var fe=re==be,me=pe==be,Te=re==pe;if(Te&&rn(e)){if(!rn(t))return!1;P=!0,fe=!1}if(Te&&!fe)return y||(y=new Si),P||ir(e)?fd(e,t,n,c,u,y):ug(e,t,re,n,c,u,y);if(!(n&Z)){var Ee=fe&&Qe.call(e,"__wrapped__"),Ae=me&&Qe.call(t,"__wrapped__");if(Ee||Ae){var Ge=Ee?e.value():e,Pe=Ae?t.value():t;return y||(y=new Si),u(Ge,Pe,n,c,y)}}return Te?(y||(y=new Si),pg(e,t,n,c,u,y)):!1}function Vm(e){return ht(e)&&zt(e)==ve}function ya(e,t,n,c){var u=n.length,y=u,P=!c;if(e==null)return!y;for(e=tt(e);u--;){var X=n[u];if(P&&X[2]?X[1]!==e[X[0]]:!(X[0]in e))return!1}for(;++u<y;){X=n[u];var re=X[0],pe=e[re],fe=X[1];if(P&&X[2]){if(pe===o&&!(re in e))return!1}else{var me=new Si;if(c)var Te=c(pe,fe,re,e,t,me);if(!(Te===o?Wr(fe,pe,Z|$,c,me):Te))return!1}}return!0}function Lc(e){if(!ct(e)||Sg(e))return!1;var t=Vi(e)?Vf:kp;return t.test(On(e))}function Gm(e){return ht(e)&&Et(e)==Be}function qm(e){return ht(e)&&zt(e)==He}function Wm(e){return ht(e)&&$s(e.length)&&!!st[Et(e)]}function Nc(e){return typeof e=="function"?e:e==null?Vt:typeof e=="object"?Ne(e)?Vc(e[0],e[1]):Bc(e):sh(e)}function ba(e){if(!Hr(e))return Hf(e);var t=[];for(var n in tt(e))Qe.call(e,n)&&n!="constructor"&&t.push(n);return t}function jm(e){if(!ct(e))return zg(e);var t=Hr(e),n=[];for(var c in e)c=="constructor"&&(t||!Qe.call(e,c))||n.push(c);return n}function Sa(e,t){return e<t}function Fc(e,t){var n=-1,c=Ft(e)?le(e.length):[];return Ji(e,function(u,y,P){c[++n]=t(u,y,P)}),c}function Bc(e){var t=Na(e);return t.length==1&&t[0][2]?xd(t[0][0],t[0][1]):function(n){return n===e||ya(n,e,t)}}function Vc(e,t){return Ba(e)&&vd(t)?xd(Ii(e),t):function(n){var c=$a(n,e);return c===o&&c===t?Ya(n,e):Wr(t,c,Z|$)}}function As(e,t,n,c,u){e!==t&&ga(t,function(y,P){if(u||(u=new Si),ct(y))Um(e,t,P,n,As,c,u);else{var X=c?c(Ga(e,P),y,P+"",e,t,u):o;X===o&&(X=y),fa(e,P,X)}},Bt)}function Um(e,t,n,c,u,y,P){var X=Ga(e,n),re=Ga(t,n),pe=P.get(re);if(pe){fa(e,n,pe);return}var fe=y?y(X,re,n+"",e,t,P):o,me=fe===o;if(me){var Te=Ne(re),Ee=!Te&&rn(re),Ae=!Te&&!Ee&&ir(re);fe=re,Te||Ee||Ae?Ne(X)?fe=X:pt(X)?fe=Nt(X):Ee?(me=!1,fe=Qc(re,!0)):Ae?(me=!1,fe=Jc(re,!0)):fe=[]:Kr(re)||Ln(re)?(fe=X,Ln(X)?fe=$d(X):(!ct(X)||Vi(X))&&(fe=_d(re))):me=!1}me&&(P.set(re,fe),u(fe,re,c,y,P),P.delete(re)),fa(e,n,fe)}function Gc(e,t){var n=e.length;if(n)return t+=t<0?n:0,Bi(t,n)?e[t]:o}function qc(e,t,n){t.length?t=lt(t,function(y){return Ne(y)?function(P){return An(P,y.length===1?y[0]:y)}:y}):t=[Vt];var c=-1;t=lt(t,Xt(Me()));var u=Fc(e,function(y,P,X){var re=lt(t,function(pe){return pe(y)});return{criteria:re,index:++c,value:y}});return vf(u,function(y,P){return rg(y,P,n)})}function Hm(e,t){return Wc(e,t,function(n,c){return Ya(e,c)})}function Wc(e,t,n){for(var c=-1,u=t.length,y={};++c<u;){var P=t[c],X=An(e,P);n(X,P)&&jr(y,tn(P,e),X)}return y}function Xm(e){return function(t){return An(t,e)}}function Ca(e,t,n,c){var u=c?_f:Hn,y=-1,P=t.length,X=e;for(e===t&&(t=Nt(t)),n&&(X=lt(e,Xt(n)));++y<P;)for(var re=0,pe=t[y],fe=n?n(pe):pe;(re=u(X,fe,re,c))>-1;)X!==e&&Cs.call(X,re,1),Cs.call(e,re,1);return e}function jc(e,t){for(var n=e?t.length:0,c=n-1;n--;){var u=t[n];if(n==c||u!==y){var y=u;Bi(u)?Cs.call(e,u,1):Ta(e,u)}}return e}function wa(e,t){return e+zs(wc()*(t-e+1))}function Km(e,t,n,c){for(var u=-1,y=_t(Ds((t-e)/(n||1)),0),P=le(y);y--;)P[c?y:++u]=e,e+=n;return P}function Da(e,t){var n="";if(!e||t<1||t>C)return n;do t%2&&(n+=e),t=zs(t/2),t&&(e+=e);while(t);return n}function qe(e,t){return qa(yd(e,t,Vt),e+"")}function $m(e){return Tc(nr(e))}function Ym(e,t){var n=nr(e);return Ws(n,Mn(t,0,n.length))}function jr(e,t,n,c){if(!ct(e))return e;t=tn(t,e);for(var u=-1,y=t.length,P=y-1,X=e;X!=null&&++u<y;){var re=Ii(t[u]),pe=n;if(re==="__proto__"||re==="constructor"||re==="prototype")return e;if(u!=P){var fe=X[re];pe=c?c(fe,re,X):o,pe===o&&(pe=ct(fe)?fe:Bi(t[u+1])?[]:{})}Vr(X,re,pe),X=X[re]}return e}var Uc=Ts?function(e,t){return Ts.set(e,t),e}:Vt,Zm=ws?function(e,t){return ws(e,"toString",{configurable:!0,enumerable:!1,value:Qa(t),writable:!0})}:Vt;function Qm(e){return Ws(nr(e))}function di(e,t,n){var c=-1,u=e.length;t<0&&(t=-t>u?0:u+t),n=n>u?u:n,n<0&&(n+=u),u=t>n?0:n-t>>>0,t>>>=0;for(var y=le(u);++c<u;)y[c]=e[c+t];return y}function Jm(e,t){var n;return Ji(e,function(c,u,y){return n=t(c,u,y),!n}),!!n}function Ps(e,t,n){var c=0,u=e==null?c:e.length;if(typeof t=="number"&&t===t&&u<=H){for(;c<u;){var y=c+u>>>1,P=e[y];P!==null&&!$t(P)&&(n?P<=t:P<t)?c=y+1:u=y}return u}return za(e,t,Vt,n)}function za(e,t,n,c){var u=0,y=e==null?0:e.length;if(y===0)return 0;t=n(t);for(var P=t!==t,X=t===null,re=$t(t),pe=t===o;u<y;){var fe=zs((u+y)/2),me=n(e[fe]),Te=me!==o,Ee=me===null,Ae=me===me,Ge=$t(me);if(P)var Pe=c||Ae;else pe?Pe=Ae&&(c||Te):X?Pe=Ae&&Te&&(c||!Ee):re?Pe=Ae&&Te&&!Ee&&(c||!Ge):Ee||Ge?Pe=!1:Pe=c?me<=t:me<t;Pe?u=fe+1:y=fe}return Dt(y,S)}function Hc(e,t){for(var n=-1,c=e.length,u=0,y=[];++n<c;){var P=e[n],X=t?t(P):P;if(!n||!Ci(X,re)){var re=X;y[u++]=P===0?0:P}}return y}function Xc(e){return typeof e=="number"?e:$t(e)?f:+e}function Kt(e){if(typeof e=="string")return e;if(Ne(e))return lt(e,Kt)+"";if($t(e))return Dc?Dc.call(e):"";var t=e+"";return t=="0"&&1/e==-x?"-0":t}function en(e,t,n){var c=-1,u=ps,y=e.length,P=!0,X=[],re=X;if(n)P=!1,u=ta;else if(y>=i){var pe=t?null:dg(e);if(pe)return ms(pe);P=!1,u=Pr,re=new Rn}else re=t?[]:X;e:for(;++c<y;){var fe=e[c],me=t?t(fe):fe;if(fe=n||fe!==0?fe:0,P&&me===me){for(var Te=re.length;Te--;)if(re[Te]===me)continue e;t&&re.push(me),X.push(fe)}else u(re,me,n)||(re!==X&&re.push(me),X.push(fe))}return X}function Ta(e,t){return t=tn(t,e),e=bd(e,t),e==null||delete e[Ii(hi(t))]}function Kc(e,t,n,c){return jr(e,t,n(An(e,t)),c)}function Os(e,t,n,c){for(var u=e.length,y=c?u:-1;(c?y--:++y<u)&&t(e[y],y,e););return n?di(e,c?0:y,c?y+1:u):di(e,c?y+1:0,c?u:y)}function $c(e,t){var n=e;return n instanceof Xe&&(n=n.value()),ia(t,function(c,u){return u.func.apply(u.thisArg,$i([c],u.args))},n)}function Ia(e,t,n){var c=e.length;if(c<2)return c?en(e[0]):[];for(var u=-1,y=le(c);++u<c;)for(var P=e[u],X=-1;++X<c;)X!=u&&(y[u]=Gr(y[u]||P,e[X],t,n));return en(St(y,1),t,n)}function Yc(e,t,n){for(var c=-1,u=e.length,y=t.length,P={};++c<u;){var X=c<y?t[c]:o;n(P,e[c],X)}return P}function ka(e){return pt(e)?e:[]}function Ea(e){return typeof e=="function"?e:Vt}function tn(e,t){return Ne(e)?e:Ba(e,t)?[e]:Dd(Ze(e))}var eg=qe;function nn(e,t,n){var c=e.length;return n=n===o?c:n,!t&&n>=c?e:di(e,t,n)}var Zc=Gf||function(e){return yt.clearTimeout(e)};function Qc(e,t){if(t)return e.slice();var n=e.length,c=xc?xc(n):new e.constructor(n);return e.copy(c),c}function Ra(e){var t=new e.constructor(e.byteLength);return new bs(t).set(new bs(e)),t}function tg(e,t){var n=t?Ra(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function ig(e){var t=new e.constructor(e.source,Ol.exec(e));return t.lastIndex=e.lastIndex,t}function ng(e){return Br?tt(Br.call(e)):{}}function Jc(e,t){var n=t?Ra(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ed(e,t){if(e!==t){var n=e!==o,c=e===null,u=e===e,y=$t(e),P=t!==o,X=t===null,re=t===t,pe=$t(t);if(!X&&!pe&&!y&&e>t||y&&P&&re&&!X&&!pe||c&&P&&re||!n&&re||!u)return 1;if(!c&&!y&&!pe&&e<t||pe&&n&&u&&!c&&!y||X&&n&&u||!P&&u||!re)return-1}return 0}function rg(e,t,n){for(var c=-1,u=e.criteria,y=t.criteria,P=u.length,X=n.length;++c<P;){var re=ed(u[c],y[c]);if(re){if(c>=X)return re;var pe=n[c];return re*(pe=="desc"?-1:1)}}return e.index-t.index}function td(e,t,n,c){for(var u=-1,y=e.length,P=n.length,X=-1,re=t.length,pe=_t(y-P,0),fe=le(re+pe),me=!c;++X<re;)fe[X]=t[X];for(;++u<P;)(me||u<y)&&(fe[n[u]]=e[u]);for(;pe--;)fe[X++]=e[u++];return fe}function id(e,t,n,c){for(var u=-1,y=e.length,P=-1,X=n.length,re=-1,pe=t.length,fe=_t(y-X,0),me=le(fe+pe),Te=!c;++u<fe;)me[u]=e[u];for(var Ee=u;++re<pe;)me[Ee+re]=t[re];for(;++P<X;)(Te||u<y)&&(me[Ee+n[P]]=e[u++]);return me}function Nt(e,t){var n=-1,c=e.length;for(t||(t=le(c));++n<c;)t[n]=e[n];return t}function Ti(e,t,n,c){var u=!n;n||(n={});for(var y=-1,P=t.length;++y<P;){var X=t[y],re=c?c(n[X],e[X],X,n,e):o;re===o&&(re=e[X]),u?Li(n,X,re):Vr(n,X,re)}return n}function sg(e,t){return Ti(e,Fa(e),t)}function og(e,t){return Ti(e,md(e),t)}function Ls(e,t){return function(n,c){var u=Ne(n)?hf:Im,y=t?t():{};return u(n,e,Me(c,2),y)}}function Jn(e){return qe(function(t,n){var c=-1,u=n.length,y=u>1?n[u-1]:o,P=u>2?n[2]:o;for(y=e.length>3&&typeof y=="function"?(u--,y):o,P&&Rt(n[0],n[1],P)&&(y=u<3?o:y,u=1),t=tt(t);++c<u;){var X=n[c];X&&e(t,X,c,y)}return t})}function nd(e,t){return function(n,c){if(n==null)return n;if(!Ft(n))return e(n,c);for(var u=n.length,y=t?u:-1,P=tt(n);(t?y--:++y<u)&&c(P[y],y,P)!==!1;);return n}}function rd(e){return function(t,n,c){for(var u=-1,y=tt(t),P=c(t),X=P.length;X--;){var re=P[e?X:++u];if(n(y[re],re,y)===!1)break}return t}}function ag(e,t,n){var c=t&K,u=Ur(e);function y(){var P=this&&this!==yt&&this instanceof y?u:e;return P.apply(c?n:this,arguments)}return y}function sd(e){return function(t){t=Ze(t);var n=Xn(t)?bi(t):o,c=n?n[0]:t.charAt(0),u=n?nn(n,1).join(""):t.slice(1);return c[e]()+u}}function er(e){return function(t){return ia(nh(ih(t).replace(Yp,"")),e,"")}}function Ur(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Qn(e.prototype),c=e.apply(n,t);return ct(c)?c:n}}function lg(e,t,n){var c=Ur(e);function u(){for(var y=arguments.length,P=le(y),X=y,re=tr(u);X--;)P[X]=arguments[X];var pe=y<3&&P[0]!==re&&P[y-1]!==re?[]:Yi(P,re);if(y-=pe.length,y<n)return dd(e,t,Ns,u.placeholder,o,P,pe,o,o,n-y);var fe=this&&this!==yt&&this instanceof u?c:e;return Ht(fe,this,P)}return u}function od(e){return function(t,n,c){var u=tt(t);if(!Ft(t)){var y=Me(n,3);t=bt(t),n=function(X){return y(u[X],X,u)}}var P=e(t,n,c);return P>-1?u[y?t[P]:P]:o}}function ad(e){return Fi(function(t){var n=t.length,c=n,u=li.prototype.thru;for(e&&t.reverse();c--;){var y=t[c];if(typeof y!="function")throw new ai(s);if(u&&!P&&Gs(y)=="wrapper")var P=new li([],!0)}for(c=P?c:n;++c<n;){y=t[c];var X=Gs(y),re=X=="wrapper"?La(y):o;re&&Va(re[0])&&re[1]==(G|E|Q|q)&&!re[4].length&&re[9]==1?P=P[Gs(re[0])].apply(P,re[3]):P=y.length==1&&Va(y)?P[X]():P.thru(y)}return function(){var pe=arguments,fe=pe[0];if(P&&pe.length==1&&Ne(fe))return P.plant(fe).value();for(var me=0,Te=n?t[me].apply(this,pe):fe;++me<n;)Te=t[me].call(this,Te);return Te}})}function Ns(e,t,n,c,u,y,P,X,re,pe){var fe=t&G,me=t&K,Te=t&F,Ee=t&(E|L),Ae=t&Y,Ge=Te?o:Ur(e);function Pe(){for(var Ue=arguments.length,Ke=le(Ue),Yt=Ue;Yt--;)Ke[Yt]=arguments[Yt];if(Ee)var Mt=tr(Pe),Zt=yf(Ke,Mt);if(c&&(Ke=td(Ke,c,u,Ee)),y&&(Ke=id(Ke,y,P,Ee)),Ue-=Zt,Ee&&Ue<pe){var ft=Yi(Ke,Mt);return dd(e,t,Ns,Pe.placeholder,n,Ke,ft,X,re,pe-Ue)}var wi=me?n:this,qi=Te?wi[e]:e;return Ue=Ke.length,X?Ke=Ig(Ke,X):Ae&&Ue>1&&Ke.reverse(),fe&&re<Ue&&(Ke.length=re),this&&this!==yt&&this instanceof Pe&&(qi=Ge||Ur(qi)),qi.apply(wi,Ke)}return Pe}function ld(e,t){return function(n,c){return Lm(n,e,t(c),{})}}function Fs(e,t){return function(n,c){var u;if(n===o&&c===o)return t;if(n!==o&&(u=n),c!==o){if(u===o)return c;typeof n=="string"||typeof c=="string"?(n=Kt(n),c=Kt(c)):(n=Xc(n),c=Xc(c)),u=e(n,c)}return u}}function Ma(e){return Fi(function(t){return t=lt(t,Xt(Me())),qe(function(n){var c=this;return e(t,function(u){return Ht(u,c,n)})})})}function Bs(e,t){t=t===o?" ":Kt(t);var n=t.length;if(n<2)return n?Da(t,e):t;var c=Da(t,Ds(e/Kn(t)));return Xn(t)?nn(bi(c),0,e).join(""):c.slice(0,e)}function cg(e,t,n,c){var u=t&K,y=Ur(e);function P(){for(var X=-1,re=arguments.length,pe=-1,fe=c.length,me=le(fe+re),Te=this&&this!==yt&&this instanceof P?y:e;++pe<fe;)me[pe]=c[pe];for(;re--;)me[pe++]=arguments[++X];return Ht(Te,u?n:this,me)}return P}function cd(e){return function(t,n,c){return c&&typeof c!="number"&&Rt(t,n,c)&&(n=c=o),t=Gi(t),n===o?(n=t,t=0):n=Gi(n),c=c===o?t<n?1:-1:Gi(c),Km(t,n,c,e)}}function Vs(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=ui(t),n=ui(n)),e(t,n)}}function dd(e,t,n,c,u,y,P,X,re,pe){var fe=t&E,me=fe?P:o,Te=fe?o:P,Ee=fe?y:o,Ae=fe?o:y;t|=fe?Q:R,t&=~(fe?R:Q),t&N||(t&=~(K|F));var Ge=[e,t,u,Ee,me,Ae,Te,X,re,pe],Pe=n.apply(o,Ge);return Va(e)&&Sd(Pe,Ge),Pe.placeholder=c,Cd(Pe,e,t)}function Aa(e){var t=gt[e];return function(n,c){if(n=ui(n),c=c==null?0:Dt(Ve(c),292),c&&Cc(n)){var u=(Ze(n)+"e").split("e"),y=t(u[0]+"e"+(+u[1]+c));return u=(Ze(y)+"e").split("e"),+(u[0]+"e"+(+u[1]-c))}return t(n)}}var dg=Yn&&1/ms(new Yn([,-0]))[1]==x?function(e){return new Yn(e)}:tl;function hd(e){return function(t){var n=zt(t);return n==ve?ca(t):n==He?Tf(t):xf(t,e(t))}}function Ni(e,t,n,c,u,y,P,X){var re=t&F;if(!re&&typeof e!="function")throw new ai(s);var pe=c?c.length:0;if(pe||(t&=~(Q|R),c=u=o),P=P===o?P:_t(Ve(P),0),X=X===o?X:Ve(X),pe-=u?u.length:0,t&R){var fe=c,me=u;c=u=o}var Te=re?o:La(e),Ee=[e,t,n,c,u,fe,me,y,P,X];if(Te&&Dg(Ee,Te),e=Ee[0],t=Ee[1],n=Ee[2],c=Ee[3],u=Ee[4],X=Ee[9]=Ee[9]===o?re?0:e.length:_t(Ee[9]-pe,0),!X&&t&(E|L)&&(t&=~(E|L)),!t||t==K)var Ae=ag(e,t,n);else t==E||t==L?Ae=lg(e,t,X):(t==Q||t==(K|Q))&&!u.length?Ae=cg(e,t,n,c):Ae=Ns.apply(o,Ee);var Ge=Te?Uc:Sd;return Cd(Ge(Ae,Ee),e,t)}function ud(e,t,n,c){return e===o||Ci(e,$n[n])&&!Qe.call(c,n)?t:e}function pd(e,t,n,c,u,y){return ct(e)&&ct(t)&&(y.set(t,e),As(e,t,o,pd,y),y.delete(t)),e}function hg(e){return Kr(e)?o:e}function fd(e,t,n,c,u,y){var P=n&Z,X=e.length,re=t.length;if(X!=re&&!(P&&re>X))return!1;var pe=y.get(e),fe=y.get(t);if(pe&&fe)return pe==t&&fe==e;var me=-1,Te=!0,Ee=n&$?new Rn:o;for(y.set(e,t),y.set(t,e);++me<X;){var Ae=e[me],Ge=t[me];if(c)var Pe=P?c(Ge,Ae,me,t,e,y):c(Ae,Ge,me,e,t,y);if(Pe!==o){if(Pe)continue;Te=!1;break}if(Ee){if(!na(t,function(Ue,Ke){if(!Pr(Ee,Ke)&&(Ae===Ue||u(Ae,Ue,n,c,y)))return Ee.push(Ke)})){Te=!1;break}}else if(!(Ae===Ge||u(Ae,Ge,n,c,y))){Te=!1;break}}return y.delete(e),y.delete(t),Te}function ug(e,t,n,c,u,y,P){switch(n){case ri:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Tn:return!(e.byteLength!=t.byteLength||!y(new bs(e),new bs(t)));case z:case J:case _e:return Ci(+e,+t);case ee:return e.name==t.name&&e.message==t.message;case Be:case je:return e==t+"";case ve:var X=ca;case He:var re=c&Z;if(X||(X=ms),e.size!=t.size&&!re)return!1;var pe=P.get(e);if(pe)return pe==t;c|=$,P.set(e,t);var fe=fd(X(e),X(t),c,u,y,P);return P.delete(e),fe;case Je:if(Br)return Br.call(e)==Br.call(t)}return!1}function pg(e,t,n,c,u,y){var P=n&Z,X=Pa(e),re=X.length,pe=Pa(t),fe=pe.length;if(re!=fe&&!P)return!1;for(var me=re;me--;){var Te=X[me];if(!(P?Te in t:Qe.call(t,Te)))return!1}var Ee=y.get(e),Ae=y.get(t);if(Ee&&Ae)return Ee==t&&Ae==e;var Ge=!0;y.set(e,t),y.set(t,e);for(var Pe=P;++me<re;){Te=X[me];var Ue=e[Te],Ke=t[Te];if(c)var Yt=P?c(Ke,Ue,Te,t,e,y):c(Ue,Ke,Te,e,t,y);if(!(Yt===o?Ue===Ke||u(Ue,Ke,n,c,y):Yt)){Ge=!1;break}Pe||(Pe=Te=="constructor")}if(Ge&&!Pe){var Mt=e.constructor,Zt=t.constructor;Mt!=Zt&&"constructor"in e&&"constructor"in t&&!(typeof Mt=="function"&&Mt instanceof Mt&&typeof Zt=="function"&&Zt instanceof Zt)&&(Ge=!1)}return y.delete(e),y.delete(t),Ge}function Fi(e){return qa(yd(e,o,kd),e+"")}function Pa(e){return Pc(e,bt,Fa)}function Oa(e){return Pc(e,Bt,md)}var La=Ts?function(e){return Ts.get(e)}:tl;function Gs(e){for(var t=e.name+"",n=Zn[t],c=Qe.call(Zn,t)?n.length:0;c--;){var u=n[c],y=u.func;if(y==null||y==e)return u.name}return t}function tr(e){var t=Qe.call(_,"placeholder")?_:e;return t.placeholder}function Me(){var e=_.iteratee||Ja;return e=e===Ja?Nc:e,arguments.length?e(arguments[0],arguments[1]):e}function qs(e,t){var n=e.__data__;return bg(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Na(e){for(var t=bt(e),n=t.length;n--;){var c=t[n],u=e[c];t[n]=[c,u,vd(u)]}return t}function Pn(e,t){var n=wf(e,t);return Lc(n)?n:o}function fg(e){var t=Qe.call(e,kn),n=e[kn];try{e[kn]=o;var c=!0}catch{}var u=xs.call(e);return c&&(t?e[kn]=n:delete e[kn]),u}var Fa=ha?function(e){return e==null?[]:(e=tt(e),Ki(ha(e),function(t){return bc.call(e,t)}))}:il,md=ha?function(e){for(var t=[];e;)$i(t,Fa(e)),e=Ss(e);return t}:il,zt=Et;(ua&&zt(new ua(new ArrayBuffer(1)))!=ri||Lr&&zt(new Lr)!=ve||pa&&zt(pa.resolve())!=we||Yn&&zt(new Yn)!=He||Nr&&zt(new Nr)!=mt)&&(zt=function(e){var t=Et(e),n=t==be?e.constructor:o,c=n?On(n):"";if(c)switch(c){case Yf:return ri;case Zf:return ve;case Qf:return we;case Jf:return He;case em:return mt}return t});function mg(e,t,n){for(var c=-1,u=n.length;++c<u;){var y=n[c],P=y.size;switch(y.type){case"drop":e+=P;break;case"dropRight":t-=P;break;case"take":t=Dt(t,e+P);break;case"takeRight":e=_t(e,t-P);break}}return{start:e,end:t}}function gg(e){var t=e.match(bp);return t?t[1].split(Sp):[]}function gd(e,t,n){t=tn(t,e);for(var c=-1,u=t.length,y=!1;++c<u;){var P=Ii(t[c]);if(!(y=e!=null&&n(e,P)))break;e=e[P]}return y||++c!=u?y:(u=e==null?0:e.length,!!u&&$s(u)&&Bi(P,u)&&(Ne(e)||Ln(e)))}function _g(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&Qe.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function _d(e){return typeof e.constructor=="function"&&!Hr(e)?Qn(Ss(e)):{}}function vg(e,t,n){var c=e.constructor;switch(t){case Tn:return Ra(e);case z:case J:return new c(+e);case ri:return tg(e,n);case Mr:case Ar:case Bo:case Vo:case Go:case qo:case Wo:case jo:case Uo:return Jc(e,n);case ve:return new c;case _e:case je:return new c(e);case Be:return ig(e);case He:return new c;case Je:return ng(e)}}function xg(e,t){var n=t.length;if(!n)return e;var c=n-1;return t[c]=(n>1?"& ":"")+t[c],t=t.join(n>2?", ":" "),e.replace(yp,`{
/* [wrapped with `+t+`] */
`)}function yg(e){return Ne(e)||Ln(e)||!!(Sc&&e&&e[Sc])}function Bi(e,t){var n=typeof e;return t=t??C,!!t&&(n=="number"||n!="symbol"&&Rp.test(e))&&e>-1&&e%1==0&&e<t}function Rt(e,t,n){if(!ct(n))return!1;var c=typeof t;return(c=="number"?Ft(n)&&Bi(t,n.length):c=="string"&&t in n)?Ci(n[t],e):!1}function Ba(e,t){if(Ne(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||$t(e)?!0:gp.test(e)||!mp.test(e)||t!=null&&e in tt(t)}function bg(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Va(e){var t=Gs(e),n=_[t];if(typeof n!="function"||!(t in Xe.prototype))return!1;if(e===n)return!0;var c=La(n);return!!c&&e===c[0]}function Sg(e){return!!vc&&vc in e}var Cg=_s?Vi:nl;function Hr(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||$n;return e===n}function vd(e){return e===e&&!ct(e)}function xd(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==o||e in tt(n))}}function wg(e){var t=Xs(e,function(c){return n.size===m&&n.clear(),c}),n=t.cache;return t}function Dg(e,t){var n=e[1],c=t[1],u=n|c,y=u<(K|F|G),P=c==G&&n==E||c==G&&n==q&&e[7].length<=t[8]||c==(G|q)&&t[7].length<=t[8]&&n==E;if(!(y||P))return e;c&K&&(e[2]=t[2],u|=n&K?0:N);var X=t[3];if(X){var re=e[3];e[3]=re?td(re,X,t[4]):X,e[4]=re?Yi(e[3],w):t[4]}return X=t[5],X&&(re=e[5],e[5]=re?id(re,X,t[6]):X,e[6]=re?Yi(e[5],w):t[6]),X=t[7],X&&(e[7]=X),c&G&&(e[8]=e[8]==null?t[8]:Dt(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=u,e}function zg(e){var t=[];if(e!=null)for(var n in tt(e))t.push(n);return t}function Tg(e){return xs.call(e)}function yd(e,t,n){return t=_t(t===o?e.length-1:t,0),function(){for(var c=arguments,u=-1,y=_t(c.length-t,0),P=le(y);++u<y;)P[u]=c[t+u];u=-1;for(var X=le(t+1);++u<t;)X[u]=c[u];return X[t]=n(P),Ht(e,this,X)}}function bd(e,t){return t.length<2?e:An(e,di(t,0,-1))}function Ig(e,t){for(var n=e.length,c=Dt(t.length,n),u=Nt(e);c--;){var y=t[c];e[c]=Bi(y,n)?u[y]:o}return e}function Ga(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Sd=wd(Uc),Xr=Wf||function(e,t){return yt.setTimeout(e,t)},qa=wd(Zm);function Cd(e,t,n){var c=t+"";return qa(e,xg(c,kg(gg(c),n)))}function wd(e){var t=0,n=0;return function(){var c=Xf(),u=de-(c-n);if(n=c,u>0){if(++t>=U)return arguments[0]}else t=0;return e.apply(o,arguments)}}function Ws(e,t){var n=-1,c=e.length,u=c-1;for(t=t===o?c:t;++n<t;){var y=wa(n,u),P=e[y];e[y]=e[n],e[n]=P}return e.length=t,e}var Dd=wg(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(_p,function(n,c,u,y){t.push(u?y.replace(Dp,"$1"):c||n)}),t});function Ii(e){if(typeof e=="string"||$t(e))return e;var t=e+"";return t=="0"&&1/e==-x?"-0":t}function On(e){if(e!=null){try{return vs.call(e)}catch{}try{return e+""}catch{}}return""}function kg(e,t){return oi(T,function(n){var c="_."+n[0];t&n[1]&&!ps(e,c)&&e.push(c)}),e.sort()}function zd(e){if(e instanceof Xe)return e.clone();var t=new li(e.__wrapped__,e.__chain__);return t.__actions__=Nt(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Eg(e,t,n){(n?Rt(e,t,n):t===o)?t=1:t=_t(Ve(t),0);var c=e==null?0:e.length;if(!c||t<1)return[];for(var u=0,y=0,P=le(Ds(c/t));u<c;)P[y++]=di(e,u,u+=t);return P}function Rg(e){for(var t=-1,n=e==null?0:e.length,c=0,u=[];++t<n;){var y=e[t];y&&(u[c++]=y)}return u}function Mg(){var e=arguments.length;if(!e)return[];for(var t=le(e-1),n=arguments[0],c=e;c--;)t[c-1]=arguments[c];return $i(Ne(n)?Nt(n):[n],St(t,1))}var Ag=qe(function(e,t){return pt(e)?Gr(e,St(t,1,pt,!0)):[]}),Pg=qe(function(e,t){var n=hi(t);return pt(n)&&(n=o),pt(e)?Gr(e,St(t,1,pt,!0),Me(n,2)):[]}),Og=qe(function(e,t){var n=hi(t);return pt(n)&&(n=o),pt(e)?Gr(e,St(t,1,pt,!0),o,n):[]});function Lg(e,t,n){var c=e==null?0:e.length;return c?(t=n||t===o?1:Ve(t),di(e,t<0?0:t,c)):[]}function Ng(e,t,n){var c=e==null?0:e.length;return c?(t=n||t===o?1:Ve(t),t=c-t,di(e,0,t<0?0:t)):[]}function Fg(e,t){return e&&e.length?Os(e,Me(t,3),!0,!0):[]}function Bg(e,t){return e&&e.length?Os(e,Me(t,3),!0):[]}function Vg(e,t,n,c){var u=e==null?0:e.length;return u?(n&&typeof n!="number"&&Rt(e,t,n)&&(n=0,c=u),Mm(e,t,n,c)):[]}function Td(e,t,n){var c=e==null?0:e.length;if(!c)return-1;var u=n==null?0:Ve(n);return u<0&&(u=_t(c+u,0)),fs(e,Me(t,3),u)}function Id(e,t,n){var c=e==null?0:e.length;if(!c)return-1;var u=c-1;return n!==o&&(u=Ve(n),u=n<0?_t(c+u,0):Dt(u,c-1)),fs(e,Me(t,3),u,!0)}function kd(e){var t=e==null?0:e.length;return t?St(e,1):[]}function Gg(e){var t=e==null?0:e.length;return t?St(e,x):[]}function qg(e,t){var n=e==null?0:e.length;return n?(t=t===o?1:Ve(t),St(e,t)):[]}function Wg(e){for(var t=-1,n=e==null?0:e.length,c={};++t<n;){var u=e[t];c[u[0]]=u[1]}return c}function Ed(e){return e&&e.length?e[0]:o}function jg(e,t,n){var c=e==null?0:e.length;if(!c)return-1;var u=n==null?0:Ve(n);return u<0&&(u=_t(c+u,0)),Hn(e,t,u)}function Ug(e){var t=e==null?0:e.length;return t?di(e,0,-1):[]}var Hg=qe(function(e){var t=lt(e,ka);return t.length&&t[0]===e[0]?xa(t):[]}),Xg=qe(function(e){var t=hi(e),n=lt(e,ka);return t===hi(n)?t=o:n.pop(),n.length&&n[0]===e[0]?xa(n,Me(t,2)):[]}),Kg=qe(function(e){var t=hi(e),n=lt(e,ka);return t=typeof t=="function"?t:o,t&&n.pop(),n.length&&n[0]===e[0]?xa(n,o,t):[]});function $g(e,t){return e==null?"":Uf.call(e,t)}function hi(e){var t=e==null?0:e.length;return t?e[t-1]:o}function Yg(e,t,n){var c=e==null?0:e.length;if(!c)return-1;var u=c;return n!==o&&(u=Ve(n),u=u<0?_t(c+u,0):Dt(u,c-1)),t===t?kf(e,t,u):fs(e,dc,u,!0)}function Zg(e,t){return e&&e.length?Gc(e,Ve(t)):o}var Qg=qe(Rd);function Rd(e,t){return e&&e.length&&t&&t.length?Ca(e,t):e}function Jg(e,t,n){return e&&e.length&&t&&t.length?Ca(e,t,Me(n,2)):e}function e_(e,t,n){return e&&e.length&&t&&t.length?Ca(e,t,o,n):e}var t_=Fi(function(e,t){var n=e==null?0:e.length,c=ma(e,t);return jc(e,lt(t,function(u){return Bi(u,n)?+u:u}).sort(ed)),c});function i_(e,t){var n=[];if(!(e&&e.length))return n;var c=-1,u=[],y=e.length;for(t=Me(t,3);++c<y;){var P=e[c];t(P,c,e)&&(n.push(P),u.push(c))}return jc(e,u),n}function Wa(e){return e==null?e:$f.call(e)}function n_(e,t,n){var c=e==null?0:e.length;return c?(n&&typeof n!="number"&&Rt(e,t,n)?(t=0,n=c):(t=t==null?0:Ve(t),n=n===o?c:Ve(n)),di(e,t,n)):[]}function r_(e,t){return Ps(e,t)}function s_(e,t,n){return za(e,t,Me(n,2))}function o_(e,t){var n=e==null?0:e.length;if(n){var c=Ps(e,t);if(c<n&&Ci(e[c],t))return c}return-1}function a_(e,t){return Ps(e,t,!0)}function l_(e,t,n){return za(e,t,Me(n,2),!0)}function c_(e,t){var n=e==null?0:e.length;if(n){var c=Ps(e,t,!0)-1;if(Ci(e[c],t))return c}return-1}function d_(e){return e&&e.length?Hc(e):[]}function h_(e,t){return e&&e.length?Hc(e,Me(t,2)):[]}function u_(e){var t=e==null?0:e.length;return t?di(e,1,t):[]}function p_(e,t,n){return e&&e.length?(t=n||t===o?1:Ve(t),di(e,0,t<0?0:t)):[]}function f_(e,t,n){var c=e==null?0:e.length;return c?(t=n||t===o?1:Ve(t),t=c-t,di(e,t<0?0:t,c)):[]}function m_(e,t){return e&&e.length?Os(e,Me(t,3),!1,!0):[]}function g_(e,t){return e&&e.length?Os(e,Me(t,3)):[]}var __=qe(function(e){return en(St(e,1,pt,!0))}),v_=qe(function(e){var t=hi(e);return pt(t)&&(t=o),en(St(e,1,pt,!0),Me(t,2))}),x_=qe(function(e){var t=hi(e);return t=typeof t=="function"?t:o,en(St(e,1,pt,!0),o,t)});function y_(e){return e&&e.length?en(e):[]}function b_(e,t){return e&&e.length?en(e,Me(t,2)):[]}function S_(e,t){return t=typeof t=="function"?t:o,e&&e.length?en(e,o,t):[]}function ja(e){if(!(e&&e.length))return[];var t=0;return e=Ki(e,function(n){if(pt(n))return t=_t(n.length,t),!0}),aa(t,function(n){return lt(e,ra(n))})}function Md(e,t){if(!(e&&e.length))return[];var n=ja(e);return t==null?n:lt(n,function(c){return Ht(t,o,c)})}var C_=qe(function(e,t){return pt(e)?Gr(e,t):[]}),w_=qe(function(e){return Ia(Ki(e,pt))}),D_=qe(function(e){var t=hi(e);return pt(t)&&(t=o),Ia(Ki(e,pt),Me(t,2))}),z_=qe(function(e){var t=hi(e);return t=typeof t=="function"?t:o,Ia(Ki(e,pt),o,t)}),T_=qe(ja);function I_(e,t){return Yc(e||[],t||[],Vr)}function k_(e,t){return Yc(e||[],t||[],jr)}var E_=qe(function(e){var t=e.length,n=t>1?e[t-1]:o;return n=typeof n=="function"?(e.pop(),n):o,Md(e,n)});function Ad(e){var t=_(e);return t.__chain__=!0,t}function R_(e,t){return t(e),e}function js(e,t){return t(e)}var M_=Fi(function(e){var t=e.length,n=t?e[0]:0,c=this.__wrapped__,u=function(y){return ma(y,e)};return t>1||this.__actions__.length||!(c instanceof Xe)||!Bi(n)?this.thru(u):(c=c.slice(n,+n+(t?1:0)),c.__actions__.push({func:js,args:[u],thisArg:o}),new li(c,this.__chain__).thru(function(y){return t&&!y.length&&y.push(o),y}))});function A_(){return Ad(this)}function P_(){return new li(this.value(),this.__chain__)}function O_(){this.__values__===o&&(this.__values__=Xd(this.value()));var e=this.__index__>=this.__values__.length,t=e?o:this.__values__[this.__index__++];return{done:e,value:t}}function L_(){return this}function N_(e){for(var t,n=this;n instanceof ks;){var c=zd(n);c.__index__=0,c.__values__=o,t?u.__wrapped__=c:t=c;var u=c;n=n.__wrapped__}return u.__wrapped__=e,t}function F_(){var e=this.__wrapped__;if(e instanceof Xe){var t=e;return this.__actions__.length&&(t=new Xe(this)),t=t.reverse(),t.__actions__.push({func:js,args:[Wa],thisArg:o}),new li(t,this.__chain__)}return this.thru(Wa)}function B_(){return $c(this.__wrapped__,this.__actions__)}var V_=Ls(function(e,t,n){Qe.call(e,n)?++e[n]:Li(e,n,1)});function G_(e,t,n){var c=Ne(e)?lc:Rm;return n&&Rt(e,t,n)&&(t=o),c(e,Me(t,3))}function q_(e,t){var n=Ne(e)?Ki:Mc;return n(e,Me(t,3))}var W_=od(Td),j_=od(Id);function U_(e,t){return St(Us(e,t),1)}function H_(e,t){return St(Us(e,t),x)}function X_(e,t,n){return n=n===o?1:Ve(n),St(Us(e,t),n)}function Pd(e,t){var n=Ne(e)?oi:Ji;return n(e,Me(t,3))}function Od(e,t){var n=Ne(e)?uf:Rc;return n(e,Me(t,3))}var K_=Ls(function(e,t,n){Qe.call(e,n)?e[n].push(t):Li(e,n,[t])});function $_(e,t,n,c){e=Ft(e)?e:nr(e),n=n&&!c?Ve(n):0;var u=e.length;return n<0&&(n=_t(u+n,0)),Ys(e)?n<=u&&e.indexOf(t,n)>-1:!!u&&Hn(e,t,n)>-1}var Y_=qe(function(e,t,n){var c=-1,u=typeof t=="function",y=Ft(e)?le(e.length):[];return Ji(e,function(P){y[++c]=u?Ht(t,P,n):qr(P,t,n)}),y}),Z_=Ls(function(e,t,n){Li(e,n,t)});function Us(e,t){var n=Ne(e)?lt:Fc;return n(e,Me(t,3))}function Q_(e,t,n,c){return e==null?[]:(Ne(t)||(t=t==null?[]:[t]),n=c?o:n,Ne(n)||(n=n==null?[]:[n]),qc(e,t,n))}var J_=Ls(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function e0(e,t,n){var c=Ne(e)?ia:uc,u=arguments.length<3;return c(e,Me(t,4),n,u,Ji)}function t0(e,t,n){var c=Ne(e)?pf:uc,u=arguments.length<3;return c(e,Me(t,4),n,u,Rc)}function i0(e,t){var n=Ne(e)?Ki:Mc;return n(e,Ks(Me(t,3)))}function n0(e){var t=Ne(e)?Tc:$m;return t(e)}function r0(e,t,n){(n?Rt(e,t,n):t===o)?t=1:t=Ve(t);var c=Ne(e)?zm:Ym;return c(e,t)}function s0(e){var t=Ne(e)?Tm:Qm;return t(e)}function o0(e){if(e==null)return 0;if(Ft(e))return Ys(e)?Kn(e):e.length;var t=zt(e);return t==ve||t==He?e.size:ba(e).length}function a0(e,t,n){var c=Ne(e)?na:Jm;return n&&Rt(e,t,n)&&(t=o),c(e,Me(t,3))}var l0=qe(function(e,t){if(e==null)return[];var n=t.length;return n>1&&Rt(e,t[0],t[1])?t=[]:n>2&&Rt(t[0],t[1],t[2])&&(t=[t[0]]),qc(e,St(t,1),[])}),Hs=qf||function(){return yt.Date.now()};function c0(e,t){if(typeof t!="function")throw new ai(s);return e=Ve(e),function(){if(--e<1)return t.apply(this,arguments)}}function Ld(e,t,n){return t=n?o:t,t=e&&t==null?e.length:t,Ni(e,G,o,o,o,o,t)}function Nd(e,t){var n;if(typeof t!="function")throw new ai(s);return e=Ve(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=o),n}}var Ua=qe(function(e,t,n){var c=K;if(n.length){var u=Yi(n,tr(Ua));c|=Q}return Ni(e,c,t,n,u)}),Fd=qe(function(e,t,n){var c=K|F;if(n.length){var u=Yi(n,tr(Fd));c|=Q}return Ni(t,c,e,n,u)});function Bd(e,t,n){t=n?o:t;var c=Ni(e,E,o,o,o,o,o,t);return c.placeholder=Bd.placeholder,c}function Vd(e,t,n){t=n?o:t;var c=Ni(e,L,o,o,o,o,o,t);return c.placeholder=Vd.placeholder,c}function Gd(e,t,n){var c,u,y,P,X,re,pe=0,fe=!1,me=!1,Te=!0;if(typeof e!="function")throw new ai(s);t=ui(t)||0,ct(n)&&(fe=!!n.leading,me="maxWait"in n,y=me?_t(ui(n.maxWait)||0,t):y,Te="trailing"in n?!!n.trailing:Te);function Ee(ft){var wi=c,qi=u;return c=u=o,pe=ft,P=e.apply(qi,wi),P}function Ae(ft){return pe=ft,X=Xr(Ue,t),fe?Ee(ft):P}function Ge(ft){var wi=ft-re,qi=ft-pe,oh=t-wi;return me?Dt(oh,y-qi):oh}function Pe(ft){var wi=ft-re,qi=ft-pe;return re===o||wi>=t||wi<0||me&&qi>=y}function Ue(){var ft=Hs();if(Pe(ft))return Ke(ft);X=Xr(Ue,Ge(ft))}function Ke(ft){return X=o,Te&&c?Ee(ft):(c=u=o,P)}function Yt(){X!==o&&Zc(X),pe=0,c=re=u=X=o}function Mt(){return X===o?P:Ke(Hs())}function Zt(){var ft=Hs(),wi=Pe(ft);if(c=arguments,u=this,re=ft,wi){if(X===o)return Ae(re);if(me)return Zc(X),X=Xr(Ue,t),Ee(re)}return X===o&&(X=Xr(Ue,t)),P}return Zt.cancel=Yt,Zt.flush=Mt,Zt}var d0=qe(function(e,t){return Ec(e,1,t)}),h0=qe(function(e,t,n){return Ec(e,ui(t)||0,n)});function u0(e){return Ni(e,Y)}function Xs(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new ai(s);var n=function(){var c=arguments,u=t?t.apply(this,c):c[0],y=n.cache;if(y.has(u))return y.get(u);var P=e.apply(this,c);return n.cache=y.set(u,P)||y,P};return n.cache=new(Xs.Cache||Oi),n}Xs.Cache=Oi;function Ks(e){if(typeof e!="function")throw new ai(s);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function p0(e){return Nd(2,e)}var f0=eg(function(e,t){t=t.length==1&&Ne(t[0])?lt(t[0],Xt(Me())):lt(St(t,1),Xt(Me()));var n=t.length;return qe(function(c){for(var u=-1,y=Dt(c.length,n);++u<y;)c[u]=t[u].call(this,c[u]);return Ht(e,this,c)})}),Ha=qe(function(e,t){var n=Yi(t,tr(Ha));return Ni(e,Q,o,t,n)}),qd=qe(function(e,t){var n=Yi(t,tr(qd));return Ni(e,R,o,t,n)}),m0=Fi(function(e,t){return Ni(e,q,o,o,o,t)});function g0(e,t){if(typeof e!="function")throw new ai(s);return t=t===o?t:Ve(t),qe(e,t)}function _0(e,t){if(typeof e!="function")throw new ai(s);return t=t==null?0:_t(Ve(t),0),qe(function(n){var c=n[t],u=nn(n,0,t);return c&&$i(u,c),Ht(e,this,u)})}function v0(e,t,n){var c=!0,u=!0;if(typeof e!="function")throw new ai(s);return ct(n)&&(c="leading"in n?!!n.leading:c,u="trailing"in n?!!n.trailing:u),Gd(e,t,{leading:c,maxWait:t,trailing:u})}function x0(e){return Ld(e,1)}function y0(e,t){return Ha(Ea(t),e)}function b0(){if(!arguments.length)return[];var e=arguments[0];return Ne(e)?e:[e]}function S0(e){return ci(e,ie)}function C0(e,t){return t=typeof t=="function"?t:o,ci(e,ie,t)}function w0(e){return ci(e,A|ie)}function D0(e,t){return t=typeof t=="function"?t:o,ci(e,A|ie,t)}function z0(e,t){return t==null||kc(e,t,bt(t))}function Ci(e,t){return e===t||e!==e&&t!==t}var T0=Vs(va),I0=Vs(function(e,t){return e>=t}),Ln=Oc(function(){return arguments}())?Oc:function(e){return ht(e)&&Qe.call(e,"callee")&&!bc.call(e,"callee")},Ne=le.isArray,k0=ic?Xt(ic):Nm;function Ft(e){return e!=null&&$s(e.length)&&!Vi(e)}function pt(e){return ht(e)&&Ft(e)}function E0(e){return e===!0||e===!1||ht(e)&&Et(e)==z}var rn=jf||nl,R0=nc?Xt(nc):Fm;function M0(e){return ht(e)&&e.nodeType===1&&!Kr(e)}function A0(e){if(e==null)return!0;if(Ft(e)&&(Ne(e)||typeof e=="string"||typeof e.splice=="function"||rn(e)||ir(e)||Ln(e)))return!e.length;var t=zt(e);if(t==ve||t==He)return!e.size;if(Hr(e))return!ba(e).length;for(var n in e)if(Qe.call(e,n))return!1;return!0}function P0(e,t){return Wr(e,t)}function O0(e,t,n){n=typeof n=="function"?n:o;var c=n?n(e,t):o;return c===o?Wr(e,t,o,n):!!c}function Xa(e){if(!ht(e))return!1;var t=Et(e);return t==ee||t==ne||typeof e.message=="string"&&typeof e.name=="string"&&!Kr(e)}function L0(e){return typeof e=="number"&&Cc(e)}function Vi(e){if(!ct(e))return!1;var t=Et(e);return t==oe||t==ae||t==D||t==Fe}function Wd(e){return typeof e=="number"&&e==Ve(e)}function $s(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=C}function ct(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function ht(e){return e!=null&&typeof e=="object"}var jd=rc?Xt(rc):Vm;function N0(e,t){return e===t||ya(e,t,Na(t))}function F0(e,t,n){return n=typeof n=="function"?n:o,ya(e,t,Na(t),n)}function B0(e){return Ud(e)&&e!=+e}function V0(e){if(Cg(e))throw new Le(r);return Lc(e)}function G0(e){return e===null}function q0(e){return e==null}function Ud(e){return typeof e=="number"||ht(e)&&Et(e)==_e}function Kr(e){if(!ht(e)||Et(e)!=be)return!1;var t=Ss(e);if(t===null)return!0;var n=Qe.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&vs.call(n)==Ff}var Ka=sc?Xt(sc):Gm;function W0(e){return Wd(e)&&e>=-C&&e<=C}var Hd=oc?Xt(oc):qm;function Ys(e){return typeof e=="string"||!Ne(e)&&ht(e)&&Et(e)==je}function $t(e){return typeof e=="symbol"||ht(e)&&Et(e)==Je}var ir=ac?Xt(ac):Wm;function j0(e){return e===o}function U0(e){return ht(e)&&zt(e)==mt}function H0(e){return ht(e)&&Et(e)==Ai}var X0=Vs(Sa),K0=Vs(function(e,t){return e<=t});function Xd(e){if(!e)return[];if(Ft(e))return Ys(e)?bi(e):Nt(e);if(Or&&e[Or])return zf(e[Or]());var t=zt(e),n=t==ve?ca:t==He?ms:nr;return n(e)}function Gi(e){if(!e)return e===0?e:0;if(e=ui(e),e===x||e===-x){var t=e<0?-1:1;return t*d}return e===e?e:0}function Ve(e){var t=Gi(e),n=t%1;return t===t?n?t-n:t:0}function Kd(e){return e?Mn(Ve(e),0,v):0}function ui(e){if(typeof e=="number")return e;if($t(e))return f;if(ct(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ct(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=pc(e);var n=Ip.test(e);return n||Ep.test(e)?cf(e.slice(2),n?2:8):Tp.test(e)?f:+e}function $d(e){return Ti(e,Bt(e))}function $0(e){return e?Mn(Ve(e),-C,C):e===0?e:0}function Ze(e){return e==null?"":Kt(e)}var Y0=Jn(function(e,t){if(Hr(t)||Ft(t)){Ti(t,bt(t),e);return}for(var n in t)Qe.call(t,n)&&Vr(e,n,t[n])}),Yd=Jn(function(e,t){Ti(t,Bt(t),e)}),Zs=Jn(function(e,t,n,c){Ti(t,Bt(t),e,c)}),Z0=Jn(function(e,t,n,c){Ti(t,bt(t),e,c)}),Q0=Fi(ma);function J0(e,t){var n=Qn(e);return t==null?n:Ic(n,t)}var ev=qe(function(e,t){e=tt(e);var n=-1,c=t.length,u=c>2?t[2]:o;for(u&&Rt(t[0],t[1],u)&&(c=1);++n<c;)for(var y=t[n],P=Bt(y),X=-1,re=P.length;++X<re;){var pe=P[X],fe=e[pe];(fe===o||Ci(fe,$n[pe])&&!Qe.call(e,pe))&&(e[pe]=y[pe])}return e}),tv=qe(function(e){return e.push(o,pd),Ht(Zd,o,e)});function iv(e,t){return cc(e,Me(t,3),zi)}function nv(e,t){return cc(e,Me(t,3),_a)}function rv(e,t){return e==null?e:ga(e,Me(t,3),Bt)}function sv(e,t){return e==null?e:Ac(e,Me(t,3),Bt)}function ov(e,t){return e&&zi(e,Me(t,3))}function av(e,t){return e&&_a(e,Me(t,3))}function lv(e){return e==null?[]:Ms(e,bt(e))}function cv(e){return e==null?[]:Ms(e,Bt(e))}function $a(e,t,n){var c=e==null?o:An(e,t);return c===o?n:c}function dv(e,t){return e!=null&&gd(e,t,Am)}function Ya(e,t){return e!=null&&gd(e,t,Pm)}var hv=ld(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=xs.call(t)),e[t]=n},Qa(Vt)),uv=ld(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=xs.call(t)),Qe.call(e,t)?e[t].push(n):e[t]=[n]},Me),pv=qe(qr);function bt(e){return Ft(e)?zc(e):ba(e)}function Bt(e){return Ft(e)?zc(e,!0):jm(e)}function fv(e,t){var n={};return t=Me(t,3),zi(e,function(c,u,y){Li(n,t(c,u,y),c)}),n}function mv(e,t){var n={};return t=Me(t,3),zi(e,function(c,u,y){Li(n,u,t(c,u,y))}),n}var gv=Jn(function(e,t,n){As(e,t,n)}),Zd=Jn(function(e,t,n,c){As(e,t,n,c)}),_v=Fi(function(e,t){var n={};if(e==null)return n;var c=!1;t=lt(t,function(y){return y=tn(y,e),c||(c=y.length>1),y}),Ti(e,Oa(e),n),c&&(n=ci(n,A|V|ie,hg));for(var u=t.length;u--;)Ta(n,t[u]);return n});function vv(e,t){return Qd(e,Ks(Me(t)))}var xv=Fi(function(e,t){return e==null?{}:Hm(e,t)});function Qd(e,t){if(e==null)return{};var n=lt(Oa(e),function(c){return[c]});return t=Me(t),Wc(e,n,function(c,u){return t(c,u[0])})}function yv(e,t,n){t=tn(t,e);var c=-1,u=t.length;for(u||(u=1,e=o);++c<u;){var y=e==null?o:e[Ii(t[c])];y===o&&(c=u,y=n),e=Vi(y)?y.call(e):y}return e}function bv(e,t,n){return e==null?e:jr(e,t,n)}function Sv(e,t,n,c){return c=typeof c=="function"?c:o,e==null?e:jr(e,t,n,c)}var Jd=hd(bt),eh=hd(Bt);function Cv(e,t,n){var c=Ne(e),u=c||rn(e)||ir(e);if(t=Me(t,4),n==null){var y=e&&e.constructor;u?n=c?new y:[]:ct(e)?n=Vi(y)?Qn(Ss(e)):{}:n={}}return(u?oi:zi)(e,function(P,X,re){return t(n,P,X,re)}),n}function wv(e,t){return e==null?!0:Ta(e,t)}function Dv(e,t,n){return e==null?e:Kc(e,t,Ea(n))}function zv(e,t,n,c){return c=typeof c=="function"?c:o,e==null?e:Kc(e,t,Ea(n),c)}function nr(e){return e==null?[]:la(e,bt(e))}function Tv(e){return e==null?[]:la(e,Bt(e))}function Iv(e,t,n){return n===o&&(n=t,t=o),n!==o&&(n=ui(n),n=n===n?n:0),t!==o&&(t=ui(t),t=t===t?t:0),Mn(ui(e),t,n)}function kv(e,t,n){return t=Gi(t),n===o?(n=t,t=0):n=Gi(n),e=ui(e),Om(e,t,n)}function Ev(e,t,n){if(n&&typeof n!="boolean"&&Rt(e,t,n)&&(t=n=o),n===o&&(typeof t=="boolean"?(n=t,t=o):typeof e=="boolean"&&(n=e,e=o)),e===o&&t===o?(e=0,t=1):(e=Gi(e),t===o?(t=e,e=0):t=Gi(t)),e>t){var c=e;e=t,t=c}if(n||e%1||t%1){var u=wc();return Dt(e+u*(t-e+lf("1e-"+((u+"").length-1))),t)}return wa(e,t)}var Rv=er(function(e,t,n){return t=t.toLowerCase(),e+(n?th(t):t)});function th(e){return Za(Ze(e).toLowerCase())}function ih(e){return e=Ze(e),e&&e.replace(Mp,bf).replace(Zp,"")}function Mv(e,t,n){e=Ze(e),t=Kt(t);var c=e.length;n=n===o?c:Mn(Ve(n),0,c);var u=n;return n-=t.length,n>=0&&e.slice(n,u)==t}function Av(e){return e=Ze(e),e&&up.test(e)?e.replace(Al,Sf):e}function Pv(e){return e=Ze(e),e&&vp.test(e)?e.replace(Ho,"\\$&"):e}var Ov=er(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Lv=er(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Nv=sd("toLowerCase");function Fv(e,t,n){e=Ze(e),t=Ve(t);var c=t?Kn(e):0;if(!t||c>=t)return e;var u=(t-c)/2;return Bs(zs(u),n)+e+Bs(Ds(u),n)}function Bv(e,t,n){e=Ze(e),t=Ve(t);var c=t?Kn(e):0;return t&&c<t?e+Bs(t-c,n):e}function Vv(e,t,n){e=Ze(e),t=Ve(t);var c=t?Kn(e):0;return t&&c<t?Bs(t-c,n)+e:e}function Gv(e,t,n){return n||t==null?t=0:t&&(t=+t),Kf(Ze(e).replace(Xo,""),t||0)}function qv(e,t,n){return(n?Rt(e,t,n):t===o)?t=1:t=Ve(t),Da(Ze(e),t)}function Wv(){var e=arguments,t=Ze(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var jv=er(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function Uv(e,t,n){return n&&typeof n!="number"&&Rt(e,t,n)&&(t=n=o),n=n===o?v:n>>>0,n?(e=Ze(e),e&&(typeof t=="string"||t!=null&&!Ka(t))&&(t=Kt(t),!t&&Xn(e))?nn(bi(e),0,n):e.split(t,n)):[]}var Hv=er(function(e,t,n){return e+(n?" ":"")+Za(t)});function Xv(e,t,n){return e=Ze(e),n=n==null?0:Mn(Ve(n),0,e.length),t=Kt(t),e.slice(n,n+t.length)==t}function Kv(e,t,n){var c=_.templateSettings;n&&Rt(e,t,n)&&(t=o),e=Ze(e),t=Zs({},t,c,ud);var u=Zs({},t.imports,c.imports,ud),y=bt(u),P=la(u,y),X,re,pe=0,fe=t.interpolate||ds,me="__p += '",Te=da((t.escape||ds).source+"|"+fe.source+"|"+(fe===Pl?zp:ds).source+"|"+(t.evaluate||ds).source+"|$","g"),Ee="//# sourceURL="+(Qe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++nf+"]")+`
`;e.replace(Te,function(Pe,Ue,Ke,Yt,Mt,Zt){return Ke||(Ke=Yt),me+=e.slice(pe,Zt).replace(Ap,Cf),Ue&&(X=!0,me+=`' +
__e(`+Ue+`) +
'`),Mt&&(re=!0,me+=`';
`+Mt+`;
__p += '`),Ke&&(me+=`' +
((__t = (`+Ke+`)) == null ? '' : __t) +
'`),pe=Zt+Pe.length,Pe}),me+=`';
`;var Ae=Qe.call(t,"variable")&&t.variable;if(!Ae)me=`with (obj) {
`+me+`
}
`;else if(wp.test(Ae))throw new Le(l);me=(re?me.replace(lp,""):me).replace(cp,"$1").replace(dp,"$1;"),me="function("+(Ae||"obj")+`) {
`+(Ae?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(X?", __e = _.escape":"")+(re?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+me+`return __p
}`;var Ge=rh(function(){return Ye(y,Ee+"return "+me).apply(o,P)});if(Ge.source=me,Xa(Ge))throw Ge;return Ge}function $v(e){return Ze(e).toLowerCase()}function Yv(e){return Ze(e).toUpperCase()}function Zv(e,t,n){if(e=Ze(e),e&&(n||t===o))return pc(e);if(!e||!(t=Kt(t)))return e;var c=bi(e),u=bi(t),y=fc(c,u),P=mc(c,u)+1;return nn(c,y,P).join("")}function Qv(e,t,n){if(e=Ze(e),e&&(n||t===o))return e.slice(0,_c(e)+1);if(!e||!(t=Kt(t)))return e;var c=bi(e),u=mc(c,bi(t))+1;return nn(c,0,u).join("")}function Jv(e,t,n){if(e=Ze(e),e&&(n||t===o))return e.replace(Xo,"");if(!e||!(t=Kt(t)))return e;var c=bi(e),u=fc(c,bi(t));return nn(c,u).join("")}function ex(e,t){var n=se,c=j;if(ct(t)){var u="separator"in t?t.separator:u;n="length"in t?Ve(t.length):n,c="omission"in t?Kt(t.omission):c}e=Ze(e);var y=e.length;if(Xn(e)){var P=bi(e);y=P.length}if(n>=y)return e;var X=n-Kn(c);if(X<1)return c;var re=P?nn(P,0,X).join(""):e.slice(0,X);if(u===o)return re+c;if(P&&(X+=re.length-X),Ka(u)){if(e.slice(X).search(u)){var pe,fe=re;for(u.global||(u=da(u.source,Ze(Ol.exec(u))+"g")),u.lastIndex=0;pe=u.exec(fe);)var me=pe.index;re=re.slice(0,me===o?X:me)}}else if(e.indexOf(Kt(u),X)!=X){var Te=re.lastIndexOf(u);Te>-1&&(re=re.slice(0,Te))}return re+c}function tx(e){return e=Ze(e),e&&hp.test(e)?e.replace(Ml,Ef):e}var ix=er(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Za=sd("toUpperCase");function nh(e,t,n){return e=Ze(e),t=n?o:t,t===o?Df(e)?Af(e):gf(e):e.match(t)||[]}var rh=qe(function(e,t){try{return Ht(e,o,t)}catch(n){return Xa(n)?n:new Le(n)}}),nx=Fi(function(e,t){return oi(t,function(n){n=Ii(n),Li(e,n,Ua(e[n],e))}),e});function rx(e){var t=e==null?0:e.length,n=Me();return e=t?lt(e,function(c){if(typeof c[1]!="function")throw new ai(s);return[n(c[0]),c[1]]}):[],qe(function(c){for(var u=-1;++u<t;){var y=e[u];if(Ht(y[0],this,c))return Ht(y[1],this,c)}})}function sx(e){return Em(ci(e,A))}function Qa(e){return function(){return e}}function ox(e,t){return e==null||e!==e?t:e}var ax=ad(),lx=ad(!0);function Vt(e){return e}function Ja(e){return Nc(typeof e=="function"?e:ci(e,A))}function cx(e){return Bc(ci(e,A))}function dx(e,t){return Vc(e,ci(t,A))}var hx=qe(function(e,t){return function(n){return qr(n,e,t)}}),ux=qe(function(e,t){return function(n){return qr(e,n,t)}});function el(e,t,n){var c=bt(t),u=Ms(t,c);n==null&&!(ct(t)&&(u.length||!c.length))&&(n=t,t=e,e=this,u=Ms(t,bt(t)));var y=!(ct(n)&&"chain"in n)||!!n.chain,P=Vi(e);return oi(u,function(X){var re=t[X];e[X]=re,P&&(e.prototype[X]=function(){var pe=this.__chain__;if(y||pe){var fe=e(this.__wrapped__),me=fe.__actions__=Nt(this.__actions__);return me.push({func:re,args:arguments,thisArg:e}),fe.__chain__=pe,fe}return re.apply(e,$i([this.value()],arguments))})}),e}function px(){return yt._===this&&(yt._=Bf),this}function tl(){}function fx(e){return e=Ve(e),qe(function(t){return Gc(t,e)})}var mx=Ma(lt),gx=Ma(lc),_x=Ma(na);function sh(e){return Ba(e)?ra(Ii(e)):Xm(e)}function vx(e){return function(t){return e==null?o:An(e,t)}}var xx=cd(),yx=cd(!0);function il(){return[]}function nl(){return!1}function bx(){return{}}function Sx(){return""}function Cx(){return!0}function wx(e,t){if(e=Ve(e),e<1||e>C)return[];var n=v,c=Dt(e,v);t=Me(t),e-=v;for(var u=aa(c,t);++n<e;)t(n);return u}function Dx(e){return Ne(e)?lt(e,Ii):$t(e)?[e]:Nt(Dd(Ze(e)))}function zx(e){var t=++Nf;return Ze(e)+t}var Tx=Fs(function(e,t){return e+t},0),Ix=Aa("ceil"),kx=Fs(function(e,t){return e/t},1),Ex=Aa("floor");function Rx(e){return e&&e.length?Rs(e,Vt,va):o}function Mx(e,t){return e&&e.length?Rs(e,Me(t,2),va):o}function Ax(e){return hc(e,Vt)}function Px(e,t){return hc(e,Me(t,2))}function Ox(e){return e&&e.length?Rs(e,Vt,Sa):o}function Lx(e,t){return e&&e.length?Rs(e,Me(t,2),Sa):o}var Nx=Fs(function(e,t){return e*t},1),Fx=Aa("round"),Bx=Fs(function(e,t){return e-t},0);function Vx(e){return e&&e.length?oa(e,Vt):0}function Gx(e,t){return e&&e.length?oa(e,Me(t,2)):0}return _.after=c0,_.ary=Ld,_.assign=Y0,_.assignIn=Yd,_.assignInWith=Zs,_.assignWith=Z0,_.at=Q0,_.before=Nd,_.bind=Ua,_.bindAll=nx,_.bindKey=Fd,_.castArray=b0,_.chain=Ad,_.chunk=Eg,_.compact=Rg,_.concat=Mg,_.cond=rx,_.conforms=sx,_.constant=Qa,_.countBy=V_,_.create=J0,_.curry=Bd,_.curryRight=Vd,_.debounce=Gd,_.defaults=ev,_.defaultsDeep=tv,_.defer=d0,_.delay=h0,_.difference=Ag,_.differenceBy=Pg,_.differenceWith=Og,_.drop=Lg,_.dropRight=Ng,_.dropRightWhile=Fg,_.dropWhile=Bg,_.fill=Vg,_.filter=q_,_.flatMap=U_,_.flatMapDeep=H_,_.flatMapDepth=X_,_.flatten=kd,_.flattenDeep=Gg,_.flattenDepth=qg,_.flip=u0,_.flow=ax,_.flowRight=lx,_.fromPairs=Wg,_.functions=lv,_.functionsIn=cv,_.groupBy=K_,_.initial=Ug,_.intersection=Hg,_.intersectionBy=Xg,_.intersectionWith=Kg,_.invert=hv,_.invertBy=uv,_.invokeMap=Y_,_.iteratee=Ja,_.keyBy=Z_,_.keys=bt,_.keysIn=Bt,_.map=Us,_.mapKeys=fv,_.mapValues=mv,_.matches=cx,_.matchesProperty=dx,_.memoize=Xs,_.merge=gv,_.mergeWith=Zd,_.method=hx,_.methodOf=ux,_.mixin=el,_.negate=Ks,_.nthArg=fx,_.omit=_v,_.omitBy=vv,_.once=p0,_.orderBy=Q_,_.over=mx,_.overArgs=f0,_.overEvery=gx,_.overSome=_x,_.partial=Ha,_.partialRight=qd,_.partition=J_,_.pick=xv,_.pickBy=Qd,_.property=sh,_.propertyOf=vx,_.pull=Qg,_.pullAll=Rd,_.pullAllBy=Jg,_.pullAllWith=e_,_.pullAt=t_,_.range=xx,_.rangeRight=yx,_.rearg=m0,_.reject=i0,_.remove=i_,_.rest=g0,_.reverse=Wa,_.sampleSize=r0,_.set=bv,_.setWith=Sv,_.shuffle=s0,_.slice=n_,_.sortBy=l0,_.sortedUniq=d_,_.sortedUniqBy=h_,_.split=Uv,_.spread=_0,_.tail=u_,_.take=p_,_.takeRight=f_,_.takeRightWhile=m_,_.takeWhile=g_,_.tap=R_,_.throttle=v0,_.thru=js,_.toArray=Xd,_.toPairs=Jd,_.toPairsIn=eh,_.toPath=Dx,_.toPlainObject=$d,_.transform=Cv,_.unary=x0,_.union=__,_.unionBy=v_,_.unionWith=x_,_.uniq=y_,_.uniqBy=b_,_.uniqWith=S_,_.unset=wv,_.unzip=ja,_.unzipWith=Md,_.update=Dv,_.updateWith=zv,_.values=nr,_.valuesIn=Tv,_.without=C_,_.words=nh,_.wrap=y0,_.xor=w_,_.xorBy=D_,_.xorWith=z_,_.zip=T_,_.zipObject=I_,_.zipObjectDeep=k_,_.zipWith=E_,_.entries=Jd,_.entriesIn=eh,_.extend=Yd,_.extendWith=Zs,el(_,_),_.add=Tx,_.attempt=rh,_.camelCase=Rv,_.capitalize=th,_.ceil=Ix,_.clamp=Iv,_.clone=S0,_.cloneDeep=w0,_.cloneDeepWith=D0,_.cloneWith=C0,_.conformsTo=z0,_.deburr=ih,_.defaultTo=ox,_.divide=kx,_.endsWith=Mv,_.eq=Ci,_.escape=Av,_.escapeRegExp=Pv,_.every=G_,_.find=W_,_.findIndex=Td,_.findKey=iv,_.findLast=j_,_.findLastIndex=Id,_.findLastKey=nv,_.floor=Ex,_.forEach=Pd,_.forEachRight=Od,_.forIn=rv,_.forInRight=sv,_.forOwn=ov,_.forOwnRight=av,_.get=$a,_.gt=T0,_.gte=I0,_.has=dv,_.hasIn=Ya,_.head=Ed,_.identity=Vt,_.includes=$_,_.indexOf=jg,_.inRange=kv,_.invoke=pv,_.isArguments=Ln,_.isArray=Ne,_.isArrayBuffer=k0,_.isArrayLike=Ft,_.isArrayLikeObject=pt,_.isBoolean=E0,_.isBuffer=rn,_.isDate=R0,_.isElement=M0,_.isEmpty=A0,_.isEqual=P0,_.isEqualWith=O0,_.isError=Xa,_.isFinite=L0,_.isFunction=Vi,_.isInteger=Wd,_.isLength=$s,_.isMap=jd,_.isMatch=N0,_.isMatchWith=F0,_.isNaN=B0,_.isNative=V0,_.isNil=q0,_.isNull=G0,_.isNumber=Ud,_.isObject=ct,_.isObjectLike=ht,_.isPlainObject=Kr,_.isRegExp=Ka,_.isSafeInteger=W0,_.isSet=Hd,_.isString=Ys,_.isSymbol=$t,_.isTypedArray=ir,_.isUndefined=j0,_.isWeakMap=U0,_.isWeakSet=H0,_.join=$g,_.kebabCase=Ov,_.last=hi,_.lastIndexOf=Yg,_.lowerCase=Lv,_.lowerFirst=Nv,_.lt=X0,_.lte=K0,_.max=Rx,_.maxBy=Mx,_.mean=Ax,_.meanBy=Px,_.min=Ox,_.minBy=Lx,_.stubArray=il,_.stubFalse=nl,_.stubObject=bx,_.stubString=Sx,_.stubTrue=Cx,_.multiply=Nx,_.nth=Zg,_.noConflict=px,_.noop=tl,_.now=Hs,_.pad=Fv,_.padEnd=Bv,_.padStart=Vv,_.parseInt=Gv,_.random=Ev,_.reduce=e0,_.reduceRight=t0,_.repeat=qv,_.replace=Wv,_.result=yv,_.round=Fx,_.runInContext=te,_.sample=n0,_.size=o0,_.snakeCase=jv,_.some=a0,_.sortedIndex=r_,_.sortedIndexBy=s_,_.sortedIndexOf=o_,_.sortedLastIndex=a_,_.sortedLastIndexBy=l_,_.sortedLastIndexOf=c_,_.startCase=Hv,_.startsWith=Xv,_.subtract=Bx,_.sum=Vx,_.sumBy=Gx,_.template=Kv,_.times=wx,_.toFinite=Gi,_.toInteger=Ve,_.toLength=Kd,_.toLower=$v,_.toNumber=ui,_.toSafeInteger=$0,_.toString=Ze,_.toUpper=Yv,_.trim=Zv,_.trimEnd=Qv,_.trimStart=Jv,_.truncate=ex,_.unescape=tx,_.uniqueId=zx,_.upperCase=ix,_.upperFirst=Za,_.each=Pd,_.eachRight=Od,_.first=Ed,el(_,function(){var e={};return zi(_,function(t,n){Qe.call(_.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),_.VERSION=a,oi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){_[e].placeholder=_}),oi(["drop","take"],function(e,t){Xe.prototype[e]=function(n){n=n===o?1:_t(Ve(n),0);var c=this.__filtered__&&!t?new Xe(this):this.clone();return c.__filtered__?c.__takeCount__=Dt(n,c.__takeCount__):c.__views__.push({size:Dt(n,v),type:e+(c.__dir__<0?"Right":"")}),c},Xe.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}}),oi(["filter","map","takeWhile"],function(e,t){var n=t+1,c=n==g||n==p;Xe.prototype[e]=function(u){var y=this.clone();return y.__iteratees__.push({iteratee:Me(u,3),type:n}),y.__filtered__=y.__filtered__||c,y}}),oi(["head","last"],function(e,t){var n="take"+(t?"Right":"");Xe.prototype[e]=function(){return this[n](1).value()[0]}}),oi(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Xe.prototype[e]=function(){return this.__filtered__?new Xe(this):this[n](1)}}),Xe.prototype.compact=function(){return this.filter(Vt)},Xe.prototype.find=function(e){return this.filter(e).head()},Xe.prototype.findLast=function(e){return this.reverse().find(e)},Xe.prototype.invokeMap=qe(function(e,t){return typeof e=="function"?new Xe(this):this.map(function(n){return qr(n,e,t)})}),Xe.prototype.reject=function(e){return this.filter(Ks(Me(e)))},Xe.prototype.slice=function(e,t){e=Ve(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Xe(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==o&&(t=Ve(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},Xe.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Xe.prototype.toArray=function(){return this.take(v)},zi(Xe.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),c=/^(?:head|last)$/.test(t),u=_[c?"take"+(t=="last"?"Right":""):t],y=c||/^find/.test(t);u&&(_.prototype[t]=function(){var P=this.__wrapped__,X=c?[1]:arguments,re=P instanceof Xe,pe=X[0],fe=re||Ne(P),me=function(Ue){var Ke=u.apply(_,$i([Ue],X));return c&&Te?Ke[0]:Ke};fe&&n&&typeof pe=="function"&&pe.length!=1&&(re=fe=!1);var Te=this.__chain__,Ee=!!this.__actions__.length,Ae=y&&!Te,Ge=re&&!Ee;if(!y&&fe){P=Ge?P:new Xe(this);var Pe=e.apply(P,X);return Pe.__actions__.push({func:js,args:[me],thisArg:o}),new li(Pe,Te)}return Ae&&Ge?e.apply(this,X):(Pe=this.thru(me),Ae?c?Pe.value()[0]:Pe.value():Pe)})}),oi(["pop","push","shift","sort","splice","unshift"],function(e){var t=gs[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",c=/^(?:pop|shift)$/.test(e);_.prototype[e]=function(){var u=arguments;if(c&&!this.__chain__){var y=this.value();return t.apply(Ne(y)?y:[],u)}return this[n](function(P){return t.apply(Ne(P)?P:[],u)})}}),zi(Xe.prototype,function(e,t){var n=_[t];if(n){var c=n.name+"";Qe.call(Zn,c)||(Zn[c]=[]),Zn[c].push({name:t,func:n})}}),Zn[Ns(o,F).name]=[{name:"wrapper",func:o}],Xe.prototype.clone=tm,Xe.prototype.reverse=im,Xe.prototype.value=nm,_.prototype.at=M_,_.prototype.chain=A_,_.prototype.commit=P_,_.prototype.next=O_,_.prototype.plant=N_,_.prototype.reverse=F_,_.prototype.toJSON=_.prototype.valueOf=_.prototype.value=B_,_.prototype.first=_.prototype.head,Or&&(_.prototype[Or]=L_),_},Zi=Pf();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(yt._=Zi,define(function(){return Zi})):In?((In.exports=Zi)._=Zi,Jo._=Zi):yt._=Zi}).call(kr)});var ip=lh((gC,Fo)=>{"use strict";(function(o){typeof Fo=="object"&&Fo.exports?(o.default=o,Fo.exports=o):typeof define=="function"&&define.amd?define("highcharts/modules/gantt",["highcharts"],function(a){return o(a),o.Highcharts=a,o}):o(typeof Highcharts<"u"?Highcharts:void 0)})(function(o){"use strict";var a=o?o._modules:{};function i(r,s,l,h){r.hasOwnProperty(s)||(r[s]=h.apply(null,l),typeof CustomEvent=="function"&&o.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:s,module:r[s]}})))}i(a,"Extensions/ArrowSymbols.js",[],function(){function r(m,w,A,V){return[["M",m,w+V/2],["L",m+A,w],["L",m,w+V/2],["L",m+A,w+V]]}function s(m,w,A,V){return r(m,w,A/2,V)}function l(m,w,A,V){return[["M",m+A,w],["L",m,w+V/2],["L",m+A,w+V],["Z"]]}function h(m,w,A,V){return l(m,w,A/2,V)}return{compose:function(m){let w=m.prototype.symbols;w.arrow=r,w["arrow-filled"]=l,w["arrow-filled-half"]=h,w["arrow-half"]=s,w["triangle-left"]=l,w["triangle-left-half"]=h}}}),i(a,"Gantt/Connection.js",[a["Core/Globals.js"],a["Core/Utilities.js"]],function(r,s){let{defined:l,error:h,merge:m,objectEach:w}=s,A=r.deg2rad,V=Math.max,ie=Math.min;return class{constructor(Z,$,K){this.init(Z,$,K)}init(Z,$,K){this.fromPoint=Z,this.toPoint=$,this.options=K,this.chart=Z.series.chart,this.pathfinder=this.chart.pathfinder}renderPath(Z,$){let K=this.chart,F=K.styledMode,N=this.pathfinder,E={},L=this.graphics&&this.graphics.path;N.group||(N.group=K.renderer.g().addClass("highcharts-pathfinder-group").attr({zIndex:-1}).add(K.seriesGroup)),N.group.translate(K.plotLeft,K.plotTop),L&&L.renderer||(L=K.renderer.path().add(N.group),F||L.attr({opacity:0})),L.attr($),E.d=Z,F||(E.opacity=1),L.animate(E),this.graphics=this.graphics||{},this.graphics.path=L}addMarker(Z,$,K){let F,N,E,L,Q,R,G,q,Y=this.fromPoint.series.chart,se=Y.pathfinder,j=Y.renderer,U=Z==="start"?this.fromPoint:this.toPoint,de=U.getPathfinderAnchorPoint($);$.enabled&&((q=Z==="start"?K[1]:K[K.length-2])&&q[0]==="M"||q[0]==="L")&&(G={x:q[1],y:q[2]},N=U.getRadiansToVector(G,de),F=U.getMarkerVector(N,$.radius,de),E=-N/A,$.width&&$.height?(Q=$.width,R=$.height):Q=R=2*$.radius,this.graphics=this.graphics||{},L={x:F.x-Q/2,y:F.y-R/2,width:Q,height:R,rotation:E,rotationOriginX:F.x,rotationOriginY:F.y},this.graphics[Z]?this.graphics[Z].animate(L):(this.graphics[Z]=j.symbol($.symbol).addClass("highcharts-point-connecting-path-"+Z+"-marker highcharts-color-"+this.fromPoint.colorIndex).attr(L).add(se.group),j.styledMode||this.graphics[Z].attr({fill:$.color||this.fromPoint.color,stroke:$.lineColor,"stroke-width":$.lineWidth,opacity:0}).animate({opacity:1},U.series.options.animation)))}getPath(Z){let $=this.pathfinder,K=this.chart,F=$.algorithms[Z.type],N=$.chartObstacles;return typeof F!="function"?(h('"'+Z.type+'" is not a Pathfinder algorithm.'),{path:[],obstacles:[]}):(F.requiresObstacles&&!N&&(N=$.chartObstacles=$.getChartObstacles(Z),K.options.connectors.algorithmMargin=Z.algorithmMargin,$.chartObstacleMetrics=$.getObstacleMetrics(N)),F(this.fromPoint.getPathfinderAnchorPoint(Z.startMarker),this.toPoint.getPathfinderAnchorPoint(Z.endMarker),m({chartObstacles:N,lineObstacles:$.lineObstacles||[],obstacleMetrics:$.chartObstacleMetrics,hardBounds:{xMin:0,xMax:K.plotWidth,yMin:0,yMax:K.plotHeight},obstacleOptions:{margin:Z.algorithmMargin},startDirectionX:$.getAlgorithmStartDirection(Z.startMarker)},Z)))}render(){let Z=this.fromPoint,$=Z.series,K=$.chart,F=K.pathfinder,N={},E=m(K.options.connectors,$.options.connectors,Z.options.connectors,this.options);!K.styledMode&&(N.stroke=E.lineColor||Z.color,N["stroke-width"]=E.lineWidth,E.dashStyle&&(N.dashstyle=E.dashStyle)),N.class="highcharts-point-connecting-path highcharts-color-"+Z.colorIndex,l((E=m(N,E)).marker.radius)||(E.marker.radius=ie(V(Math.ceil((E.algorithmMargin||8)/2)-1,1),5));let L=this.getPath(E),Q=L.path;L.obstacles&&(F.lineObstacles=F.lineObstacles||[],F.lineObstacles=F.lineObstacles.concat(L.obstacles)),this.renderPath(Q,N),this.addMarker("start",m(E.marker,E.startMarker),Q),this.addMarker("end",m(E.marker,E.endMarker),Q)}destroy(){this.graphics&&(w(this.graphics,function(Z){Z.destroy()}),delete this.graphics)}}}),i(a,"Extensions/CurrentDateIndication.js",[a["Core/Globals.js"],a["Core/Utilities.js"]],function(r,s){let{composed:l}=r,{addEvent:h,merge:m,pushUnique:w,wrap:A}=s,V={color:"#ccd3ff",width:2,label:{format:"%a, %b %d %Y, %H:%M",formatter:function(K,F){return this.axis.chart.time.dateFormat(F||"",K)},rotation:0,style:{fontSize:"0.7em"}}};function ie(){let K=this.options,F=K.currentDateIndicator;if(F){let N=typeof F=="object"?m(V,F):m(V);N.value=Date.now(),N.className="highcharts-current-date-indicator",K.plotLines||(K.plotLines=[]),K.plotLines.push(N)}}function Z(){this.label&&this.label.attr({text:this.getLabelText(this.options.label)})}function $(K,F){let N=this.options;return N&&N.className&&N.className.indexOf("highcharts-current-date-indicator")!==-1&&N.label&&typeof N.label.formatter=="function"?(N.value=Date.now(),N.label.formatter.call(this,N.value,N.label.format)):K.call(this,F)}return{compose:function(K,F){w(l,"CurrentDateIndication")&&(h(K,"afterSetOptions",ie),h(F,"render",Z),A(F.prototype,"getLabelText",$))}}}),i(a,"Core/Chart/GanttChart.js",[a["Core/Chart/Chart.js"],a["Core/Defaults.js"],a["Core/Utilities.js"]],function(r,s,l){var h;let{defaultOptions:m}=s,{isArray:w,merge:A,splat:V}=l;class ie extends r{init($,K){let F,N=$.xAxis,E=$.yAxis;$.xAxis=$.yAxis=void 0;let L=A(!0,{chart:{type:"gantt"},title:{text:""},legend:{enabled:!1},navigator:{series:{type:"gantt"},yAxis:{type:"category"}}},$,{isGantt:!0});$.xAxis=N,$.yAxis=E,L.xAxis=(w($.xAxis)?$.xAxis:[$.xAxis||{},{}]).map((Q,R)=>(R===1&&(F=0),A({grid:{borderColor:"#cccccc",enabled:!0},opposite:m.xAxis?.opposite??Q.opposite??!0,linkedTo:F},Q,{type:"datetime"}))),L.yAxis=V($.yAxis||{}).map(Q=>A({grid:{borderColor:"#cccccc",enabled:!0},staticScale:50,reversed:!0,type:Q.categories?Q.type:"treegrid"},Q)),super.init(L,K)}}return(h=ie||(ie={})).ganttChart=function(Z,$,K){return new h(Z,$,K)},ie}),i(a,"Stock/Navigator/ChartNavigatorComposition.js",[a["Core/Globals.js"],a["Core/Utilities.js"]],function(r,s){let l,{isTouchDevice:h}=r,{addEvent:m,merge:w,pick:A}=s,V=[];function ie(){this.navigator&&this.navigator.setBaseSeries(null,!1)}function Z(){let L,Q,R,G=this.legend,q=this.navigator;if(q){L=G&&G.options,Q=q.xAxis,R=q.yAxis;let{scrollbarHeight:Y,scrollButtonSize:se}=q;this.inverted?(q.left=q.opposite?this.chartWidth-Y-q.height:this.spacing[3]+Y,q.top=this.plotTop+se):(q.left=A(Q.left,this.plotLeft+se),q.top=q.navigatorOptions.top||this.chartHeight-q.height-Y-(this.scrollbar?.options.margin||0)-this.spacing[2]-(this.rangeSelector&&this.extraBottomMargin?this.rangeSelector.getHeight():0)-(L&&L.verticalAlign==="bottom"&&L.layout!=="proximate"&&L.enabled&&!L.floating?G.legendHeight+A(L.margin,10):0)-(this.titleOffset?this.titleOffset[2]:0)),Q&&R&&(this.inverted?Q.options.left=R.options.left=q.left:Q.options.top=R.options.top=q.top,Q.setAxisSize(),R.setAxisSize())}}function $(L){!this.navigator&&!this.scroller&&(this.options.navigator.enabled||this.options.scrollbar.enabled)&&(this.scroller=this.navigator=new l(this),A(L.redraw,!0)&&this.redraw(L.animation))}function K(){let L=this.options;(L.navigator.enabled||L.scrollbar.enabled)&&(this.scroller=this.navigator=new l(this))}function F(){let L=this.options,Q=L.navigator,R=L.rangeSelector;if((Q&&Q.enabled||R&&R.enabled)&&(!h&&this.zooming.type==="x"||h&&this.zooming.pinchType==="x"))return!1}function N(L){let Q=L.navigator;if(Q&&L.xAxis[0]){let R=L.xAxis[0].getExtremes();Q.render(R.min,R.max)}}function E(L){let Q=L.options.navigator||{},R=L.options.scrollbar||{};!this.navigator&&!this.scroller&&(Q.enabled||R.enabled)&&(w(!0,this.options.navigator,Q),w(!0,this.options.scrollbar,R),delete L.options.navigator,delete L.options.scrollbar)}return{compose:function(L,Q){if(s.pushUnique(V,L)){let R=L.prototype;l=Q,R.callbacks.push(N),m(L,"afterAddSeries",ie),m(L,"afterSetChartSize",Z),m(L,"afterUpdate",$),m(L,"beforeRender",K),m(L,"beforeShowResetZoom",F),m(L,"update",E)}}}}),i(a,"Core/Axis/NavigatorAxisComposition.js",[a["Core/Globals.js"],a["Core/Utilities.js"]],function(r,s){let{isTouchDevice:l}=r,{addEvent:h,correctFloat:m,defined:w,isNumber:A,pick:V}=s;function ie(){this.navigatorAxis||(this.navigatorAxis=new $(this))}function Z(K){let F,N=this.chart,E=N.options,L=E.navigator,Q=this.navigatorAxis,R=N.zooming.pinchType,G=E.rangeSelector,q=N.zooming.type;if(this.isXAxis&&(L?.enabled||G?.enabled)){if(q==="y"&&K.trigger==="zoom")F=!1;else if((K.trigger==="zoom"&&q==="xy"||l&&R==="xy")&&this.options.range){let Y=Q.previousZoom;w(K.min)?Q.previousZoom=[this.min,this.max]:Y&&(K.min=Y[0],K.max=Y[1],Q.previousZoom=void 0)}}F!==void 0&&K.preventDefault()}class ${static compose(F){F.keepProps.includes("navigatorAxis")||(F.keepProps.push("navigatorAxis"),h(F,"init",ie),h(F,"setExtremes",Z))}constructor(F){this.axis=F}destroy(){this.axis=void 0}toFixedRange(F,N,E,L){let Q=this.axis,R=(Q.pointRange||0)/2,G=V(E,Q.translate(F,!0,!Q.horiz)),q=V(L,Q.translate(N,!0,!Q.horiz));return w(E)||(G=m(G+R)),w(L)||(q=m(q-R)),A(G)&&A(q)||(G=q=void 0),{min:G,max:q}}}return $}),i(a,"Stock/Navigator/NavigatorDefaults.js",[a["Core/Color/Color.js"],a["Core/Series/SeriesRegistry.js"]],function(r,s){let{parse:l}=r,{seriesTypes:h}=s;return{height:40,margin:25,maskInside:!0,handles:{width:7,borderRadius:0,height:15,symbols:["navigator-handle","navigator-handle"],enabled:!0,lineWidth:1,backgroundColor:"#f2f2f2",borderColor:"#999999"},maskFill:l("#667aff").setOpacity(.3).get(),outlineColor:"#999999",outlineWidth:1,series:{type:h.areaspline===void 0?"line":"areaspline",fillOpacity:.05,lineWidth:1,compare:null,sonification:{enabled:!1},dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,firstAnchor:"firstPoint",anchor:"middle",lastAnchor:"lastPoint",units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2,3,4]],["week",[1,2,3]],["month",[1,3,6]],["year",null]]},dataLabels:{enabled:!1,zIndex:2},id:"highcharts-navigator-series",className:"highcharts-navigator-series",lineColor:null,marker:{enabled:!1},threshold:null},xAxis:{className:"highcharts-navigator-xaxis",tickLength:0,lineWidth:0,gridLineColor:"#e6e6e6",id:"navigator-x-axis",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#000000",fontSize:"0.7em",opacity:.6,textOutline:"2px contrast"},x:3,y:-4},crosshair:!1},yAxis:{className:"highcharts-navigator-yaxis",gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:.1,id:"navigator-y-axis",maxPadding:.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickLength:0,tickWidth:0}}}),i(a,"Stock/Navigator/NavigatorSymbols.js",[a["Core/Renderer/SVG/Symbols.js"],a["Core/Utilities.js"]],function(r,s){let{relativeLength:l}=s;return{"navigator-handle":function(h,m,w,A,V={}){let ie=V.width?V.width/2:w,Z=l(V.borderRadius||0,Math.min(2*ie,A));return[["M",-1.5,(A=V.height||A)/2-3.5],["L",-1.5,A/2+4.5],["M",.5,A/2-3.5],["L",.5,A/2+4.5],...r.rect(-ie-1,.5,2*ie+1,A,{r:Z})]}}}),i(a,"Stock/Utilities/StockUtilities.js",[a["Core/Utilities.js"]],function(r){let{defined:s}=r;return{setFixedRange:function(l){let h=this.xAxis[0];s(h.dataMax)&&s(h.dataMin)&&l?this.fixedRange=Math.min(l,h.dataMax-h.dataMin):this.fixedRange=l}}}),i(a,"Stock/Navigator/NavigatorComposition.js",[a["Core/Defaults.js"],a["Core/Globals.js"],a["Core/Axis/NavigatorAxisComposition.js"],a["Stock/Navigator/NavigatorDefaults.js"],a["Stock/Navigator/NavigatorSymbols.js"],a["Core/Renderer/RendererRegistry.js"],a["Stock/Utilities/StockUtilities.js"],a["Core/Utilities.js"]],function(r,s,l,h,m,w,A,V){let{setOptions:ie}=r,{composed:Z}=s,{getRendererType:$}=w,{setFixedRange:K}=A,{addEvent:F,extend:N,pushUnique:E}=V;function L(){this.chart.navigator&&!this.options.isInternal&&this.chart.navigator.setBaseSeries(null,!1)}return{compose:function(Q,R,G){l.compose(R),E(Z,"Navigator")&&(Q.prototype.setFixedRange=K,N($().prototype.symbols,m),F(G,"afterUpdate",L),ie({navigator:h}))}}}),i(a,"Core/Axis/ScrollbarAxis.js",[a["Core/Globals.js"],a["Core/Utilities.js"]],function(r,s){var l;let{composed:h}=r,{addEvent:m,defined:w,pick:A,pushUnique:V}=s;return function(ie){let Z;function $(E){let L=A(E.options&&E.options.min,E.min),Q=A(E.options&&E.options.max,E.max);return{axisMin:L,axisMax:Q,scrollMin:w(E.dataMin)?Math.min(L,E.min,E.dataMin,A(E.threshold,1/0)):L,scrollMax:w(E.dataMax)?Math.max(Q,E.max,E.dataMax,A(E.threshold,-1/0)):Q}}function K(){let E=this.scrollbar,L=E&&!E.options.opposite,Q=this.horiz?2:L?3:1;E&&(this.chart.scrollbarsOffsets=[0,0],this.chart.axisOffset[Q]+=E.size+(E.options.margin||0))}function F(){let E=this;E.options&&E.options.scrollbar&&E.options.scrollbar.enabled&&(E.options.scrollbar.vertical=!E.horiz,E.options.startOnTick=E.options.endOnTick=!1,E.scrollbar=new Z(E.chart.renderer,E.options.scrollbar,E.chart),m(E.scrollbar,"changed",function(L){let Q,R,{axisMin:G,axisMax:q,scrollMin:Y,scrollMax:se}=$(E),j=se-Y;if(w(G)&&w(q))if(E.horiz&&!E.reversed||!E.horiz&&E.reversed?(Q=Y+j*this.to,R=Y+j*this.from):(Q=Y+j*(1-this.from),R=Y+j*(1-this.to)),this.shouldUpdateExtremes(L.DOMType)){let U=L.DOMType!=="mousemove"&&L.DOMType!=="touchmove"&&void 0;E.setExtremes(R,Q,!0,U,L)}else this.setRange(this.from,this.to)}))}function N(){let E,L,Q,{scrollMin:R,scrollMax:G}=$(this),q=this.scrollbar,Y=this.axisTitleMargin+(this.titleOffset||0),se=this.chart.scrollbarsOffsets,j=this.options.margin||0;if(q&&se){if(this.horiz)this.opposite||(se[1]+=Y),q.position(this.left,this.top+this.height+2+se[1]-(this.opposite?j:0),this.width,this.height),this.opposite||(se[1]+=j),E=1;else{let U;this.opposite&&(se[0]+=Y),U=q.options.opposite?this.left+this.width+2+se[0]-(this.opposite?0:j):this.opposite?0:j,q.position(U,this.top,this.width,this.height),this.opposite&&(se[0]+=j),E=0}if(se[E]+=q.size+(q.options.margin||0),isNaN(R)||isNaN(G)||!w(this.min)||!w(this.max)||this.dataMin===this.dataMax)q.setRange(0,1);else if(this.min===this.max){let U=this.pointRange/(this.dataMax+1);L=U*this.min,Q=U*(this.max+1),q.setRange(L,Q)}else L=(this.min-R)/(G-R),Q=(this.max-R)/(G-R),this.horiz&&!this.reversed||!this.horiz&&this.reversed?q.setRange(L,Q):q.setRange(1-Q,1-L)}}ie.compose=function(E,L){V(h,"Axis.Scrollbar")&&(Z=L,m(E,"afterGetOffset",K),m(E,"afterInit",F),m(E,"afterRender",N))}}(l||(l={})),l}),i(a,"Stock/Scrollbar/ScrollbarDefaults.js",[],function(){return{height:10,barBorderRadius:5,buttonBorderRadius:0,buttonsEnabled:!1,liveRedraw:void 0,margin:void 0,minWidth:6,opposite:!0,step:.2,zIndex:3,barBackgroundColor:"#cccccc",barBorderWidth:0,barBorderColor:"#cccccc",buttonArrowColor:"#333333",buttonBackgroundColor:"#e6e6e6",buttonBorderColor:"#cccccc",buttonBorderWidth:1,rifleColor:"none",trackBackgroundColor:"rgba(255, 255, 255, 0.001)",trackBorderColor:"#cccccc",trackBorderRadius:5,trackBorderWidth:1}}),i(a,"Stock/Scrollbar/Scrollbar.js",[a["Core/Defaults.js"],a["Core/Globals.js"],a["Core/Axis/ScrollbarAxis.js"],a["Stock/Scrollbar/ScrollbarDefaults.js"],a["Core/Utilities.js"]],function(r,s,l,h,m){let{defaultOptions:w}=r,{addEvent:A,correctFloat:V,crisp:ie,defined:Z,destroyObjectProperties:$,fireEvent:K,merge:F,pick:N,removeEvent:E}=m;class L{static compose(R){l.compose(R,L)}static swapXY(R,G){return G&&R.forEach(q=>{let Y,se=q.length;for(let j=0;j<se;j+=2)typeof(Y=q[j+1])=="number"&&(q[j+1]=q[j+2],q[j+2]=Y)}),R}constructor(R,G,q){this._events=[],this.chartX=0,this.chartY=0,this.from=0,this.scrollbarButtons=[],this.scrollbarLeft=0,this.scrollbarStrokeWidth=1,this.scrollbarTop=0,this.size=0,this.to=0,this.trackBorderWidth=1,this.x=0,this.y=0,this.init(R,G,q)}addEvents(){let R=this.options.inverted?[1,0]:[0,1],G=this.scrollbarButtons,q=this.scrollbarGroup.element,Y=this.track.element,se=this.mouseDownHandler.bind(this),j=this.mouseMoveHandler.bind(this),U=this.mouseUpHandler.bind(this),de=[[G[R[0]].element,"click",this.buttonToMinClick.bind(this)],[G[R[1]].element,"click",this.buttonToMaxClick.bind(this)],[Y,"click",this.trackClick.bind(this)],[q,"mousedown",se],[q.ownerDocument,"mousemove",j],[q.ownerDocument,"mouseup",U],[q,"touchstart",se],[q.ownerDocument,"touchmove",j],[q.ownerDocument,"touchend",U]];de.forEach(function(g){A.apply(null,g)}),this._events=de}buttonToMaxClick(R){let G=(this.to-this.from)*N(this.options.step,.2);this.updatePosition(this.from+G,this.to+G),K(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:R})}buttonToMinClick(R){let G=V(this.to-this.from)*N(this.options.step,.2);this.updatePosition(V(this.from-G),V(this.to-G)),K(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:R})}cursorToScrollbarPosition(R){let G=this.options,q=G.minWidth>this.calculatedWidth?G.minWidth:0;return{chartX:(R.chartX-this.x-this.xOffset)/(this.barWidth-q),chartY:(R.chartY-this.y-this.yOffset)/(this.barWidth-q)}}destroy(){let R=this,G=R.chart.scroller;R.removeEvents(),["track","scrollbarRifles","scrollbar","scrollbarGroup","group"].forEach(function(q){R[q]&&R[q].destroy&&(R[q]=R[q].destroy())}),G&&R===G.scrollbar&&(G.scrollbar=null,$(G.scrollbarButtons))}drawScrollbarButton(R){let G=this.renderer,q=this.scrollbarButtons,Y=this.options,se=this.size,j=G.g().add(this.group);if(q.push(j),Y.buttonsEnabled){let U=G.rect().addClass("highcharts-scrollbar-button").add(j);this.chart.styledMode||U.attr({stroke:Y.buttonBorderColor,"stroke-width":Y.buttonBorderWidth,fill:Y.buttonBackgroundColor}),U.attr(U.crisp({x:-.5,y:-.5,width:se,height:se,r:Y.buttonBorderRadius},U.strokeWidth()));let de=G.path(L.swapXY([["M",se/2+(R?-1:1),se/2-3],["L",se/2+(R?-1:1),se/2+3],["L",se/2+(R?2:-2),se/2]],Y.vertical)).addClass("highcharts-scrollbar-arrow").add(q[R]);this.chart.styledMode||de.attr({fill:Y.buttonArrowColor})}}init(R,G,q){this.scrollbarButtons=[],this.renderer=R,this.userOptions=G,this.options=F(h,w.scrollbar,G),this.options.margin=N(this.options.margin,10),this.chart=q,this.size=N(this.options.size,this.options.height),G.enabled&&(this.render(),this.addEvents())}mouseDownHandler(R){let G=this.chart.pointer?.normalize(R)||R,q=this.cursorToScrollbarPosition(G);this.chartX=q.chartX,this.chartY=q.chartY,this.initPositions=[this.from,this.to],this.grabbedCenter=!0}mouseMoveHandler(R){let G,q=this.chart.pointer?.normalize(R)||R,Y=this.options.vertical?"chartY":"chartX",se=this.initPositions||[];this.grabbedCenter&&(!R.touches||R.touches[0][Y]!==0)&&(G=this.cursorToScrollbarPosition(q)[Y]-this[Y],this.hasDragged=!0,this.updatePosition(se[0]+G,se[1]+G),this.hasDragged&&K(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:R.type,DOMEvent:R}))}mouseUpHandler(R){this.hasDragged&&K(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:R.type,DOMEvent:R}),this.grabbedCenter=this.hasDragged=this.chartX=this.chartY=null}position(R,G,q,Y){let{buttonsEnabled:se,margin:j=0,vertical:U}=this.options,de=this.rendered?"animate":"attr",g=Y,k=0;this.group.show(),this.x=R,this.y=G+this.trackBorderWidth,this.width=q,this.height=Y,this.xOffset=g,this.yOffset=k,U?(this.width=this.yOffset=q=k=this.size,this.xOffset=g=0,this.yOffset=k=se?this.size:0,this.barWidth=Y-(se?2*q:0),this.x=R+=j):(this.height=Y=this.size,this.xOffset=g=se?this.size:0,this.barWidth=q-(se?2*Y:0),this.y=this.y+j),this.group[de]({translateX:R,translateY:this.y}),this.track[de]({width:q,height:Y}),this.scrollbarButtons[1][de]({translateX:U?0:q-g,translateY:U?Y-k:0})}removeEvents(){this._events.forEach(function(R){E.apply(null,R)}),this._events.length=0}render(){let R=this.renderer,G=this.options,q=this.size,Y=this.chart.styledMode,se=R.g("scrollbar").attr({zIndex:G.zIndex}).hide().add();this.group=se,this.track=R.rect().addClass("highcharts-scrollbar-track").attr({r:G.trackBorderRadius||0,height:q,width:q}).add(se),Y||this.track.attr({fill:G.trackBackgroundColor,stroke:G.trackBorderColor,"stroke-width":G.trackBorderWidth});let j=this.trackBorderWidth=this.track.strokeWidth();this.track.attr({x:-ie(0,j),y:-ie(0,j)}),this.scrollbarGroup=R.g().add(se),this.scrollbar=R.rect().addClass("highcharts-scrollbar-thumb").attr({height:q-j,width:q-j,r:G.barBorderRadius||0}).add(this.scrollbarGroup),this.scrollbarRifles=R.path(L.swapXY([["M",-3,q/4],["L",-3,2*q/3],["M",0,q/4],["L",0,2*q/3],["M",3,q/4],["L",3,2*q/3]],G.vertical)).addClass("highcharts-scrollbar-rifles").add(this.scrollbarGroup),Y||(this.scrollbar.attr({fill:G.barBackgroundColor,stroke:G.barBorderColor,"stroke-width":G.barBorderWidth}),this.scrollbarRifles.attr({stroke:G.rifleColor,"stroke-width":1})),this.scrollbarStrokeWidth=this.scrollbar.strokeWidth(),this.scrollbarGroup.translate(-ie(0,this.scrollbarStrokeWidth),-ie(0,this.scrollbarStrokeWidth)),this.drawScrollbarButton(0),this.drawScrollbarButton(1)}setRange(R,G){let q,Y,se=this.options,j=se.vertical,U=se.minWidth,de=this.barWidth,g=!this.rendered||this.hasDragged||this.chart.navigator&&this.chart.navigator.hasDragged?"attr":"animate";if(!Z(de))return;let k=de*Math.min(G,1);q=Math.ceil(de*(R=Math.max(R,0))),this.calculatedWidth=Y=V(k-q),Y<U&&(q=(de-U+Y)*R,Y=U);let p=Math.floor(q+this.xOffset+this.yOffset),x=Y/2-.5;this.from=R,this.to=G,j?(this.scrollbarGroup[g]({translateY:p}),this.scrollbar[g]({height:Y}),this.scrollbarRifles[g]({translateY:x}),this.scrollbarTop=p,this.scrollbarLeft=0):(this.scrollbarGroup[g]({translateX:p}),this.scrollbar[g]({width:Y}),this.scrollbarRifles[g]({translateX:x}),this.scrollbarLeft=p,this.scrollbarTop=0),Y<=12?this.scrollbarRifles.hide():this.scrollbarRifles.show(),se.showFull===!1&&(R<=0&&G>=1?this.group.hide():this.group.show()),this.rendered=!0}shouldUpdateExtremes(R){return N(this.options.liveRedraw,s.svg&&!s.isTouchDevice&&!this.chart.boosted)||R==="mouseup"||R==="touchend"||!Z(R)}trackClick(R){let G=this.chart.pointer?.normalize(R)||R,q=this.to-this.from,Y=this.y+this.scrollbarTop,se=this.x+this.scrollbarLeft;this.options.vertical&&G.chartY>Y||!this.options.vertical&&G.chartX>se?this.updatePosition(this.from+q,this.to+q):this.updatePosition(this.from-q,this.to-q),K(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:R})}update(R){this.destroy(),this.init(this.chart.renderer,F(!0,this.options,R),this.chart)}updatePosition(R,G){G>1&&(R=V(1-V(G-R)),G=1),R<0&&(G=V(G-R),R=0),this.from=R,this.to=G}}return L.defaultOptions=h,w.scrollbar=F(!0,L.defaultOptions,w.scrollbar),L}),i(a,"Stock/Navigator/Navigator.js",[a["Core/Axis/Axis.js"],a["Stock/Navigator/ChartNavigatorComposition.js"],a["Core/Defaults.js"],a["Core/Globals.js"],a["Core/Axis/NavigatorAxisComposition.js"],a["Stock/Navigator/NavigatorComposition.js"],a["Stock/Scrollbar/Scrollbar.js"],a["Core/Renderer/SVG/SVGRenderer.js"],a["Core/Utilities.js"]],function(r,s,l,h,m,w,A,V,ie){let{defaultOptions:Z}=l,{isTouchDevice:$}=h,{prototype:{symbols:K}}=V,{addEvent:F,clamp:N,correctFloat:E,defined:L,destroyObjectProperties:Q,erase:R,extend:G,find:q,fireEvent:Y,isArray:se,isNumber:j,merge:U,pick:de,removeEvent:g,splat:k}=ie;function p(C,...d){let f=[].filter.call(d,j);if(f.length)return Math[C].apply(0,f)}class x{static compose(d,f,v){s.compose(d,x),w.compose(d,f,v)}constructor(d){this.isDirty=!1,this.scrollbarHeight=0,this.init(d)}drawHandle(d,f,v,S){let H=this.navigatorOptions.handles.height;this.handles[f][S](v?{translateX:Math.round(this.left+this.height/2),translateY:Math.round(this.top+parseInt(d,10)+.5-H)}:{translateX:Math.round(this.left+parseInt(d,10)),translateY:Math.round(this.top+this.height/2-H/2-1)})}drawOutline(d,f,v,S){let H=this.navigatorOptions.maskInside,T=this.outline.strokeWidth(),b=T/2,I=T%2/2,D=this.scrollButtonSize,z=this.size,J=this.top,ne=this.height,ee=J-b,oe=J+ne,ae=this.left,ve,_e;v?(ve=J+f+I,f=J+d+I,_e=[["M",ae+ne,J-D-I],["L",ae+ne,ve],["L",ae,ve],["M",ae,f],["L",ae+ne,f],["L",ae+ne,J+z+D]],H&&_e.push(["M",ae+ne,ve-b],["L",ae+ne,f+b])):(ae-=D,d+=ae+D-I,f+=ae+D-I,_e=[["M",ae,ee],["L",d,ee],["L",d,oe],["M",f,oe],["L",f,ee],["L",ae+z+2*D,ee]],H&&_e.push(["M",d-b,ee],["L",f+b,ee])),this.outline[S]({d:_e})}drawMasks(d,f,v,S){let H,T,b,I,D=this.left,z=this.top,J=this.height;v?(b=[D,D,D],I=[z,z+d,z+f],T=[J,J,J],H=[d,f-d,this.size-f]):(b=[D,D+d,D+f],I=[z,z,z],T=[d,f-d,this.size-f],H=[J,J,J]),this.shades.forEach((ne,ee)=>{ne[S]({x:b[ee],y:I[ee],width:T[ee],height:H[ee]})})}renderElements(){let d=this,f=d.navigatorOptions,v=f.maskInside,S=d.chart,H=S.inverted,T=S.renderer,b={cursor:H?"ns-resize":"ew-resize"},I=d.navigatorGroup??(d.navigatorGroup=T.g("navigator").attr({zIndex:8,visibility:"hidden"}).add());if([!v,v,!v].forEach((D,z)=>{let J=d.shades[z]??(d.shades[z]=T.rect().addClass("highcharts-navigator-mask"+(z===1?"-inside":"-outside")).add(I));S.styledMode||(J.attr({fill:D?f.maskFill:"rgba(0,0,0,0)"}),z===1&&J.css(b))}),d.outline||(d.outline=T.path().addClass("highcharts-navigator-outline").add(I)),S.styledMode||d.outline.attr({"stroke-width":f.outlineWidth,stroke:f.outlineColor}),f.handles?.enabled){let D=f.handles,{height:z,width:J}=D;[0,1].forEach(ne=>{let ee=D.symbols[ne];if(d.handles[ne]&&d.handles[ne].symbolUrl===ee){if(!d.handles[ne].isImg&&d.handles[ne].symbolName!==ee){let oe=K[ee].call(K,-J/2-1,0,J,z);d.handles[ne].attr({d:oe}),d.handles[ne].symbolName=ee}}else d.handles[ne]?.destroy(),d.handles[ne]=T.symbol(ee,-J/2-1,0,J,z,D),d.handles[ne].attr({zIndex:7-ne}).addClass("highcharts-navigator-handle highcharts-navigator-handle-"+["left","right"][ne]).add(I),d.addMouseEvents();S.inverted&&d.handles[ne].attr({rotation:90,rotationOriginX:Math.floor(-J/2),rotationOriginY:(z+J)/2}),S.styledMode||d.handles[ne].attr({fill:D.backgroundColor,stroke:D.borderColor,"stroke-width":D.lineWidth,width:D.width,height:D.height,x:-J/2-1,y:0}).css(b)})}}update(d,f=!1){let v=this.chart,S=v.options.chart.inverted!==v.scrollbar?.options.vertical;if(U(!0,v.options.navigator,d),this.navigatorOptions=v.options.navigator||{},this.setOpposite(),L(d.enabled)||S)return this.destroy(),this.navigatorEnabled=d.enabled||this.navigatorEnabled,this.init(v);if(this.navigatorEnabled&&(this.isDirty=!0,d.adaptToUpdatedData===!1&&this.baseSeries.forEach(H=>{g(H,"updatedData",this.updatedDataHandler)},this),d.adaptToUpdatedData&&this.baseSeries.forEach(H=>{H.eventsToUnbind.push(F(H,"updatedData",this.updatedDataHandler))},this),(d.series||d.baseSeries)&&this.setBaseSeries(void 0,!1),d.height||d.xAxis||d.yAxis)){this.height=d.height??this.height;let H=this.getXAxisOffsets();this.xAxis.update(At(it({},d.xAxis),{offsets:H,[v.inverted?"width":"height"]:this.height,[v.inverted?"height":"width"]:void 0}),!1),this.yAxis.update(At(it({},d.yAxis),{[v.inverted?"width":"height"]:this.height}),!1)}f&&v.redraw()}render(d,f,v,S){let H=this.chart,T=this.xAxis,b=T.pointRange||0,I=T.navigatorAxis.fake?H.xAxis[0]:T,D=this.navigatorEnabled,z=this.rendered,J=H.inverted,ne=H.xAxis[0].minRange,ee=H.xAxis[0].options.maxRange,oe=this.scrollButtonSize,ae,ve,_e,De=this.scrollbarHeight,be,we;if(this.hasDragged&&!L(v))return;if(this.isDirty&&this.renderElements(),d=E(d-b/2),f=E(f+b/2),!j(d)||!j(f)){if(!z)return;v=0,S=de(T.width,I.width)}this.left=de(T.left,H.plotLeft+oe+(J?H.plotWidth:0));let Fe=this.size=be=de(T.len,(J?H.plotHeight:H.plotWidth)-2*oe);ae=J?De:be+2*oe,v=de(v,T.toPixels(d,!0)),S=de(S,T.toPixels(f,!0)),j(v)&&Math.abs(v)!==1/0||(v=0,S=ae);let Be=T.toValue(v,!0),He=T.toValue(S,!0),je=Math.abs(E(He-Be));je<ne?this.grabbedLeft?v=T.toPixels(He-ne-b,!0):this.grabbedRight&&(S=T.toPixels(Be+ne+b,!0)):L(ee)&&E(je-b)>ee&&(this.grabbedLeft?v=T.toPixels(He-ee-b,!0):this.grabbedRight&&(S=T.toPixels(Be+ee+b,!0))),this.zoomedMax=N(Math.max(v,S),0,Fe),this.zoomedMin=N(this.fixedWidth?this.zoomedMax-this.fixedWidth:Math.min(v,S),0,Fe),this.range=this.zoomedMax-this.zoomedMin,Fe=Math.round(this.zoomedMax);let Je=Math.round(this.zoomedMin);D&&(this.navigatorGroup.attr({visibility:"inherit"}),we=z&&!this.hasDragged?"animate":"attr",this.drawMasks(Je,Fe,J,we),this.drawOutline(Je,Fe,J,we),this.navigatorOptions.handles.enabled&&(this.drawHandle(Je,0,J,we),this.drawHandle(Fe,1,J,we))),this.scrollbar&&(J?(_e=this.top-oe,ve=this.left-De+(D||!I.opposite?0:(I.titleOffset||0)+I.axisTitleMargin),De=be+2*oe):(_e=this.top+(D?this.height:-De),ve=this.left-oe),this.scrollbar.position(ve,_e,ae,De),this.scrollbar.setRange(this.zoomedMin/(be||1),this.zoomedMax/(be||1))),this.rendered=!0,this.isDirty=!1,Y(this,"afterRender")}addMouseEvents(){let d=this,f=d.chart,v=f.container,S=[],H,T;d.mouseMoveHandler=H=function(b){d.onMouseMove(b)},d.mouseUpHandler=T=function(b){d.onMouseUp(b)},(S=d.getPartsEvents("mousedown")).push(F(f.renderTo,"mousemove",H),F(v.ownerDocument,"mouseup",T),F(f.renderTo,"touchmove",H),F(v.ownerDocument,"touchend",T)),S.concat(d.getPartsEvents("touchstart")),d.eventsToUnbind=S,d.series&&d.series[0]&&S.push(F(d.series[0].xAxis,"foundExtremes",function(){f.navigator.modifyNavigatorAxisExtremes()}))}getPartsEvents(d){let f=this,v=[];return["shades","handles"].forEach(function(S){f[S].forEach(function(H,T){v.push(F(H.element,d,function(b){f[S+"Mousedown"](b,T)}))})}),v}shadesMousedown(d,f){d=this.chart.pointer?.normalize(d)||d;let v=this.chart,S=this.xAxis,H=this.zoomedMin,T=this.size,b=this.range,I=this.left,D=d.chartX,z,J,ne,ee;v.inverted&&(D=d.chartY,I=this.top),f===1?(this.grabbedCenter=D,this.fixedWidth=b,this.dragOffset=D-H):(ee=D-I-b/2,f===0?ee=Math.max(0,ee):f===2&&ee+b>=T&&(ee=T-b,this.reversedExtremes?(ee-=b,J=this.getUnionExtremes().dataMin):z=this.getUnionExtremes().dataMax),ee!==H&&(this.fixedWidth=b,L((ne=S.navigatorAxis.toFixedRange(ee,ee+b,J,z)).min)&&Y(this,"setRange",{min:Math.min(ne.min,ne.max),max:Math.max(ne.min,ne.max),redraw:!0,eventArguments:{trigger:"navigator"}})))}handlesMousedown(d,f){d=this.chart.pointer?.normalize(d)||d;let v=this.chart,S=v.xAxis[0],H=this.reversedExtremes;f===0?(this.grabbedLeft=!0,this.otherHandlePos=this.zoomedMax,this.fixedExtreme=H?S.min:S.max):(this.grabbedRight=!0,this.otherHandlePos=this.zoomedMin,this.fixedExtreme=H?S.max:S.min),v.setFixedRange(void 0)}onMouseMove(d){let f=this,v=f.chart,S=f.navigatorSize,H=f.range,T=f.dragOffset,b=v.inverted,I=f.left,D;(!d.touches||d.touches[0].pageX!==0)&&(D=(d=v.pointer?.normalize(d)||d).chartX,b&&(I=f.top,D=d.chartY),f.grabbedLeft?(f.hasDragged=!0,f.render(0,0,D-I,f.otherHandlePos)):f.grabbedRight?(f.hasDragged=!0,f.render(0,0,f.otherHandlePos,D-I)):f.grabbedCenter&&(f.hasDragged=!0,D<T?D=T:D>S+T-H&&(D=S+T-H),f.render(0,0,D-T,D-T+H)),f.hasDragged&&f.scrollbar&&de(f.scrollbar.options.liveRedraw,!$&&!this.chart.boosted)&&(d.DOMType=d.type,setTimeout(function(){f.onMouseUp(d)},0)))}onMouseUp(d){let f,v,S,H,T,b,I=this.chart,D=this.xAxis,z=this.scrollbar,J=d.DOMEvent||d,ne=I.inverted,ee=this.rendered&&!this.hasDragged?"animate":"attr";(this.hasDragged&&(!z||!z.hasDragged)||d.trigger==="scrollbar")&&(S=this.getUnionExtremes(),this.zoomedMin===this.otherHandlePos?H=this.fixedExtreme:this.zoomedMax===this.otherHandlePos&&(T=this.fixedExtreme),this.zoomedMax===this.size&&(T=this.reversedExtremes?S.dataMin:S.dataMax),this.zoomedMin===0&&(H=this.reversedExtremes?S.dataMax:S.dataMin),L((b=D.navigatorAxis.toFixedRange(this.zoomedMin,this.zoomedMax,H,T)).min)&&Y(this,"setRange",{min:Math.min(b.min,b.max),max:Math.max(b.min,b.max),redraw:!0,animation:!this.hasDragged&&null,eventArguments:{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:J}})),d.DOMType!=="mousemove"&&d.DOMType!=="touchmove"&&(this.grabbedLeft=this.grabbedRight=this.grabbedCenter=this.fixedWidth=this.fixedExtreme=this.otherHandlePos=this.hasDragged=this.dragOffset=null),this.navigatorEnabled&&j(this.zoomedMin)&&j(this.zoomedMax)&&(v=Math.round(this.zoomedMin),f=Math.round(this.zoomedMax),this.shades&&this.drawMasks(v,f,ne,ee),this.outline&&this.drawOutline(v,f,ne,ee),this.navigatorOptions.handles.enabled&&Object.keys(this.handles).length===this.handles.length&&(this.drawHandle(v,0,ne,ee),this.drawHandle(f,1,ne,ee)))}removeEvents(){this.eventsToUnbind&&(this.eventsToUnbind.forEach(function(d){d()}),this.eventsToUnbind=void 0),this.removeBaseSeriesEvents()}removeBaseSeriesEvents(){let d=this.baseSeries||[];this.navigatorEnabled&&d[0]&&(this.navigatorOptions.adaptToUpdatedData!==!1&&d.forEach(function(f){g(f,"updatedData",this.updatedDataHandler)},this),d[0].xAxis&&g(d[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes))}getXAxisOffsets(){return this.chart.inverted?[this.scrollButtonSize,0,-this.scrollButtonSize,0]:[0,-this.scrollButtonSize,0,this.scrollButtonSize]}init(d){let f=d.options,v=f.navigator||{},S=v.enabled,H=f.scrollbar||{},T=H.enabled,b=S&&v.height||0,I=T&&H.height||0,D=H.buttonsEnabled&&I||0;this.handles=[],this.shades=[],this.chart=d,this.setBaseSeries(),this.height=b,this.scrollbarHeight=I,this.scrollButtonSize=D,this.scrollbarEnabled=T,this.navigatorEnabled=S,this.navigatorOptions=v,this.scrollbarOptions=H,this.setOpposite();let z=this,J=z.baseSeries,ne=d.xAxis.length,ee=d.yAxis.length,oe=J&&J[0]&&J[0].xAxis||d.xAxis[0]||{options:{}};if(d.isDirtyBox=!0,z.navigatorEnabled){let ae=this.getXAxisOffsets();z.xAxis=new r(d,U({breaks:oe.options.breaks,ordinal:oe.options.ordinal,overscroll:oe.options.overscroll},v.xAxis,{type:"datetime",yAxis:v.yAxis?.id,index:ne,isInternal:!0,offset:0,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:oe.options.ordinal?0:oe.options.minPadding,maxPadding:oe.options.ordinal?0:oe.options.maxPadding,zoomEnabled:!1},d.inverted?{offsets:ae,width:b}:{offsets:ae,height:b}),"xAxis"),z.yAxis=new r(d,U(v.yAxis,{alignTicks:!1,offset:0,index:ee,isInternal:!0,reversed:de(v.yAxis&&v.yAxis.reversed,d.yAxis[0]&&d.yAxis[0].reversed,!1),zoomEnabled:!1},d.inverted?{width:b}:{height:b}),"yAxis"),J||v.series.data?z.updateNavigatorSeries(!1):d.series.length===0&&(z.unbindRedraw=F(d,"beforeRedraw",function(){d.series.length>0&&!z.series&&(z.setBaseSeries(),z.unbindRedraw())})),z.reversedExtremes=d.inverted&&!z.xAxis.reversed||!d.inverted&&z.xAxis.reversed,z.renderElements(),z.addMouseEvents()}else z.xAxis={chart:d,navigatorAxis:{fake:!0},translate:function(ae,ve){let _e=d.xAxis[0],De=_e.getExtremes(),be=_e.len-2*D,we=p("min",_e.options.min,De.dataMin),Fe=p("max",_e.options.max,De.dataMax)-we;return ve?ae*Fe/be+we:be*(ae-we)/Fe},toPixels:function(ae){return this.translate(ae)},toValue:function(ae){return this.translate(ae,!0)}},z.xAxis.navigatorAxis.axis=z.xAxis,z.xAxis.navigatorAxis.toFixedRange=m.prototype.toFixedRange.bind(z.xAxis.navigatorAxis);if(d.options.scrollbar.enabled){let ae=U(d.options.scrollbar,{vertical:d.inverted});!j(ae.margin)&&z.navigatorEnabled&&(ae.margin=d.inverted?-3:3),d.scrollbar=z.scrollbar=new A(d.renderer,ae,d),F(z.scrollbar,"changed",function(ve){let _e=z.size,De=_e*this.to,be=_e*this.from;z.hasDragged=z.scrollbar.hasDragged,z.render(0,0,be,De),this.shouldUpdateExtremes(ve.DOMType)&&setTimeout(function(){z.onMouseUp(ve)})})}z.addBaseSeriesEvents(),z.addChartEvents()}setOpposite(){let d=this.navigatorOptions,f=this.navigatorEnabled,v=this.chart;this.opposite=de(d.opposite,!!(!f&&v.inverted))}getUnionExtremes(d){let f,v=this.chart.xAxis[0],S=this.xAxis,H=S.options,T=v.options;return d&&v.dataMin===null||(f={dataMin:de(H&&H.min,p("min",T.min,v.dataMin,S.dataMin,S.min)),dataMax:de(H&&H.max,p("max",T.max,v.dataMax,S.dataMax,S.max))}),f}setBaseSeries(d,f){let v=this.chart,S=this.baseSeries=[];d=d||v.options&&v.options.navigator.baseSeries||(v.series.length?q(v.series,H=>!H.options.isInternal).index:0),(v.series||[]).forEach((H,T)=>{!H.options.isInternal&&(H.options.showInNavigator||(T===d||H.options.id===d)&&H.options.showInNavigator!==!1)&&S.push(H)}),this.xAxis&&!this.xAxis.navigatorAxis.fake&&this.updateNavigatorSeries(!0,f)}updateNavigatorSeries(d,f){let v=this,S=v.chart,H=v.baseSeries,T={enableMouseTracking:!1,index:null,linkedTo:null,group:"nav",padXAxis:!1,xAxis:this.navigatorOptions.xAxis?.id,yAxis:this.navigatorOptions.yAxis?.id,showInLegend:!1,stacking:void 0,isInternal:!0,states:{inactive:{opacity:1}}},b=v.series=(v.series||[]).filter(ne=>{let ee=ne.baseSeries;return!(0>H.indexOf(ee))||(ee&&(g(ee,"updatedData",v.updatedDataHandler),delete ee.navigatorSeries),ne.chart&&ne.destroy(),!1)}),I,D,z=v.navigatorOptions.series,J;H&&H.length&&H.forEach(ne=>{let ee=ne.navigatorSeries,oe=G({color:ne.color,visible:ne.visible},se(z)?Z.navigator.series:z);if(ee&&v.navigatorOptions.adaptToUpdatedData===!1)return;T.name="Navigator "+H.length,J=(I=ne.options||{}).navigatorOptions||{},oe.dataLabels=k(oe.dataLabels),(D=U(I,T,oe,J)).pointRange=de(oe.pointRange,J.pointRange,Z.plotOptions[D.type||"line"].pointRange);let ae=J.data||oe.data;v.hasNavigatorData=v.hasNavigatorData||!!ae,D.data=ae||I.data&&I.data.slice(0),ee&&ee.options?ee.update(D,f):(ne.navigatorSeries=S.initSeries(D),S.setSortedData(),ne.navigatorSeries.baseSeries=ne,b.push(ne.navigatorSeries))}),(z.data&&!(H&&H.length)||se(z))&&(v.hasNavigatorData=!1,(z=k(z)).forEach((ne,ee)=>{T.name="Navigator "+(b.length+1),(D=U(Z.navigator.series,{color:S.series[ee]&&!S.series[ee].options.isInternal&&S.series[ee].color||S.options.colors[ee]||S.options.colors[0]},T,ne)).data=ne.data,D.data&&(v.hasNavigatorData=!0,b.push(S.initSeries(D)))})),d&&this.addBaseSeriesEvents()}addBaseSeriesEvents(){let d=this,f=d.baseSeries||[];f[0]&&f[0].xAxis&&f[0].eventsToUnbind.push(F(f[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes)),f.forEach(v=>{v.eventsToUnbind.push(F(v,"show",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!0,!1)})),v.eventsToUnbind.push(F(v,"hide",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!1,!1)})),this.navigatorOptions.adaptToUpdatedData!==!1&&v.xAxis&&v.eventsToUnbind.push(F(v,"updatedData",this.updatedDataHandler)),v.eventsToUnbind.push(F(v,"remove",function(){f&&R(f,v),this.navigatorSeries&&(R(d.series,this.navigatorSeries),L(this.navigatorSeries.options)&&this.navigatorSeries.remove(!1),delete this.navigatorSeries)}))})}getBaseSeriesMin(d){return this.baseSeries.reduce(function(f,v){return Math.min(f,v.xData&&v.xData.length?v.xData[0]:f)},d)}modifyNavigatorAxisExtremes(){let d=this.xAxis;if(d.getExtremes!==void 0){let f=this.getUnionExtremes(!0);f&&(f.dataMin!==d.min||f.dataMax!==d.max)&&(d.min=f.dataMin,d.max=f.dataMax)}}modifyBaseAxisExtremes(){let d,f,v=this.chart.navigator,S=this.getExtremes(),H=S.min,T=S.max,b=S.dataMin,I=S.dataMax,D=T-H,z=v.stickToMin,J=v.stickToMax,ne=de(this.ordinal?.convertOverscroll(this.options.overscroll),0),ee=v.series&&v.series[0],oe=!!this.setExtremes;!(this.eventArgs&&this.eventArgs.trigger==="rangeSelectorButton")&&(z&&(d=(f=b)+D),J&&(d=I+ne,z||(f=Math.max(b,d-D,v.getBaseSeriesMin(ee&&ee.xData?ee.xData[0]:-Number.MAX_VALUE)))),oe&&(z||J)&&j(f)&&(this.min=this.userMin=f,this.max=this.userMax=d)),v.stickToMin=v.stickToMax=null}updatedDataHandler(){let d=this.chart.navigator,f=this.navigatorSeries,v=d.reversedExtremes?Math.round(d.zoomedMin)===0:Math.round(d.zoomedMax)>=Math.round(d.size);d.stickToMax=de(this.chart.options.navigator&&this.chart.options.navigator.stickToMax,v),d.stickToMin=d.shouldStickToMin(this,d),f&&!d.hasNavigatorData&&(f.options.pointStart=this.xData[0],f.setData(this.options.data,!1,null,!1))}shouldStickToMin(d,f){let v=f.getBaseSeriesMin(d.xData[0]),S=d.xAxis,H=S.max,T=S.min,b=S.options.range;return!!(j(H)&&j(T))&&(b&&H-v>0?H-v<b:T<=v)}addChartEvents(){this.eventsToUnbind||(this.eventsToUnbind=[]),this.eventsToUnbind.push(F(this.chart,"redraw",function(){let d=this.navigator,f=d&&(d.baseSeries&&d.baseSeries[0]&&d.baseSeries[0].xAxis||this.xAxis[0]);f&&d.render(f.min,f.max)}),F(this.chart,"getMargins",function(){let d=this.navigator,f=d.opposite?"plotTop":"marginBottom";this.inverted&&(f=d.opposite?"marginRight":"plotLeft"),this[f]=(this[f]||0)+(d.navigatorEnabled||!this.inverted?d.height+d.scrollbarHeight:0)+d.navigatorOptions.margin}),F(x,"setRange",function(d){this.chart.xAxis[0].setExtremes(d.min,d.max,d.redraw,d.animation,d.eventArguments)}))}destroy(){this.removeEvents(),this.xAxis&&(R(this.chart.xAxis,this.xAxis),R(this.chart.axes,this.xAxis)),this.yAxis&&(R(this.chart.yAxis,this.yAxis),R(this.chart.axes,this.yAxis)),(this.series||[]).forEach(d=>{d.destroy&&d.destroy()}),["series","xAxis","yAxis","shades","outline","scrollbarTrack","scrollbarRifles","scrollbarGroup","scrollbar","navigatorGroup","rendered"].forEach(d=>{this[d]&&this[d].destroy&&this[d].destroy(),this[d]=null}),[this.handles].forEach(d=>{Q(d)}),this.navigatorEnabled=!1}}return x}),i(a,"Stock/RangeSelector/RangeSelectorDefaults.js",[],function(){return{lang:{rangeSelectorZoom:"Zoom",rangeSelectorFrom:"",rangeSelectorTo:"\u2192"},rangeSelector:{allButtonsEnabled:!1,buttons:void 0,buttonSpacing:5,dropdown:"responsive",enabled:void 0,verticalAlign:"top",buttonTheme:{width:28,height:18,padding:2,zIndex:7},floating:!1,x:0,y:0,height:void 0,inputBoxBorderColor:"none",inputBoxHeight:17,inputBoxWidth:void 0,inputDateFormat:"%e %b %Y",inputDateParser:void 0,inputEditDateFormat:"%Y-%m-%d",inputEnabled:!0,inputPosition:{align:"right",x:0,y:0},inputSpacing:5,selected:void 0,buttonPosition:{align:"left",x:0,y:0},inputStyle:{color:"#334eff",cursor:"pointer",fontSize:"0.8em"},labelStyle:{color:"#666666",fontSize:"0.8em"}}}}),i(a,"Stock/RangeSelector/RangeSelectorComposition.js",[a["Core/Defaults.js"],a["Core/Globals.js"],a["Stock/RangeSelector/RangeSelectorDefaults.js"],a["Core/Utilities.js"]],function(r,s,l,h){let m,{defaultOptions:w}=r,{composed:A}=s,{addEvent:V,defined:ie,extend:Z,isNumber:$,merge:K,pick:F,pushUnique:N}=h,E=[];function L(){let j,U,de=this.range,g=de.type,k=this.max,p=this.chart.time,x=function(d,f){let v=g==="year"?"FullYear":"Month",S=new p.Date(d),H=p.get(v,S);return p.set(v,S,H+f),H===p.get(v,S)&&p.set("Date",S,0),S.getTime()-d};$(de)?(j=k-de,U=de):de&&(j=k+x(k,-(de.count||1)),this.chart&&this.chart.setFixedRange(k-j));let C=F(this.dataMin,Number.MIN_VALUE);return $(j)||(j=C),j<=C&&(j=C,U===void 0&&(U=x(j,de.count)),this.newMax=Math.min(j+U,F(this.dataMax,Number.MAX_VALUE))),$(k)?!$(de)&&de&&de._offsetMin&&(j+=de._offsetMin):j=void 0,j}function Q(){this.options.rangeSelector&&this.options.rangeSelector.enabled&&(this.rangeSelector=new m(this))}function R(){let j=this.rangeSelector;if(j){$(j.deferredYTDClick)&&(j.clickButton(j.deferredYTDClick),delete j.deferredYTDClick);let U=j.options.verticalAlign;j.options.floating||(U==="bottom"?this.extraBottomMargin=!0:U==="middle"||(this.extraTopMargin=!0))}}function G(){let j,U=this.rangeSelector;if(!U)return;let de=this.xAxis[0].getExtremes(),g=this.legend,k=U&&U.options.verticalAlign;$(de.min)&&U.render(de.min,de.max),g.display&&k==="top"&&k===g.options.verticalAlign&&(j=K(this.spacingBox),g.options.layout==="vertical"?j.y=this.plotTop:j.y+=U.getHeight(),g.group.placed=!1,g.align(j))}function q(){for(let j=0,U=E.length;j<U;++j){let de=E[j];if(de[0]===this){de[1].forEach(g=>g()),E.splice(j,1);return}}}function Y(){let j=this.rangeSelector;if(j){let U=j.getHeight();this.extraTopMargin&&(this.plotTop+=U),this.extraBottomMargin&&(this.marginBottom+=U)}}function se(j){let U=j.options.rangeSelector,de=this.extraBottomMargin,g=this.extraTopMargin,k=this.rangeSelector;if(U&&U.enabled&&!ie(k)&&this.options.rangeSelector&&(this.options.rangeSelector.enabled=!0,this.rangeSelector=k=new m(this)),this.extraBottomMargin=!1,this.extraTopMargin=!1,k){let p=U&&U.verticalAlign||k.options&&k.options.verticalAlign;k.options.floating||(p==="bottom"?this.extraBottomMargin=!0:p==="middle"||(this.extraTopMargin=!0)),(this.extraBottomMargin!==de||this.extraTopMargin!==g)&&(this.isDirtyBox=!0)}}return{compose:function(j,U,de){if(m=de,N(A,"RangeSelector")){let g=U.prototype;j.prototype.minFromRange=L,V(U,"afterGetContainer",Q),V(U,"beforeRender",R),V(U,"destroy",q),V(U,"getMargins",Y),V(U,"redraw",G),V(U,"update",se),g.callbacks.push(G),Z(w,{rangeSelector:l.rangeSelector}),Z(w.lang,l.lang)}}}}),i(a,"Core/Axis/OrdinalAxis.js",[a["Core/Axis/Axis.js"],a["Core/Globals.js"],a["Core/Series/Series.js"],a["Core/Utilities.js"]],function(r,s,l,h){var m;let{addEvent:w,correctFloat:A,css:V,defined:ie,error:Z,isNumber:$,pick:K,timeUnits:F,isString:N}=h;return function(E){function L(p,x,C,d,f=[],v=0,S){let H={},T=this.options.tickPixelInterval,b=this.chart.time,I=[],D,z,J,ne,ee,oe=0,ae=[],ve=-Number.MAX_VALUE;if(!this.options.ordinal&&!this.options.breaks||!f||f.length<3||x===void 0)return b.getTimeTicks.apply(b,arguments);let _e=f.length;for(D=0;D<_e;D++){if(ee=D&&f[D-1]>C,f[D]<x&&(oe=D),D===_e-1||f[D+1]-f[D]>5*v||ee){if(f[D]>ve){for(z=b.getTimeTicks(p,f[oe],f[D],d);z.length&&z[0]<=ve;)z.shift();z.length&&(ve=z[z.length-1]),I.push(ae.length),ae=ae.concat(z)}oe=D+1}if(ee)break}if(z){if(ne=z.info,S&&ne.unitRange<=F.hour){for(oe=1,D=ae.length-1;oe<D;oe++)b.dateFormat("%d",ae[oe])!==b.dateFormat("%d",ae[oe-1])&&(H[ae[oe]]="day",J=!0);J&&(H[ae[0]]="day"),ne.higherRanks=H}ne.segmentStarts=I,ae.info=ne}else Z(12,!1,this.chart);if(S&&ie(T)){let De=ae.length,be=[],we=[],Fe,Be,He,je,Je,et=De;for(;et--;)Be=this.translate(ae[et]),He&&(we[et]=He-Be),be[et]=He=Be;for(we.sort((mt,Ai)=>mt-Ai),(je=we[Math.floor(we.length/2)])<.6*T&&(je=null),et=ae[De-1]>C?De-1:De,He=void 0;et--;)Je=Math.abs(He-(Be=be[et])),He&&Je<.8*T&&(je===null||Je<.8*je)?(H[ae[et]]&&!H[ae[et+1]]?(Fe=et+1,He=Be):Fe=et,ae.splice(Fe,1)):He=Be}return ae}function Q(p){let x=this.ordinal.positions;if(!x)return p;let C=x.length-1,d;return p<0?p=x[0]:p>C?p=x[C]:(C=Math.floor(p),d=p-C),d!==void 0&&x[C]!==void 0?x[C]+(d?d*(x[C+1]-x[C]):0):p}function R(p){let x=this.ordinal,C=this.old?this.old.min:this.min,d=this.old?this.old.transA:this.transA,f=x.getExtendedPositions();if(f&&f.length){let v=A((p-C)*d+this.minPixelPadding),S=A(x.getIndexOfPoint(v,f)),H=A(S%1);if(S>=0&&S<=f.length-1){let T=f[Math.floor(S)],b=f[Math.ceil(S)];return f[Math.floor(S)]+H*(b-T)}}return p}function G(p,x){let C=E.Additions.findIndexOf(p,x,!0);if(p[C]===x)return C;let d=(x-p[C])/(p[C+1]-p[C]);return C+d}function q(){this.ordinal||(this.ordinal=new E.Additions(this))}function Y(){let{eventArgs:p,options:x}=this;if(this.isXAxis&&ie(x.overscroll)&&x.overscroll!==0&&$(this.max)&&$(this.min)&&(this.options.ordinal&&!this.ordinal.originalOrdinalRange&&this.ordinal.getExtendedPositions(!1),this.max===this.dataMax&&(p?.trigger!=="pan"||this.isInternal)&&p?.trigger!=="navigator")){let C=this.ordinal.convertOverscroll(x.overscroll);this.max+=C,!this.isInternal&&ie(this.userMin)&&p?.trigger!=="mousewheel"&&(this.min+=C)}}function se(){this.horiz&&!this.isDirty&&(this.isDirty=this.isOrdinal&&this.chart.navigator&&!this.chart.navigator.adaptToUpdatedData)}function j(){this.ordinal&&(this.ordinal.beforeSetTickPositions(),this.tickInterval=this.ordinal.postProcessTickInterval(this.tickInterval))}function U(p){let x=this.xAxis[0],C=x.ordinal.convertOverscroll(x.options.overscroll),d=p.originalEvent.chartX,f=this.options.chart.panning,v=!1;if(f&&f.type!=="y"&&x.options.ordinal&&x.series.length&&(!p.touches||p.touches.length<=1)){let S,H,T=this.mouseDownX,b=x.getExtremes(),I=b.dataMin,D=b.dataMax,z=b.min,J=b.max,ne=this.hoverPoints,ee=x.closestPointRange||x.ordinal&&x.ordinal.overscrollPointsRange,oe=Math.round((T-d)/(x.translationSlope*(x.ordinal.slope||ee))),ae=x.ordinal.getExtendedPositions(),ve={ordinal:{positions:ae,extendedOrdinalPositions:ae}},_e=x.index2val,De=x.val2lin;if(z<=I&&oe<0||J+C>=D&&oe>0)return;ve.ordinal.positions?Math.abs(oe)>1&&(ne&&ne.forEach(function(be){be.setState()}),D>(H=ve.ordinal.positions)[H.length-1]&&H.push(D),this.setFixedRange(J-z),(S=x.navigatorAxis.toFixedRange(void 0,void 0,_e.apply(ve,[De.apply(ve,[z,!0])+oe]),_e.apply(ve,[De.apply(ve,[J,!0])+oe]))).min>=Math.min(b.dataMin,z)&&S.max<=Math.max(D,J)+C&&x.setExtremes(S.min,S.max,!0,!1,{trigger:"pan"}),this.mouseDownX=d,V(this.container,{cursor:"move"})):v=!0}else v=!0;v||f&&/y/.test(f.type)?C&&(x.max=x.dataMax+C):p.preventDefault()}function de(){let p=this.xAxis;p&&p.options.ordinal&&(delete p.ordinal.index,delete p.ordinal.originalOrdinalRange)}function g(p,x){let C,d=this.ordinal,f=d.positions,v=d.slope,S;if(!f)return p;let H=f.length;if(f[0]<=p&&f[H-1]>=p)C=G(f,p);else{if(!((S=d.getExtendedPositions&&d.getExtendedPositions())&&S.length))return p;let T=S.length;v||(v=(S[T-1]-S[0])/T);let b=G(S,f[0]);if(p>=S[0]&&p<=S[T-1])C=G(S,p)-b;else{if(!x)return p;C=p<S[0]?-b-(S[0]-p)/v:(p-S[T-1])/v+T-b}}return x?C:v*(C||0)+d.offset}E.compose=function(p,x,C){let d=p.prototype;return d.ordinal2lin||(d.getTimeTicks=L,d.index2val=Q,d.lin2val=R,d.val2lin=g,d.ordinal2lin=d.val2lin,w(p,"afterInit",q),w(p,"foundExtremes",Y),w(p,"afterSetScale",se),w(p,"initialAxisTranslation",j),w(C,"pan",U),w(C,"touchpan",U),w(x,"updatedData",de)),p};class k{constructor(x){this.index={},this.axis=x}beforeSetTickPositions(){let x=this.axis,C=x.ordinal,d=x.getExtremes(),f=d.min,v=d.max,S=x.brokenAxis?.hasBreaks,H=x.options.ordinal,T,b,I,D,z,J,ne,ee=[],oe=Number.MAX_VALUE,ae=!1,ve=!1,_e=!1;if(H||S){let De=0;if(x.series.forEach(function(be,we){if(b=[],we>0&&be.options.id!=="highcharts-navigator-series"&&be.processedXData.length>1&&(ve=De!==be.processedXData[1]-be.processedXData[0]),De=be.processedXData[1]-be.processedXData[0],be.boosted&&(_e=be.boosted),be.reserveSpace()&&(be.takeOrdinalPosition!==!1||S)&&(T=(ee=ee.concat(be.processedXData)).length,ee.sort(function(Fe,Be){return Fe-Be}),oe=Math.min(oe,K(be.closestPointRange,oe)),T)){for(we=0;we<T-1;)ee[we]!==ee[we+1]&&b.push(ee[we+1]),we++;b[0]!==ee[0]&&b.unshift(ee[0]),ee=b}}),x.ordinal.originalOrdinalRange||(x.ordinal.originalOrdinalRange=(ee.length-1)*oe),ve&&_e&&(ee.pop(),ee.shift()),(T=ee.length)>2){for(I=ee[1]-ee[0],ne=T-1;ne--&&!ae;)ee[ne+1]-ee[ne]!==I&&(ae=!0);!x.options.keepOrdinalPadding&&(ee[0]-f>I||v-ee[ee.length-1]>I)&&(ae=!0)}else x.options.overscroll&&(T===2?oe=ee[1]-ee[0]:T===1?(oe=x.ordinal.convertOverscroll(x.options.overscroll),ee=[ee[0],ee[0]+oe]):oe=C.overscrollPointsRange);ae||x.forceOrdinal?(x.options.overscroll&&(C.overscrollPointsRange=oe,ee=ee.concat(C.getOverscrollPositions())),C.positions=ee,D=x.ordinal2lin(Math.max(f,ee[0]),!0),z=Math.max(x.ordinal2lin(Math.min(v,ee[ee.length-1]),!0),1),C.slope=J=(v-f)/(z-D),C.offset=f-D*J):(C.overscrollPointsRange=K(x.closestPointRange,C.overscrollPointsRange),C.positions=x.ordinal.slope=C.offset=void 0)}x.isOrdinal=H&&ae,C.groupIntervalFactor=null}static findIndexOf(x,C,d){let f=0,v=x.length-1,S;for(;f<v;)x[S=Math.ceil((f+v)/2)]<=C?f=S:v=S-1;return x[f]===C||d?f:-1}getExtendedPositions(x=!0){let C=this,d=C.axis,f=d.constructor.prototype,v=d.chart,S=d.series[0]?.currentDataGrouping,H=S?S.count+S.unitName:"raw",T=x?d.ordinal.convertOverscroll(d.options.overscroll):0,b=d.getExtremes(),I,D,z=C.index;return z||(z=C.index={}),z[H]||((I={series:[],chart:v,forceOrdinal:!1,getExtremes:function(){return{min:b.dataMin,max:b.dataMax+T}},applyGrouping:f.applyGrouping,getGroupPixelWidth:f.getGroupPixelWidth,getTimeTicks:f.getTimeTicks,options:{ordinal:!0},ordinal:{getGroupIntervalFactor:this.getGroupIntervalFactor},ordinal2lin:f.ordinal2lin,getIndexOfPoint:f.getIndexOfPoint,val2lin:f.val2lin}).ordinal.axis=I,d.series.forEach(function(J){D={xAxis:I,xData:J.xData.slice(),chart:v,groupPixelWidth:J.groupPixelWidth,destroyGroupedData:s.noop,getProcessedData:l.prototype.getProcessedData,applyGrouping:l.prototype.applyGrouping,reserveSpace:l.prototype.reserveSpace,visible:J.visible},x&&(D.xData=D.xData.concat(C.getOverscrollPositions())),D.options={dataGrouping:S?{firstAnchor:J.options.dataGrouping?.firstAnchor,anchor:J.options.dataGrouping?.anchor,lastAnchor:J.options.dataGrouping?.firstAnchor,enabled:!0,forced:!0,approximation:"open",units:[[S.unitName,[S.count]]]}:{enabled:!1}},I.series.push(D),J.processData.apply(D)}),I.applyGrouping({hasExtremesChanged:!0}),D?.closestPointRange!==D?.basePointRange&&D.currentDataGrouping&&(I.forceOrdinal=!0),d.ordinal.beforeSetTickPositions.apply({axis:I}),!d.ordinal.originalOrdinalRange&&I.ordinal.originalOrdinalRange&&(d.ordinal.originalOrdinalRange=I.ordinal.originalOrdinalRange),z[H]=I.ordinal.positions),z[H]}getGroupIntervalFactor(x,C,d){let f=d.processedXData,v=f.length,S=[],H,T,b=this.groupIntervalFactor;if(!b){for(T=0;T<v-1;T++)S[T]=f[T+1]-f[T];S.sort(function(I,D){return I-D}),H=S[Math.floor(v/2)],x=Math.max(x,f[0]),C=Math.min(C,f[v-1]),this.groupIntervalFactor=b=v*H/(C-x)}return b}getIndexOfPoint(x,C){let d,f=this.axis,v=0,S=function(b){let{min:I,max:D}=f;return!!(ie(I)&&ie(D))&&b.points.some(z=>z.x>=I&&z.x<=D)};f.series.forEach(b=>{let I=b.points?.[0];ie(I?.plotX)&&(I.plotX<d||!ie(d))&&S(b)&&(d=I.plotX,v=I.x)}),d??(d=f.minPixelPadding);let H=f.translationSlope*(this.slope||f.closestPointRange||this.overscrollPointsRange),T=A((x-d)/H);return k.findIndexOf(C,v,!0)+T}getOverscrollPositions(){let x=this.axis,C=this.convertOverscroll(x.options.overscroll),d=this.overscrollPointsRange,f=[],v=x.dataMax;if(ie(d))for(;v<=x.dataMax+C;)f.push(v+=d);return f}postProcessTickInterval(x){let C=this.axis,d=this.slope;return d?C.options.breaks?C.closestPointRange||x:x/(d/C.closestPointRange):x}convertOverscroll(x=0){let C=this,d=C.axis,f=function(v){return K(C.originalOrdinalRange,ie(d.dataMax)&&ie(d.dataMin)?d.dataMax-d.dataMin:0)*v};if(N(x)){let v=parseInt(x,10);if(/%$/.test(x))return f(v/100);if(/px/.test(x)){let S=Math.min(v,.9*d.len)/d.len;return f(S/(1-S))}return 0}return x}}E.Additions=k}(m||(m={})),m}),i(a,"Stock/RangeSelector/RangeSelector.js",[a["Core/Axis/Axis.js"],a["Core/Defaults.js"],a["Core/Globals.js"],a["Stock/RangeSelector/RangeSelectorComposition.js"],a["Core/Renderer/SVG/SVGElement.js"],a["Core/Utilities.js"],a["Core/Axis/OrdinalAxis.js"]],function(r,s,l,h,m,w,A){let{defaultOptions:V}=s,{addEvent:ie,createElement:Z,css:$,defined:K,destroyObjectProperties:F,discardElement:N,extend:E,fireEvent:L,isNumber:Q,merge:R,objectEach:G,pad:q,pick:Y,pInt:se,splat:j}=w;class U{static compose(g,k){h.compose(g,k,U)}constructor(g){this.buttonOptions=U.prototype.defaultButtons,this.initialButtonGroupWidth=0,this.init(g)}clickButton(g,k){let p=this.chart,x=this.buttonOptions[g],C=p.xAxis[0],d=p.scroller&&p.scroller.getUnionExtremes()||C||{},f=x.type,v=x.dataGrouping,S=d.dataMin,H=d.dataMax,T,b=C&&Math.round(Math.min(C.max,Y(H,C.max))),I,D=x._range,z,J,ne,ee=!0;if(S!==null&&H!==null){if(this.setSelected(g),v&&(this.forcedDataGrouping=!0,r.prototype.setDataGrouping.call(C||{chart:this.chart},v,!1),this.frozenStates=x.preserveDataGrouping),f==="month"||f==="year")C?(J={range:x,max:b,chart:p,dataMin:S,dataMax:H},T=C.minFromRange.call(J),Q(J.newMax)&&(b=J.newMax),ee=!1):D=x;else if(D)b=Math.min((T=Math.max(b-D,S))+D,H),ee=!1;else if(f==="ytd")if(C)(H===void 0||S===void 0)&&(S=Number.MAX_VALUE,H=Number.MIN_VALUE,p.series.forEach(oe=>{let ae=oe.xData;ae&&(S=Math.min(ae[0],S),H=Math.max(ae[ae.length-1],H))}),k=!1),T=z=(ne=this.getYTDExtremes(H,S,p.time.useUTC)).min,b=ne.max;else{this.deferredYTDClick=g;return}else f==="all"&&C&&(p.navigator&&p.navigator.baseSeries[0]&&(p.navigator.baseSeries[0].xAxis.options.range=void 0),T=S,b=H);if(ee&&x._offsetMin&&K(T)&&(T+=x._offsetMin),x._offsetMax&&K(b)&&(b+=x._offsetMax),this.dropdown&&(this.dropdown.selectedIndex=g+1),C)C.setExtremes(T,b,Y(k,!0),void 0,{trigger:"rangeSelectorButton",rangeSelectorButton:x}),p.setFixedRange(x._range);else{I=j(p.options.xAxis)[0];let oe=ie(p,"afterGetAxes",function(){let ae=p.xAxis[0];ae.range=ae.options.range=D,ae.min=ae.options.min=z});ie(p,"load",function(){let ae=p.xAxis[0];p.setFixedRange(x._range),ae.options.range=I.range,ae.options.min=I.min,oe()})}L(this,"afterBtnClick")}}setSelected(g){this.selected=this.options.selected=g}init(g){let k=this,p=g.options.rangeSelector,x=p.buttons||k.defaultButtons.slice(),C=p.selected,d=function(){let f=k.minInput,v=k.maxInput;f&&f.blur&&L(f,"blur"),v&&v.blur&&L(v,"blur")};k.chart=g,k.options=p,k.buttons=[],k.buttonOptions=x,this.eventsToUnbind=[],this.eventsToUnbind.push(ie(g.container,"mousedown",d)),this.eventsToUnbind.push(ie(g,"resize",d)),x.forEach(k.computeButtonRange),C!==void 0&&x[C]&&this.clickButton(C,!1),this.eventsToUnbind.push(ie(g,"load",function(){g.xAxis&&g.xAxis[0]&&ie(g.xAxis[0],"setExtremes",function(f){Q(this.max)&&Q(this.min)&&this.max-this.min!==g.fixedRange&&f.trigger!=="rangeSelectorButton"&&f.trigger!=="updatedData"&&k.forcedDataGrouping&&!k.frozenStates&&this.setDataGrouping(!1,!1)})})),this.createElements()}updateButtonStates(){let g=this,k=this.chart,p=this.dropdown,x=this.dropdownLabel,C=k.xAxis[0],d=Math.round(C.max-C.min),f=!C.hasVisibleSeries,v=24*36e5,S=k.scroller&&k.scroller.getUnionExtremes()||C,H=S.dataMin,T=S.dataMax,b=g.getYTDExtremes(T,H,k.time.useUTC),I=b.min,D=b.max,z=g.selected,J=g.options.allButtonsEnabled,ne=Array(g.buttonOptions.length).fill(0),ee=Q(z),oe=g.buttons,ae=!1,ve=null;g.buttonOptions.forEach((_e,De)=>{let be=_e._range,we=_e.type,Fe=_e.count||1,Be=_e._offsetMax-_e._offsetMin,He=De===z,je=be>T-H,Je=be<C.minRange,et=!1,mt=be===d;if(He&&je&&(ae=!0),C.isOrdinal&&C.ordinal?.positions&&be&&d<be){let ri=C.ordinal.positions,Mr=A.Additions.findIndexOf(ri,C.min,!0),Ar=Math.min(A.Additions.findIndexOf(ri,C.max,!0)+1,ri.length-1);ri[Ar]-ri[Mr]>be&&(mt=!0)}else(we==="month"||we==="year")&&d+36e5>={month:28,year:365}[we]*v*Fe-Be&&d-36e5<={month:31,year:366}[we]*v*Fe+Be?mt=!0:we==="ytd"?(mt=D-I+Be===d,et=!He):we==="all"&&(mt=C.max-C.min>=T-H);let Ai=!J&&!(ae&&we==="all")&&(je||Je||f),Tn=ae&&we==="all"||!et&&mt||He&&g.frozenStates;Ai?ne[De]=3:Tn&&(!ee||De===z)&&(ve=De)}),ve!==null?(ne[ve]=2,g.setSelected(ve)):(g.setSelected(),x&&(x.setState(0),x.attr({text:(V.lang.rangeSelectorZoom||"")+" \u25BE"})));for(let _e=0;_e<ne.length;_e++){let De=ne[_e],be=oe[_e];if(be.state!==De&&(be.setState(De),p)){p.options[_e+1].disabled=De===3,De===2&&(x&&(x.setState(2),x.attr({text:g.buttonOptions[_e].text+" \u25BE"})),p.selectedIndex=_e+1);let we=x.getBBox();$(p,{width:`${we.width}px`,height:`${we.height}px`})}}}computeButtonRange(g){let k=g.type,p=g.count||1,x={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5};x[k]?g._range=x[k]*p:(k==="month"||k==="year")&&(g._range=24*{month:30,year:365}[k]*36e5*p),g._offsetMin=Y(g.offsetMin,0),g._offsetMax=Y(g.offsetMax,0),g._range+=g._offsetMax-g._offsetMin}getInputValue(g){let k=g==="min"?this.minInput:this.maxInput,p=this.chart.options.rangeSelector,x=this.chart.time;return k?(k.type==="text"&&p.inputDateParser||this.defaultInputDateParser)(k.value,x.useUTC,x):0}setInputValue(g,k){let p=this.options,x=this.chart.time,C=g==="min"?this.minInput:this.maxInput,d=g==="min"?this.minDateBox:this.maxDateBox;if(C){let f=C.getAttribute("data-hc-time"),v=K(f)?Number(f):void 0;if(K(k)){let S=v;K(S)&&C.setAttribute("data-hc-time-previous",S),C.setAttribute("data-hc-time",k),v=k}C.value=x.dateFormat(this.inputTypeFormats[C.type]||p.inputEditDateFormat,v),d&&d.attr({text:x.dateFormat(p.inputDateFormat,v)})}}setInputExtremes(g,k,p){let x=g==="min"?this.minInput:this.maxInput;if(x){let C=this.inputTypeFormats[x.type],d=this.chart.time;if(C){let f=d.dateFormat(C,k);x.min!==f&&(x.min=f);let v=d.dateFormat(C,p);x.max!==v&&(x.max=v)}}}showInput(g){let k=g==="min"?this.minDateBox:this.maxDateBox,p=g==="min"?this.minInput:this.maxInput;if(p&&k&&this.inputGroup){let x=p.type==="text",{translateX:C=0,translateY:d=0}=this.inputGroup,{x:f=0,width:v=0,height:S=0}=k,{inputBoxWidth:H}=this.options;$(p,{width:x?v+(H?-2:20)+"px":"auto",height:S-2+"px",border:"2px solid silver"}),x&&H?$(p,{left:C+f+"px",top:d+"px"}):$(p,{left:Math.min(Math.round(f+C-(p.offsetWidth-v)/2),this.chart.chartWidth-p.offsetWidth)+"px",top:d-(p.offsetHeight-S)/2+"px"})}}hideInput(g){let k=g==="min"?this.minInput:this.maxInput;k&&$(k,{top:"-9999em",border:0,width:"1px",height:"1px"})}defaultInputDateParser(g,k,p){let x=g.split("/").join("-").split(" ").join("T");if(x.indexOf("T")===-1&&(x+="T00:00"),k)x+="Z";else{let d;if(l.isSafari&&!((d=x).length>6&&(d.lastIndexOf("-")===d.length-6||d.lastIndexOf("+")===d.length-6))){let f=new Date(x).getTimezoneOffset()/60;x+=f<=0?`+${q(-f)}:00`:`-${q(f)}:00`}}let C=Date.parse(x);if(!Q(C)){let d=g.split("-");C=Date.UTC(se(d[0]),se(d[1])-1,se(d[2]))}return p&&k&&Q(C)&&(C+=p.getTimezoneOffset(C)),C}drawInput(g){let{chart:k,div:p,inputGroup:x}=this,C=this,d=k.renderer.style||{},f=k.renderer,v=k.options.rangeSelector,S=V.lang,H=g==="min";function T(ne){let{maxInput:ee,minInput:oe}=C,ae=k.xAxis[0],ve=k.scroller?.getUnionExtremes()||ae,_e=ve.dataMin,De=ve.dataMax,be=k.xAxis[0].getExtremes()[ne],we=C.getInputValue(ne);Q(we)&&we!==be&&(H&&ee&&Q(_e)?we>Number(ee.getAttribute("data-hc-time"))?we=void 0:we<_e&&(we=_e):oe&&Q(De)&&(we<Number(oe.getAttribute("data-hc-time"))?we=void 0:we>De&&(we=De)),we!==void 0&&ae.setExtremes(H?we:ae.min,H?ae.max:we,void 0,void 0,{trigger:"rangeSelectorInput"}))}let b=S[H?"rangeSelectorFrom":"rangeSelectorTo"]||"",I=f.label(b,0).addClass("highcharts-range-label").attr({padding:b?2:0,height:b?v.inputBoxHeight:0}).add(x),D=f.label("",0).addClass("highcharts-range-input").attr({padding:2,width:v.inputBoxWidth,height:v.inputBoxHeight,"text-align":"center"}).on("click",function(){C.showInput(g),C[g+"Input"].focus()});k.styledMode||D.attr({stroke:v.inputBoxBorderColor,"stroke-width":1}),D.add(x);let z=Z("input",{name:g,className:"highcharts-range-selector"},void 0,p);z.setAttribute("type",function(ne){if(ne.indexOf("%L")!==-1)return"text";let ee=["a","A","d","e","w","b","B","m","o","y","Y"].some(ae=>ne.indexOf("%"+ae)!==-1),oe=["H","k","I","l","M","S"].some(ae=>ne.indexOf("%"+ae)!==-1);return ee&&oe?"datetime-local":ee?"date":oe?"time":"text"}(v.inputDateFormat||"%e %b %Y")),k.styledMode||(I.css(R(d,v.labelStyle)),D.css(R({color:"#333333"},d,v.inputStyle)),$(z,E({position:"absolute",border:0,boxShadow:"0 0 15px rgba(0,0,0,0.3)",width:"1px",height:"1px",padding:0,textAlign:"center",fontSize:d.fontSize,fontFamily:d.fontFamily,top:"-9999em"},v.inputStyle))),z.onfocus=()=>{C.showInput(g)},z.onblur=()=>{z===l.doc.activeElement&&T(g),C.hideInput(g),C.setInputValue(g),z.blur()};let J=!1;return z.onchange=()=>{J||(T(g),C.hideInput(g),z.blur())},z.onkeypress=ne=>{ne.keyCode===13&&T(g)},z.onkeydown=ne=>{J=!0,(ne.key==="ArrowUp"||ne.key==="ArrowDown"||ne.key==="Tab")&&T(g)},z.onkeyup=()=>{J=!1},{dateBox:D,input:z,label:I}}getPosition(){let g=this.chart,k=g.options.rangeSelector,p=k.verticalAlign==="top"?g.plotTop-g.axisOffset[0]:0;return{buttonTop:p+k.buttonPosition.y,inputTop:p+k.inputPosition.y-10}}getYTDExtremes(g,k,p){let x=this.chart.time,C=new x.Date(g),d=x.get("FullYear",C),f=Math.max(k,p?x.Date.UTC(d,0,1):+new x.Date(d,0,1)),v=C.getTime();return{max:Math.min(g||v,v),min:f}}createElements(){let g=this.chart,k=g.renderer,p=g.container,x=g.options,C=x.rangeSelector,d=C.inputEnabled,f=Y(x.chart.style?.zIndex,0)+1;if(C.enabled!==!1&&(this.group=k.g("range-selector-group").attr({zIndex:7}).add(),this.div=Z("div",void 0,{position:"relative",height:0,zIndex:f}),this.buttonOptions.length&&this.renderButtons(),p.parentNode&&p.parentNode.insertBefore(this.div,p),d)){this.inputGroup=k.g("input-group").add(this.group);let v=this.drawInput("min");this.minDateBox=v.dateBox,this.minLabel=v.label,this.minInput=v.input;let S=this.drawInput("max");this.maxDateBox=S.dateBox,this.maxLabel=S.label,this.maxInput=S.input}}render(g,k){let p=this.chart,x=p.options.rangeSelector,C=x.inputEnabled;if(x.enabled!==!1){if(C){this.setInputValue("min",g),this.setInputValue("max",k);let d=p.scroller&&p.scroller.getUnionExtremes()||p.xAxis[0]||{};if(K(d.dataMin)&&K(d.dataMax)){let f=p.xAxis[0].minRange||0;this.setInputExtremes("min",d.dataMin,Math.min(d.dataMax,this.getInputValue("max"))-f),this.setInputExtremes("max",Math.max(d.dataMin,this.getInputValue("min"))+f,d.dataMax)}if(this.inputGroup){let f=0;[this.minLabel,this.minDateBox,this.maxLabel,this.maxDateBox].forEach(v=>{if(v){let{width:S}=v.getBBox();S&&(v.attr({x:f}),f+=S+x.inputSpacing)}})}}this.alignElements(),this.updateButtonStates()}}renderButtons(){let{buttons:g,chart:k,options:p}=this,x=V.lang,C=k.renderer,d=R(p.buttonTheme),f=d&&d.states,v=d.width||28;delete d.width,delete d.states,this.buttonGroup=C.g("range-selector-buttons").add(this.group);let S=this.dropdown=Z("select",void 0,{position:"absolute",padding:0,border:0,cursor:"pointer",opacity:1e-4},this.div),H=k.userOptions.rangeSelector?.buttonTheme;this.dropdownLabel=C.button("",0,0,()=>{},R(d,{"stroke-width":Y(d["stroke-width"],0),width:"auto",paddingLeft:Y(p.buttonTheme.paddingLeft,H?.padding,8),paddingRight:Y(p.buttonTheme.paddingRight,H?.padding,8)}),f&&f.hover,f&&f.select,f&&f.disabled).hide().add(this.group),ie(S,"touchstart",()=>{S.style.fontSize="16px"});let T=l.isMS?"mouseover":"mouseenter",b=l.isMS?"mouseout":"mouseleave";ie(S,T,()=>{L(this.dropdownLabel.element,T)}),ie(S,b,()=>{L(this.dropdownLabel.element,b)}),ie(S,"change",()=>{L(this.buttons[S.selectedIndex-1].element,"click")}),this.zoomText=C.label(x.rangeSelectorZoom||"",0).attr({padding:p.buttonTheme.padding,height:p.buttonTheme.height,paddingLeft:0,paddingRight:0}).add(this.buttonGroup),this.chart.styledMode||(this.zoomText.css(p.labelStyle),d["stroke-width"]=Y(d["stroke-width"],0)),Z("option",{textContent:this.zoomText.textStr,disabled:!0},void 0,S),this.buttonOptions.forEach((I,D)=>{Z("option",{textContent:I.title||I.text},void 0,S),g[D]=C.button(I.text,0,0,z=>{let J,ne=I.events&&I.events.click;ne&&(J=ne.call(I,z)),J!==!1&&this.clickButton(D),this.isActive=!0},d,f&&f.hover,f&&f.select,f&&f.disabled).attr({"text-align":"center",width:v}).add(this.buttonGroup),I.title&&g[D].attr("title",I.title)})}alignElements(){let{buttonGroup:g,buttons:k,chart:p,group:x,inputGroup:C,options:d,zoomText:f}=this,v=p.options,S=v.exporting&&v.exporting.enabled!==!1&&v.navigation&&v.navigation.buttonOptions,{buttonPosition:H,inputPosition:T,verticalAlign:b}=d,I=(z,J)=>S&&this.titleCollision(p)&&b==="top"&&J.align==="right"&&J.y-z.getBBox().height-12<(S.y||0)+(S.height||0)+p.spacing[0]?-40:0,D=p.plotLeft;if(x&&H&&T){let z=H.x-p.spacing[3];if(g){if(this.positionButtons(),!this.initialButtonGroupWidth){let be=0;f&&(be+=f.getBBox().width+5),k.forEach((we,Fe)=>{be+=we.width||0,Fe!==k.length-1&&(be+=d.buttonSpacing)}),this.initialButtonGroupWidth=be}D-=p.spacing[3];let De=I(g,H);this.alignButtonGroup(De),this.buttonGroup?.translateY&&this.dropdownLabel.attr({y:this.buttonGroup.translateY}),x.placed=g.placed=p.hasLoaded}let J=0;C&&(J=I(C,T),T.align==="left"?z=D:T.align==="right"&&(z=-Math.max(p.axisOffset[1],-J)),C.align({y:T.y,width:C.getBBox().width,align:T.align,x:T.x+z-2},!0,p.spacingBox),C.placed=p.hasLoaded),this.handleCollision(J),x.align({verticalAlign:b},!0,p.spacingBox);let ne=x.alignAttr.translateY,ee=x.getBBox().height+20,oe=0;if(b==="bottom"){let De=p.legend&&p.legend.options;oe=ne-(ee=ee+(De&&De.verticalAlign==="bottom"&&De.enabled&&!De.floating?p.legend.legendHeight+Y(De.margin,10):0)-20)-(d.floating?0:d.y)-(p.titleOffset?p.titleOffset[2]:0)-10}b==="top"?(d.floating&&(oe=0),p.titleOffset&&p.titleOffset[0]&&(oe=p.titleOffset[0]),oe+=p.margin[0]-p.spacing[0]||0):b==="middle"&&(T.y===H.y?oe=ne:(T.y||H.y)&&(T.y<0||H.y<0?oe-=Math.min(T.y,H.y):oe=ne-ee)),x.translate(d.x,d.y+Math.floor(oe));let{minInput:ae,maxInput:ve,dropdown:_e}=this;d.inputEnabled&&ae&&ve&&(ae.style.marginTop=x.translateY+"px",ve.style.marginTop=x.translateY+"px"),_e&&(_e.style.marginTop=x.translateY+"px")}}alignButtonGroup(g,k){let{chart:p,options:x,buttonGroup:C}=this,{buttonPosition:d}=x,f=p.plotLeft-p.spacing[3],v=d.x-p.spacing[3];d.align==="right"?v+=g-f:d.align==="center"&&(v-=f/2),C&&C.align({y:d.y,width:Y(k,this.initialButtonGroupWidth),align:d.align,x:v},!0,p.spacingBox)}positionButtons(){let{buttons:g,chart:k,options:p,zoomText:x}=this,C=k.hasLoaded?"animate":"attr",{buttonPosition:d}=p,f=k.plotLeft,v=f;x&&x.visibility!=="hidden"&&(x[C]({x:Y(f+d.x,f)}),v+=d.x+x.getBBox().width+5);for(let S=0,H=this.buttonOptions.length;S<H;++S)g[S].visibility!=="hidden"?(g[S][C]({x:v}),v+=(g[S].width||0)+p.buttonSpacing):g[S][C]({x:f})}handleCollision(g){let{chart:k,buttonGroup:p,inputGroup:x}=this,{buttonPosition:C,dropdown:d,inputPosition:f}=this.options,v=()=>{let T=0;return this.buttons.forEach(b=>{let I=b.getBBox();I.width>T&&(T=I.width)}),T},S=T=>{if(x?.alignOptions&&p){let b=x.alignAttr.translateX+x.alignOptions.x-g+x.getBBox().x+2,I=x.alignOptions.width||0,D=p.alignAttr.translateX+p.getBBox().x;return D+T>b&&b+I>D&&C.y<f.y+x.getBBox().height}return!1},H=()=>{x&&p&&x.attr({translateX:x.alignAttr.translateX+(k.axisOffset[1]>=-g?0:-g),translateY:x.alignAttr.translateY+p.getBBox().height+10})};if(p){if(d==="always"){this.collapseButtons(),S(v())&&H();return}d==="never"&&this.expandButtons()}x&&p?f.align===C.align||S(this.initialButtonGroupWidth+20)?d==="responsive"?(this.collapseButtons(),S(v())&&H()):H():d==="responsive"&&this.expandButtons():p&&d==="responsive"&&(this.initialButtonGroupWidth>k.plotWidth?this.collapseButtons():this.expandButtons())}collapseButtons(){let{buttons:g,zoomText:k}=this;this.isCollapsed!==!0&&(this.isCollapsed=!0,k.hide(),g.forEach(p=>void p.hide()),this.showDropdown())}expandButtons(){let{buttons:g,zoomText:k}=this;this.isCollapsed!==!1&&(this.isCollapsed=!1,this.hideDropdown(),k.show(),g.forEach(p=>void p.show()),this.positionButtons())}showDropdown(){let{buttonGroup:g,chart:k,dropdownLabel:p,dropdown:x}=this;if(g&&x){let{translateX:C=0,translateY:d=0}=g,f=k.plotLeft+C;p.attr({x:f,y:d}).show(),$(x,{left:f+"px",top:d+"px",visibility:"inherit"}),this.hasVisibleDropdown=!0}}hideDropdown(){let{dropdown:g}=this;g&&(this.dropdownLabel.hide(),$(g,{visibility:"hidden",width:"1px",height:"1px"}),this.hasVisibleDropdown=!1)}getHeight(){let g=this.options,k=this.group,p=g.inputPosition,x=g.buttonPosition,C=g.y,d=x.y,f=p.y,v=0;if(g.height)return g.height;this.alignElements(),v=k?k.getBBox(!0).height+13+C:0;let S=Math.min(f,d);return(f<0&&d<0||f>0&&d>0)&&(v+=Math.abs(S)),v}titleCollision(g){return!(g.options.title.text||g.options.subtitle.text)}update(g,k=!0){let p=this.chart;R(!0,p.options.rangeSelector,g),this.destroy(),this.init(p),k&&this.render()}destroy(){let g=this,k=g.minInput,p=g.maxInput;g.eventsToUnbind&&(g.eventsToUnbind.forEach(x=>x()),g.eventsToUnbind=void 0),F(g.buttons),k&&(k.onfocus=k.onblur=k.onchange=null),p&&(p.onfocus=p.onblur=p.onchange=null),G(g,function(x,C){x&&C!=="chart"&&(x instanceof m?x.destroy():x instanceof window.HTMLElement&&N(x)),x!==U.prototype[C]&&(g[C]=null)},this)}}return E(U.prototype,{defaultButtons:[{type:"month",count:1,text:"1m",title:"View 1 month"},{type:"month",count:3,text:"3m",title:"View 3 months"},{type:"month",count:6,text:"6m",title:"View 6 months"},{type:"ytd",text:"YTD",title:"View year to date"},{type:"year",count:1,text:"1y",title:"View 1 year"},{type:"all",text:"All",title:"View all"}],inputTypeFormats:{"datetime-local":"%Y-%m-%dT%H:%M:%S",date:"%Y-%m-%d",time:"%H:%M:%S"}}),U}),i(a,"Series/PathUtilities.js",[],function(){function r(s,l){let h=[];for(let m=0;m<s.length;m++){let w=s[m][1],A=s[m][2];if(typeof w=="number"&&typeof A=="number")if(m===0)h.push(["M",w,A]);else if(m===s.length-1)h.push(["L",w,A]);else if(l){let V=s[m-1],ie=s[m+1];if(V&&ie){let Z=V[1],$=V[2],K=ie[1],F=ie[2];if(typeof Z=="number"&&typeof K=="number"&&typeof $=="number"&&typeof F=="number"&&Z!==K&&$!==F){let N=Z<K?1:-1,E=$<F?1:-1;h.push(["L",w-N*Math.min(Math.abs(w-Z),l),A-E*Math.min(Math.abs(A-$),l)],["C",w,A,w,A,w+N*Math.min(Math.abs(w-K),l),A+E*Math.min(Math.abs(A-F),l)])}}}else h.push(["L",w,A])}return h}return{applyRadius:r,getLinkPath:{default:function(s){let{x1:l,y1:h,x2:m,y2:w,width:A=0,inverted:V=!1,radius:ie,parentVisible:Z}=s;return Z?r([["M",l,h],["L",l+A*(V?-.5:.5),h],["L",l+A*(V?-.5:.5),w],["L",m,w]],ie):[["M",l,h],["L",l,h],["C",l,h,l,w,l,w],["L",l,w],["C",l,h,l,w,l,w],["L",l,w]]},straight:function(s){let{x1:l,y1:h,x2:m,y2:w,width:A=0,inverted:V=!1,parentVisible:ie}=s;return ie?[["M",l,h],["L",l+A*(V?-1:1),w],["L",m,w]]:[["M",l,h],["L",l,w],["L",l,w]]},curved:function(s){let{x1:l,y1:h,x2:m,y2:w,offset:A=0,width:V=0,inverted:ie=!1,parentVisible:Z}=s;return Z?[["M",l,h],["C",l+A,h,l-A+V*(ie?-1:1),w,l+V*(ie?-1:1),w],["L",m,w]]:[["M",l,h],["C",l,h,l,w,l,w],["L",m,w]]}}}}),i(a,"Gantt/PathfinderAlgorithms.js",[a["Series/PathUtilities.js"],a["Core/Utilities.js"]],function(r,s){let{pick:l}=s,{min:h,max:m,abs:w}=Math;function A(F,N,E){let L=N-1e-7,Q=E||0,R=F.length-1,G,q;for(;Q<=R;)if((q=L-F[G=R+Q>>1].xMin)>0)Q=G+1;else{if(!(q<0))return G;R=G-1}return Q>0?Q-1:0}function V(F,N){let E=A(F,N.x+1)+1;for(;E--;){var L;if(F[E].xMax>=N.x&&(L=F[E],N.x<=L.xMax&&N.x>=L.xMin&&N.y<=L.yMax&&N.y>=L.yMin))return E}return-1}function ie(F){let N=[];if(F.length){N.push(["M",F[0].start.x,F[0].start.y]);for(let E=0;E<F.length;++E)N.push(["L",F[E].end.x,F[E].end.y])}return N}function Z(F,N){F.yMin=m(F.yMin,N.yMin),F.yMax=h(F.yMax,N.yMax),F.xMin=m(F.xMin,N.xMin),F.xMax=h(F.xMax,N.xMax)}let $=function(F,N,E){let L=[],Q=E.chartObstacles,R=V(Q,F),G=V(Q,N),q,Y=l(E.startDirectionX,w(N.x-F.x)>w(N.y-F.y))?"x":"y",se,j,U,de;function g(C,d,f,v,S){let H={x:C.x,y:C.y};return H[d]=f[v||d]+(S||0),H}function k(C,d,f){let v=w(d[f]-C[f+"Min"])>w(d[f]-C[f+"Max"]);return g(d,f,C,f+(v?"Max":"Min"),v?1:-1)}G>-1?(q={start:j=k(Q[G],N,Y),end:N},de=j):de=N,R>-1&&(j=k(se=Q[R],F,Y),L.push({start:F,end:j}),j[Y]>=F[Y]==j[Y]>=de[Y]&&(U=F[Y=Y==="y"?"x":"y"]<N[Y],L.push({start:j,end:g(j,Y,se,Y+(U?"Max":"Min"),U?1:-1)}),Y=Y==="y"?"x":"y"));let p=L.length?L[L.length-1].end:F;j=g(p,Y,de),L.push({start:p,end:j});let x=g(j,Y=Y==="y"?"x":"y",de);return L.push({start:j,end:x}),L.push(q),{path:r.applyRadius(ie(L),E.radius),obstacles:L}};function K(F,N,E){let L=l(E.startDirectionX,w(N.x-F.x)>w(N.y-F.y)),Q=L?"x":"y",R=[],G=E.obstacleMetrics,q=h(F.x,N.x)-G.maxWidth-10,Y=m(F.x,N.x)+G.maxWidth+10,se=h(F.y,N.y)-G.maxHeight-10,j=m(F.y,N.y)+G.maxHeight+10,U,de,g,k=!1,p=E.chartObstacles,x=A(p,Y),C=A(p,q);function d(v,S,H){let T,b,I,D,z=v.x<S.x?1:-1;v.x<S.x?(T=v,b=S):(T=S,b=v),v.y<S.y?(D=v,I=S):(D=S,I=v);let J=z<0?h(A(p,b.x),p.length-1):0;for(;p[J]&&(z>0&&p[J].xMin<=b.x||z<0&&p[J].xMax>=T.x);){if(p[J].xMin<=b.x&&p[J].xMax>=T.x&&p[J].yMin<=I.y&&p[J].yMax>=D.y)return H?{y:v.y,x:v.x<S.x?p[J].xMin-1:p[J].xMax+1,obstacle:p[J]}:{x:v.x,y:v.y<S.y?p[J].yMin-1:p[J].yMax+1,obstacle:p[J]};J+=z}return S}function f(v,S,H,T,b){let I=b.soft,D=b.hard,z=T?"x":"y",J={x:S.x,y:S.y},ne={x:S.x,y:S.y},ee=v[z+"Max"]>=I[z+"Max"],oe=v[z+"Min"]<=I[z+"Min"],ae=v[z+"Max"]>=D[z+"Max"],ve=v[z+"Min"]<=D[z+"Min"],_e=w(v[z+"Min"]-S[z]),De=w(v[z+"Max"]-S[z]),be=10>w(_e-De)?S[z]<H[z]:De<_e;ne[z]=v[z+"Min"],J[z]=v[z+"Max"];let we=d(S,ne,T)[z]!==ne[z],Fe=d(S,J,T)[z]!==J[z];return be=we?!Fe||be:!Fe&&be,be=oe?!ee||be:!ee&&be,be=ve?!ae||be:!ae&&be}for((x=V(p=p.slice(C,x+1),N))>-1&&(g=function(v,S,H){let T=h(v.xMax-S.x,S.x-v.xMin)<h(v.yMax-S.y,S.y-v.yMin),b=f(v,S,H,T,{soft:E.hardBounds,hard:E.hardBounds});return T?{y:S.y,x:v[b?"xMax":"xMin"]+(b?1:-1)}:{x:S.x,y:v[b?"yMax":"yMin"]+(b?1:-1)}}(p[x],N,F),R.push({end:N,start:g}),N=g);(x=V(p,N))>-1;)de=N[Q]-F[Q]<0,(g={x:N.x,y:N.y})[Q]=p[x][de?Q+"Max":Q+"Min"]+(de?1:-1),R.push({end:N,start:g}),N=g;return{path:ie(U=(U=function v(S,H,T){let b,I,D,z,J,ne,ee;if(S.x===H.x&&S.y===H.y)return[];let oe=T?"x":"y",ae=E.obstacleOptions.margin,ve={soft:{xMin:q,xMax:Y,yMin:se,yMax:j},hard:E.hardBounds};return(J=V(p,S))>-1?(z=f(J=p[J],S,H,T,ve),Z(J,E.hardBounds),ee=T?{y:S.y,x:J[z?"xMax":"xMin"]+(z?1:-1)}:{x:S.x,y:J[z?"yMax":"yMin"]+(z?1:-1)},(ne=V(p,ee))>-1&&(Z(ne=p[ne],E.hardBounds),ee[oe]=z?m(J[oe+"Max"]-ae+1,(ne[oe+"Min"]+J[oe+"Max"])/2):h(J[oe+"Min"]+ae-1,(ne[oe+"Max"]+J[oe+"Min"])/2),S.x===ee.x&&S.y===ee.y?(k&&(ee[oe]=z?m(J[oe+"Max"],ne[oe+"Max"])+1:h(J[oe+"Min"],ne[oe+"Min"])-1),k=!k):k=!1),I=[{start:S,end:ee}]):(b=d(S,{x:T?H.x:S.x,y:T?S.y:H.y},T),I=[{start:S,end:{x:b.x,y:b.y}}],b[T?"x":"y"]!==H[T?"x":"y"]&&(z=f(b.obstacle,b,H,!T,ve),Z(b.obstacle,E.hardBounds),D={x:T?b.x:b.obstacle[z?"xMax":"xMin"]+(z?1:-1),y:T?b.obstacle[z?"yMax":"yMin"]+(z?1:-1):b.y},T=!T,I=I.concat(v({x:b.x,y:b.y},D,T)))),I=I.concat(v(I[I.length-1].end,H,!T))}(F,N,L)).concat(R.reverse())),obstacles:U}}return $.requiresObstacles=!0,K.requiresObstacles=!0,{fastAvoid:K,straight:function(F,N){return{path:[["M",F.x,F.y],["L",N.x,N.y]],obstacles:[{start:F,end:N}]}},simpleConnect:$}}),i(a,"Gantt/ConnectorsDefaults.js",[],function(){return{connectors:{type:"straight",radius:0,lineWidth:1,marker:{enabled:!1,align:"center",verticalAlign:"middle",inside:!1,lineWidth:1},startMarker:{symbol:"diamond"},endMarker:{symbol:"arrow-filled"}}}}),i(a,"Gantt/PathfinderComposition.js",[a["Gantt/ConnectorsDefaults.js"],a["Core/Defaults.js"],a["Core/Utilities.js"]],function(r,s,l){var h;let{setOptions:m}=s,{defined:w,error:A,merge:V}=l;function ie(Z){let $=Z.shapeArgs;if($)return{xMin:$.x||0,xMax:($.x||0)+($.width||0),yMin:$.y||0,yMax:($.y||0)+($.height||0)};let K=Z.graphic&&Z.graphic.getBBox();return K?{xMin:Z.plotX-K.width/2,xMax:Z.plotX+K.width/2,yMin:Z.plotY-K.height/2,yMax:Z.plotY+K.height/2}:null}return function(Z){function $(N){let E,L,Q=ie(this);switch(N.align){case"right":E="xMax";break;case"left":E="xMin"}switch(N.verticalAlign){case"top":L="yMin";break;case"bottom":L="yMax"}return{x:E?Q[E]:(Q.xMin+Q.xMax)/2,y:L?Q[L]:(Q.yMin+Q.yMax)/2}}function K(N,E){let L;return!w(E)&&(L=ie(this))&&(E={x:(L.xMin+L.xMax)/2,y:(L.yMin+L.yMax)/2}),Math.atan2(E.y-N.y,N.x-E.x)}function F(N,E,L){let Q=2*Math.PI,R=ie(this),G=R.xMax-R.xMin,q=R.yMax-R.yMin,Y=Math.atan2(q,G),se=G/2,j=q/2,U=R.xMin+se,de=R.yMin+j,g={x:U,y:de},k=N,p=1,x=!1,C=1,d=1;for(;k<-Math.PI;)k+=Q;for(;k>Math.PI;)k-=Q;return p=Math.tan(k),k>-Y&&k<=Y?(d=-1,x=!0):k>Y&&k<=Math.PI-Y?d=-1:k>Math.PI-Y||k<=-(Math.PI-Y)?(C=-1,x=!0):C=-1,x?(g.x+=C*se,g.y+=d*se*p):(g.x+=q/(2*p)*C,g.y+=d*j),L.x!==U&&(g.x=L.x),L.y!==de&&(g.y=L.y),{x:g.x+E*Math.cos(k),y:g.y-E*Math.sin(k)}}Z.compose=function(N,E,L){let Q=L.prototype;Q.getPathfinderAnchorPoint||(N.prototype.callbacks.push(function(R){R.options.connectors.enabled!==!1&&((R.options.pathfinder||R.series.reduce(function(G,q){return q.options&&V(!0,q.options.connectors=q.options.connectors||{},q.options.pathfinder),G||q.options&&q.options.pathfinder},!1))&&(V(!0,R.options.connectors=R.options.connectors||{},R.options.pathfinder),A('WARNING: Pathfinder options have been renamed. Use "chart.connectors" or "series.connectors" instead.')),this.pathfinder=new E(this),this.pathfinder.update(!0))}),Q.getMarkerVector=F,Q.getPathfinderAnchorPoint=$,Q.getRadiansToVector=K,m(r))}}(h||(h={})),h}),i(a,"Gantt/Pathfinder.js",[a["Gantt/Connection.js"],a["Gantt/PathfinderAlgorithms.js"],a["Gantt/PathfinderComposition.js"],a["Core/Series/Point.js"],a["Core/Utilities.js"]],function(r,s,l,h,m){let{addEvent:w,defined:A,pick:V,splat:ie}=m,Z=Math.max,$=Math.min;class K{static compose(N,E){l.compose(N,K,E)}constructor(N){this.init(N)}init(N){this.chart=N,this.connections=[],w(N,"redraw",function(){this.pathfinder.update()})}update(N){let E=this.chart,L=this,Q=L.connections;L.connections=[],E.series.forEach(function(R){R.visible&&!R.options.isInternal&&R.points.forEach(function(G){let q,Y=G.options;Y&&Y.dependency&&(Y.connect=Y.dependency);let se=G.options?.connect&&ie(G.options.connect);G.visible&&G.isInside!==!1&&se&&se.forEach(function(j){(q=E.get(typeof j=="string"?j:j.to))instanceof h&&q.series.visible&&q.visible&&q.isInside!==!1&&L.connections.push(new r(G,q,typeof j=="string"?{}:j))})})});for(let R=0,G,q,Y=Q.length,se=L.connections.length;R<Y;++R){q=!1;let j=Q[R];for(G=0;G<se;++G){let U=L.connections[G];if((j.options&&j.options.type)===(U.options&&U.options.type)&&j.fromPoint===U.fromPoint&&j.toPoint===U.toPoint){U.graphics=j.graphics,q=!0;break}}q||j.destroy()}delete this.chartObstacles,delete this.lineObstacles,L.renderConnections(N)}renderConnections(N){N?this.chart.series.forEach(function(E){let L=function(){let Q=E.chart.pathfinder;(Q&&Q.connections||[]).forEach(function(R){R.fromPoint&&R.fromPoint.series===E&&R.render()}),E.pathfinderRemoveRenderEvent&&(E.pathfinderRemoveRenderEvent(),delete E.pathfinderRemoveRenderEvent)};E.options.animation===!1?L():E.pathfinderRemoveRenderEvent=w(E,"afterAnimate",L)}):this.connections.forEach(function(E){E.render()})}getChartObstacles(N){let E=this.chart.series,L=V(N.algorithmMargin,0),Q=[],R;for(let G=0,q=E.length;G<q;++G)if(E[G].visible&&!E[G].options.isInternal)for(let Y=0,se=E[G].points.length,j,U;Y<se;++Y)(U=E[G].points[Y]).visible&&(j=function(de){let g=de.shapeArgs;if(g)return{xMin:g.x||0,xMax:(g.x||0)+(g.width||0),yMin:g.y||0,yMax:(g.y||0)+(g.height||0)};let k=de.graphic&&de.graphic.getBBox();return k?{xMin:de.plotX-k.width/2,xMax:de.plotX+k.width/2,yMin:de.plotY-k.height/2,yMax:de.plotY+k.height/2}:null}(U))&&Q.push({xMin:j.xMin-L,xMax:j.xMax+L,yMin:j.yMin-L,yMax:j.yMax+L});return Q=Q.sort(function(G,q){return G.xMin-q.xMin}),A(N.algorithmMargin)||(R=N.algorithmMargin=function(G){let q,Y=G.length,se=[];for(let j=0;j<Y;++j)for(let U=j+1;U<Y;++U)(q=function de(g,k,p){let x=V(p,10),C=g.yMax+x>k.yMin-x&&g.yMin-x<k.yMax+x,d=g.xMax+x>k.xMin-x&&g.xMin-x<k.xMax+x,f=C?g.xMin>k.xMax?g.xMin-k.xMax:k.xMin-g.xMax:1/0,v=d?g.yMin>k.yMax?g.yMin-k.yMax:k.yMin-g.yMax:1/0;return d&&C?x?de(g,k,Math.floor(x/2)):1/0:$(f,v)}(G[j],G[U]))<80&&se.push(q);return se.push(80),Z(Math.floor(se.sort(function(j,U){return j-U})[Math.floor(se.length/10)]/2-1),1)}(Q),Q.forEach(function(G){G.xMin-=R,G.xMax+=R,G.yMin-=R,G.yMax+=R})),Q}getObstacleMetrics(N){let E=0,L=0,Q,R,G=N.length;for(;G--;)Q=N[G].xMax-N[G].xMin,R=N[G].yMax-N[G].yMin,E<Q&&(E=Q),L<R&&(L=R);return{maxHeight:L,maxWidth:E}}getAlgorithmStartDirection(N){let E=N.align!=="left"&&N.align!=="right",L=N.verticalAlign!=="top"&&N.verticalAlign!=="bottom";return E?!!L&&void 0:!!L||void 0}}return K.prototype.algorithms=s,K}),i(a,"masters/modules/pathfinder.src.js",[a["Core/Globals.js"],a["Gantt/Pathfinder.js"],a["Extensions/ArrowSymbols.js"]],function(r,s,l){return r.Pathfinder=r.Pathfinder||s,l.compose(r.SVGRenderer),r.Pathfinder.compose(r.Chart,r.Point),r}),i(a,"Extensions/StaticScale.js",[a["Core/Utilities.js"]],function(r){let{addEvent:s,defined:l,isNumber:h,pick:m}=r;function w(){let V=this.chart.options.chart;!this.horiz&&h(this.options.staticScale)&&(!V.height||V.scrollablePlotArea&&V.scrollablePlotArea.minHeight)&&(this.staticScale=this.options.staticScale)}function A(){if(this.redrawTrigger!=="adjustHeight"){for(let V of this.axes||[]){let ie=V.chart,Z=!!ie.initiatedScale&&ie.options.animation,$=V.options.staticScale;if(V.staticScale&&l(V.min)){let K=m(V.brokenAxis&&V.brokenAxis.unitLength,V.max+V.tickInterval-V.min)*$,F=(K=Math.max(K,$))-ie.plotHeight;!ie.scrollablePixelsY&&Math.abs(F)>=1&&(ie.plotHeight=K,ie.redrawTrigger="adjustHeight",ie.setSize(void 0,ie.chartHeight+F,Z)),V.series.forEach(function(N){let E=N.sharedClipKey&&ie.sharedClips[N.sharedClipKey];E&&E.attr(ie.inverted?{width:ie.plotHeight}:{height:ie.plotHeight})})}}this.initiatedScale=!0}this.redrawTrigger=null}return{compose:function(V,ie){let Z=ie.prototype;Z.adjustHeight||(s(V,"afterSetOptions",w),Z.adjustHeight=A,s(ie,"render",Z.adjustHeight))}}}),i(a,"masters/modules/static-scale.src.js",[a["Core/Globals.js"],a["Extensions/StaticScale.js"]],function(r,s){return s.compose(r.Axis,r.Chart),r}),i(a,"Series/XRange/XRangeSeriesDefaults.js",[a["Core/Utilities.js"]],function(r){let{correctFloat:s,isNumber:l,isObject:h}=r;return{colorByPoint:!0,dataLabels:{formatter:function(){let m=this.point.partialFill;if(h(m)&&(m=m.amount),l(m)&&m>0)return s(100*m)+"%"},inside:!0,verticalAlign:"middle",style:{whiteSpace:"nowrap"}},tooltip:{headerFormat:'<span style="font-size: 0.8em">{point.x} - {point.x2}</span><br/>',pointFormat:'<span style="color:{point.color}">\u25CF</span> {series.name}: <b>{point.yCategory}</b><br/>'},borderRadius:3,pointRange:0}}),i(a,"Series/XRange/XRangePoint.js",[a["Core/Series/SeriesRegistry.js"],a["Core/Utilities.js"]],function(r,s){let{column:{prototype:{pointClass:l}}}=r.seriesTypes,{extend:h}=s;class m extends l{static getColorByCategory(A,V){let ie=A.options.colors||A.chart.options.colors,Z=ie?ie.length:A.chart.options.chart.colorCount,$=V.y%Z,K=ie&&ie[$];return{colorIndex:$,color:K}}resolveColor(){let A=this.series;if(A.options.colorByPoint&&!this.options.color){let V=m.getColorByCategory(A,this);A.chart.styledMode||(this.color=V.color),this.options.colorIndex||(this.colorIndex=V.colorIndex)}else this.color=this.options.color||A.color}constructor(A,V){super(A,V),this.y||(this.y=0)}setState(){super.setState.apply(this,arguments),this.series.drawPoint(this,this.series.getAnimationVerb())}getLabelConfig(){let A=super.getLabelConfig.call(this),V=this.series.yAxis.categories;return A.x2=this.x2,A.yCategory=this.yCategory=V&&V[this.y],A.key=this.category||this.name,A}isValid(){return typeof this.x=="number"&&typeof this.x2=="number"}}return h(m.prototype,{ttBelow:!1,tooltipDateKeys:["x","x2"]}),m}),i(a,"Series/XRange/XRangeSeries.js",[a["Core/Globals.js"],a["Core/Color/Color.js"],a["Core/Series/SeriesRegistry.js"],a["Core/Utilities.js"],a["Series/XRange/XRangeSeriesDefaults.js"],a["Series/XRange/XRangePoint.js"]],function(r,s,l,h,m,w){let{composed:A,noop:V}=r,{parse:ie}=s,{column:Z}=l.seriesTypes,{addEvent:$,clamp:K,crisp:F,defined:N,extend:E,find:L,isNumber:Q,isObject:R,merge:G,pick:q,pushUnique:Y,relativeLength:se}=h;function j(){let de,g;if(this.isXAxis){for(let k of(de=q(this.dataMax,-Number.MAX_VALUE),this.series))if(k.x2Data)for(let p of k.x2Data)p&&p>de&&(de=p,g=!0);g&&(this.dataMax=de)}}class U extends Z{static compose(g){Y(A,"Series.XRange")&&$(g,"afterGetSeriesExtremes",j)}init(){super.init.apply(this,arguments),this.options.stacking=void 0}getColumnMetrics(){let g=()=>{for(let p of this.chart.series){let x=p.xAxis;p.xAxis=p.yAxis,p.yAxis=x}};g();let k=super.getColumnMetrics();return g(),k}cropData(g,k,p,x){let C=super.cropData(this.x2Data,k,p,x);return C.xData=g.slice(C.start,C.end),C}findPointIndex(g){let k,{cropStart:p,points:x}=this,{id:C}=g;if(C){let d=L(x,f=>f.id===C);k=d?d.index:void 0}if(k===void 0){let d=L(x,f=>f.x===g.x&&f.x2===g.x2&&!f.touched);k=d?d.index:void 0}return this.cropped&&Q(k)&&Q(p)&&k>=p&&(k-=p),k}alignDataLabel(g){let k=g.plotX;g.plotX=q(g.dlBox&&g.dlBox.centerX,g.plotX),g.dataLabel&&g.shapeArgs?.width&&g.dataLabel.css({width:`${g.shapeArgs.width}px`}),super.alignDataLabel.apply(this,arguments),g.plotX=k}translatePoint(g){let k=this.xAxis,p=this.yAxis,x=this.columnMetrics,C=this.options,d=C.minPointLength||0,f=(g.shapeArgs&&g.shapeArgs.width||0)/2,v=this.pointXOffset=x.offset,S=q(g.x2,g.x+(g.len||0)),H=C.borderRadius,T=this.chart.plotTop,b=this.chart.plotLeft,I=g.plotX,D=k.translate(S,0,0,0,1),z=Math.abs(D-I),J=this.chart.inverted,ne=q(C.borderWidth,1),ee,oe,ae=x.offset,ve=Math.round(x.width),_e,De,be,we;d&&((ee=d-z)<0&&(ee=0),I-=ee/2,D+=ee/2),I=Math.max(I,-10),D=K(D,-10,k.len+10),N(g.options.pointWidth)&&(ae-=(Math.ceil(g.options.pointWidth)-ve)/2,ve=Math.ceil(g.options.pointWidth)),C.pointPlacement&&Q(g.plotY)&&p.categories&&(g.plotY=p.translate(g.y,0,1,0,1,C.pointPlacement));let Fe=F(Math.min(I,D),ne),Be=F(Math.max(I,D),ne)-Fe,He=Math.min(se(typeof H=="object"?H.radius:H||0,ve),Math.min(Be,ve)/2),je={x:Fe,y:F((g.plotY||0)+ae,ne),width:Be,height:ve,r:He};g.shapeArgs=je,J?g.tooltipPos[1]+=v+f:g.tooltipPos[0]-=f+v-je.width/2,De=(_e=je.x)+je.width,_e<0||De>k.len?(_e=K(_e,0,k.len),be=(De=K(De,0,k.len))-_e,g.dlBox=G(je,{x:_e,width:De-_e,centerX:be?be/2:null})):g.dlBox=null;let Je=g.tooltipPos,et=J?1:0,mt=J?0:1,Ai=this.columnMetrics?this.columnMetrics.offset:-x.width/2;J?Je[et]+=je.width/2:Je[et]=K(Je[et]+(k.reversed?-1:0)*je.width,k.left-b,k.left+k.len-b-1),Je[mt]=K(Je[mt]+(J?-1:1)*Ai,p.top-T,p.top+p.len-T-1),(oe=g.partialFill)&&(R(oe)&&(oe=oe.amount),Q(oe)||(oe=0),g.partShapeArgs=G(je),we=Math.max(Math.round(z*oe+g.plotX-I),0),g.clipRectArgs={x:k.reversed?je.x+z-we:je.x,y:je.y,width:we,height:je.height})}translate(){for(let g of(super.translate.apply(this,arguments),this.points))this.translatePoint(g)}drawPoint(g,k){let p=this.options,x=this.chart.renderer,C=g.shapeType,d=g.shapeArgs,f=g.partShapeArgs,v=g.clipRectArgs,S=g.state,H=p.states[S||"normal"]||{},T=S===void 0?"attr":k,b=this.pointAttribs(g,S),I=q(this.chart.options.chart.animation,H.animation),D=g.graphic,z=g.partialFill;if(g.isNull||g.visible===!1)D&&(g.graphic=D.destroy());else if(D?D.rect[k](d):(g.graphic=D=x.g("point").addClass(g.getClassName()).add(g.group||this.group),D.rect=x[C](G(d)).addClass(g.getClassName()).addClass("highcharts-partfill-original").add(D)),f&&(D.partRect?(D.partRect[k](G(f)),D.partialClipRect[k](G(v))):(D.partialClipRect=x.clipRect(v.x,v.y,v.width,v.height),D.partRect=x[C](f).addClass("highcharts-partfill-overlay").add(D).clip(D.partialClipRect))),!this.chart.styledMode&&(D.rect[k](b,I).shadow(p.shadow),f)){R(z)||(z={}),R(p.partialFill)&&(z=G(p.partialFill,z));let J=z.fill||ie(b.fill).brighten(-.3).get()||ie(g.color||this.color).brighten(-.3).get();b.fill=J,D.partRect[T](b,I).shadow(p.shadow)}}drawPoints(){let g=this.getAnimationVerb();for(let k of this.points)this.drawPoint(k,g)}getAnimationVerb(){return this.chart.pointCount<(this.options.animationLimit||250)?"animate":"attr"}isPointInside(g){let k=g.shapeArgs,p=g.plotX,x=g.plotY;return k?p!==void 0&&x!==void 0&&x>=0&&x<=this.yAxis.len&&(k.x||0)+(k.width||0)>=0&&p<=this.xAxis.len:super.isPointInside.apply(this,arguments)}}return U.defaultOptions=G(Z.defaultOptions,m),E(U.prototype,{pointClass:w,pointArrayMap:["x2","y"],getExtremesFromAll:!0,parallelArrays:["x","x2","y"],requireSorting:!1,type:"xrange",animate:l.series.prototype.animate,autoIncrement:V,buildKDTree:V}),l.registerSeriesType("xrange",U),U}),i(a,"masters/modules/xrange.src.js",[a["Core/Globals.js"],a["Series/XRange/XRangeSeries.js"]],function(r,s){return s.compose(r.Axis),r}),i(a,"Series/Gantt/GanttPoint.js",[a["Core/Series/SeriesRegistry.js"],a["Core/Utilities.js"]],function(r,s){let{xrange:{prototype:{pointClass:l}}}=r.seriesTypes,{pick:h}=s;class m extends l{static setGanttPointAliases(A){function V(ie,Z){Z!==void 0&&(A[ie]=Z)}V("x",h(A.start,A.x)),V("x2",h(A.end,A.x2)),V("partialFill",h(A.completed,A.partialFill))}applyOptions(A,V){let ie=super.applyOptions(A,V);return m.setGanttPointAliases(ie),ie}isValid(){return(typeof this.start=="number"||typeof this.x=="number")&&(typeof this.end=="number"||typeof this.x2=="number"||this.milestone)}}return m}),i(a,"Series/Gantt/GanttSeriesDefaults.js",[a["Core/Utilities.js"]],function(r){let{isNumber:s}=r;return{grouping:!1,dataLabels:{enabled:!0},tooltip:{headerFormat:'<span style="font-size: 0.8em">{series.name}</span><br/>',pointFormat:null,pointFormatter:function(){let l=this.series,h=l.xAxis,m=l.tooltipOptions.dateTimeLabelFormats,w=h.options.startOfWeek,A=l.tooltipOptions,V=this.options.milestone,ie=A.xDateFormat,Z="<b>"+(this.name||this.yCategory)+"</b>";if(A.pointFormat)return this.tooltipFormatter(A.pointFormat);!ie&&s(this.start)&&(ie=l.chart.time.getDateFormat(h.closestPointRange,this.start,w,m||{}));let $=l.chart.time.dateFormat(ie,this.start),K=l.chart.time.dateFormat(ie,this.end);return Z+="<br/>",V?Z+=$+"<br/>":Z+="Start: "+$+"<br/>End: "+K+"<br/>",Z}},connectors:{type:"simpleConnect",animation:{reversed:!0},radius:0,startMarker:{enabled:!0,symbol:"arrow-filled",radius:4,fill:"#fa0",align:"left"},endMarker:{enabled:!1,align:"right"}}}}),i(a,"Core/Axis/BrokenAxis.js",[a["Core/Axis/Stacking/StackItem.js"],a["Core/Utilities.js"]],function(r,s){var l;let{addEvent:h,find:m,fireEvent:w,isArray:A,isNumber:V,pick:ie}=s;return function(Z){function $(){this.brokenAxis!==void 0&&this.brokenAxis.setBreaks(this.options.breaks,!1)}function K(){this.brokenAxis?.hasBreaks&&(this.options.ordinal=!1)}function F(){let q=this.brokenAxis;if(q?.hasBreaks){let Y=this.tickPositions,se=this.tickPositions.info,j=[];for(let U=0;U<Y.length;U++)q.isInAnyBreak(Y[U])||j.push(Y[U]);this.tickPositions=j,this.tickPositions.info=se}}function N(){this.brokenAxis||(this.brokenAxis=new G(this))}function E(){let{isDirty:q,options:{connectNulls:Y},points:se,xAxis:j,yAxis:U}=this;if(q){let de=se.length;for(;de--;){let g=se[de],k=!(g.y===null&&Y===!1)&&(j?.brokenAxis?.isInAnyBreak(g.x,!0)||U?.brokenAxis?.isInAnyBreak(g.y,!0));g.visible=!k&&g.options.visible!==!1}}}function L(){this.drawBreaks(this.xAxis,["x"]),this.drawBreaks(this.yAxis,ie(this.pointArrayMap,["y"]))}function Q(q,Y){let se,j,U,de=this,g=de.points;if(q?.brokenAxis?.hasBreaks){let k=q.brokenAxis;Y.forEach(function(p){se=k?.breakArray||[],j=q.isXAxis?q.min:ie(de.options.threshold,q.min);let x=q?.options?.breaks?.filter(function(C){let d=!0;for(let f=0;f<se.length;f++){let v=se[f];if(v.from===C.from&&v.to===C.to){d=!1;break}}return d});g.forEach(function(C){U=ie(C["stack"+p.toUpperCase()],C[p]),se.forEach(function(d){if(V(j)&&V(U)){let f="";j<d.from&&U>d.to||j>d.from&&U<d.from?f="pointBreak":(j<d.from&&U>d.from&&U<d.to||j>d.from&&U>d.to&&U<d.from)&&(f="pointInBreak"),f&&w(q,f,{point:C,brk:d})}}),x?.forEach(function(d){w(q,"pointOutsideOfBreak",{point:C,brk:d})})})})}}function R(){let q=this.currentDataGrouping,Y=q?.gapSize,se=this.points.slice(),j=this.yAxis,U=this.options.gapSize,de=se.length-1;if(U&&de>0){let g,k;for(this.options.gapUnit!=="value"&&(U*=this.basePointRange),Y&&Y>U&&Y>=this.basePointRange&&(U=Y);de--;)if(k&&k.visible!==!1||(k=se[de+1]),g=se[de],k.visible!==!1&&g.visible!==!1){if(k.x-g.x>U){let p=(g.x+k.x)/2;se.splice(de+1,0,{isNull:!0,x:p}),j.stacking&&this.options.stacking&&((j.stacking.stacks[this.stackKey][p]=new r(j,j.options.stackLabels,!1,p,this.stack)).total=0)}k=g}}return this.getGraphPath(se)}Z.compose=function(q,Y){if(!q.keepProps.includes("brokenAxis")){q.keepProps.push("brokenAxis"),h(q,"init",N),h(q,"afterInit",$),h(q,"afterSetTickPositions",F),h(q,"afterSetOptions",K);let se=Y.prototype;se.drawBreaks=Q,se.gappedPath=R,h(Y,"afterGeneratePoints",E),h(Y,"afterRender",L)}return q};class G{static isInBreak(Y,se){let j=Y.repeat||1/0,U=Y.from,de=Y.to-Y.from,g=se>=U?(se-U)%j:j-(U-se)%j;return Y.inclusive?g<=de:g<de&&g!==0}static lin2Val(Y){let se=this.brokenAxis,j=se&&se.breakArray;if(!j||!V(Y))return Y;let U=Y,de,g;for(g=0;g<j.length&&!((de=j[g]).from>=U);g++)(de.to<U||G.isInBreak(de,U))&&(U+=de.len);return U}static val2Lin(Y){let se=this.brokenAxis,j=se&&se.breakArray;if(!j||!V(Y))return Y;let U=Y,de,g;for(g=0;g<j.length;g++)if((de=j[g]).to<=Y)U-=de.len;else{if(de.from>=Y)break;if(G.isInBreak(de,Y)){U-=Y-de.from;break}}return U}constructor(Y){this.hasBreaks=!1,this.axis=Y}findBreakAt(Y,se){return m(se,function(j){return j.from<Y&&Y<j.to})}isInAnyBreak(Y,se){let j=this.axis,U=j.options.breaks||[],de=U.length,g,k,p;if(de&&V(Y)){for(;de--;)G.isInBreak(U[de],Y)&&(g=!0,k||(k=ie(U[de].showPoints,!j.isXAxis)));p=g&&se?g&&!k:g}return p}setBreaks(Y,se){let j=this,U=j.axis,de=A(Y)&&!!Y.length&&!!Object.keys(Y[0]).length;U.isDirty=j.hasBreaks!==de,j.hasBreaks=de,Y!==U.options.breaks&&(U.options.breaks=U.userOptions.breaks=Y),U.forceRedraw=!0,U.series.forEach(function(g){g.isDirty=!0}),de||U.val2lin!==G.val2Lin||(delete U.val2lin,delete U.lin2val),de&&(U.userOptions.ordinal=!1,U.lin2val=G.lin2Val,U.val2lin=G.val2Lin,U.setExtremes=function(g,k,p,x,C){if(j.hasBreaks){let d,f=this.options.breaks||[];for(;d=j.findBreakAt(g,f);)g=d.to;for(;d=j.findBreakAt(k,f);)k=d.from;k<g&&(k=g)}U.constructor.prototype.setExtremes.call(this,g,k,p,x,C)},U.setAxisTranslation=function(){if(U.constructor.prototype.setAxisTranslation.call(this),j.unitLength=void 0,j.hasBreaks){let g=U.options.breaks||[],k=[],p=[],x=ie(U.pointRangePadding,0),C=0,d,f,v=U.userMin||U.min,S=U.userMax||U.max,H,T;g.forEach(function(b){f=b.repeat||1/0,V(v)&&V(S)&&(G.isInBreak(b,v)&&(v+=b.to%f-v%f),G.isInBreak(b,S)&&(S-=S%f-b.from%f))}),g.forEach(function(b){if(H=b.from,f=b.repeat||1/0,V(v)&&V(S)){for(;H-f>v;)H-=f;for(;H<v;)H+=f;for(T=H;T<S;T+=f)k.push({value:T,move:"in"}),k.push({value:T+b.to-b.from,move:"out",size:b.breakSize})}}),k.sort(function(b,I){return b.value===I.value?(b.move==="in"?0:1)-(I.move==="in"?0:1):b.value-I.value}),d=0,H=v,k.forEach(function(b){(d+=b.move==="in"?1:-1)===1&&b.move==="in"&&(H=b.value),d===0&&V(H)&&(p.push({from:H,to:b.value,len:b.value-H-(b.size||0)}),C+=b.value-H-(b.size||0))}),j.breakArray=p,V(v)&&V(S)&&V(U.min)&&(j.unitLength=S-v-C+x,w(U,"afterBreaks"),U.staticScale?U.transA=U.staticScale:j.unitLength&&(U.transA*=(S-U.min+x)/j.unitLength),x&&(U.minPixelPadding=U.transA*(U.minPointOffset||0)),U.min=v,U.max=S)}}),ie(se,!0)&&U.chart.redraw()}}Z.Additions=G}(l||(l={})),l}),i(a,"Core/Axis/GridAxis.js",[a["Core/Axis/Axis.js"],a["Core/Globals.js"],a["Core/Utilities.js"]],function(r,s,l){var h,m;let{dateFormats:w}=s,{addEvent:A,defined:V,erase:ie,find:Z,isArray:$,isNumber:K,merge:F,pick:N,timeUnits:E,wrap:L}=l;function Q(T){return l.isObject(T,!0)}function R(T,b){let I={width:0,height:0};if(b.forEach(function(D){let z=T[D],J=0,ne=0,ee;Q(z)&&(J=(ee=Q(z.label)?z.label:{}).getBBox?ee.getBBox().height:0,ee.textStr&&!K(ee.textPxLength)&&(ee.textPxLength=ee.getBBox().width),ne=K(ee.textPxLength)?Math.round(ee.textPxLength):0,ee.textStr&&(ne=Math.round(ee.getBBox().width)),I.height=Math.max(J,I.height),I.width=Math.max(ne,I.width))}),this.type==="treegrid"&&this.treeGrid&&this.treeGrid.mapOfPosToGridNode){let D=this.treeGrid.mapOfPosToGridNode[-1].height||0;I.width+=this.options.labels.indentation*(D-1)}return I}function G(T){let{grid:b}=this,I=this.side===3;if(I||T.apply(this),!b?.isColumn){let D=b?.columns||[];I&&(D=D.slice().reverse()),D.forEach(z=>{z.getOffset()})}I&&T.apply(this)}function q(T){if((this.options.grid||{}).enabled===!0){let{axisTitle:b,height:I,horiz:D,left:z,offset:J,opposite:ne,options:ee,top:oe,width:ae}=this,ve=this.tickSize(),_e=b&&b.getBBox().width,De=ee.title.x,be=ee.title.y,we=N(ee.title.margin,D?5:10),Fe=b?this.chart.renderer.fontMetrics(b).f:0,Be=(D?oe+I:z)+(D?1:-1)*(ne?-1:1)*(ve?ve[0]/2:0)+(this.side===h.bottom?Fe:0);T.titlePosition.x=D?z-(_e||0)/2-we+De:Be+(ne?ae:0)+J+De,T.titlePosition.y=D?Be-(ne?I:0)+(ne?Fe:-Fe)/2+J+be:oe-we+be}}function Y(){let{chart:T,options:{grid:b={}},userOptions:I}=this;if(b.enabled&&function(D){let z=D.options;z.labels.align=N(z.labels.align,"center"),D.categories||(z.showLastLabel=!1),D.labelRotation=0,z.labels.rotation=0,z.minTickInterval=1}(this),b.columns){let D=this.grid.columns=[],z=this.grid.columnIndex=0;for(;++z<b.columns.length;){let J=F(I,b.columns[z],{isInternal:!0,linkedTo:0,scrollbar:{enabled:!1}},{grid:{columns:void 0}}),ne=new r(this.chart,J,"yAxis");ne.grid.isColumn=!0,ne.grid.columnIndex=z,ie(T.axes,ne),ie(T[this.coll]||[],ne),D.push(ne)}}}function se(){let{axisTitle:T,grid:b,options:I}=this;if((I.grid||{}).enabled===!0){let D=this.min||0,z=this.max||0,J=this.ticks[this.tickPositions[0]];if(T&&!this.chart.styledMode&&J?.slotWidth&&!this.options.title.style.width&&T.css({width:`${J.slotWidth}px`}),this.maxLabelDimensions=this.getMaxLabelDimensions(this.ticks,this.tickPositions),this.rightWall&&this.rightWall.destroy(),this.grid&&this.grid.isOuterAxis()&&this.axisLine){let ne=I.lineWidth;if(ne){let ee=this.getLinePath(ne),oe=ee[0],ae=ee[1],ve=(this.tickSize("tick")||[1])[0]*(this.side===h.top||this.side===h.left?-1:1);if(oe[0]==="M"&&ae[0]==="L"&&(this.horiz?(oe[2]+=ve,ae[2]+=ve):(oe[1]+=ve,ae[1]+=ve)),!this.horiz&&this.chart.marginRight){let _e=["L",this.left,oe[2]||0],De=[oe,_e],be=["L",this.chart.chartWidth-this.chart.marginRight,this.toPixels(z+this.tickmarkOffset)],we=[["M",ae[1]||0,this.toPixels(z+this.tickmarkOffset)],be];this.grid.upperBorder||D%1==0||(this.grid.upperBorder=this.grid.renderBorder(De)),this.grid.upperBorder&&(this.grid.upperBorder.attr({stroke:I.lineColor,"stroke-width":I.lineWidth}),this.grid.upperBorder.animate({d:De})),this.grid.lowerBorder||z%1==0||(this.grid.lowerBorder=this.grid.renderBorder(we)),this.grid.lowerBorder&&(this.grid.lowerBorder.attr({stroke:I.lineColor,"stroke-width":I.lineWidth}),this.grid.lowerBorder.animate({d:we}))}this.grid.axisLineExtra?(this.grid.axisLineExtra.attr({stroke:I.lineColor,"stroke-width":I.lineWidth}),this.grid.axisLineExtra.animate({d:ee})):this.grid.axisLineExtra=this.grid.renderBorder(ee),this.axisLine[this.showAxis?"show":"hide"]()}}if((b&&b.columns||[]).forEach(ne=>ne.render()),!this.horiz&&this.chart.hasRendered&&(this.scrollbar||this.linkedParent&&this.linkedParent.scrollbar)&&this.tickPositions.length){let ne,ee,oe=this.tickmarkOffset,ae=this.tickPositions[this.tickPositions.length-1],ve=this.tickPositions[0];for(;(ne=this.hiddenLabels.pop())&&ne.element;)ne.show();for(;(ee=this.hiddenMarks.pop())&&ee.element;)ee.show();(ne=this.ticks[ve].label)&&(D-ve>oe?this.hiddenLabels.push(ne.hide()):ne.show()),(ne=this.ticks[ae].label)&&(ae-z>oe?this.hiddenLabels.push(ne.hide()):ne.show());let _e=this.ticks[ae].mark;_e&&ae-z<oe&&ae-z>0&&this.ticks[ae].isLast&&this.hiddenMarks.push(_e.hide())}}}function j(){let T=this.tickPositions&&this.tickPositions.info,b=this.options,I=b.grid||{},D=this.userOptions.labels||{};I.enabled&&(this.horiz?(this.series.forEach(z=>{z.options.pointRange=0}),T&&b.dateTimeLabelFormats&&b.labels&&!V(D.align)&&(b.dateTimeLabelFormats[T.unitName].range===!1||T.count>1)&&(b.labels.align="left",V(D.x)||(b.labels.x=3))):this.type!=="treegrid"&&this.grid&&this.grid.columns&&(this.minPointOffset=this.tickInterval))}function U(T){let b,I=this.options,D=T.userOptions,z=I&&Q(I.grid)?I.grid:{};z.enabled===!0&&(b=F(!0,{className:"highcharts-grid-axis "+(D.className||""),dateTimeLabelFormats:{hour:{list:["%H:%M","%H"]},day:{list:["%A, %e. %B","%a, %e. %b","%E"]},week:{list:["Week %W","W%W"]},month:{list:["%B","%b","%o"]}},grid:{borderWidth:1},labels:{padding:2,style:{fontSize:"0.9em"}},margin:0,title:{text:null,reserveSpace:!1,rotation:0,style:{textOverflow:"ellipsis"}},units:[["millisecond",[1,10,100]],["second",[1,10]],["minute",[1,5,15]],["hour",[1,6]],["day",[1]],["week",[1]],["month",[1]],["year",null]]},D),this.coll!=="xAxis"||(V(D.linkedTo)&&!V(D.tickPixelInterval)&&(b.tickPixelInterval=350),!(!V(D.tickPixelInterval)&&V(D.linkedTo))||V(D.tickPositioner)||V(D.tickInterval)||V(D.units)||(b.tickPositioner=function(J,ne){let ee=this.linkedParent&&this.linkedParent.tickPositions&&this.linkedParent.tickPositions.info;if(ee){let oe=b.units||[],ae,ve=1,_e="year";for(let we=0;we<oe.length;we++){let Fe=oe[we];if(Fe&&Fe[0]===ee.unitName){ae=we;break}}let De=K(ae)&&oe[ae+1];if(De){_e=De[0]||"year";let we=De[1];ve=we&&we[0]||1}else ee.unitName==="year"&&(ve=10*ee.count);let be=E[_e];return this.tickInterval=be*ve,this.chart.time.getTimeTicks({unitRange:be,count:ve,unitName:_e},J,ne,this.options.startOfWeek)}})),F(!0,this.options,b),this.horiz&&(I.minPadding=N(D.minPadding,0),I.maxPadding=N(D.maxPadding,0)),K(I.grid.borderWidth)&&(I.tickWidth=I.lineWidth=z.borderWidth))}function de(T){let b=T.userOptions,I=b&&b.grid||{},D=I.columns;I.enabled&&D&&F(!0,this.options,D[0])}function g(){(this.grid.columns||[]).forEach(T=>T.setScale())}function k(T){let{horiz:b,maxLabelDimensions:I,options:{grid:D={}}}=this;if(D.enabled&&I){let z=2*this.options.labels.distance,J=b?D.cellHeight||z+I.height:z+I.width;$(T.tickSize)?T.tickSize[0]=J:T.tickSize=[J,0]}}function p(){this.axes.forEach(T=>{(T.grid&&T.grid.columns||[]).forEach(b=>{b.setAxisSize(),b.setAxisTranslation()})})}function x(T){let{grid:b}=this;(b.columns||[]).forEach(I=>I.destroy(T.keepEvents)),b.columns=void 0}function C(T){let b=T.userOptions||{},I=b.grid||{};I.enabled&&V(I.borderColor)&&(b.tickColor=b.lineColor=I.borderColor),this.grid||(this.grid=new H(this)),this.hiddenLabels=[],this.hiddenMarks=[]}function d(T){let b=this.label,I=this.axis,D=I.reversed,z=I.chart,J=I.options.grid||{},ne=I.options.labels,ee=ne.align,oe=h[I.side],ae=T.tickmarkOffset,ve=I.tickPositions,_e=this.pos-ae,De=K(ve[T.index+1])?ve[T.index+1]-ae:(I.max||0)+ae,be=I.tickSize("tick"),we=be?be[0]:0,Fe=be?be[1]/2:0;if(J.enabled===!0){let Be,He,je,Je;if(oe==="top"?He=(Be=I.top+I.offset)-we:oe==="bottom"?Be=(He=z.chartHeight-I.bottom+I.offset)+we:(Be=I.top+I.len-(I.translate(D?De:_e)||0),He=I.top+I.len-(I.translate(D?_e:De)||0)),oe==="right"?Je=(je=z.chartWidth-I.right+I.offset)+we:oe==="left"?je=(Je=I.left+I.offset)-we:(je=Math.round(I.left+(I.translate(D?De:_e)||0))-Fe,Je=Math.min(Math.round(I.left+(I.translate(D?_e:De)||0))-Fe,I.left+I.len)),this.slotWidth=Je-je,T.pos.x=ee==="left"?je:ee==="right"?Je:je+(Je-je)/2,T.pos.y=He+(Be-He)/2,b){let et=z.renderer.fontMetrics(b),mt=b.getBBox().height;if(ne.useHTML)T.pos.y+=et.b+-(mt/2);else{let Ai=Math.round(mt/et.h);T.pos.y+=(et.b-(et.h-et.f))/2+-((Ai-1)*et.h/2)}}T.pos.x+=I.horiz&&ne.x||0}}function f(T){let{axis:b,value:I}=T;if(b.options.grid&&b.options.grid.enabled){let D,z=b.tickPositions,J=(b.linkedParent||b).series[0],ne=I===z[0],ee=I===z[z.length-1],oe=J&&Z(J.options.data,function(ae){return ae[b.isXAxis?"x":"y"]===I});oe&&J.is("gantt")&&(D=F(oe),s.seriesTypes.gantt.prototype.pointClass.setGanttPointAliases(D)),T.isFirst=ne,T.isLast=ee,T.point=D}}function v(){let T=this.options,b=T.grid||{},I=this.categories,D=this.tickPositions,z=D[0],J=D[1],ne=D[D.length-1],ee=D[D.length-2],oe=this.linkedParent&&this.linkedParent.min,ae=this.linkedParent&&this.linkedParent.max,ve=oe||this.min,_e=ae||this.max,De=this.tickInterval,be=K(ve)&&ve>=z+De&&ve<J,we=K(ve)&&z<ve&&z+De>ve,Fe=K(_e)&&ne>_e&&ne-De<_e,Be=K(_e)&&_e<=ne-De&&_e>ee;b.enabled===!0&&!I&&(this.isXAxis||this.isLinked)&&((we||be)&&!T.startOnTick&&(D[0]=ve),(Fe||Be)&&!T.endOnTick&&(D[D.length-1]=_e))}function S(T){var b;let{options:{grid:I={}}}=this;return I.enabled===!0&&this.categories?this.tickInterval:T.apply(this,(b=arguments,Array.prototype.slice.call(b,1)))}(m=h||(h={}))[m.top=0]="top",m[m.right=1]="right",m[m.bottom=2]="bottom",m[m.left=3]="left";class H{constructor(b){this.axis=b}isOuterAxis(){let b=this.axis,I=b.chart,D=b.grid.columnIndex,z=b.linkedParent?.grid.columns||b.grid.columns||[],J=D?b.linkedParent:b,ne=-1,ee=0;return b.side===3&&!I.inverted&&z.length?!b.linkedParent:((I[b.coll]||[]).forEach((oe,ae)=>{oe.side!==b.side||oe.options.isInternal||(ee=ae,oe!==J||(ne=ae))}),ee===ne&&(!K(D)||z.length===D))}renderBorder(b){let I=this.axis,D=I.chart.renderer,z=I.options,J=D.path(b).addClass("highcharts-axis-line").add(I.axisGroup);return D.styledMode||J.attr({stroke:z.lineColor,"stroke-width":z.lineWidth,zIndex:7}),J}}return w.E=function(T){return this.dateFormat("%a",T,!0).charAt(0)},w.W=function(T){let b=this,I=new this.Date(T);["Hours","Milliseconds","Minutes","Seconds"].forEach(function(ne){b.set(ne,I,0)});let D=(this.get("Day",I)+6)%7,z=new this.Date(I.valueOf());this.set("Date",z,this.get("Date",I)-D+3);let J=new this.Date(this.get("FullYear",z),0,1);return this.get("Day",J)!==4&&(this.set("Month",I,0),this.set("Date",I,1+(11-this.get("Day",J))%7)),(1+Math.floor((z.valueOf()-J.valueOf())/6048e5)).toString()},{compose:function(T,b,I){return T.keepProps.includes("grid")||(T.keepProps.push("grid"),T.prototype.getMaxLabelDimensions=R,L(T.prototype,"unsquish",S),L(T.prototype,"getOffset",G),A(T,"init",C),A(T,"afterGetTitlePosition",q),A(T,"afterInit",Y),A(T,"afterRender",se),A(T,"afterSetAxisTranslation",j),A(T,"afterSetOptions",U),A(T,"afterSetOptions",de),A(T,"afterSetScale",g),A(T,"afterTickSize",k),A(T,"trimTicks",v),A(T,"destroy",x),A(b,"afterSetChartSize",p),A(I,"afterGetLabelPosition",d),A(I,"labelFormat",f)),T}}}),i(a,"Gantt/Tree.js",[a["Core/Utilities.js"]],function(r){let{extend:s,isNumber:l,pick:h}=r;function m(w,A,V,ie,Z,$){let K=$&&$.after,F=$&&$.before,N={data:ie,depth:V-1,id:w,level:V,parent:A||""},E=0,L=0,Q,R;typeof F=="function"&&F(N,$);let G=(Z[w]||[]).map(q=>{let Y=m(q.id,w,V+1,q,Z,$),se=q.start||NaN,j=q.milestone===!0?se:q.end||NaN;return Q=!l(Q)||se<Q?se:Q,R=!l(R)||j>R?j:R,E=E+1+Y.descendants,L=Math.max(Y.height+1,L),Y});return ie&&(ie.start=h(ie.start,Q),ie.end=h(ie.end,R)),s(N,{children:G,descendants:E,height:L}),typeof K=="function"&&K(N,$),N}return{getNode:m,getTree:function(w,A){return m("",null,1,null,function(V){let ie=[],Z=V.reduce(($,K)=>{let{parent:F="",id:N}=K;return $[F]===void 0&&($[F]=[]),$[F].push(K),N&&ie.push(N),$},{});return Object.keys(Z).forEach($=>{if($!==""&&ie.indexOf($)===-1){let K=Z[$].map(function(F){return ah(F,[])});Z[""].push(...K),delete Z[$]}}),Z}(w),A)}}}),i(a,"Core/Axis/TreeGrid/TreeGridTick.js",[a["Core/Utilities.js"]],function(r){let{addEvent:s,removeEvent:l,isObject:h,isNumber:m,pick:w,wrap:A}=r;function V(){this.treeGrid||(this.treeGrid=new $(this))}function ie(K,F,N,E,L,Q,R,G,q){let Y,se,j,U=w(this.options&&this.options.labels,Q),de=this.pos,g=this.axis,k=g.type==="treegrid",p=K.apply(this,[F,N,E,L,U,R,G,q]);if(k){let{width:x=0,padding:C=g.linkedParent?0:5}=U&&h(U.symbol,!0)?U.symbol:{},d=U&&m(U.indentation)?U.indentation:0;j=(se=(Y=g.treeGrid.mapOfPosToGridNode)&&Y[de])&&se.depth||1,p.x+=x+2*C+(j-1)*d}return p}function Z(K){let F,N,E,{pos:L,axis:Q,label:R,treeGrid:G,options:q}=this,Y=G?.labelIcon,se=R?.element,{treeGrid:j,options:U,chart:de,tickPositions:g}=Q,k=j.mapOfPosToGridNode,p=w(q?.labels,U?.labels),x=p&&h(p.symbol,!0)?p.symbol:{},C=k&&k[L],{descendants:d,depth:f}=C||{},v=C&&d&&d>0,S=Q.type==="treegrid"&&se,H=g.indexOf(L)>-1,T="highcharts-treegrid-node-",b=T+"level-",I=de.styledMode;S&&C&&R.removeClass(RegExp(b+".*")).addClass(b+f),K.apply(this,Array.prototype.slice.call(arguments,1)),S&&v?(F=j.isCollapsed(C),function(D,z){let J=D.treeGrid,ne=!J.labelIcon,ee=z.renderer,oe=z.xy,ae=z.options,ve=ae.width||0,_e=ae.height||0,De=ae.padding??D.axis.linkedParent?0:5,be={x:oe.x-ve/2-De,y:oe.y-_e/2},we=z.collapsed?90:180,Fe=z.show&&m(be.y),Be=J.labelIcon;Be||(J.labelIcon=Be=ee.path(ee.symbols[ae.type](ae.x||0,ae.y||0,ve,_e)).addClass("highcharts-label-icon").add(z.group)),Be[Fe?"show":"hide"](),ee.styledMode||Be.attr({cursor:"pointer",fill:w(z.color,"#666666"),"stroke-width":1,stroke:ae.lineColor,strokeWidth:ae.lineWidth||0}),Be[ne?"attr":"animate"]({translateX:be.x,translateY:be.y,rotation:we})}(this,{color:!I&&R.styles.color||"",collapsed:F,group:R.parentGroup,options:x,renderer:R.renderer,show:H,xy:R.xy}),N=T+(F?"collapsed":"expanded"),E=T+(F?"expanded":"collapsed"),R.addClass(N).removeClass(E),I||R.css({cursor:"pointer"}),[R,Y].forEach(D=>{D&&!D.attachedTreeGridEvents&&(s(D.element,"mouseover",function(){R.addClass("highcharts-treegrid-node-active"),R.renderer.styledMode||R.css({textDecoration:"underline"})}),s(D.element,"mouseout",function(){(function(z,J){let ne=h(J.style)?J.style:{};z.removeClass("highcharts-treegrid-node-active"),z.renderer.styledMode||z.css({textDecoration:ne.textDecoration||"none"})})(R,p)}),s(D.element,"click",function(){G.toggleCollapse()}),D.attachedTreeGridEvents=!0)})):Y&&(l(se),R?.css({cursor:"default"}),Y.destroy())}class ${static compose(F){let N=F.prototype;N.toggleCollapse||(s(F,"init",V),A(N,"getLabelPosition",ie),A(N,"renderLabel",Z),N.collapse=function(E){this.treeGrid.collapse(E)},N.expand=function(E){this.treeGrid.expand(E)},N.toggleCollapse=function(E){this.treeGrid.toggleCollapse(E)})}constructor(F){this.tick=F}collapse(F){let N=this.tick,E=N.axis,L=E.brokenAxis;if(L&&E.treeGrid.mapOfPosToGridNode){let Q=N.pos,R=E.treeGrid.mapOfPosToGridNode[Q],G=E.treeGrid.collapse(R);L.setBreaks(G,w(F,!0))}}destroy(){this.labelIcon&&this.labelIcon.destroy()}expand(F){let{pos:N,axis:E}=this.tick,{treeGrid:L,brokenAxis:Q}=E,R=L.mapOfPosToGridNode;if(Q&&R){let G=R[N],q=L.expand(G);Q.setBreaks(q,w(F,!0))}}toggleCollapse(F){let N=this.tick,E=N.axis,L=E.brokenAxis;if(L&&E.treeGrid.mapOfPosToGridNode){let Q=N.pos,R=E.treeGrid.mapOfPosToGridNode[Q],G=E.treeGrid.toggleCollapse(R);L.setBreaks(G,w(F,!0))}}}return $}),i(a,"Series/TreeUtilities.js",[a["Core/Color/Color.js"],a["Core/Utilities.js"]],function(r,s){let{extend:l,isArray:h,isNumber:m,isObject:w,merge:A,pick:V,relativeLength:ie}=s;return{getColor:function(Z,$){let K,F,N,E,L,Q,R=$.index,G=$.mapOptionsToLevel,q=$.parentColor,Y=$.parentColorIndex,se=$.series,j=$.colors,U=$.siblings,de=se.points,g=se.chart.options.chart;return Z&&(K=de[Z.i],F=G[Z.level]||{},K&&F.colorByPoint&&(E=K.index%(j?j.length:g.colorCount),N=j&&j[E]),se.chart.styledMode||(L=V(K&&K.options.color,F&&F.color,N,q&&(k=>{let p=F&&F.colorVariation;return p&&p.key==="brightness"&&R&&U?r.parse(k).brighten(p.to*(R/U)).get():k})(q),se.color)),Q=V(K&&K.options.colorIndex,F&&F.colorIndex,E,Y,$.colorIndex)),{color:L,colorIndex:Q}},getLevelOptions:function(Z){let $,K,F,N,E,L,Q={};if(w(Z))for(N=m(Z.from)?Z.from:1,L=Z.levels,K={},$=w(Z.defaults)?Z.defaults:{},h(L)&&(K=L.reduce((R,G)=>{let q,Y,se;return w(G)&&m(G.level)&&(Y=V((se=A({},G)).levelIsConstant,$.levelIsConstant),delete se.levelIsConstant,delete se.level,w(R[q=G.level+(Y?0:N-1)])?A(!0,R[q],se):R[q]=se),R},{})),E=m(Z.to)?Z.to:1,F=0;F<=E;F++)Q[F]=A({},$,w(K[F])?K[F]:{});return Q},getNodeWidth:function(Z,$){let{chart:K,options:F}=Z,{nodeDistance:N=0,nodeWidth:E=0}=F,{plotSizeX:L=1}=K;if(E==="auto"){if(typeof N=="string"&&/%$/.test(N))return L/($+parseFloat(N)/100*($-1));let Q=Number(N);return(L+Q)/($||1)-Q}return ie(E,L)},setTreeValues:function Z($,K){let F=K.before,N=K.idRoot,E=K.mapIdToNode[N],L=K.levelIsConstant!==!1,Q=K.points[$.i],R=Q&&Q.options||{},G=[],q=0;$.levelDynamic=$.level-(L?0:E.level),$.name=V(Q&&Q.name,""),$.visible=N===$.id||K.visible===!0,typeof F=="function"&&($=F($,K)),$.children.forEach((se,j)=>{let U=l({},K);l(U,{index:j,siblings:$.children.length,visible:$.visible}),se=Z(se,U),G.push(se),se.visible&&(q+=se.val)});let Y=V(R.value,q);return $.visible=Y>=0&&(q>0||$.visible),$.children=G,$.childrenTotal=q,$.isLeaf=$.visible&&!q,$.val=Y,$},updateRootId:function(Z){let $,K;return w(Z)&&(K=w(Z.options)?Z.options:{},$=V(Z.rootNode,K.rootId,""),w(Z.userOptions)&&(Z.userOptions.rootId=$),Z.rootNode=$),$}}}),i(a,"Core/Axis/TreeGrid/TreeGridAxis.js",[a["Core/Axis/BrokenAxis.js"],a["Core/Axis/GridAxis.js"],a["Gantt/Tree.js"],a["Core/Axis/TreeGrid/TreeGridTick.js"],a["Series/TreeUtilities.js"],a["Core/Utilities.js"]],function(r,s,l,h,m,w){let A,{getLevelOptions:V}=m,{addEvent:ie,find:Z,fireEvent:$,isArray:K,isObject:F,isString:N,merge:E,pick:L,removeEvent:Q,wrap:R}=w;function G(k,p){let x=k.collapseEnd||0,C=k.collapseStart||0;return x>=p&&(C-=.5),{from:C,to:x,showPoints:!1}}function q(k,p,x){let C=[],d=[],f={},v=p||!1,S={},H=-1,T=l.getTree(k,{after:function(b){let I=S[b.pos],D=0,z=0;I.children.forEach(function(J){z+=(J.descendants||0)+1,D=Math.max((J.height||0)+1,D)}),I.descendants=z,I.height=D,I.collapsed&&d.push(I)},before:function(b){let I,D,z=F(b.data,!0)?b.data:{},J=N(z.name)?z.name:"",ne=f[b.parent],ee=F(ne,!0)?S[ne.pos]:null;v&&F(ee,!0)&&(I=Z(ee.children,function(oe){return oe.name===J}))?(D=I.pos,I.nodes.push(b)):D=H++,!S[D]&&(S[D]=I={depth:ee?ee.depth+1:0,name:J,id:z.id,nodes:[b],children:[],pos:D},D!==-1&&C.push(J),F(ee,!0)&&ee.children.push(I)),N(b.id)&&(f[b.id]=b),I&&z.collapsed===!0&&(I.collapsed=!0),b.pos=D}});return{categories:C,mapOfIdToNode:f,mapOfPosToGridNode:S=function(b,I){let D=function(z,J,ne){let ee=z.nodes,oe=J+(J===-1?0:I-1),ae=(oe-J)/2,ve=J+ae;return ee.forEach(function(_e){let De=_e.data;F(De,!0)&&(De.y=J+(De.seriesIndex||0),delete De.seriesIndex),_e.pos=ve}),ne[ve]=z,z.pos=ve,z.tickmarkOffset=ae+.5,z.collapseStart=oe+.5,z.children.forEach(function(_e){D(_e,oe+1,ne),oe=(_e.collapseEnd||0)-.5}),z.collapseEnd=oe+.5,ne};return D(b[-1],-1,{})}(S,x),collapsedNodes:d,tree:T}}function Y(k){k.target.axes.filter(p=>p.type==="treegrid").forEach(function(p){let x=p.options||{},C=x.labels,d=p.uniqueNames,f=x.max,v=!p.treeGrid.mapOfPosToGridNode||p.series.some(function(b){return!b.hasRendered||b.isDirtyData||b.isDirty}),S=0,H,T;if(v){if(H=p.series.reduce(function(b,I){return I.visible&&((I.options.data||[]).forEach(function(D){I.options.keys&&I.options.keys.length&&(D=I.pointClass.prototype.optionsToObject.call({series:I},D),I.pointClass.setGanttPointAliases(D)),F(D,!0)&&(D.seriesIndex=S,b.push(D))}),d===!0&&S++),b},[]),f&&H.length<f)for(let b=H.length;b<=f;b++)H.push({name:b+"\u200B"});T=q(H,d||!1,d===!0?S:1),p.categories=T.categories,p.treeGrid.mapOfPosToGridNode=T.mapOfPosToGridNode,p.hasNames=!0,p.treeGrid.tree=T.tree,p.series.forEach(function(b){let I=(b.options.data||[]).map(function(D){return K(D)&&b.options.keys&&b.options.keys.length&&H.forEach(function(z){D.indexOf(z.x)>=0&&D.indexOf(z.x2)>=0&&(D=z)}),F(D,!0)?E(D):D});b.visible&&b.setData(I,!1)}),p.treeGrid.mapOptionsToLevel=V({defaults:C,from:1,levels:C&&C.levels,to:p.treeGrid.tree&&p.treeGrid.tree.height}),k.type==="beforeRender"&&(p.treeGrid.collapsedNodes=T.collapsedNodes)}})}function se(k,p){let x=this.treeGrid.mapOptionsToLevel||{},C=this.type==="treegrid",d=this.ticks,f=d[p],v,S,H;C&&this.treeGrid.mapOfPosToGridNode?((v=x[(H=this.treeGrid.mapOfPosToGridNode[p]).depth])&&(S={labels:v}),!f&&A?d[p]=f=new A(this,p,void 0,void 0,{category:H.name,tickmarkOffset:H.tickmarkOffset,options:S}):(f.parameters.category=H.name,f.options=S,f.addLabel())):k.apply(this,Array.prototype.slice.call(arguments,1))}function j(k,p,x,C){let d=this,f=x.type==="treegrid";d.treeGrid||(d.treeGrid=new g(d)),f&&(ie(p,"beforeRender",Y),ie(p,"beforeRedraw",Y),ie(p,"addSeries",function(v){if(v.options.data){let S=q(v.options.data,x.uniqueNames||!1,1);d.treeGrid.collapsedNodes=(d.treeGrid.collapsedNodes||[]).concat(S.collapsedNodes)}}),ie(d,"foundExtremes",function(){d.treeGrid.collapsedNodes&&d.treeGrid.collapsedNodes.forEach(function(v){let S=d.treeGrid.collapse(v);d.brokenAxis&&(d.brokenAxis.setBreaks(S,!1),d.treeGrid.collapsedNodes&&(d.treeGrid.collapsedNodes=d.treeGrid.collapsedNodes.filter(H=>v.collapseStart!==H.collapseStart||v.collapseEnd!==H.collapseEnd)))})}),ie(d,"afterBreaks",function(){d.coll==="yAxis"&&!d.staticScale&&d.chart.options.chart.height&&(d.isDirty=!0)}),x=E({grid:{enabled:!0},labels:{align:"left",levels:[{level:void 0},{level:1,style:{fontWeight:"bold"}}],symbol:{type:"triangle",x:-5,y:-5,height:10,width:10}},uniqueNames:!1},x,{reversed:!0})),k.apply(d,[p,x,C]),f&&(d.hasNames=!0,d.options.showLastLabel=!0)}function U(k){let p=this.options,x=typeof p.linkedTo=="number"?this.chart[this.coll]?.[p.linkedTo]:void 0;if(this.type==="treegrid"){if(this.min=L(this.userMin,p.min,this.dataMin),this.max=L(this.userMax,p.max,this.dataMax),$(this,"foundExtremes"),this.setAxisTranslation(),this.tickInterval=1,this.tickmarkOffset=.5,this.tickPositions=this.treeGrid.mapOfPosToGridNode?this.treeGrid.getTickPositions():[],x){let C=x.getExtremes();this.min=L(C.min,C.dataMin),this.max=L(C.max,C.dataMax),this.tickPositions=x.tickPositions}this.linkedParent=x}else k.apply(this,Array.prototype.slice.call(arguments,1))}function de(k){let p=this;this.type==="treegrid"&&p.visible&&p.tickPositions.forEach(function(x){let C=p.ticks[x];C.label&&C.label.attachedTreeGridEvents&&(Q(C.label.element),C.label.attachedTreeGridEvents=!1)}),k.apply(p,Array.prototype.slice.call(arguments,1))}class g{static compose(p,x,C,d){if(!p.keepProps.includes("treeGrid")){let f=p.prototype;p.keepProps.push("treeGrid"),R(f,"generateTick",se),R(f,"init",j),R(f,"setTickInterval",U),R(f,"redraw",de),f.utils={getNode:l.getNode},A||(A=d)}return s.compose(p,x,d),r.compose(p,C),h.compose(d),p}constructor(p){this.axis=p}setCollapsedStatus(p){let x=this.axis,C=x.chart;x.series.forEach(function(d){let f=d.options.data;if(p.id&&f){let v=C.get(p.id),S=f[d.data.indexOf(v)];v&&S&&(v.collapsed=p.collapsed,S.collapsed=p.collapsed)}})}collapse(p){let x=this.axis,C=x.options.breaks||[],d=G(p,x.max);return C.push(d),p.collapsed=!0,x.treeGrid.setCollapsedStatus(p),C}expand(p){let x=this.axis,C=x.options.breaks||[],d=G(p,x.max);return p.collapsed=!1,x.treeGrid.setCollapsedStatus(p),C.reduce(function(f,v){return(v.to!==d.to||v.from!==d.from)&&f.push(v),f},[])}getTickPositions(){let p=this.axis,x=Math.floor(p.min/p.tickInterval)*p.tickInterval,C=Math.ceil(p.max/p.tickInterval)*p.tickInterval;return Object.keys(p.treeGrid.mapOfPosToGridNode||{}).reduce(function(d,f){let v=+f;return v>=x&&v<=C&&!(p.brokenAxis&&p.brokenAxis.isInAnyBreak(v))&&d.push(v),d},[])}isCollapsed(p){let x=this.axis,C=x.options.breaks||[],d=G(p,x.max);return C.some(function(f){return f.from===d.from&&f.to===d.to})}toggleCollapse(p){return this.isCollapsed(p)?this.expand(p):this.collapse(p)}}return g}),i(a,"Series/Gantt/GanttSeries.js",[a["Series/Gantt/GanttPoint.js"],a["Series/Gantt/GanttSeriesDefaults.js"],a["Gantt/Pathfinder.js"],a["Core/Series/SeriesRegistry.js"],a["Extensions/StaticScale.js"],a["Core/Axis/TreeGrid/TreeGridAxis.js"],a["Core/Utilities.js"]],function(r,s,l,h,m,w,A){let{series:V,seriesTypes:{xrange:ie}}=h,{extend:Z,isNumber:$,merge:K}=A;class F extends ie{static compose(E,L,Q,R){ie.compose(E),L&&(m.compose(E,L),Q)&&(l.compose(L,Q.prototype.pointClass),R&&w.compose(E,L,Q,R))}drawPoint(E,L){let Q=this.options,R=this.chart.renderer,G=E.shapeArgs,q=E.plotY,Y=E.selected&&"select",se=Q.stacking&&!Q.borderRadius,j=E.graphic,U;E.options.milestone?$(q)&&E.y!==null&&E.visible!==!1?(U=R.symbols.diamond(G.x||0,G.y||0,G.width||0,G.height||0),j?j[L]({d:U}):E.graphic=j=R.path(U).addClass(E.getClassName(),!0).add(E.group||this.group),this.chart.styledMode||E.graphic.attr(this.pointAttribs(E,Y)).shadow(Q.shadow,null,se)):j&&(E.graphic=j.destroy()):super.drawPoint(E,L)}translatePoint(E){let L,Q;super.translatePoint(E),E.options.milestone&&(Q=(L=E.shapeArgs).height||0,E.shapeArgs={x:(L.x||0)-Q/2,y:L.y,width:Q,height:Q})}}return F.defaultOptions=K(ie.defaultOptions,s),Z(F.prototype,{pointArrayMap:["start","end","y"],pointClass:r,setData:V.prototype.setData}),h.registerSeriesType("gantt",F),F}),i(a,"masters/modules/gantt.src.js",[a["Core/Globals.js"],a["Extensions/ArrowSymbols.js"],a["Gantt/Connection.js"],a["Extensions/CurrentDateIndication.js"],a["Core/Chart/GanttChart.js"],a["Stock/Navigator/Navigator.js"],a["Stock/RangeSelector/RangeSelector.js"],a["Stock/Scrollbar/Scrollbar.js"],a["Series/Gantt/GanttSeries.js"]],function(r,s,l,h,m,w,A,V,ie){return r.Connection=r.Connection||l,r.GanttChart=r.GanttChart||m,r.Navigator=r.Navigator||w,r.RangeSelector=r.RangeSelector||A,r.Scrollbar=r.Scrollbar||V,r.ganttChart=r.GanttChart.ganttChart,s.compose(r.SVGRenderer),h.compose(r.Axis,r.PlotLineOrBand),ie.compose(r.Axis,r.Chart,r.Series,r.Tick),r.Navigator.compose(r.Chart,r.Axis,r.Series),r.RangeSelector.compose(r.Axis,r.Chart),r.Scrollbar.compose(r.Axis),r})})});var Ux=()=>({standalone:!0});function Hx(o,a){if(o&1){let i=Re();M(0,"div",11)(1,"p")(2,"strong"),ue(3," Work Log "),O()(),M(4,"button",12),ze("click",function(){Se(i);let s=ce();return Ce(s.showModal())}),ye(5,"span",13),O()()}}function Xx(o,a){if(o&1){let i=Re();M(0,"nz-col",18)(1,"nz-form-item")(2,"nz-form-label",25),ue(3,"From"),O(),M(4,"nz-form-control",20)(5,"nz-range-picker",26),ei("ngModelChange",function(s){Se(i);let l=ce(2);return Jt(l.date,s)||(l.date=s),Ce(s)}),ze("ngModelChange",function(s){Se(i);let l=ce(2);return Ce(l.onChange(s))}),O()()()()}if(o&2){let i=ce(2);B("nzMd",24)("nzSm",24)("nzXs",24),W(2),B("nzMd",8)("nzSm",24)("nzXs",12),W(2),B("nzSm",14)("nzXs",24),W(),B("ngModelOptions",ut(10,Ux)),Qt("ngModel",i.date)}}function Kx(o,a){if(o&1){let i=Re();M(0,"nz-input-number",27),ze("change",function(s){Se(i);let l=ce(2);return Ce(l.setAmout(s))}),O()}}function $x(o,a){if(o&1){let i=Re();M(0,"nz-card",14)(1,"form",15),ze("ngSubmit",function(){Se(i);let s=ce();return Ce(s.handleOk())}),M(2,"nz-row",16),xe(3,Xx,6,11,"nz-col",17),M(4,"nz-col",18)(5,"nz-form-item")(6,"nz-form-label",19),ue(7,"No of hours "),O(),M(8,"nz-form-control",20),ue(9),xe(10,Kx,1,0,"nz-input-number",21),O()()()(),M(11,"nz-row",16)(12,"nz-col",18)(13,"nz-form-item")(14,"nz-form-label",22),ue(15," Log Description"),O(),M(16,"nz-form-control",23),ye(17,"textarea",24),O()()()()()()}if(o&2){let i,r=ce();W(),B("formGroup",r.addContractorWorkLogForm),W(2),B("ngIf",r.contractDetails.contract_type=="1"),W(),B("nzMd",24)("nzSm",24)("nzXs",24),W(2),B("nzMd",8)("nzSm",24)("nzXs",12),W(2),B("nzSm",14)("nzXs",24),W(),at(" ",r.contractDetails.contract_type=="1"?(i=r.addContractorWorkLogForm.get("no_of_hours"))==null?null:i.value:""," "),W(),B("ngIf",r.contractDetails.contract_type!="1"),W(2),B("nzMd",24)("nzSm",24)("nzXs",24),W(2),B("nzMd",8)("nzSm",24)("nzXs",24),W(2),B("nzSm",14)("nzXs",24)}}function Yx(o,a){if(o&1){let i=Re();M(0,"div",28),ye(1,"input",29,3),M(3,"a",30),ze("click",function(){Se(i);let s=We(2),l=ce();return Ce(l.addItem(s))}),ye(4,"span",13),ue(5," Add item "),O()()}}function Zx(o,a){if(o&1&&(M(0,"th",31),ue(1),O()),o&2){let i=a.$implicit;B("nzSortFn",i.compare)("nzSortPriority",i.priority),W(),at(" ",i.title," ")}}function Qx(o,a){if(o&1){let i=Re();M(0,"a",35),ze("click",function(){Se(i);let s=ce().$implicit,l=ce();return Ce(l.startEdit(s.id))}),ue(1,"Edit"),O()}}function Jx(o,a){if(o&1){let i=Re();M(0,"a",36),ze("click",function(){Se(i);let s=ce().$implicit,l=ce();return Ce(l.saveEdit(s.id))}),ue(1,"Save"),O()}}function ey(o,a){if(o&1){let i=Re();M(0,"a",37),ze("nzOnConfirm",function(){Se(i);let s=ce().$implicit,l=ce();return Ce(l.cancelEdit(s.id))}),ue(1,"Cancel"),O()}}function ty(o,a){if(o&1&&(M(0,"tr")(1,"td"),ue(2),O(),M(3,"td"),ue(4),nt(5,"date"),O(),M(6,"td"),ue(7),O(),M(8,"td"),ue(9),O(),M(10,"td"),xe(11,Qx,2,0,"a",32)(12,Jx,2,0,"a",33),ue(13," \xA0 "),xe(14,ey,2,0,"a",34),O()()),o&2){let i=a.$implicit,r=ce();W(2),Ot(i.created_by==null?null:i.created_by.name),W(2),at(" ",dt(5,7,i.date_created,"dd MMM yyyy")," "),W(3),at(" ",i.no_of_hours," "),W(2),at(" ",i.note,""),W(2),B("ngIf",!(r.editCache[i.id]!=null&&r.editCache[i.id].edit)),W(),B("ngIf",r.editCache[i.id]==null?null:r.editCache[i.id].edit),W(2),B("ngIf",r.editCache[i.id]==null?null:r.editCache[i.id].edit)}}var cu=(()=>{class o{constructor(i,r,s){this.appService=i,this.userService=r,this.fb=s,this.projectItems=[],this.active=!1,this.listOfColumn=[{title:"User",compare:(l,h)=>l.created_by.name-h.created_by.name,priority:1},{title:"Created At",compare:(l,h)=>l.created_by.date_created-h.created_by.date_created,priority:2},{title:"Hours",compare:(l,h)=>(l.no_of_hours?1:0)-(h.no_of_hours?1:0),priority:3},{title:"Note",compare:(l,h)=>l.note.localeCompare(h.note),priority:4},{title:"Action",compare:(l,h)=>l.amount-h.amount,priority:5}],this.listOfData=[],this.visible=!1,this.isVisible=!1,this.isOkLoading=!1,this.index=0,this.editCache={}}showModal(){this.isVisible=!0}handleOk(){return Oe(this,null,function*(){try{this.isVisible=!1,this.isOkLoading=!0,yield this.addContractorWorkLog(),this.isVisible=!1,this.addContractorWorkLogForm.reset()}catch{}finally{this.isOkLoading=!1,this.populateContractorWorkLogData()}})}addContractorWorkLog(){return Oe(this,null,function*(){this.clients=yield this.appService.saveSiteContractorWorkLog(At(it({},this.addContractorWorkLogForm.getRawValue()),{userId:this.user_id,task:this.task_id}))})}handleCancel(){this.isVisible=!1}ngOnInit(){this.addContractorWorkLogForm=new xo({id:new ge(0),amount:new ge(0,[xt.required]),note:new ge,work_from:new ge(new Date),work_to:new ge(new Date),no_of_hours:new ge(0),contract:new ge(this.contractDetails.id),site:new ge(this.task_id)}),this.populateContractorWorkLogData()}open(){this.visible=!0}close(i=!1){this.visible=!1,i&&this.populateContractorWorkLogData()}populateContractorWorkLogData(){return Oe(this,null,function*(){this.listOfData=yield this.appService.retrieveWorkLogByTaskId(this.task_id),this.updateEditCache()})}addItem(i){let r=i.value;this.projectItems.some(s=>!r||s.name===r.trim())||(this.projectItems=[...this.projectItems,{name:i.value,isCustom:!0}],i.value="")}onChange(i){if(i&&i.length>1){let r=this.appService.getNumberOfDays(i[0],i[1],this.contractDetails.include_weekends);this.addContractorWorkLogForm.patchValue({work_from:i[0],work_to:i[1],no_of_hours:r,amount:r*this.contractDetails.amount_per_unit},{emitEvent:!1})}}setAmout(i){this.addContractorWorkLogForm.patchValue({work_from:new Date,work_to:new Date,no_of_hours:Number(i.target.value),amount:Number(i.target.value)*this.contractDetails.amount_per_unit},{emitEvent:!1})}startEdit(i){this.editCache[i].edit=!0}cancelEdit(i){let r=this.listOfData.findIndex(s=>s.id===i);this.editCache[i]={data:it({},this.listOfData[r]),edit:!1}}saveEdit(i){return Oe(this,null,function*(){let r=this.listOfData.findIndex(s=>s.id===i);this.editCache[i].edit=!1,Object.assign(this.listOfData[r],this.editCache[i].data),this.populateContractorWorkLogData()})}updateEditCache(){this.listOfData.forEach(i=>{this.editCache[i.id]={edit:!1,data:it({},i)}})}static{this.\u0275fac=function(r){return new(r||o)(Ie(kt),Ie(ln),Ie(un))}}static{this.\u0275cmp=vt({type:o,selectors:[["app-work-log"]],inputs:{contractDetails:"contractDetails",task_id:"task_id",user_id:"user_id"},decls:16,vars:9,consts:[["title",""],["renderTemplate",""],["editRowTable","","sortTable",""],["inputElement",""],["nzGhost","",2,"margin","5px"],[3,"nzHeader","nzActive"],["nzTitle","Add Work Log",3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible","nzOkDisabled","nzOkLoading"],["style","width:100%",4,"nzModalContent"],["nzShowPagination","false",3,"nzPageSize","nzData"],[3,"nzSortFn","nzSortPriority",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"flex","center","space-between",2,"width","100%"],["nz-button","","nzType","primary","nzSize","small",3,"click"],["nz-icon","","nzType","plus"],[2,"width","100%"],["nz-form","",3,"ngSubmit","formGroup"],["nzGutter","2",2,"margin-bottom","12px"],[3,"nzMd","nzSm","nzXs",4,"ngIf"],[3,"nzMd","nzSm","nzXs"],["nzRequired","","nzFor","no_of_hours",3,"nzMd","nzSm","nzXs"],["nzErrorTip","The input is not valid date!",3,"nzSm","nzXs"],["class","inputField","formControlName","no_of_hours",3,"change",4,"ngIf"],["nzRequired","","nzFor","name",3,"nzMd","nzSm","nzXs"],["nzErrorTip","The input is not valid date!",1,"flex","space-between","center",3,"nzSm","nzXs"],["nz-input","","formControlName","note",1,"inputField"],["nzRequired","","nzFor","from",3,"nzMd","nzSm","nzXs"],[3,"ngModelChange","ngModelOptions","ngModel"],["formControlName","no_of_hours",1,"inputField",3,"change"],[1,"container"],["type","text","nz-input",""],[1,"add-item",3,"click"],[3,"nzSortFn","nzSortPriority"],[3,"click",4,"ngIf"],["class","save",3,"click",4,"ngIf"],["nz-popconfirm","","nzPopconfirmTitle","Sure to cancel?",3,"nzOnConfirm",4,"ngIf"],[3,"click"],[1,"save",3,"click"],["nz-popconfirm","","nzPopconfirmTitle","Sure to cancel?",3,"nzOnConfirm"]],template:function(r,s){if(r&1){let l=Re();M(0,"nz-collapse",4)(1,"nz-collapse-panel",5),xe(2,Hx,6,0,"ng-template",null,0,$e),M(4,"nz-modal",6),ei("nzVisibleChange",function(m){return Se(l),Jt(s.isVisible,m)||(s.isVisible=m),Ce(m)}),ze("nzOnCancel",function(){return Se(l),Ce(s.handleCancel())})("nzOnOk",function(){return Se(l),Ce(s.handleOk())}),xe(5,$x,18,20,"nz-card",7),O(),xe(6,Yx,6,0,"ng-template",null,1,$e),M(8,"nz-table",8,2)(11,"thead")(12,"tr"),xe(13,Zx,2,3,"th",9),O()(),M(14,"tbody"),xe(15,ty,15,10,"tr",10),O()()()()}if(r&2){let l=We(3),h=We(10);W(),B("nzHeader",l)("nzActive",s.active),W(3),Qt("nzVisible",s.isVisible),B("nzOkDisabled",s.addContractorWorkLogForm.invalid)("nzOkLoading",s.isOkLoading),W(4),B("nzPageSize",1e3)("nzData",s.listOfData),W(5),B("ngForOf",s.listOfColumn),W(2),B("ngForOf",h.data)}},dependencies:[pi,Gt,gi,Wt,mi,fn,qh,Gh,fi,xr,Fh,Ut,jt,br,_n,xn,vn,xi,jh,mr,Mh,Do,Cn,Sr,yn,bn,Dn,Sn,wn,_r,_i,vi,cn,dn,hn,gr,an]})}}return o})();var ly=()=>({width:"100%"});function cy(o,a){if(o&1&&ye(0,"nz-option",44),o&2){let i=a.$implicit;B("nzLabel",i.value)("nzValue",i.key)}}function dy(o,a){if(o&1&&(M(0,"span",45),ye(1,"span",46),M(2,"span"),ue(3),O()()),o&2){let i=a.$implicit,r=ce();W(),B("nzTheme","twotone")("nzTwotoneColor",r.taskSeverityColors[i.nzValue]),W(2),Ot(r.taskSeverity[i.nzValue])}}function hy(o,a){if(o&1&&ye(0,"nz-option",47),o&2){let i=a.$implicit,r=ce();B("nzDisabled",r.taskStatesConnectivity[r.taskDetails.controls.state.value].indexOf(i.key)==-1)("nzLabel",r.stateNames[i.value])("nzValue",i.value)}}function uy(o,a){if(o&1&&ye(0,"nz-option",48),o&2){let i=a.$implicit;B("nzValue",i==null?null:i.id)("nzLabel",i==null?null:i.name)}}function py(o,a){if(o&1&&ye(0,"nz-option",48),o&2){let i=a.$implicit;B("nzValue",i==null?null:i.employee)("nzLabel",i==null?null:i.employeeName)}}function fy(o,a){if(o&1&&ye(0,"nz-option",44),o&2){let i=a.$implicit;B("nzLabel",i.value)("nzValue",i.key)}}function my(o,a){if(o&1&&ye(0,"span",50),o&2){let i=a.$implicit,r=ce(2);B("nzTheme","twotone")("nzTwotoneColor",r.taskTypeIcons[i.nzValue])}}function gy(o,a){if(o&1&&(M(0,"nz-select",49),xe(1,fy,1,2,"nz-option",27),nt(2,"keyvalue"),O(),xe(3,my,1,2,"ng-template",null,1,$e)),o&2){let i=We(4),r=ce();B("nzCustomTemplate",i),W(),B("ngForOf",oo(2,2,r.taskTypes))}}function _y(o,a){if(o&1&&ye(0,"app-work-log",52),o&2){let i,r=ce(2);B("user_id",r.taskDetails.controls.assignee.value)("task_id",(i=r.taskDetails.get("id"))==null?null:i.value)("contractDetails",r.taskDetails.getRawValue())}}function vy(o,a){if(o&1&&(M(0,"span"),xe(1,_y,1,3,"app-work-log",51),O()),o&2){let i,r=ce();W(),B("ngIf",((i=r.taskDetails.get("id"))==null?null:i.value)&&r.isSelectedEmployeeHourlyBased())}}function xy(o,a){if(o&1&&ye(0,"img",53),o&2){let i=ce();B("src",i.previewImage,io)("ngStyle",ut(2,ly))}}function yy(o,a){if(o&1){let i=Re();M(0,"button",55),ze("click",function(){Se(i);let s=ce(2);return Ce(s.submitRequest())}),ue(1,"Submit"),O()}if(o&2){let i=ce(2);B("disabled",i.taskDetails.invalid)("disabled",i.taskDetails.invalid)}}function by(o,a){if(o&1&&(M(0,"span"),xe(1,yy,2,2,"button",54),O()),o&2){let i=ce();W(),B("ngIf",!i.taskDetails.controls.id.value)}}function Sy(o,a){if(o&1){let i=Re();M(0,"button",55),ze("click",function(){Se(i);let s=ce(2);return Ce(s.updateDetails())}),ue(1,"Save"),O()}if(o&2){let i=ce(2);B("disabled",i.taskDetails.invalid)}}function Cy(o,a){if(o&1&&(M(0,"span"),xe(1,Sy,2,1,"button",54),O()),o&2){let i=ce();W(),B("ngIf",i.taskDetails.controls.id.value)}}var To=(()=>{class o{constructor(i,r,s,l,h,m,w,A,V,ie){this.appService=i,this.route=r,this.userService=s,this.fb=l,this.notification=h,this.router=m,this.msg=w,this.modal=A,this.pdfGeneratorService=V,this.imageCompress=ie,this.editorConfig={editable:!0,spellcheck:!0,height:"auto",minHeight:"0",maxHeight:"auto",width:"auto",minWidth:"0",translate:"yes",enableToolbar:!0,showToolbar:!0,placeholder:"Enter text here...",defaultParagraphSeparator:"",defaultFontName:"",defaultFontSize:"",fonts:[{class:"arial",name:"Arial"},{class:"times-new-roman",name:"Times New Roman"},{class:"calibri",name:"Calibri"},{class:"comic-sans-ms",name:"Comic Sans MS"}],customClasses:[{name:"quote",class:"quote"},{name:"redText",class:"redText"},{name:"titleText",class:"titleText",tag:"h1"}],uploadUrl:"v1/image",uploadWithCredentials:!1,sanitize:!0,toolbarPosition:"top",toolbarHiddenButtons:[["bold","italic"],["fontSize"]]},this.projects=[],this.projectItems=[],this.discountTotal=0,this.taskTotal=0,this.loading=!1,this.taskTypes=zh,this.taskTypeIcons=qn,this.taskSeverity=fo,this.taskSeverityColors=mo,this.TaskStates=ii,this.stateNames=qt,this.taskStatesConnectivity=ur,this.appPermissions=ti,this.listOfData=[],this.defaultItemValues={id:0,name:"",qty:0,task_id:0,discount:0,total:0,date_created:new Date,isCustom:!1,unit_price:0},this.isSpinning=!1,this.taskDetails=new xo({id:new ge,task_no:new ge,title:new ge,type:new ge(2),state:new ge(ii.Backlog),description:new ge,severity:new ge(1),created_by:new ge(0),date_created:new ge(new Date),organization_id:new ge(0),client_id:new ge(0),start_date:new ge(new Date),due_date:new ge(new Date),assignee:new ge(0),comments:new ge,terms:new ge("")}),this.fileList=[],this.displayControlColumns=[{value:"name",name:"Item"}],this.previewImage="",this.previewVisible=!1,this.beforeUpload=(Z,$)=>new Wi(K=>{let F=Z.type==="image/jpeg"||Z.type==="image/png";if(!F){this.msg.error("You can only upload JPG file!"),K.complete();return}let N=Z.size/1024/1024<2;if(!N){this.msg.error("Image must smaller than 2MB!"),K.complete();return}K.next(F&&N),K.complete()}),this.handlePreview=Z=>Oe(this,null,function*(){this.previewImage=Z.url||Z.preview,this.previewVisible=!0}),this.donwnloadFile=Z=>{console.log(Z);let $=`${Z.url}`,K=document.createElement("a");K.href=$,K.download=Z.filename||"",K.click(),K.remove()},this.taskDetails=this.fb.group({id:new ge,title:new ge(null,[xt.required]),task_no:new ge,type:new ge(2),severity:new ge(2),state:new ge(ii.Backlog),description:new ge,created_by:new ge(0),date_created:new ge(new Date),organization_id:new ge(0),client_id:new ge(0),start_date:new ge(new Date),due_date:new ge(new Date),assignee:new ge(0),comments:new ge,terms:new ge("")}),this.taskDetails.controls.type.setValue(Object.keys(this.taskTypes).find(Z=>Number(Z)===2)),this.taskDetails.controls.severity.setValue(Object.keys(this.taskSeverity).find(Z=>Number(Z)===1))}submitForm(){}ngOnInit(){this.currentClientSubscription=this.appService.currentClient.subscribe(i=>{i&&i.id>0&&this.currentOrganizationId!=i.id&&(this.currentOrganizationId=i.id,this.setUpTaskForm())})}ngOnDestroy(){this.routerSubscription&&this.routerSubscription.unsubscribe()}canDeactivate(){return this.shouldConfirmNavigation()?confirm(hr):!0}shouldConfirmNavigation(){return this.taskDetails.dirty||this.taskDetails.touched}close(){this.router.navigate(["/","task",location.href.indexOf("board")>-1?"board":location.href.indexOf("report")>-1?"report":"list"],{queryParams:{TASK:null},queryParamsHandling:"merge"})}setUpTaskForm(){return Oe(this,null,function*(){yield this.loadProjectsProjectsAndUsers(),this.routerSubscription=this.route.queryParams.subscribe(i=>Oe(this,null,function*(){if((this.taskDetails.dirty||this.taskDetails.touched)&&!confirm(hr))return;this.isSpinning=!0;let r=0;!i.TASK||i.TASK==="new"?(this.taskDetails.enable(),this.taskDetails.updateValueAndValidity()):r=i.TASK,this.created_by_users=[this.userService.loggedInUser],this.taskDetails.controls.id.setValue(r||0),yield this.setTaskRequestDetails(),setTimeout(()=>Oe(this,null,function*(){this.isSpinning=!1}),1e3)}))})}setProjectsData(){return Oe(this,null,function*(){let i=yield this.appService.getAndSetProjects(),r=i&&i.length?i.map(s=>it({label:s.name},s)):[];this.sites=[...r]})}setTaskRequestDetails(){return Oe(this,null,function*(){this.loading=!0,this.taskDetails.controls.id.value?yield this.getExistingTask():(this.taskDetails.controls.client_id.setValue(this.appService.currentSubOrgId),this.taskDetails.controls.organization_id.setValue(parseInt(localStorage.getItem("organization_id")||"")),this.taskDetails.controls.created_by.setValue(this.userService.loggedInUser.id)),this.disableAndEnableSpecificControls(),this.loading=!1})}getExistingTask(){return Oe(this,null,function*(){let i=yield this.appService.retireveTaskById(this.taskDetails.controls.id.value);i&&(this.created_by_users=[i.created_by],this.taskDetails.patchValue({id:i.id,task_no:i.task_no,title:i.title,state:i.state,type:i.type,severity:i.severity,description:i.description,assignee:i.assignee,created_by:i.created_by.id,date_created:new Date(i.date_created),start_date:i.start_date,due_date:i.due_date,organization_id:i.organization_id,client_id:i.client_id,comments:i.comments}),i.comments&&i.comments.length&&(this.fileList=i.comments.map(r=>({name:"image.png",status:"done",url:r,message:"",thumbUrl:r})))),this.taskDetails.controls.type.setValue(Object.keys(this.taskTypes).find(r=>Number(r)===Number(i.type))),this.taskDetails.controls.severity.setValue(Object.keys(this.taskSeverity).find(r=>Number(r)===Number(i.severity))),this.previousTaskDetails=this.taskDetails.getRawValue()})}loadProjectsProjectsAndUsers(){return Oe(this,null,function*(){this.listOfData=yield this.appService.getOrganizationEmployees()})}getItemFormGroup(i=this.defaultItemValues){return this.fb.group({id:new ge(i.id),task_id:new ge(i.task_id),name:new ge(i.name,[xt.required]),qty:new ge(i.qty,[xt.required]),unit_price:new ge(i.unit_price),discount:new ge(i.discount),total:new ge(i.total),date_created:new ge(i.date_created),isCustom:new ge(i.isCustom)})}submitRequest(){return Oe(this,null,function*(){let i=yield this.appService.AddTask({details:At(it({},this.taskDetails.getRawValue()),{state:ii.Backlog})});i&&this.notification.create("success","Task Order - "+i.task_no,"Task order submitted successfly. Please check for invoice and update later").onClose.subscribe(r=>{this.router.navigate(["/task",location.href.indexOf("board")>-1?"board":"list"])})})}updateDetails(){return Oe(this,null,function*(){let i=this.appService.findObjectDifferences(this.previousTaskDetails,this.taskDetails.getRawValue());console.log(i);let r=it({id:this.previousTaskDetails.id},i);if(Object.keys(i).length<1){this.notification.create("error","Task Update","Please update missing details before submission.");return}(yield this.appService.updateTaskRequest(r))&&this.notification.create("success","Task - "+this.previousTaskDetails.task_no,"Task updated successfly.").onClose.subscribe(l=>{this.router.navigate(["/task",location.href.indexOf("board")>-1?"board":"list"])})})}printCard(){this.makePdf("print")}generatePDF(){this.makePdf("download")}makePdf(i){let r=this.taskDetails.getRawValue();this.pdfGeneratorService.invoice=At(it({},r),{type:this.taskTypes[r.type],status:this.stateNames[r.state],invoiceDetailLabel:"Task Details",personName:r.assignee.name,address:r.assignee.address||"",contactNo:r.assignee.contact_no||"",terms:r.terms,email:r.assignee.email||"",additionalDetails:r.description||"",created_by:this.created_by_users[0]}),this.pdfGeneratorService.generatePDF(i)}isSelectedEmployeeHourlyBased(){let i=this.taskDetails.get("assignee")?.value;return this.listOfData.some(r=>r.isHourlyRateHourly&&r.employee===i)}disableAndEnableSpecificControls(){let i=this.taskDetails.get("state");this.taskDetails.controls.created_by.disable(),this.taskDetails.controls.date_created.disable(),i&&i.value!==this.TaskStates.Backlog&&(console.log(this.taskDetails),Object.keys(this.taskDetails.controls).forEach(r=>{let s=this.taskDetails.get(r);s&&!this.userService.hasPermission(this.appPermissions.AddTask.toString())&&!this.userService.hasPermission(this.appPermissions.AddTask.toString())&&(console.log(r),s.disable()),s&&(r!=="comments"&&r!=="amount_paid"&&i.value===this.TaskStates.Completed||i.value===this.TaskStates.Completed||i.value===this.TaskStates.Completed)&&s.disable()}),console.log(this.taskDetails),this.taskDetails.updateValueAndValidity())}getBase64(i,r){let s=new FileReader;s.addEventListener("load",()=>r(s.result.toString())),s.readAsDataURL(i)}handleChange(i){this.getBase64(i.file.originFileObj,r=>Oe(this,null,function*(){if(this.loading=!1,i.type==="error"){let s=yield this.imageCompress.getOrientation(i.file.originFileObj||new File([],""));this.imageCompress.compressFile(r,s,50,80,800,800).then(l=>{console.warn(`Compressed: ${l.substring(0,50)}... (${l.length} characters)`),console.warn("Size in bytes is now:",this.imageCompress.byteCount(l)),i.fileList?.forEach(h=>{h.uid==i.file.uid&&(h.name="image.png",h.status="done",h.url=l,h.message="",h.thumbUrl=l)}),Object.assign(this.fileList,i.fileList),this.taskDetails.patchValue({comments:i.fileList?.map(h=>h.url)})})}}))}static{this.\u0275fac=function(r){return new(r||o)(Ie(kt),Ie(Ei),Ie(ln),Ie(un),Ie(wo),Ie(Ri),Ie(Co),Ie(vo),Ie(wr),Ie(zo))}}static{this.\u0275cmp=vt({type:o,selectors:[["app-task"]],decls:83,vars:59,consts:[["content",""],["defaultTemplate",""],["addOnBeforeTemplate",""],["modalContent",""],[3,"nzSpinning","nzDelay"],[1,"container"],[1,"detailBar"],["nz-button","","nzType","primary","nz-tooltip","Generate PDF",3,"click"],["nz-icon","","nzType","download"],["nz-button","","nz-tooltip","Print request","nzType","primary",2,"margin-left","12px",3,"click"],["nz-icon","","nzType","printer"],["nz-button","","nz-tooltip","Close request","nzType","default","nzDanger","",2,"margin-left","12px",3,"click"],["nz-icon","","nzType","close"],["id","print-section",1,"task-request"],["nzBordered","false",2,"width","100%"],["nz-form","",3,"ngSubmit","formGroup"],["nzRequired","","nzFor","title"],["nzErrorTip","The input is not valid date!",3,"nzSm","nzXs","nzMd","nzXl","nzXXl"],[3,"nzAddOnBefore"],["rows","1","nz-input","","formControlName","title"],["nzFor","description"],["nzErrorTip","",3,"nzSm","nzXs","nzMd","nzXl","nzXXl"],["rows","6","nz-input","","formControlName","description","placeholder","textarea with clear icon"],[2,"width","100%","margin-bottom","12px"],["nzRequired","","nzFor","due_date",3,"nzSm","nzXs"],["nzErrorTip","The input is not valid date!",3,"nzSm","nzXs"],["formControlName","severity","nzPlaceHolder","severity",3,"nzCustomTemplate"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzRequired","","nzFor","state",3,"nzSm","nzXs"],["formControlName","state","nzPlaceHolder","Status",1,"taskTypeSelector"],[3,"nzDisabled","nzLabel","nzValue",4,"ngFor","ngForOf"],["nzRequired","","nzFor","created_by",3,"nzSm","nzXs"],["id","created_by","formControlName","created_by","placeholder","created_by"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzRequired","","nzFor","date_created",3,"nzSm","nzXs"],["nzFormat","MM-dd-yyyy","formControlName","date_created",1,"inputField"],["nzRequired","","nzFor","assignee",3,"nzSm","nzXs"],["id","assignee","formControlName","assignee","placeholder","Select user"],["nzRequired","","nzFor","start_date",3,"nzSm","nzXs"],["nzFormat","MM-dd-yyyy","formControlName","start_date",1,"inputField"],["nzFormat","MM-dd-yyyy","formControlName","due_date",1,"inputField"],[4,"appHasPermission"],[3,"nzOnCancel","nzVisible","nzContent","nzFooter"],[1,"flex","space-between"],[3,"nzLabel","nzValue"],[1,"flex","center"],["nz-icon","","nzType","project",3,"nzTheme","nzTwotoneColor"],[3,"nzDisabled","nzLabel","nzValue"],[3,"nzValue","nzLabel"],["formControlName","type","nzPlaceHolder","Type",1,"taskTypeSelector",2,"width","auto",3,"nzCustomTemplate"],["nz-icon","","nzType","check-square",3,"nzTheme","nzTwotoneColor"],[3,"user_id","task_id","contractDetails",4,"ngIf"],[3,"user_id","task_id","contractDetails"],[3,"src","ngStyle"],["nz-button","","nzType","primary","style","margin-bottom: 12px;float: right;",3,"disabled","click",4,"ngIf"],["nz-button","","nzType","primary",2,"margin-bottom","12px","float","right",3,"click","disabled"]],template:function(r,s){if(r&1){let l=Re();M(0,"nz-spin",4)(1,"div",5)(2,"div",6)(3,"span")(4,"h4"),ue(5),O()(),M(6,"span")(7,"button",7),ze("click",function(){return Se(l),Ce(s.generatePDF())}),ye(8,"span",8),O(),M(9,"button",9),ze("click",function(){return Se(l),Ce(s.printCard())}),ye(10,"span",10),O(),M(11,"button",11),ze("click",function(){return Se(l),Ce(s.close())}),ye(12,"span",12),O()()(),M(13,"div",13)(14,"nz-card",14)(15,"form",15),ze("ngSubmit",function(){return Se(l),Ce(s.submitForm())}),M(16,"div",null,0)(18,"nz-form-item")(19,"nz-form-label",16),ue(20,"Title"),O(),M(21,"nz-form-control",17)(22,"nz-input-group",18),ye(23,"textarea",19),O()()(),M(24,"nz-form-item")(25,"nz-form-label",20),ue(26,"Task Description"),O(),M(27,"nz-form-control",21),ye(28,"textarea",22),O()(),M(29,"nz-card",23)(30,"nz-form-item")(31,"nz-form-label",24),ue(32,"Severity"),O(),M(33,"nz-form-control",25)(34,"nz-select",26),xe(35,cy,1,2,"nz-option",27),nt(36,"keyvalue"),O(),xe(37,dy,4,3,"ng-template",null,1,$e),O()(),M(39,"nz-form-item")(40,"nz-form-label",28),ue(41,"Status"),O(),M(42,"nz-form-control",25)(43,"nz-select",29),xe(44,hy,1,3,"nz-option",30),nt(45,"keyvalue"),O()()(),M(46,"nz-form-item")(47,"nz-form-label",31),ue(48,"Created By"),O(),M(49,"nz-form-control",25)(50,"nz-select",32),xe(51,uy,1,2,"nz-option",33),O()()(),M(52,"nz-form-item")(53,"nz-form-label",34),ue(54,"Date Created"),O(),M(55,"nz-form-control",25),ye(56,"nz-date-picker",35),O()(),M(57,"nz-form-item")(58,"nz-form-label",36),ue(59,"Assignee"),O(),M(60,"nz-form-control",25)(61,"nz-select",37),xe(62,py,1,2,"nz-option",33),O()()(),M(63,"nz-form-item")(64,"nz-form-label",38),ue(65,"Start Date"),O(),M(66,"nz-form-control",25),ye(67,"nz-date-picker",39),O()(),M(68,"nz-form-item")(69,"nz-form-label",24),ue(70,"Due Date"),O(),M(71,"nz-form-control",25),ye(72,"nz-date-picker",40),O()(),xe(73,gy,5,4,"ng-template",null,2,$e)(75,vy,2,1,"span",41),O()(),M(76,"nz-modal",42),ze("nzOnCancel",function(){return Se(l),Ce(s.previewVisible=!1)}),xe(77,xy,1,3,"ng-template",null,3,$e),O(),M(79,"span",43)(80,"span"),xe(81,by,2,1,"span",41)(82,Cy,2,1,"span",41),O()()()()()()()}if(r&2){let l,h=We(38),m=We(74),w=We(78);B("nzSpinning",s.isSpinning)("nzDelay",500),W(5),or(" Task - ",((l=s.taskDetails.get("task_no"))==null?null:l.value)||"New"," / ",s.stateNames[(l=s.taskDetails.get("state"))==null?null:l.value]," "),W(10),B("formGroup",s.taskDetails),W(6),B("nzSm",24)("nzXs",24)("nzMd",24)("nzXl",24)("nzXXl",24),W(),B("nzAddOnBefore",m),W(5),B("nzSm",24)("nzXs",24)("nzMd",24)("nzXl",24)("nzXXl",24),W(4),B("nzSm",6)("nzXs",24),W(2),B("nzSm",14)("nzXs",24),W(),B("nzCustomTemplate",h),W(),B("ngForOf",oo(36,55,s.taskSeverity)),W(5),B("nzSm",6)("nzXs",24),W(2),B("nzSm",14)("nzXs",24),W(2),B("ngForOf",oo(45,57,s.TaskStates)),W(3),B("nzSm",6)("nzXs",24),W(2),B("nzSm",14)("nzXs",24),W(2),B("ngForOf",s.created_by_users),W(2),B("nzSm",6)("nzXs",24),W(2),B("nzSm",14)("nzXs",24),W(3),B("nzSm",6)("nzXs",24),W(2),B("nzSm",14)("nzXs",24),W(2),B("ngForOf",s.listOfData),W(2),B("nzSm",6)("nzXs",24),W(2),B("nzSm",14)("nzXs",24),W(3),B("nzSm",6)("nzXs",24),W(2),B("nzSm",14)("nzXs",24),W(4),B("appHasPermission",s.appPermissions.AddTaskWorklog),W(),B("nzVisible",s.previewVisible)("nzContent",w)("nzFooter",null),W(5),B("appHasPermission",s.appPermissions.AddTask),W(),B("appHasPermission",s.appPermissions.UpdateTask)}},dependencies:[pi,Gt,lo,gi,Wt,mi,fn,fi,xr,Ut,jt,br,_n,xn,vn,xi,pn,mr,yo,bo,So,yr,_r,_i,vi,cn,dn,hn,Cr,cu,co],styles:["nz-select[_ngcontent-%COMP%]{width:240px}nz-divider[_ngcontent-%COMP%]{margin:4px 0}.container[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;padding:8px}.add-item[_ngcontent-%COMP%]{flex:0 0 auto;padding:8px;display:block}input[_ngcontent-%COMP%]{width:66px}.container[_ngcontent-%COMP%]{background:#f1e5ff;padding:5px}.anticon[_ngcontent-%COMP%]{margin-right:6px;font-size:24px}  .taskTypeSelector .ant-select-arrow{visibility:hidden!important}  .taskTypeSelector .ant-select-selector{padding:0!important}  .taskTypeSelector .ant-select-selection-item{padding:5px!important}  .ant-input-group-wrapper .ant-input-group-addon{background:none!important;border-color:transparent!important}"]})}}return o})();var Io=Qs(pu());var wy=["content"],fu=(o,a)=>[o,a],Dy=o=>({showPreviewIcon:!0,showRemoveIcon:o,showDownloadIcon:!0}),zy=()=>({minRows:1,maxRows:6}),Ty=()=>({width:"100%"});function Iy(o,a){if(o&1&&ye(0,"nz-option",70),o&2){let i=a.$implicit;B("nzValue",i==null?null:i.id)("nzLabel",i==null?null:i.name)}}function ky(o,a){if(o&1&&ye(0,"nz-option",70),o&2){let i=a.$implicit;B("nzValue",i==null?null:i.id)("nzLabel",i==null?null:i.name)}}function Ey(o,a){o&1&&(M(0,"th",71),ue(1," Custom"),O())}function Ry(o,a){o&1&&ye(0,"th")}function My(o,a){if(o&1){let i=Re();M(0,"td",71)(1,"button",72),ze("click",function(){Se(i);let s=ce();return Ce(s.addProductRow())}),ye(2,"span",73),O()()}}function Ay(o,a){o&1&&ye(0,"label",82)}function Py(o,a){if(o&1&&(M(0,"td"),xe(1,Ay,1,0,"label",81),O()),o&2){let i=ce(2);W(),B("ngIf",i.SaleRequestDetails.controls.state.value==i.SaleStates.Draft)}}function Oy(o,a){o&1&&(M(0,"textarea",83),ue(1," "),O()),o&2&&B("nzAutosize",ut(1,zy))}function Ly(o,a){if(o&1){let i=Re();M(0,"app-select-modal-control",84),ze("ngModelChange",function(s){Se(i);let l=ce().index,h=ce();return Ce(h.onItemChange(s,l))}),O()}if(o&2){let i=ce(2);B("data",i.projectItems)("displayColumns",i.displayControlColumns)("header","Select Product")}}function Ny(o,a){if(o&1){let i=Re();M(0,"a",86),ze("click",function(){Se(i);let s=ce(2).index,l=ce();return Ce(l.removeProduct(s))}),M(1,"button",87),ye(2,"span",88),O()()}}function Fy(o,a){if(o&1){let i=Re();M(0,"a",86),ze("click",function(){Se(i);let s=ce(2).index,l=ce();return Ce(l.returnProduct(s))}),M(1,"button",87),ye(2,"span",89),O()()}}function By(o,a){if(o&1&&(M(0,"td"),xe(1,Ny,3,0,"a",85)(2,Fy,3,0,"a",85),O()),o&2){let i,r=ce().$implicit,s=ce();W(),B("ngIf",s.SaleRequestDetails.controls.state.value==s.SaleStates.Draft),W(),B("ngIf",s.SaleRequestDetails.controls.state.value==s.SaleStates.Invoiced&&!((i=r.get("returned_now"))!=null&&i.value))}}function Vy(o,a){if(o&1){let i=Re();Ct(0,74),M(1,"tr",90)(2,"td"),ye(3,"input",92),O(),M(4,"td")(5,"input",93),ze("change",function(){let s=Se(i).index,l=ce(2).index,h=ce();return Ce(h.calculateCharge(l,s))}),O()(),M(6,"td"),ue(7),nt(8,"currency"),O(),M(9,"td")(10,"input",94),ze("change",function(){let s=Se(i).index,l=ce(2).index,h=ce();return Ce(h.calculateCharge(l,s))}),O()(),M(11,"td"),ue(12),nt(13,"currency"),O()(),It()}if(o&2){let i,r,s=a.$implicit,l=a.index;B("formGroupName",l),W(7),at(" ",dt(8,3,(i=s.get("unit_price"))==null?null:i.value,"PKR ")," "),W(5),at(" ",dt(13,6,(r=s.get("returnAmount"))==null?null:r.value,"PKR ")," ")}}function Gy(o,a){if(o&1&&(Ct(0),M(1,"tr",90)(2,"td"),ue(3,"Reason"),O(),M(4,"td"),ue(5,"Quantity"),O(),M(6,"td"),ue(7,"Price Charged / Item"),O(),M(8,"td"),ue(9," Charges "),O(),ye(10,"td"),O(),Ct(11,91),xe(12,Vy,14,9,"ng-container",44),It()()),o&2){let i,r=ce().$implicit,s=ce();W(12),B("ngForOf",(i=s.getReturnItemFormGroup(r))==null?null:i.controls)}}function qy(o,a){if(o&1){let i=Re();Ct(0,74),M(1,"tr"),xe(2,Py,2,1,"td",41),M(3,"td"),xe(4,Oy,2,2,"textarea",75)(5,Ly,1,3,"app-select-modal-control",76),O(),M(6,"td")(7,"nz-input-group",77)(8,"input",78),ze("ngModelChange",function(){let s=Se(i).index,l=ce();return Ce(l.onQuantityChange(s))}),O()()(),M(9,"td")(10,"nz-input-group",77)(11,"input",79),ze("ngModelChange",function(){let s=Se(i).index,l=ce();return Ce(l.onPriceChange(s))}),O()()(),M(12,"td")(13,"input",80),ze("ngModelChange",function(){let s=Se(i).index,l=ce();return Ce(l.onDiscountChange(s))}),O()(),M(14,"td"),ye(15,"h5",42),nt(16,"currency"),O(),xe(17,By,3,2,"td",41),O(),xe(18,Gy,13,1,"ng-container",41),It()}if(o&2){let i,r,s,l=a.$implicit,h=a.index,m=ce();B("formGroupName",h),W(2),B("ngIf",m.SaleRequestDetails.controls.state.value==m.SaleStates.Draft),W(2),B("ngIf",m.SaleRequestDetails.controls.state.value!==m.SaleStates.Draft||(l.controls.isCustom==null?null:l.controls.isCustom.value)),W(),B("ngIf",m.SaleRequestDetails.controls.state.value==m.SaleStates.Draft&&!(l.controls.isCustom!=null&&l.controls.isCustom.value)),W(2),B("nzSuffix",(i=l.get("max_qty"))==null?null:i.value),W(3),B("nzSuffix",(r=l.get("min_unit_price"))==null?null:r.value),W(5),B("innerHTML",dt(16,9,((s=l.get("total"))==null?null:s.value)*1,"PKR "),on),W(2),B("ngIf",m.SaleRequestDetails.controls.state.value==m.SaleStates.Draft||m.SaleRequestDetails.controls.state.value==m.SaleStates.Invoiced),W(),B("ngIf",!!m.hasReturnItemFormGroup(l))}}function Wy(o,a){if(o&1){let i=Re();M(0,"button",100),ze("click",function(){Se(i);let s=ce(3);return Ce(s.addPaymentControlRow())}),ye(1,"span",73),O()}}function jy(o,a){if(o&1){let i=Re();Ct(0,74),M(1,"tr")(2,"td"),ye(3,"input",101),O(),M(4,"td")(5,"input",102),ze("change",function(){Se(i);let s=ce(3);return Ce(s.calculateBalance())}),O()()(),It()}if(o&2){let i=a.index;B("formGroupName",i)}}function Uy(o,a){if(o&1&&(M(0,"nz-table",97)(1,"thead"),ye(2,"tr"),M(3,"tr")(4,"th"),ue(5,"Description"),O(),M(6,"th")(7,"span",66),ue(8," Amount "),xe(9,Wy,2,0,"button",98),O()()()(),Ct(10,99),xe(11,jy,6,1,"ng-container",44),It(),O()),o&2){let i=ce(2);W(9),B("ngIf",i.SaleRequestDetails.controls.state.value==i.SaleStates.PaymentConfirmation||i.returningItem),W(2),B("ngForOf",i.SaleRequestDetails.controls.payment_history.controls)}}function Hy(o,a){if(o&1&&(M(0,"nz-card",95),xe(1,Uy,12,2,"nz-table",96),O()),o&2){let i=ce(),r=We(113),s=We(115),l=We(117);B("nzTitle",r)("nzActions",pl(3,fu,s,l)),W(),B("ngIf",i.SaleRequestDetails.controls.state.value!=i.SaleStates.Draft)}}function Xy(o,a){o&1&&(M(0,"h5"),ue(1,"Discount"),O(),M(2,"h3"),ue(3,"Total"),O())}function Ky(o,a){if(o&1&&(ye(0,"p",42),nt(1,"currency"),ye(2,"h4",42),nt(3,"currency")),o&2){let i,r,s=ce();B("innerHTML",dt(1,2,((i=s.SaleRequestDetails.get("items_discount_total"))==null?null:i.value)*1+((i=s.SaleRequestDetails.get("overall_discount_total"))==null?null:i.value)*1,"PKR "),on),W(2),B("innerHTML",dt(3,5,(r=s.SaleRequestDetails.get("total"))==null?null:r.value,"PKR "),on)}}function $y(o,a){o&1&&(M(0,"h5"),ue(1," Payment Details "),O())}function Yy(o,a){if(o&1&&xe(0,$y,2,0,"h5",41),o&2){let i=ce();B("ngIf",i.SaleRequestDetails.controls.state.value!==i.SaleStates.Draft)}}function Zy(o,a){o&1&&(M(0,"h5"),ue(1,"Amount Paid"),O(),M(2,"h3"),ue(3,"Balance"),O())}function Qy(o,a){if(o&1&&(ye(0,"p",42),nt(1,"currency"),ye(2,"h4",42),nt(3,"currency")),o&2){let i,r,s=ce();B("innerHTML",dt(1,2,(i=s.SaleRequestDetails.get("amount_paid"))==null?null:i.value,"PKR "),on),W(2),B("innerHTML",dt(3,5,(r=s.SaleRequestDetails.get("balance"))==null?null:r.value,"PKR "),on)}}function Jy(o,a){if(o&1&&ye(0,"img",103),o&2){let i=ce();B("src",i.previewImage,io)("ngStyle",ut(2,Ty))}}function e1(o,a){if(o&1){let i=Re();M(0,"button",104),ze("click",function(){Se(i);let s=ce();return Ce(s.cancelPaymentDetails())}),ue(1,"Cancel"),O()}}function t1(o,a){if(o&1){let i=Re();M(0,"button",105),ze("click",function(){Se(i);let s=ce();return Ce(s.submitRequest())}),ue(1,"Submit"),O()}if(o&2){let i=ce();B("disabled",i.SaleRequestDetails.invalid)}}function i1(o,a){if(o&1){let i=Re();M(0,"button",105),ze("click",function(){Se(i);let s=ce();return Ce(s.confirmPaymentDetails())}),ue(1,"Confirm Payment"),O()}if(o&2){let i=ce();B("disabled",i.SaleRequestDetails.invalid)}}function n1(o,a){if(o&1){let i=Re();M(0,"button",106),ze("click",function(){Se(i);let s=ce();return Ce(s.confirmPaymentDetails(!0))}),ue(1," Save "),O()}if(o&2){let i=ce();B("disabled",i.SaleRequestDetails.invalid)}}function r1(o,a){if(o&1){let i=Re();M(0,"button",106),ze("click",function(){Se(i);let s=ce();return Ce(s.submitRequest(!0))}),ue(1," Save as Draft "),O()}if(o&2){let i=ce();B("disabled",i.SaleRequestDetails.invalid)}}function s1(o,a){if(o&1){let i=Re();M(0,"div",11),ye(1,"input",107,9),M(3,"a",108),ze("click",function(){Se(i);let s=We(2),l=ce();return Ce(l.addItem(s))}),ye(4,"span",63),ue(5," Add item "),O()()}}function o1(o,a){}var mu=(()=>{class o{constructor(i,r,s,l,h,m,w,A,V,ie){this.appService=i,this.route=r,this.userService=s,this.fb=l,this.notification=h,this.router=m,this.msg=w,this.modal=A,this.pdfGeneratorService=V,this.imageCompress=ie,this.projectItems=[],this.expandableKey=[],this.discountTotal=0,this.SaleRequestTotal=0,this.loading=!1,this.SaleStates=Di,this.stateNames=ho,this.listOfData=[],this.displayControlColumns=[{value:"project_name",name:"Project Name"},{value:"name",name:"Item"}],this.defaultItemValues={id:0,name:"",qty:0,SaleRequest_id:0,discount:0,total:0,date_created:new Date,isCustom:!1,project:{},max_qty:0,min_unit_price:0,unit_price:0,return_details:[],actualQty:0},this.isSpinning=!1,this.fileList=[],this.created_by_users=[],this.index=0,this.previewImage="",this.previewVisible=!1,this.beforeUpload=(Z,$)=>new Wi(K=>{let F=Z.type==="image/jpeg"||Z.type==="image/png";if(!F){this.msg.error("You can only upload JPG file!"),K.complete();return}let N=Z.size/1024/1024<2;if(!N){this.msg.error("Image must smaller than 2MB!"),K.complete();return}K.next(F&&N),K.complete()}),this.handlePreview=Z=>Oe(this,null,function*(){this.previewImage=Z.url||Z.preview,this.previewVisible=!0}),this.donwnloadFile=Z=>{console.log(Z);let $=`${Z.url}`,K=document.createElement("a");K.href=$,K.download=Z.filename||"",K.click(),K.remove()},this.SaleRequestDetails=this.fb.group({id:new ge,sale_no:new ge,title:new ge(null,[xt.required]),items:this.fb.array([]),state:new ge(Di.Draft),description:new ge,items_discount_total:new ge(0),overall_discount_total:new ge(0),item_cost:new ge(0),amount_paid:new ge(0),date_created:new ge(new Date),created_by:new ge({value:this.userService.loggedInUser.id,disabled:!0}),payment_history:this.fb.array([]),additional_cost:new ge(0),overall_discount:new ge(0),shipment_charges:new ge(0),total:new ge(0),balance:new ge(0),organization_id:new ge(0),client_id:new ge(0),invoice_date:new ge(new Date),due_date:new ge(new Date),customer:new ge(0,[xt.required]),attachment:new ge(!1),new_customer:new ge,terms:new ge("")})}submitForm(){}canDeactivate(){return this.shouldConfirmNavigation()?confirm(hr):!0}shouldConfirmNavigation(){return this.SaleRequestDetails.dirty||this.SaleRequestDetails.touched}ngOnDestroy(){this.routeSubscription&&this.routeSubscription.unsubscribe()}ngOnInit(){this.currentClientSubscription=this.appService.currentClient.subscribe(i=>{i&&i.id>0&&this.currentOrganizationId!=i.id&&(this.currentOrganizationId=i.id,this.appService.getOrganizationCustomers().then(r=>{this.listOfData=r}),this.routeSubscription=this.route.queryParams.subscribe(r=>Oe(this,null,function*(){if((this.SaleRequestDetails.dirty||this.SaleRequestDetails.touched)&&!confirm(hr))return;this.isSpinning=!0;let s=0;!r.SALE||r.SALE==="new"||(s=r.SALE),this.SaleRequestDetails.enable(),this.clearItems(),this.created_by_users=[this.userService.loggedInUser],this.SaleRequestDetails.reset({state:Di.Draft,created_by:this.userService.loggedInUser.id,date_created:new Date,id:0,items:[],payment_history:[]}),this.SaleRequestDetails.updateValueAndValidity(),this.SaleRequestDetails.controls.id.setValue(s||0),yield this.setSaleRequestRequestDetails(),setTimeout(()=>{this.isSpinning=!1},1e3)})),this.SaleRequestDetails.controls.client_id.setValue(i.id))})}clearItems(){for(;this.SaleRequestDetails.get("items").value.length!==0;)this.SaleRequestDetails.controls.items.removeAt(0);for(;this.SaleRequestDetails.get("payment_history").value.length!==0;)this.SaleRequestDetails.controls.payment_history.removeAt(0)}close(){this.router.navigate(["/","task","sales"],{queryParams:{SALE:null},queryParamsHandling:"merge"})}getReturnItemFormGroup(i){return i.get("return_details")}hasReturnItemFormGroup(i){return!!i.controls.return_details.controls?.length}setSaleRequestRequestDetails(){return Oe(this,null,function*(){this.loading=!0,this.SaleRequestDetails.controls.id.value?yield this.getExistingSaleRequest():(this.SaleRequestDetails.controls.organization_id.setValue(parseInt(localStorage.getItem("organization_id")||"")),this.nodes=this.transformToNodeStructure(this.projectItems),this.expandableKey=this.nodes.map(i=>i.key)||[],this.SaleRequestDetails.controls.created_by.setValue(this.userService.loggedInUser.id)),this.SaleRequestDetails.controls.state.value==this.SaleStates.Draft&&(this.projectItems=yield this.appService.getInventory(),this.SaleRequestDetails.controls.items.controls.forEach((i,r)=>{let s=this.projectItems.find(l=>l.name===i.controls.name.value);i.patchValue({selected_item:s}),setTimeout(()=>{this.onItemChange(s,r)},500)})),this.disableAndEnableSpecificControls(),this.loading=!1})}onItemChange(i,r){let s=this.SaleRequestDetails.controls.items.controls[r];if(s.controls.selected_item.value){let l=s.controls.selected_item.value.item_name,h=s.controls.selected_item.value.qty,m=s.controls.selected_item.value.avg_unit_price,w=i.project?i.project:s.controls.selected_item.value.project_id;s.controls.name.setValue(l),s.controls.project.setValue(w),s.controls.name.setValue(l),s.controls.max_qty.setValue(h),s.controls.min_unit_price.setValue(m),s.controls.qty.setValidators([xt.max(h)]),s.controls.unit_price.setValidators([xt.min(m)]),s.updateValueAndValidity()}}getExistingSaleRequest(){return Oe(this,null,function*(){let i=yield this.appService.retireveSaleById(this.SaleRequestDetails.controls.id.value);if(i&&i){this.created_by_users=[i.created_by],this.SaleRequestDetails.patchValue({id:i.id,title:i.title,state:i.state,sale_no:i.sale_no,description:i.description,customer:i.customer.id,items_discount_total:i.items_discount_total,due_date:new Date(i.due_date),date_created:new Date(i.date_created),invoice_date:new Date(i.invoice_date),overall_discount_total:i.overall_discount_total,item_cost:i.item_cost,amount_paid:i.amount_paid,additional_cost:i.additional_cost,created_by:i.created_by.id,shipment_charges:i.shipment_charges,total:i.total,balance:i.balance,organization_id:i.organization_id,client_id:i.client_id,attachment:i.attachment}),i.attachment&&i.attachment.length?this.fileList=i.attachment.map(l=>({name:"image.png",status:"done",url:l,message:"",thumbUrl:l})):this.fileList=[];let r=i.items||[],s=i.payment_history||[];r.forEach(l=>{this.addRow(l)}),s.forEach(l=>{this.addPaymentRow(l)})}this.previousSaleRequestDetails=this.SaleRequestDetails.getRawValue()})}getItemFormGroup(i=this.defaultItemValues){return this.fb.group({id:new ge(i.id),sale_id:new ge(i.SaleRequest_id),name:new ge(i.name,[xt.required]),selected_item:new ge(i.name),qty:new ge(i.qty,[xt.required]),actualQty:new ge(i.actualQty),project:new ge(i.project),unit_price:new ge(i.unit_price,[xt.required]),discount:new ge(i.discount),total:new ge(i.total),isCustom:new ge(i.isCustom),date_created:new ge(new Date(i.date_created)),min_unit_price:new ge(i.min_unit_price),max_qty:new ge(i.max_qty),return_details:this.getReturnItemsFormArray(i.return_details||[]),returned_now:new ge(!1)})}getPaymentHistoryItemFormGroup(i){return this.fb.group({description:new ge(i.description),total:new ge(i.total),date_created:new ge(new Date(i.date_created)),added_by:new ge(i.added_by)})}getReturnItemsFormArray(i=[]){let r=this.fb.array([]);return i.forEach(s=>{let l=this.getReturnItemForm(s);r.push(l)}),r}getReturnItemForm(i){return this.fb.group({reason:new ge(i.reason),qty:new ge(i.qty),unit_price:new ge(i.unit_price),charge:new ge(i.charge),date_created:new ge(i.date_created||new Date),max_qty:new ge(i.max_qty),returnAmount:new ge(i.returnAmount)})}addRow(i=this.defaultItemValues){this.SaleRequestDetails.controls.items.push(this.getItemFormGroup(i))}addPaymentControlRow(){this.addPaymentRow({description:"",total:0,date_created:new Date,added_by:this.userService.loggedInUser.id})}addPaymentRow(i){this.SaleRequestDetails.controls.payment_history.push(this.getPaymentHistoryItemFormGroup(i))}addProductRow(){this.SaleRequestDetails.controls.items.push(this.getItemFormGroup())}calculateBalance(){if(this.loading)return;let i=this.SaleRequestDetails.getRawValue(),r=0;i.payment_history.forEach(s=>{r+=s.total*1}),this.SaleRequestDetails.get("amount_paid")?.setValue(r),this.SaleRequestDetails.controls.balance.setValue(this.SaleRequestDetails.get("total")?.value-r)}calculateTotal(){let r=this.SaleRequestDetails.get("items").getRawValue(),s=r.reduce((m,w)=>m+w.qty*w.unit_price*w.discount/100,0),l=r.reduce((m,w)=>m+w.unit_price*(100-w.discount)/100*w.qty,0),h=this.sumReturnAmount(r);this.SaleRequestDetails.patchValue({items_discount_total:s,item_cost:l-h}),this.calculateOverAllDiscountAndTotal()}sumReturnAmount(i){let r=0;return i.forEach(s=>{s.return_details.forEach(l=>{r+=l.returnAmount})}),r*-1}calculateOverAllDiscountAndTotal(){if(this.loading)return;let i=this.SaleRequestDetails.getRawValue(),r=i.item_cost*(i.overall_discount/100);this.SaleRequestDetails.controls.overall_discount_total.setValue(r),this.SaleRequestDetails.controls.total.setValue(i.item_cost+Number(i.shipment_charges||"0")+Number(i.additional_cost||"0")-r),this.calculateBalance()}removeProduct(i){this.SaleRequestDetails.get("items").removeAt(i),this.calculateTotal()}removePayments(i){this.SaleRequestDetails.get("payment_history").removeAt(i),this.calculateTotal()}returnProduct(i){let r=this.SaleRequestDetails.get("items"),s=r.at(i).get("return_details"),l=r.at(i).get("unit_price")?.value||0;r.at(i).get("returned_now")?.setValue(!0);let h=r.at(i).get("discount")?.value||0;s.controls&&(s.push(this.getReturnItemForm({unit_price:l-l*h/100})),this.returningItem=!0)}calculateCharge(i,r){if(this.loading)return;let l=this.SaleRequestDetails.get("items").at(i).get("return_details");if(l?.controls){let h=l?.controls,m=h[r].get("unit_price")?.value||0,w=h[r].get("charge")?.value||0,A=h[r].get("qty")?.value||0,V=(m-m*w/100)*A*-1;h[r].get("returnAmount")?.setValue(V),this.calculateTotal()}}onReturnPriceChange(i){this.loading}onQuantityChange(i){if(this.loading)return;let s=this.SaleRequestDetails.get("items").at(i);s&&(this.setItemTotal(s),this.calculateTotal())}onPriceChange(i){if(this.loading)return;let s=this.SaleRequestDetails.get("items").at(i);s&&(this.setItemTotal(s),this.calculateTotal())}onDiscountChange(i){if(this.loading)return;let s=this.SaleRequestDetails.get("items").at(i);s&&(this.setItemTotal(s),this.calculateTotal())}setItemTotal(i){if(i){let r=i.get("unit_price")?.value??0,s=i.get("discount")?.value??0,l=i.get("qty")?.value??0,h=r*(1-s/100)*l;i.patchValue({total:h})}}addItem(i){let r=i.value;this.projectItems.some(s=>!r||s.name===r.trim())||(this.projectItems=[...this.projectItems,{name:i.value}])}submitRequest(i=!1){return Oe(this,null,function*(){let r=yield this.appService.addSaleRequest({details:At(it({},this.SaleRequestDetails.value),{state:i?Di.Draft:Di.PaymentConfirmation}),products:this.SaleRequestDetails.controls.items.value});r&&this.notification.create("success","Sale request - "+r.sale_no,`Sale request ${i?"saved":"submitted"} successfly. Please check for invoice and update later`).onClose.subscribe(s=>{this.router.navigate(["task","sales"])})})}cancelPaymentDetails(){return Oe(this,null,function*(){this.modal.confirm({nzTitle:"Cancel TASK "+this.SaleRequestDetails.get("id")?.value,nzContent:"<h4> Are you sure cancel this SaleRequest order.</h4>",nzOkText:"Yes",nzOkType:"primary",nzOkDanger:!0,nzOnOk:()=>Oe(this,null,function*(){let i={id:this.previousSaleRequestDetails.id};console.log(i),(yield this.appService.updateSaleRequest({details:{id:this.previousSaleRequestDetails.id,state:Di.Cancelled},products:[]}))&&this.notification.create("success","SaleRequest Order - "+this.previousSaleRequestDetails.sale_no,"SaleRequest order invoice cancelled successfly.").onClose.subscribe(s=>{this.router.navigate(["task","sales"])})}),nzCancelText:"No",nzOnCancel:()=>console.log("Cancel")})})}confirmPaymentDetails(i=!1){return Oe(this,null,function*(){if(!i&&(!this.SaleRequestDetails.value.amount_paid||Number(this.SaleRequestDetails.value.amount_paid)!==Number(this.SaleRequestDetails.get("total")?.value))){this.notification.create("error","Balance exists",`Your payment have balance of PKR ${this.SaleRequestDetails.get("total")?.value-this.SaleRequestDetails.value.amount_paid}. Please clear it first.`);return}let r=this.appService.findObjectDifferences(this.previousSaleRequestDetails,this.SaleRequestDetails.getRawValue());console.log(r);let s=it({id:this.previousSaleRequestDetails.id},r);console.log(s),(yield this.appService.updateSaleRequest({details:At(it({},it({},Io.default.omit(s,"items"))),{state:i?s.state:Di.Invoiced}),products:r.items.map(h=>({id:h.id,return_details:h.return_details}))}))&&this.notification.create("success","SaleRequest Order - "+this.previousSaleRequestDetails.sale_no,"SaleRequest order invoice submitted successfly. Please proceed next for payment details").onClose.subscribe(h=>{this.router.navigate(["task","sales"])})})}confirmInvoiceDetails(){return Oe(this,null,function*(){let i=this.appService.findObjectDifferences(this.previousSaleRequestDetails,this.SaleRequestDetails.getRawValue());console.log(i);let r=it({id:this.previousSaleRequestDetails.id},i);if(Object.keys(i).length<=1){this.notification.create("error","Invoice Updates","Please update invoice details before confirmation.");return}(yield this.appService.updateSaleRequest({details:At(it({},it({},Io.default.omit(r,"items"))),{state:Di.PaymentConfirmation}),products:i.items.map(l=>Io.default.omit(l,"SaleRequest_id"))}))&&this.notification.create("success","SaleRequest Order - "+this.previousSaleRequestDetails.sale_no,"SaleRequest order invoice submitted successfly. Please proceed next for payment details").onClose.subscribe(l=>{this.router.navigate(["task","sales"])})})}printCard(){this.makePdf("print")}generatePDF(){this.makePdf("download")}makePdf(i){let r=this.SaleRequestDetails.getRawValue();this.pdfGeneratorService.invoice=At(it({},r),{type:"Sale",status:this.stateNames[r.state],invoiceDetailLabel:"Sale Details",personName:r.customer.name,address:r.customer.address||"",contactNo:r.customer.contact_no||"",terms:r.terms,email:r.customer.email||"",additionalDetails:r.description||"",created_by:this.created_by_users[0]}),this.pdfGeneratorService.generatePDF(i)}disableAndEnableSpecificControls(){let i=this.SaleRequestDetails.get("state");if(i&&i.value==this.SaleStates.Draft&&(this.SaleRequestDetails.controls.created_by.disable(),this.SaleRequestDetails.controls.date_created.disable()),i&&i.value!==this.SaleStates.Draft){let r=this.SaleRequestDetails.get("items");Object.keys(this.SaleRequestDetails.controls).forEach(s=>{let l=this.SaleRequestDetails.get(s);l&&(s!=="attachment"&&s!=="amount_paid"&&s!=="shipment_charges"&&s!=="additional_cost"&&i.value===this.SaleStates.PaymentConfirmation||i.value===this.SaleStates.Invoiced||i.value===this.SaleStates.Cancelled)&&l.disable()}),this.SaleRequestDetails.updateValueAndValidity(),console.log(this.SaleRequestDetails)}}getBase64(i,r){let s=new FileReader;s.addEventListener("load",()=>r(s.result.toString())),s.readAsDataURL(i)}transformToNodeStructure(i){let r=new Map;return i.forEach(s=>{if(r.has(s.project_name)){let l=r.get(s.project_name);(!l||!l.children)&&l&&(l.children=[]),l?.children&&l?.children.push({title:s.item_name,key:s,isLeaf:!0})}else{let l={title:s.project_name,key:`project-${s.project_name}`,children:[{title:s.item_name,key:s,isLeaf:!0}],isLeaf:!1};r.set(s.project_name,l)}}),Array.from(r.values())}handleChange(i){this.getBase64(i.file.originFileObj,r=>Oe(this,null,function*(){if(this.loading=!1,i.type==="error"){let s=yield this.imageCompress.getOrientation(i.file.originFileObj||new File([],""));this.imageCompress.compressFile(r,s,50,80,800,800).then(l=>{console.warn(`Compressed: ${l.substring(0,50)}... (${l.length} characters)`),console.warn("Size in bytes is now:",this.imageCompress.byteCount(l)),i.fileList?.forEach(h=>{h.uid==i.file.uid&&(h.name="image.png",h.status="done",h.url=l,h.message="",h.thumbUrl=l)}),Object.assign(this.fileList,i.fileList),this.SaleRequestDetails.patchValue({attachment:i.fileList?.map(h=>h.url)})})}}))}static{this.\u0275fac=function(r){return new(r||o)(Ie(kt),Ie(Ei),Ie(ln),Ie(un),Ie(wo),Ie(Ri),Ie(Co),Ie(vo),Ie(wr),Ie(zo))}}static{this.\u0275cmp=vt({type:o,selectors:[["app-sale-request"]],viewQuery:function(r,s){if(r&1&&Bn(wy,5),r&2){let l;Vn(l=Gn())&&(s.content=l.first)}},decls:153,vars:77,consts:[["content",""],["totalLabel",""],["totalAmount",""],["header",""],["balanceLabel",""],["balanceAmount",""],["modalContent",""],["renderTemplate",""],["customNoDataTemplate",""],["inputElement",""],[3,"nzSpinning","nzDelay"],[1,"container"],[1,"detailBar"],["nz-button","","nzType","primary","nz-tooltip","Generate PDF",3,"click"],["nz-icon","","nzType","download"],["nz-button","","nz-tooltip","Print request","nzType","primary",2,"margin-left","12px",3,"click"],["nz-icon","","nzType","printer"],["nz-button","","nz-tooltip","Close request","nzType","default","nzDanger","",2,"margin-left","12px",3,"click"],["nz-icon","","nzType","close"],["id","print-section",1,"SaleRequest-request"],["nzBordered","false",2,"width","100%"],["nz-form","",3,"ngSubmit","formGroup"],["nz-row","",3,"nzGutter"],["nz-col","",1,"gutter-row",3,"nzSpan"],["nzRequired","","nzFor","created_by"],["nzErrorTip","The input is not valid date!"],["id","created_by","formControlName","created_by","placeholder","created_by"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzRequired","","nzFor","date_created"],["nzFormat","MM-dd-yyyy","formControlName","date_created",1,"inputField"],["nzRequired","","nzFor","customer"],["id","customer","formControlName","customer","placeholder","Select user"],["nzRequired","","nzFor","invoice_date"],["nzFormat","MM-dd-yyyy","formControlName","invoice_date",1,"inputField"],["nzRequired","","nzFor","due_date"],["nzFormat","MM-dd-yyyy","formControlName","due_date",1,"inputField"],["nzRequired","","nzFor","title"],["nz-input","","formControlName","title",1,"inputField"],[2,"margin-bottom","12px",3,"nzPageSize","nzNoResult","nzBordered","nzShowPagination"],["width","5%",4,"ngIf"],["width","30%"],[4,"ngIf"],[3,"innerHTML"],["formArrayName","items"],[3,"formGroupName",4,"ngFor","ngForOf"],["nzGutter","4",2,"margin-bottom","12px"],[3,"nzSm","nzXs","nzMd","nzXl","nzXXl"],[2,"margin-top","12px !important",3,"nzActions"],["nzFor","shipment_charges"],["nz-input","","formControlName","shipment_charges",1,"inputField",3,"change"],["nzFor","additional_cost"],["nzErrorTip","The iinput is not valid date!"],["nz-input","","formControlName","additional_cost",1,"inputField",3,"change"],["nz-input","","formControlName","overall_discount",1,"inputField",3,"change"],["style","margin-top: 12px !important;",3,"nzTitle","nzActions",4,"ngIf"],[2,"width","100%","margin-bottom","12px"],["nzFor","description"],["nzErrorTip","",3,"nzSm","nzXs","nzMd","nzXl","nzXXl"],["nz-input","","formControlName","description","placeholder","textarea with clear icon"],["nzFor","terms"],["nz-input","","formControlName","terms","placeholder","textarea with clear icon"],["nzHasFeedback","","nzErrorTip","Please input Organization name",3,"nzSm","nzXs","nzMd","nzXl","nzXXl"],["nzAction","null","nzListType","picture-card",3,"nzFileListChange","nzChange","nzDisabled","nzFileList","nzShowUploadList","nzShowButton","nzPreview","nzDownload","nzBeforeUpload"],["nz-icon","","nzType","plus"],[2,"margin-top","8px"],[3,"nzOnCancel","nzVisible","nzContent","nzFooter"],[1,"flex","space-between"],["nz-button","","nzType","primary","nzDanger","","style","margin-bottom: 12px;float: right;",3,"click",4,"ngIf"],["nz-button","","nzType","primary","style","margin-bottom: 12px;float: right;",3,"disabled","click",4,"ngIf"],["nz-button","","nzType","primary","style","margin-bottom: 12px;margin-right: 12px;",3,"disabled","click",4,"ngIf"],[3,"nzValue","nzLabel"],["width","5%"],["nz-button","","nzType","primary","nzSize","small","nzShape","round",2,"float","left",3,"click"],["nz-icon","","nzTheme","outline","nzType","plus"],[3,"formGroupName"],["nz-input-number","","formControlName","name",3,"nzAutosize",4,"ngIf"],["formControlName","selected_item",3,"data","displayColumns","header","ngModelChange",4,"ngIf"],[3,"nzSuffix"],["nz-input-number","","formControlName","qty",3,"ngModelChange"],["nz-input-number","","formControlName","unit_price",3,"ngModelChange"],["nz-input-number","","formControlName","discount",3,"ngModelChange"],["nz-checkbox","","formControlName","isCustom",4,"ngIf"],["nz-checkbox","","formControlName","isCustom"],["nz-input-number","","formControlName","name",3,"nzAutosize"],["formControlName","selected_item",3,"ngModelChange","data","displayColumns","header"],[3,"click",4,"ngIf"],[3,"click"],["nz-button","","nzType","primary","nzSize","small","nzShape","round",2,"float","right"],["nz-icon","","nzTheme","outline","nzType","minus"],["nz-icon","","nzTheme","outline","nzType","rollback"],[2,"background","lightcoral"],["formArrayName","return_details"],["nz-input","","formControlName","reason"],["nz-input-number","","formControlName","qty",3,"change"],["nz-input-number","","formControlName","charge",3,"change"],[2,"margin-top","12px !important",3,"nzTitle","nzActions"],["class","payment_history","style",`margin-bottom: 12px;
                                        padding: 12px;
                                        background: white;`,4,"ngIf"],[1,"payment_history",2,"margin-bottom","12px","padding","12px","background","white"],["style","float: right","nz-button","","nzType","primary","nzSize","small","nzShape","round",3,"click",4,"ngIf"],["formArrayName","payment_history"],["nz-button","","nzType","primary","nzSize","small","nzShape","round",2,"float","right",3,"click"],["nz-input","","formControlName","description",2,"width","auto"],["nz-input-number","","formControlName","total",3,"change"],[3,"src","ngStyle"],["nz-button","","nzType","primary","nzDanger","",2,"margin-bottom","12px","float","right",3,"click"],["nz-button","","nzType","primary",2,"margin-bottom","12px","float","right",3,"click","disabled"],["nz-button","","nzType","primary",2,"margin-bottom","12px","margin-right","12px",3,"click","disabled"],["type","text","nz-input",""],[1,"add-item",3,"click"]],template:function(r,s){if(r&1){let l=Re();M(0,"nz-spin",10)(1,"div",11)(2,"div",12)(3,"span")(4,"h4"),ue(5),O()(),M(6,"span")(7,"button",13),ze("click",function(){return Se(l),Ce(s.generatePDF())}),ye(8,"span",14),O(),M(9,"button",15),ze("click",function(){return Se(l),Ce(s.printCard())}),ye(10,"span",16),O(),M(11,"button",17),ze("click",function(){return Se(l),Ce(s.close())}),ye(12,"span",18),O()()(),M(13,"div",19)(14,"nz-card",20)(15,"form",21),ze("ngSubmit",function(){return Se(l),Ce(s.submitForm())}),M(16,"div",null,0)(18,"div",22)(19,"div",23)(20,"nz-form-item")(21,"nz-form-label",24),ue(22,"Created By"),O(),M(23,"nz-form-control",25)(24,"nz-select",26),xe(25,Iy,1,2,"nz-option",27),O()()()(),M(26,"div",23)(27,"nz-form-item")(28,"nz-form-label",28),ue(29,"Date Created"),O(),M(30,"nz-form-control",25),ye(31,"nz-date-picker",29),O()()(),M(32,"div",23)(33,"nz-form-item")(34,"nz-form-label",30),ue(35,"Customer"),O(),M(36,"nz-form-control",25)(37,"nz-select",31),xe(38,ky,1,2,"nz-option",27),O()()()(),M(39,"div",23)(40,"nz-form-item")(41,"nz-form-label",32),ue(42,"Invoice Date"),O(),M(43,"nz-form-control",25),ye(44,"nz-date-picker",33),O()()(),M(45,"div",23)(46,"nz-form-item")(47,"nz-form-label",34),ue(48,"Due Date"),O(),M(49,"nz-form-control",25),ye(50,"nz-date-picker",35),O()()(),M(51,"div",23)(52,"nz-form-item")(53,"nz-form-label",36),ue(54,"Title"),O(),M(55,"nz-form-control",25),ye(56,"input",37),O()()()(),M(57,"nz-table",38)(58,"thead")(59,"tr"),xe(60,Ey,2,0,"th",39),M(61,"th",40),ue(62,"Item"),O(),M(63,"th"),ue(64,"Quantity"),O(),M(65,"th"),ue(66,"Unit Price "),O(),M(67,"th"),ue(68," Discount % "),O(),M(69,"th"),ue(70,"Total "),O(),xe(71,Ry,1,0,"th",41),O()(),M(72,"tfoot")(73,"tr"),xe(74,My,3,0,"td",39),ye(75,"td",40)(76,"td")(77,"td"),M(78,"td"),ye(79,"h5",42),nt(80,"currency"),O(),M(81,"td"),ye(82,"h5",42),nt(83,"currency"),O()()(),M(84,"tbody"),Ct(85,43),xe(86,qy,19,12,"ng-container",44),It(),O()(),M(87,"nz-row",45)(88,"nz-col",46)(89,"nz-card",47)(90,"nz-form-item")(91,"nz-form-label",48),ue(92,"Shipping Charges "),O(),M(93,"nz-form-control",25)(94,"input",49),ze("change",function(){return Se(l),Ce(s.calculateOverAllDiscountAndTotal())}),O()()(),M(95,"nz-form-item")(96,"nz-form-label",50),ue(97,"Additional Cost "),O(),M(98,"nz-form-control",51)(99,"input",52),ze("change",function(){return Se(l),Ce(s.calculateOverAllDiscountAndTotal())}),O()()(),M(100,"nz-form-item")(101,"nz-form-label",50),ue(102,"Discount % "),O(),M(103,"nz-form-control",25)(104,"input",53),ze("change",function(){return Se(l),Ce(s.calculateOverAllDiscountAndTotal())}),O()()(),ye(105,"div"),O()(),M(106,"nz-col",46),xe(107,Hy,2,6,"nz-card",54),O()(),xe(108,Xy,4,0,"ng-template",null,1,$e)(110,Ky,4,8,"ng-template",null,2,$e)(112,Yy,1,1,"ng-template",null,3,$e)(114,Zy,4,0,"ng-template",null,4,$e)(116,Qy,4,8,"ng-template",null,5,$e),M(118,"nz-card",55)(119,"nz-form-item")(120,"nz-form-label",56),ue(121,"Customer Description"),O(),M(122,"nz-form-control",57),ye(123,"textarea",58),O()(),M(124,"nz-form-item")(125,"nz-form-label",59),ue(126,"Terms & Conditions"),O(),M(127,"nz-form-control",57),ye(128,"textarea",60),O()(),M(129,"nz-form-item")(130,"nz-form-label",34),ue(131,"Attachments"),O(),M(132,"nz-form-control",61)(133,"nz-upload",62),ei("nzFileListChange",function(m){return Se(l),Jt(s.fileList,m)||(s.fileList=m),Ce(m)}),ze("nzChange",function(m){return Se(l),Ce(s.handleChange(m))}),M(134,"div"),ye(135,"span",63),M(136,"div",64),ue(137,"Upload"),O()()()()()()(),M(138,"nz-modal",65),ze("nzOnCancel",function(){return Se(l),Ce(s.previewVisible=!1)}),xe(139,Jy,1,3,"ng-template",null,6,$e),O(),M(141,"span",66)(142,"span"),xe(143,e1,2,0,"button",67),O(),M(144,"span"),xe(145,t1,2,1,"button",68)(146,i1,2,1,"button",68)(147,n1,2,1,"button",69)(148,r1,2,1,"button",69),O()()()()(),xe(149,s1,6,0,"ng-template",null,7,$e)(151,o1,0,0,"ng-template",null,8,$e),O()()}if(r&2){let l,h,m,w=We(109),A=We(111),V=We(140),ie=We(152);B("nzSpinning",s.isSpinning)("nzDelay",500),W(5),or(" SALE - ",((l=s.SaleRequestDetails.get("sale_no"))==null?null:l.value)||"New Quote"," / ",s.stateNames[(l=s.SaleRequestDetails.get("state"))==null?null:l.value]," "),W(10),B("formGroup",s.SaleRequestDetails),W(3),B("nzGutter",16),W(),B("nzSpan",12),W(6),B("ngForOf",s.created_by_users),W(),B("nzSpan",12),W(6),B("nzSpan",12),W(6),B("ngForOf",s.listOfData),W(),B("nzSpan",12),W(6),B("nzSpan",12),W(6),B("nzSpan",24),W(6),B("nzPageSize",1e3)("nzNoResult",ie)("nzBordered",!0)("nzShowPagination",!1),W(3),B("ngIf",s.SaleRequestDetails.controls.state.value==s.SaleStates.Draft),W(11),B("ngIf",s.SaleRequestDetails.controls.state.value==s.SaleStates.Draft||s.SaleRequestDetails.controls.state.value==s.SaleStates.Invoiced),W(3),B("ngIf",s.SaleRequestDetails.controls.state.value==s.SaleStates.Draft),W(5),B("innerHTML",dt(80,66,(h=s.SaleRequestDetails.get("items_discount_total"))==null?null:h.value,"PKR "),on),W(3),B("innerHTML",dt(83,69,(m=s.SaleRequestDetails.get("item_cost"))==null?null:m.value,"PKR "),on),W(4),B("ngForOf",s.SaleRequestDetails.controls.items.controls),W(2),B("nzSm",24)("nzXs",24)("nzMd",8)("nzXl",8)("nzXXl",8),W(),B("nzActions",pl(72,fu,w,A)),W(17),B("nzSm",24)("nzXs",24)("nzMd",16)("nzXl",16)("nzXXl",16),W(),B("ngIf",s.SaleRequestDetails.controls.state.value!=s.SaleStates.Draft),W(15),B("nzSm",24)("nzXs",24)("nzMd",24)("nzXl",24)("nzXXl",24),W(5),B("nzSm",24)("nzXs",24)("nzMd",24)("nzXl",24)("nzXXl",24),W(5),B("nzSm",24)("nzXs",24)("nzMd",24)("nzXl",24)("nzXXl",24),W(),B("nzDisabled",s.SaleRequestDetails.controls.attachment.disabled),Qt("nzFileList",s.fileList),B("nzShowUploadList",wt(75,Dy,!s.SaleRequestDetails.controls.attachment.disabled))("nzShowButton",!s.SaleRequestDetails.controls.attachment.disabled&&s.fileList.length<4)("nzPreview",s.handlePreview)("nzDownload",s.donwnloadFile)("nzBeforeUpload",s.beforeUpload),W(5),B("nzVisible",s.previewVisible)("nzContent",V)("nzFooter",null),W(5),B("ngIf",s.SaleRequestDetails.controls.state.value==s.SaleStates.PaymentConfirmation),W(2),B("ngIf",s.SaleRequestDetails.controls.state.value==s.SaleStates.Draft),W(),B("ngIf",s.SaleRequestDetails.controls.state.value==s.SaleStates.PaymentConfirmation),W(),B("ngIf",s.SaleRequestDetails.controls.state.value==s.SaleStates.Invoiced||s.SaleRequestDetails.controls.state.value==s.SaleStates.PaymentConfirmation),W(),B("ngIf",s.SaleRequestDetails.controls.state.value==s.SaleStates.Draft)}},dependencies:[pi,Gt,lo,gi,Wt,mi,fn,Vh,fi,xr,Ut,jt,br,_n,xn,vn,xi,pn,Nh,vr,mr,yo,bo,So,Cn,yn,bn,Dn,Sn,wn,yr,eu,_r,_i,vi,cn,dn,hn,Ah,Ph,ru,ar],styles:[".container[_ngcontent-%COMP%]{background:#f1e5ff;padding:5px}"]})}}return o})();var a1=()=>["./task"],l1=()=>({TASK:"new"}),c1=()=>({tracingId:2}),d1=()=>["/","task","list","task"],h1=o=>({TASK:o});function u1(o,a){if(o&1){let i=Re();M(0,"span",26),ze("click",function(){Se(i);let s=ce(2);return s.searchValue="",Ce(s.search())}),O()}}function p1(o,a){o&1&&ye(0,"span",25)}function f1(o,a){if(o&1&&xe(0,u1,1,0,"span",24)(1,p1,1,0,"span",25),o&2){let i=ce();so(i.searchValue?0:1)}}function m1(o,a){o&1&&ye(0,"span",25)}function g1(o,a){if(o&1&&ye(0,"nz-list-item-meta-avatar",39),o&2){let i=ce().$implicit,r=ce();B("nzSrc",r.apiUrl+"/images/"+i.filename)}}function _1(o,a){if(o&1&&(M(0,"div",40),ue(1),O()),o&2){let i=ce().$implicit,r=ce();W(),at("",r.getInitials(i.assignee_name)," ")}}function v1(o,a){if(o&1&&(M(0,"span",41),ue(1),nt(2,"currency"),O()),o&2){let i=ce().$implicit;W(),at(" ",dt(2,1,i.balance,"PKR ")," ")}}function x1(o,a){if(o&1){let i=Re();M(0,"tr",27)(1,"td")(2,"nz-list",28)(3,"nz-list-item",29),ze("click",function(){Se(i);let s=ce();return Ce(s.showSide=!0)}),M(4,"nz-list-item-meta"),xe(5,g1,1,1,"nz-list-item-meta-avatar",30)(6,_1,2,1,"ng-template",null,2,$e),M(8,"nz-list-item-meta-title")(9,"span",31)(10,"span"),ue(11),O()()(),M(12,"nz-list-item-meta-description")(13,"span",31)(14,"span"),ye(15,"nz-divider",32),M(16,"span",33),ue(17),nt(18,"date"),O()()()()()()()(),M(19,"td",34)(20,"span",35)(21,"span",36)(22,"span"),ue(23),nt(24,"currency"),O(),xe(25,v1,3,4,"span",37),O(),M(26,"button",38),ue(27),O()()()()}if(o&2){let i=a.$implicit,r=We(7),s=ce();W(3),B("routerLink",ut(18,d1))("queryParams",wt(19,h1,i.task_no)),W(2),B("ngIf",i.filename)("ngIfElse",r),W(6),or("",i.task_no," - ",i.title,""),W(6),at(" ",dt(18,12,i.date_created,"dd MMM yyyy"),""),W(6),Ot(i.state===s.states.InProgress?"":dt(24,15,i.total,"PKR ")),W(2),B("ngIf",i.state===s.states.InTesting&&i.balance),W(),B("className",i.state===s.states.Completed?"green-button":"default")("nzDanger",i.state===s.states.Completed),W(),at(" ",s.stateNames[i.state]," ")}}function y1(o,a){if(o&1&&(M(0,"nz-col",42),ye(1,"router-outlet"),O()),o&2){let i=ce();B("nzSpan",!i.isMobile()&&i.showSide?16:0)}}function b1(o,a){o&1&&(Ct(0),ye(1,"router-outlet"),It())}function S1(o,a){if(o&1){let i=Re();M(0,"div")(1,"nz-drawer",43),ze("nzOnClose",function(){Se(i);let s=ce();return Ce(s.showSide=!1)}),xe(2,b1,2,0,"ng-container",44),O()()}if(o&2){let i=ce();W(),B("nzVisible",i.showSide)}}var vu=(()=>{class o{constructor(i,r,s,l,h){this.appService=i,this.media=r,this.route=s,this.router=l,this.exportSheetService=h,this.apiUrl=pr.apiUrl,this.pendingInvoices=[],this.stateNames=qt,this.paymentConfirmations=[],this.states=ii,this.partialPayments=[],this.showSide=!1,this.searchVisible=!1,this.searchValue="",this.tabs=["Task Request","Task Returns","Sale Requests","Sale Return"],this.listOfDisplayData=[],this.total=1,this.loading=!0,this.pageSize=10,this.pageIndex=1,this.filterStates=Object.keys(qt).map(m=>({text:qt[m],value:m})),this.isMobile=this.appService.isMobile}loadTaskDataFromServer(i=1,r=1e3,s="id",l="asc",h=[]){this.loading=!0;let m=new lr().append("page",`${i}`).append("results",`${r}`).append("sortField",`${s}`).append("sortOrder",`${l}`);h.forEach(w=>{w.value.forEach(A=>{m=m.append(w.key,A)})}),this.getAndSetTaskOrders(m)}onTaskQueryParamsChange(i){console.log(i);let{pageSize:r,pageIndex:s,sort:l,filter:h}=i;if(this.sort&&this.appService.areArraysDifferent(this.sort,l)){this.sort=l,this.listOfDisplayData=this.appService.sortDataArray(this.listOfDisplayData,this.sort);return}this.sort=l;let m=l.find(V=>V.value!==null),w=m&&m.key||null,A=m&&m.value||null;this.loadTaskDataFromServer(s,r,w,A,h)}getInitials(i){return i?i.split(" ").map(s=>s[0]).join("").toUpperCase():""}export(){let i=this.listOfDisplayData;this.exportSheetService.exportDataToXLSX(i,"Task Request")}ngOnInit(){this.clientSubscription=this.appService.currentClient.subscribe(i=>{i&&i.id>0&&this.currentOrganizationId!=i.id&&(this.currentOrganizationId&&this.router.navigate(["/","task","list"],{queryParams:{TASK:null},queryParamsHandling:"merge"}),this.currentOrganizationId=i.id,this.showSide=!1,this.route.queryParams.subscribe(r=>Oe(this,null,function*(){r.TASK?this.showSide=!0:(this.showSide=!1,this.onTaskQueryParamsChange({pageIndex:0,pageSize:0,sort:[],filter:[]}))})))})}ngOnDestroy(){this.clientSubscription&&this.clientSubscription.unsubscribe()}ngAfterViewInit(){}getAndSetTaskOrders(i){return Oe(this,null,function*(){this.pendingInvoices=yield this.appService.retireveTaskByState(i),this.listOfDisplayData=[...this.pendingInvoices],this.loading=!1,this.total=this.pendingInvoices.length})}reset(){this.searchValue="",this.search()}search(){this.searchVisible=!1,this.searchValue?(this.listOfDisplayData=this.pendingInvoices.filter(i=>i.title&&i.title.toLowerCase().indexOf(this.searchValue.toLowerCase())>-1||i.project_name&&i.project_name.toLowerCase().indexOf(this.searchValue.toLowerCase())>-1),console.log(this.listOfDisplayData)):this.listOfDisplayData=this.pendingInvoices}static{this.\u0275fac=function(r){return new(r||o)(Ie(kt),Ie(fr),Ie(Ei),Ie(Ri),Ie(Dr))}}static{this.\u0275cmp=vt({type:o,selectors:[["app-listing"]],decls:32,vars:25,consts:[["inputClearTpl",""],["suffixIconSearch",""],["initialsTemplate",""],[2,"height","100%"],[2,"height","100%","overflow-y","auto",3,"nzSpan"],[1,"container"],[1,"section"],[1,"card-container"],[1,"flex","space-between",2,"margin-bottom","5px"],[2,"display","-webkit-box","width","100%"],[2,"margin-right","5px"],[3,"nzSuffix"],["type","text","placeholder","Search here","nz-input","",3,"ngModelChange","keyup","ngModel"],[3,"click","routerLink","queryParams","state"],["nz-button","","nzType","primary",3,"nzSize"],["nz-icon","","nzType","plus"],[2,"margin-left","10px",3,"click"],["nz-icon","","nzType","download"],[3,"nzQueryParams","nzShowPagination","nzPageSize","nzData","nzFrontPagination","nzLoading","nzTotal","nzPageIndex"],["nzColumnKey","id","nzCustomFilter","","nzWidth","80%",3,"nzSortFn"],["nzColumnKey","state",3,"nzFilters","nzFilterFn"],["class","selectedItem",4,"ngFor","ngForOf"],["class","sidebarright",3,"nzSpan",4,"ngIf"],[4,"ngIf"],["nz-icon","","nzTheme","fill","nzType","close-circle",1,"ant-input-clear-icon"],["nz-icon","","nzType","search"],["nz-icon","","nzTheme","fill","nzType","close-circle",1,"ant-input-clear-icon",3,"click"],[1,"selectedItem"],["nzItemLayout","horizontal"],[3,"click","routerLink","queryParams"],[3,"nzSrc",4,"ngIf","ngIfElse"],[1,"flex","space-between"],["nzType","vertical"],[1,"dateDisplay"],[2,"text-align","end"],[1,"listSecondSection"],[2,"display","inline-grid","width","max-content"],["class","remainingAmount",4,"ngIf"],["nz-button","","nzType","primary","nzShape","round",3,"className","nzDanger"],[3,"nzSrc"],[1,"avatar-initials","ant-list-item-meta-avatar"],[1,"remainingAmount"],[1,"sidebarright",3,"nzSpan"],["nzWidth","100%","nzPlacement","right",3,"nzOnClose","nzVisible","nzTitle","nzExtra"],[4,"nzDrawerContent"]],template:function(r,s){if(r&1){let l=Re();M(0,"nz-row",3)(1,"nz-col",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"div",8)(6,"span",9)(7,"h3",10),ue(8," Tasks "),O(),M(9,"nz-input-group",11)(10,"input",12),ei("ngModelChange",function(m){return Se(l),Jt(s.searchValue,m)||(s.searchValue=m),Ce(m)}),ze("keyup",function(){return Se(l),Ce(s.search())}),O()(),xe(11,f1,2,1,"ng-template",null,0,$e)(13,m1,1,0,"ng-template",null,1,$e),O(),M(15,"a",13),ze("click",function(){return Se(l),Ce(s.showSide=!0)}),M(16,"button",14),ye(17,"span",15),O()(),M(18,"a",16),ze("click",function(){return Se(l),Ce(s.export())}),M(19,"button",14),ye(20,"span",17),O()()(),M(21,"nz-table",18),ze("nzQueryParams",function(m){return Se(l),Ce(s.onTaskQueryParamsChange(m))}),M(22,"thead")(23,"tr")(24,"th",19),ue(25,"Task "),O(),M(26,"th",20),ue(27,"Status "),O()()(),M(28,"tbody"),xe(29,x1,28,21,"tr",21),O()()()()()(),xe(30,y1,2,1,"nz-col",22),O(),xe(31,S1,3,1,"div",23)}if(r&2){let l=We(12),h=We(14);W(),B("nzSpan",!s.isMobile()&&s.showSide?8:24),W(8),B("nzSuffix",h)("nzSuffix",l),W(),Qt("ngModel",s.searchValue),W(5),B("routerLink",ut(22,a1))("queryParams",ut(23,l1))("state",ut(24,c1)),W(),B("nzSize","small"),W(3),B("nzSize","small"),W(2),B("nzShowPagination",!1)("nzPageSize",1e3)("nzData",s.listOfDisplayData)("nzFrontPagination",!1)("nzLoading",s.loading)("nzTotal",s.total)("nzPageIndex",s.pageIndex),W(3),B("nzSortFn",!0),W(2),B("nzFilters",s.filterStates)("nzFilterFn",!0),W(3),B("ngForOf",s.listOfDisplayData),W(),B("ngIf",!s.isMobile()&&s.showSide),W(),B("ngIf",s.isMobile()&&s.showSide)}},dependencies:[cr,dr,pi,Gt,gi,Wt,mi,fi,Wh,gn,mn,Ut,jt,xi,pn,vr,$h,Yh,Kh,Uh,Hh,Xh,Cn,Sr,yn,bn,Dn,Sn,wn,_i,vi,gr,ar,an],styles:[".green-button[_ngcontent-%COMP%]{background-color:#72e272}.green-button[_ngcontent-%COMP%], .default[_ngcontent-%COMP%]{font-size:11px;text-wrap:nowrap;border:none}[_nghost-%COMP%]{display:block;height:100%}.card-container[_ngcontent-%COMP%]     p{margin:0}.card-container[_ngcontent-%COMP%]    >.ant-tabs-card .ant-tabs-content{margin-top:-16px;margin-bottom:16px}.card-container[_ngcontent-%COMP%]    >.ant-tabs-card .ant-tabs-content>.ant-tabs-tabpane{background:#ffffffb6;padding:16px}.card-container[_ngcontent-%COMP%]    >.ant-tabs-card>.ant-tabs-nav:before{display:none}.card-container[_ngcontent-%COMP%]    >.ant-tabs-card .ant-tabs-tab{border-color:transparent;background:transparent}.card-container[_ngcontent-%COMP%]    >.ant-tabs-card .ant-tabs-tab-active{background:#ffffffb6}"]})}}return o})();var C1=new sn("cdk-dir-doc",{providedIn:"root",factory:w1});function w1(){return sr(Xi)}var D1=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function z1(o){let a=o?.toLowerCase()||"";return a==="auto"&&typeof navigator<"u"&&navigator?.language?D1.test(navigator.language)?"rtl":"ltr":a==="rtl"?"rtl":"ltr"}var bl=(()=>{class o{constructor(i){if(this.value="ltr",this.change=new Pt,i){let r=i.body?i.body.dir:null,s=i.documentElement?i.documentElement.dir:null;this.value=z1(r||s||"ltr")}}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function(r){return new(r||o)(Tt(C1,8))}}static{this.\u0275prov=ki({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var k1=20,xu=(()=>{class o{constructor(i,r,s){this._ngZone=i,this._platform=r,this._scrolled=new ot,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){let r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=k1){return this._platform.isBrowser?new Wi(r=>{this._globalSubscription||this._addGlobalListener();let s=i>0?this._scrolled.pipe(sl(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):dh()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){let s=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe(fh(l=>!l||s.indexOf(l)>-1))}getAncestorScrollContainers(i){let r=[];return this.scrollContainers.forEach((s,l)=>{this._scrollableContainsElement(l,i)&&r.push(l)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,r){let s=Mi(r),l=i.getElementRef().nativeElement;do if(s==l)return!0;while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let i=this._getWindow();return uh(i.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(r){return new(r||o)(Tt(Fn),Tt(ml),Tt(Xi,8))}}static{this.\u0275prov=ki({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var E1=20,yu=(()=>{class o{constructor(i,r,s){this._platform=i,this._change=new ot,this._changeListener=l=>{this._change.next(l)},this._document=s,r.runOutsideAngular(()=>{if(i.isBrowser){let l=this._getWindow();l.addEventListener("resize",this._changeListener),l.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){let i=this.getViewportScrollPosition(),{width:r,height:s}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+s,right:i.left+r,height:s,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let i=this._document,r=this._getWindow(),s=i.documentElement,l=s.getBoundingClientRect(),h=-l.top||i.body.scrollTop||r.scrollY||s.scrollTop||0,m=-l.left||i.body.scrollLeft||r.scrollX||s.scrollLeft||0;return{top:h,left:m}}change(i=E1){return i>0?this._change.pipe(sl(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(r){return new(r||o)(Tt(ml),Tt(Fn),Tt(Xi,8))}}static{this.\u0275prov=ki({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var bu=(()=>{class o{static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275mod=Ui({type:o})}static{this.\u0275inj=ji({})}}return o})();function Su(o){return o.buttons===0||o.detail===0}function Cu(o){let a=o.touches&&o.touches[0]||o.changedTouches&&o.changedTouches[0];return!!a&&a.identifier===-1&&(a.radiusX==null||a.radiusX===1)&&(a.radiusY==null||a.radiusY===1)}function Vu(o){let a=o.cloneNode(!0),i=a.querySelectorAll("[id]"),r=o.nodeName.toLowerCase();a.removeAttribute("id");for(let s=0;s<i.length;s++)i[s].removeAttribute("id");return r==="canvas"?zu(o,a):(r==="input"||r==="select"||r==="textarea")&&Du(o,a),wu("canvas",o,a,zu),wu("input, textarea, select",o,a,Du),a}function wu(o,a,i,r){let s=a.querySelectorAll(o);if(s.length){let l=i.querySelectorAll(o);for(let h=0;h<s.length;h++)r(s[h],l[h])}}var M1=0;function Du(o,a){a.type!=="file"&&(a.value=o.value),a.type==="radio"&&a.name&&(a.name=`mat-clone-${a.name}-${M1++}`)}function zu(o,a){let i=a.getContext("2d");if(i)try{i.drawImage(o,0,0)}catch{}}function Il(o){let a=o.getBoundingClientRect();return{top:a.top,right:a.right,bottom:a.bottom,left:a.left,width:a.width,height:a.height,x:a.x,y:a.y}}function Cl(o,a,i){let{top:r,bottom:s,left:l,right:h}=o;return i>=r&&i<=s&&a>=l&&a<=h}function ls(o,a,i){o.top+=a,o.bottom=o.top+o.height,o.left+=i,o.right=o.left+o.width}function Tu(o,a,i,r){let{top:s,right:l,bottom:h,left:m,width:w,height:A}=o,V=w*a,ie=A*a;return r>s-ie&&r<h+ie&&i>m-V&&i<l+V}var Mo=class{constructor(a){this._document=a,this.positions=new Map}clear(){this.positions.clear()}cache(a){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),a.forEach(i=>{this.positions.set(i,{scrollPosition:{top:i.scrollTop,left:i.scrollLeft},clientRect:Il(i)})})}handleScroll(a){let i=Jr(a),r=this.positions.get(i);if(!r)return null;let s=r.scrollPosition,l,h;if(i===this._document){let A=this.getViewportScrollPosition();l=A.top,h=A.left}else l=i.scrollTop,h=i.scrollLeft;let m=s.top-l,w=s.left-h;return this.positions.forEach((A,V)=>{A.clientRect&&i!==V&&i.contains(V)&&ls(A.clientRect,m,w)}),s.top=l,s.left=h,{top:m,left:w}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function Gu(o,a){let i=o.rootNodes;if(i.length===1&&i[0].nodeType===a.ELEMENT_NODE)return i[0];let r=a.createElement("div");return i.forEach(s=>r.appendChild(s)),r}function kl(o,a,i){for(let r in a)if(a.hasOwnProperty(r)){let s=a[r];s?o.setProperty(r,s,i?.has(r)?"important":""):o.removeProperty(r)}return o}function Er(o,a){let i=a?"":"none";kl(o.style,{"touch-action":a?"":"none","-webkit-user-drag":a?"":"none","-webkit-tap-highlight-color":a?"":"transparent","user-select":i,"-ms-user-select":i,"-webkit-user-select":i,"-moz-user-select":i})}function Iu(o,a,i){kl(o.style,{position:a?"":"fixed",top:a?"":"0",opacity:a?"":"0",left:a?"":"-999em"},i)}function Ao(o,a){return a&&a!="none"?o+" "+a:o}function ku(o,a){o.style.width=`${a.width}px`,o.style.height=`${a.height}px`,o.style.transform=Po(a.left,a.top)}function Po(o,a){return`translate3d(${Math.round(o)}px, ${Math.round(a)}px, 0)`}function Eu(o){let a=o.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(o)*a}function A1(o){let a=getComputedStyle(o),i=Sl(a,"transition-property"),r=i.find(m=>m==="transform"||m==="all");if(!r)return 0;let s=i.indexOf(r),l=Sl(a,"transition-duration"),h=Sl(a,"transition-delay");return Eu(l[s])+Eu(h[s])}function Sl(o,a){return o.getPropertyValue(a).split(",").map(r=>r.trim())}var P1=new Set(["position"]),wl=class{get element(){return this._preview}constructor(a,i,r,s,l,h,m,w,A){this._document=a,this._rootElement=i,this._direction=r,this._initialDomRect=s,this._previewTemplate=l,this._previewClass=h,this._pickupPositionOnPage=m,this._initialTransform=w,this._zIndex=A}attach(a){this._preview=this._createPreview(),a.appendChild(this._preview),Ru(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(a){this._preview.style.transform=a}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(a){this._preview.classList.add(a)}getTransitionDuration(){return A1(this._preview)}addEventListener(a,i){this._preview.addEventListener(a,i)}removeEventListener(a,i){this._preview.removeEventListener(a,i)}_createPreview(){let a=this._previewTemplate,i=this._previewClass,r=a?a.template:null,s;if(r&&a){let l=a.matchSize?this._initialDomRect:null,h=a.viewContainer.createEmbeddedView(r,a.context);h.detectChanges(),s=Gu(h,this._document),this._previewEmbeddedView=h,a.matchSize?ku(s,l):s.style.transform=Po(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else s=Vu(this._rootElement),ku(s,this._initialDomRect),this._initialTransform&&(s.style.transform=this._initialTransform);return kl(s.style,{"pointer-events":"none",margin:Ru(s)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},P1),Er(s,!1),s.classList.add("cdk-drag-preview"),s.setAttribute("popover","manual"),s.setAttribute("dir",this._direction),i&&(Array.isArray(i)?i.forEach(l=>s.classList.add(l)):s.classList.add(i)),s}};function Ru(o){return"showPopover"in o}var Mu=Qr({passive:!0}),ko=Qr({passive:!1}),Au=Qr({passive:!1,capture:!0}),O1=800,Pu=new Set(["position"]),Dl=class{get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(a){a!==this._disabled&&(this._disabled=a,this._toggleNativeDragInteractions(),this._handles.forEach(i=>Er(i,a)))}constructor(a,i,r,s,l,h){this._config=i,this._document=r,this._ngZone=s,this._viewportRuler=l,this._dragDropRegistry=h,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=cl(!1),this._moveEvents=new ot,this._pointerMoveSubscription=Nn.EMPTY,this._pointerUpSubscription=Nn.EMPTY,this._scrollSubscription=Nn.EMPTY,this._resizeSubscription=Nn.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this.scale=1,this._disabled=!1,this.beforeStarted=new ot,this.started=new ot,this.released=new ot,this.ended=new ot,this.entered=new ot,this.exited=new ot,this.dropped=new ot,this.moved=this._moveEvents,this._pointerDown=m=>{if(this.beforeStarted.next(),this._handles.length){let w=this._getTargetHandle(m);w&&!this._disabledHandles.has(w)&&!this.disabled&&this._initializeDragSequence(w,m)}else this.disabled||this._initializeDragSequence(this._rootElement,m)},this._pointerMove=m=>{let w=this._getPointerPositionOnPage(m);if(!this._hasStartedDragging()){let V=Math.abs(w.x-this._pickupPositionOnPage.x),ie=Math.abs(w.y-this._pickupPositionOnPage.y);if(V+ie>=this._config.dragStartThreshold){let $=Date.now()>=this._dragStartTime+this._getDragStartDelay(m),K=this._dropContainer;if(!$){this._endDragSequence(m);return}(!K||!K.isDragging()&&!K.isReceiving())&&(m.cancelable&&m.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(m)))}return}m.cancelable&&m.preventDefault();let A=this._getConstrainedPointerPosition(w);if(this._hasMoved=!0,this._lastKnownPointerPosition=w,this._updatePointerDirectionDelta(A),this._dropContainer)this._updateActiveDropContainer(A,w);else{let V=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,ie=this._activeTransform;ie.x=A.x-V.x+this._passiveTransform.x,ie.y=A.y-V.y+this._passiveTransform.y,this._applyRootElementTransform(ie.x,ie.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:A,event:m,distance:this._getDragDistance(A),delta:this._pointerDirectionDelta})})},this._pointerUp=m=>{this._endDragSequence(m)},this._nativeDragStart=m=>{if(this._handles.length){let w=this._getTargetHandle(m);w&&!this._disabledHandles.has(w)&&!this.disabled&&m.preventDefault()}else this.disabled||m.preventDefault()},this.withRootElement(a).withParent(i.parentDragRef||null),this._parentPositions=new Mo(r),h.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(a){this._handles=a.map(r=>Mi(r)),this._handles.forEach(r=>Er(r,this.disabled)),this._toggleNativeDragInteractions();let i=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&i.add(r)}),this._disabledHandles=i,this}withPreviewTemplate(a){return this._previewTemplate=a,this}withPlaceholderTemplate(a){return this._placeholderTemplate=a,this}withRootElement(a){let i=Mi(a);return i!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{i.addEventListener("mousedown",this._pointerDown,ko),i.addEventListener("touchstart",this._pointerDown,Mu),i.addEventListener("dragstart",this._nativeDragStart,ko)}),this._initialTransform=void 0,this._rootElement=i),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(a){return this._boundaryElement=a?Mi(a):null,this._resizeSubscription.unsubscribe(),a&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(a){return this._parentDragRef=a,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(a){!this._disabledHandles.has(a)&&this._handles.indexOf(a)>-1&&(this._disabledHandles.add(a),Er(a,!0))}enableHandle(a){this._disabledHandles.has(a)&&(this._disabledHandles.delete(a),Er(a,this.disabled))}withDirection(a){return this._direction=a,this}_withDropContainer(a){this._dropContainer=a}getFreeDragPosition(){let a=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:a.x,y:a.y}}setFreeDragPosition(a){return this._activeTransform={x:0,y:0},this._passiveTransform.x=a.x,this._passiveTransform.y=a.y,this._dropContainer||this._applyRootElementTransform(a.x,a.y),this}withPreviewContainer(a){return this._previewContainer=a,this}_sortFromLastPointerPosition(){let a=this._lastKnownPointerPosition;a&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(a),a)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._getShadowRoot()?.removeEventListener("selectstart",Lu,Au)}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(a){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:a}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(a),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let i=this._getPointerPositionOnPage(a);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(i),dropPoint:i,event:a})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(a){as(a)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let i=this._getShadowRoot(),r=this._dropContainer;if(i&&this._ngZone.runOutsideAngular(()=>{i.addEventListener("selectstart",Lu,Au)}),r){let s=this._rootElement,l=s.parentNode,h=this._placeholder=this._createPlaceholderElement(),m=this._anchor=this._anchor||this._document.createComment("");l.insertBefore(m,s),this._initialTransform=s.style.transform||"",this._preview=new wl(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3),this._preview.attach(this._getPreviewInsertionPoint(l,i)),Iu(s,!1,Pu),this._document.body.appendChild(l.replaceChild(h,s)),this.started.next({source:this,event:a}),r.start(),this._initialContainer=r,this._initialIndex=r.getItemIndex(this)}else this.started.next({source:this,event:a}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(r?r.getScrollableParents():[])}_initializeDragSequence(a,i){this._parentDragRef&&i.stopPropagation();let r=this.isDragging(),s=as(i),l=!s&&i.button!==0,h=this._rootElement,m=Jr(i),w=!s&&this._lastTouchEventTime&&this._lastTouchEventTime+O1>Date.now(),A=s?Cu(i):Su(i);if(m&&m.draggable&&i.type==="mousedown"&&i.preventDefault(),r||l||w||A)return;if(this._handles.length){let Z=h.style;this._rootElementTapHighlight=Z.webkitTapHighlightColor||"",Z.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(Z=>this._updateOnScroll(Z)),this._boundaryElement&&(this._boundaryRect=Il(this._boundaryElement));let V=this._previewTemplate;this._pickupPositionInElement=V&&V.template&&!V.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,a,i);let ie=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(i);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:ie.x,y:ie.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,i)}_cleanupDragArtifacts(a){Iu(this._rootElement,!0,Pu),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let i=this._dropContainer,r=i.getItemIndex(this),s=this._getPointerPositionOnPage(a),l=this._getDragDistance(s),h=i._isOverContainer(s.x,s.y);this.ended.next({source:this,distance:l,dropPoint:s,event:a}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:i,previousContainer:this._initialContainer,isPointerOverContainer:h,distance:l,dropPoint:s,event:a}),i.drop(this,r,this._initialIndex,this._initialContainer,h,l,s,a),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:a,y:i},{x:r,y:s}){let l=this._initialContainer._getSiblingContainerFromPosition(this,a,i);!l&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(a,i)&&(l=this._initialContainer),l&&l!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=l,this._dropContainer.enter(this,a,i,l===this._initialContainer&&l.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:l,currentIndex:l.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,s),this._dropContainer._sortItem(this,a,i,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(a,i):this._applyPreviewTransform(a-this._pickupPositionInElement.x,i-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let a=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(a.left,a.top);let i=this._preview.getTransitionDuration();return i===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{let s=h=>{(!h||this._preview&&Jr(h)===this._preview.element&&h.propertyName==="transform")&&(this._preview?.removeEventListener("transitionend",s),r(),clearTimeout(l))},l=setTimeout(s,i*1.5);this._preview.addEventListener("transitionend",s)}))}_createPlaceholderElement(){let a=this._placeholderTemplate,i=a?a.template:null,r;return i?(this._placeholderRef=a.viewContainer.createEmbeddedView(i,a.context),this._placeholderRef.detectChanges(),r=Gu(this._placeholderRef,this._document)):r=Vu(this._rootElement),r.style.pointerEvents="none",r.classList.add("cdk-drag-placeholder"),r}_getPointerPositionInElement(a,i,r){let s=i===this._rootElement?null:i,l=s?s.getBoundingClientRect():a,h=as(r)?r.targetTouches[0]:r,m=this._getViewportScrollPosition(),w=h.pageX-l.left-m.left,A=h.pageY-l.top-m.top;return{x:l.left-a.left+w,y:l.top-a.top+A}}_getPointerPositionOnPage(a){let i=this._getViewportScrollPosition(),r=as(a)?a.touches[0]||a.changedTouches[0]||{pageX:0,pageY:0}:a,s=r.pageX-i.left,l=r.pageY-i.top;if(this._ownerSVGElement){let h=this._ownerSVGElement.getScreenCTM();if(h){let m=this._ownerSVGElement.createSVGPoint();return m.x=s,m.y=l,m.matrixTransform(h.inverse())}}return{x:s,y:l}}_getConstrainedPointerPosition(a){let i=this._dropContainer?this._dropContainer.lockAxis:null,{x:r,y:s}=this.constrainPosition?this.constrainPosition(a,this,this._initialDomRect,this._pickupPositionInElement):a;if(this.lockAxis==="x"||i==="x"?s=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||i==="y")&&(r=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:l,y:h}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,m=this._boundaryRect,{width:w,height:A}=this._getPreviewRect(),V=m.top+h,ie=m.bottom-(A-h),Z=m.left+l,$=m.right-(w-l);r=Ou(r,Z,$),s=Ou(s,V,ie)}return{x:r,y:s}}_updatePointerDirectionDelta(a){let{x:i,y:r}=a,s=this._pointerDirectionDelta,l=this._pointerPositionAtLastDirectionChange,h=Math.abs(i-l.x),m=Math.abs(r-l.y);return h>this._config.pointerDirectionChangeThreshold&&(s.x=i>l.x?1:-1,l.x=i),m>this._config.pointerDirectionChangeThreshold&&(s.y=r>l.y?1:-1,l.y=r),s}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let a=this._handles.length>0||!this.isDragging();a!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=a,Er(this._rootElement,a))}_removeRootElementListeners(a){a.removeEventListener("mousedown",this._pointerDown,ko),a.removeEventListener("touchstart",this._pointerDown,Mu),a.removeEventListener("dragstart",this._nativeDragStart,ko)}_applyRootElementTransform(a,i){let r=1/this.scale,s=Po(a*r,i*r),l=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=l.transform&&l.transform!="none"?l.transform:""),l.transform=Ao(s,this._initialTransform)}_applyPreviewTransform(a,i){let r=this._previewTemplate?.template?void 0:this._initialTransform,s=Po(a,i);this._preview.setTransform(Ao(s,r))}_getDragDistance(a){let i=this._pickupPositionOnPage;return i?{x:a.x-i.x,y:a.y-i.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:a,y:i}=this._passiveTransform;if(a===0&&i===0||this.isDragging()||!this._boundaryElement)return;let r=this._rootElement.getBoundingClientRect(),s=this._boundaryElement.getBoundingClientRect();if(s.width===0&&s.height===0||r.width===0&&r.height===0)return;let l=s.left-r.left,h=r.right-s.right,m=s.top-r.top,w=r.bottom-s.bottom;s.width>r.width?(l>0&&(a+=l),h>0&&(a-=h)):a=0,s.height>r.height?(m>0&&(i+=m),w>0&&(i-=w)):i=0,(a!==this._passiveTransform.x||i!==this._passiveTransform.y)&&this.setFreeDragPosition({y:i,x:a})}_getDragStartDelay(a){let i=this.dragStartDelay;return typeof i=="number"?i:as(a)?i.touch:i?i.mouse:0}_updateOnScroll(a){let i=this._parentPositions.handleScroll(a);if(i){let r=Jr(a);this._boundaryRect&&r!==this._boundaryElement&&r.contains(this._boundaryElement)&&ls(this._boundaryRect,i.top,i.left),this._pickupPositionOnPage.x+=i.left,this._pickupPositionOnPage.y+=i.top,this._dropContainer||(this._activeTransform.x-=i.left,this._activeTransform.y-=i.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=_o(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(a,i){let r=this._previewContainer||"global";if(r==="parent")return a;if(r==="global"){let s=this._document;return i||s.fullscreenElement||s.webkitFullscreenElement||s.mozFullScreenElement||s.msFullscreenElement||s.body}return Mi(r)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_getTargetHandle(a){return this._handles.find(i=>a.target&&(a.target===i||i.contains(a.target)))}};function Ou(o,a,i){return Math.max(a,Math.min(i,o))}function as(o){return o.type[0]==="t"}function Lu(o){o.preventDefault()}function Rr(o,a,i){let r=Oo(a,o.length-1),s=Oo(i,o.length-1);if(r===s)return;let l=o[r],h=s<r?-1:1;for(let m=r;m!==s;m+=h)o[m]=o[m+h];o[s]=l}function No(o,a,i,r){let s=Oo(i,o.length-1),l=Oo(r,a.length);o.length&&a.splice(l,0,o.splice(s,1)[0])}function Oo(o,a){return Math.max(0,Math.min(a,o))}var Lo=class{constructor(a){this._dragDropRegistry=a,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(a){this.withItems(a)}sort(a,i,r,s){let l=this._itemPositions,h=this._getItemIndexFromPointerPosition(a,i,r,s);if(h===-1&&l.length>0)return null;let m=this.orientation==="horizontal",w=l.findIndex(N=>N.drag===a),A=l[h],V=l[w].clientRect,ie=A.clientRect,Z=w>h?1:-1,$=this._getItemOffsetPx(V,ie,Z),K=this._getSiblingOffsetPx(w,l,Z),F=l.slice();return Rr(l,w,h),l.forEach((N,E)=>{if(F[E]===N)return;let L=N.drag===a,Q=L?$:K,R=L?a.getPlaceholderElement():N.drag.getRootElement();N.offset+=Q;let G=Math.round(N.offset*(1/N.drag.scale));m?(R.style.transform=Ao(`translate3d(${G}px, 0, 0)`,N.initialTransform),ls(N.clientRect,0,Q)):(R.style.transform=Ao(`translate3d(0, ${G}px, 0)`,N.initialTransform),ls(N.clientRect,Q,0))}),this._previousSwap.overlaps=Cl(ie,i,r),this._previousSwap.drag=A.drag,this._previousSwap.delta=m?s.x:s.y,{previousIndex:w,currentIndex:h}}enter(a,i,r,s){let l=s==null||s<0?this._getItemIndexFromPointerPosition(a,i,r):s,h=this._activeDraggables,m=h.indexOf(a),w=a.getPlaceholderElement(),A=h[l];if(A===a&&(A=h[l+1]),!A&&(l==null||l===-1||l<h.length-1)&&this._shouldEnterAsFirstChild(i,r)&&(A=h[0]),m>-1&&h.splice(m,1),A&&!this._dragDropRegistry.isDragging(A)){let V=A.getRootElement();V.parentElement.insertBefore(w,V),h.splice(l,0,a)}else this._element.appendChild(w),h.push(a);w.style.transform="",this._cacheItemPositions()}withItems(a){this._activeDraggables=a.slice(),this._cacheItemPositions()}withSortPredicate(a){this._sortPredicate=a}reset(){this._activeDraggables?.forEach(a=>{let i=a.getRootElement();if(i){let r=this._itemPositions.find(s=>s.drag===a)?.initialTransform;i.style.transform=r||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(a){return(this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions).findIndex(r=>r.drag===a)}updateOnScroll(a,i){this._itemPositions.forEach(({clientRect:r})=>{ls(r,a,i)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()})}withElementContainer(a){this._element=a}_cacheItemPositions(){let a=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(i=>{let r=i.getVisibleElement();return{drag:i,offset:0,initialTransform:r.style.transform||"",clientRect:Il(r)}}).sort((i,r)=>a?i.clientRect.left-r.clientRect.left:i.clientRect.top-r.clientRect.top)}_getItemOffsetPx(a,i,r){let s=this.orientation==="horizontal",l=s?i.left-a.left:i.top-a.top;return r===-1&&(l+=s?i.width-a.width:i.height-a.height),l}_getSiblingOffsetPx(a,i,r){let s=this.orientation==="horizontal",l=i[a].clientRect,h=i[a+r*-1],m=l[s?"width":"height"]*r;if(h){let w=s?"left":"top",A=s?"right":"bottom";r===-1?m-=h.clientRect[w]-l[A]:m+=l[w]-h.clientRect[A]}return m}_shouldEnterAsFirstChild(a,i){if(!this._activeDraggables.length)return!1;let r=this._itemPositions,s=this.orientation==="horizontal";if(r[0].drag!==this._activeDraggables[0]){let h=r[r.length-1].clientRect;return s?a>=h.right:i>=h.bottom}else{let h=r[0].clientRect;return s?a<=h.left:i<=h.top}}_getItemIndexFromPointerPosition(a,i,r,s){let l=this.orientation==="horizontal",h=this._itemPositions.findIndex(({drag:m,clientRect:w})=>{if(m===a)return!1;if(s){let A=l?s.x:s.y;if(m===this._previousSwap.drag&&this._previousSwap.overlaps&&A===this._previousSwap.delta)return!1}return l?i>=Math.floor(w.left)&&i<Math.floor(w.right):r>=Math.floor(w.top)&&r<Math.floor(w.bottom)});return h===-1||!this._sortPredicate(h,a)?-1:h}},zl=class{constructor(a,i){this._document=a,this._dragDropRegistry=i,this._previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1},this._relatedNodes=[]}start(a){let i=this._element.childNodes;this._relatedNodes=[];for(let r=0;r<i.length;r++){let s=i[r];this._relatedNodes.push([s,s.nextSibling])}this.withItems(a)}sort(a,i,r,s){let l=this._getItemIndexFromPointerPosition(a,i,r),h=this._previousSwap;if(l===-1||this._activeItems[l]===a)return null;let m=this._activeItems[l];if(h.drag===m&&h.overlaps&&h.deltaX===s.x&&h.deltaY===s.y)return null;let w=this.getItemIndex(a),A=a.getPlaceholderElement(),V=m.getRootElement();l>w?V.after(A):V.before(A),Rr(this._activeItems,w,l);let ie=this._getRootNode().elementFromPoint(i,r);return h.deltaX=s.x,h.deltaY=s.y,h.drag=m,h.overlaps=V===ie||V.contains(ie),{previousIndex:w,currentIndex:l}}enter(a,i,r,s){let l=s==null||s<0?this._getItemIndexFromPointerPosition(a,i,r):s;l===-1&&(l=this._getClosestItemIndexToPointer(a,i,r));let h=this._activeItems[l],m=this._activeItems.indexOf(a);m>-1&&this._activeItems.splice(m,1),h&&!this._dragDropRegistry.isDragging(h)?(this._activeItems.splice(l,0,a),h.getRootElement().before(a.getPlaceholderElement())):(this._activeItems.push(a),this._element.appendChild(a.getPlaceholderElement()))}withItems(a){this._activeItems=a.slice()}withSortPredicate(a){this._sortPredicate=a}reset(){let a=this._element,i=this._previousSwap;for(let r=this._relatedNodes.length-1;r>-1;r--){let[s,l]=this._relatedNodes[r];s.parentNode===a&&s.nextSibling!==l&&(l===null?a.appendChild(s):l.parentNode===a&&a.insertBefore(s,l))}this._relatedNodes=[],this._activeItems=[],i.drag=null,i.deltaX=i.deltaY=0,i.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(a){return this._activeItems.indexOf(a)}updateOnScroll(){this._activeItems.forEach(a=>{this._dragDropRegistry.isDragging(a)&&a._sortFromLastPointerPosition()})}withElementContainer(a){a!==this._element&&(this._element=a,this._rootNode=void 0)}_getItemIndexFromPointerPosition(a,i,r){let s=this._getRootNode().elementFromPoint(Math.floor(i),Math.floor(r)),l=s?this._activeItems.findIndex(h=>{let m=h.getRootElement();return s===m||m.contains(s)}):-1;return l===-1||!this._sortPredicate(l,a)?-1:l}_getRootNode(){return this._rootNode||(this._rootNode=_o(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(a,i,r){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let s=1/0,l=-1;for(let h=0;h<this._activeItems.length;h++){let m=this._activeItems[h];if(m!==a){let{x:w,y:A}=m.getRootElement().getBoundingClientRect(),V=Math.hypot(i-w,r-A);V<s&&(s=V,l=h)}}return l}},Nu=.05,qu=.05,yi=function(o){return o[o.NONE=0]="NONE",o[o.UP=1]="UP",o[o.DOWN=2]="DOWN",o}(yi||{}),Lt=function(o){return o[o.NONE=0]="NONE",o[o.LEFT=1]="LEFT",o[o.RIGHT=2]="RIGHT",o}(Lt||{}),Tl=class{constructor(a,i,r,s,l){this._dragDropRegistry=i,this._ngZone=s,this._viewportRuler=l,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new ot,this.entered=new ot,this.exited=new ot,this.dropped=new ot,this.sorted=new ot,this.receivingStarted=new ot,this.receivingStopped=new ot,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=Nn.EMPTY,this._verticalScrollDirection=yi.NONE,this._horizontalScrollDirection=Lt.NONE,this._stopScrollTimers=new ot,this._cachedShadowRoot=null,this._scrollableElements=[],this._direction="ltr",this._startScrollInterval=()=>{this._stopScrolling(),ph(0,rl).pipe(rr(this._stopScrollTimers)).subscribe(()=>{let m=this._scrollNode,w=this.autoScrollStep;this._verticalScrollDirection===yi.UP?m.scrollBy(0,-w):this._verticalScrollDirection===yi.DOWN&&m.scrollBy(0,w),this._horizontalScrollDirection===Lt.LEFT?m.scrollBy(-w,0):this._horizontalScrollDirection===Lt.RIGHT&&m.scrollBy(w,0)})};let h=this.element=Mi(a);this._document=r,this.withOrientation("vertical").withElementContainer(h),i.registerDropContainer(this),this._parentPositions=new Mo(r)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(a,i,r,s){this._draggingStarted(),s==null&&this.sortingDisabled&&(s=this._draggables.indexOf(a)),this._sortStrategy.enter(a,i,r,s),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:a,container:this,currentIndex:this.getItemIndex(a)})}exit(a){this._reset(),this.exited.next({item:a,container:this})}drop(a,i,r,s,l,h,m,w={}){this._reset(),this.dropped.next({item:a,currentIndex:i,previousIndex:r,container:this,previousContainer:s,isPointerOverContainer:l,distance:h,dropPoint:m,event:w})}withItems(a){let i=this._draggables;return this._draggables=a,a.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(i.filter(s=>s.isDragging()).every(s=>a.indexOf(s)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(a){return this._direction=a,this._sortStrategy instanceof Lo&&(this._sortStrategy.direction=a),this}connectedTo(a){return this._siblings=a.slice(),this}withOrientation(a){if(a==="mixed")this._sortStrategy=new zl(this._document,this._dragDropRegistry);else{let i=new Lo(this._dragDropRegistry);i.direction=this._direction,i.orientation=a,this._sortStrategy=i}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((i,r)=>this.sortPredicate(i,r,this)),this}withScrollableParents(a){let i=this._container;return this._scrollableElements=a.indexOf(i)===-1?[i,...a]:a.slice(),this}withElementContainer(a){if(a===this._container)return this;let i=Mi(this.element),r=this._scrollableElements.indexOf(this._container),s=this._scrollableElements.indexOf(a);return r>-1&&this._scrollableElements.splice(r,1),s>-1&&this._scrollableElements.splice(s,1),this._sortStrategy&&this._sortStrategy.withElementContainer(a),this._cachedShadowRoot=null,this._scrollableElements.unshift(a),this._container=a,this}getScrollableParents(){return this._scrollableElements}getItemIndex(a){return this._isDragging?this._sortStrategy.getItemIndex(a):this._draggables.indexOf(a)}isReceiving(){return this._activeSiblings.size>0}_sortItem(a,i,r,s){if(this.sortingDisabled||!this._domRect||!Tu(this._domRect,Nu,i,r))return;let l=this._sortStrategy.sort(a,i,r,s);l&&this.sorted.next({previousIndex:l.previousIndex,currentIndex:l.currentIndex,container:this,item:a})}_startScrollingIfNecessary(a,i){if(this.autoScrollDisabled)return;let r,s=yi.NONE,l=Lt.NONE;if(this._parentPositions.positions.forEach((h,m)=>{m===this._document||!h.clientRect||r||Tu(h.clientRect,Nu,a,i)&&([s,l]=L1(m,h.clientRect,this._direction,a,i),(s||l)&&(r=m))}),!s&&!l){let{width:h,height:m}=this._viewportRuler.getViewportSize(),w={width:h,height:m,top:0,right:h,bottom:m,left:0};s=Wu(w,i),l=ju(w,a),r=window}r&&(s!==this._verticalScrollDirection||l!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=s,this._horizontalScrollDirection=l,this._scrollNode=r,(s||l)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let a=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=a.msScrollSnapType||a.scrollSnapType||"",a.scrollSnapType=a.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let a=this._container.style;a.scrollSnapType=a.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(i=>i._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(a,i){return this._domRect!=null&&Cl(this._domRect,a,i)}_getSiblingContainerFromPosition(a,i,r){return this._siblings.find(s=>s._canReceive(a,i,r))}_canReceive(a,i,r){if(!this._domRect||!Cl(this._domRect,i,r)||!this.enterPredicate(a,this))return!1;let s=this._getShadowRoot().elementFromPoint(i,r);return s?s===this._container||this._container.contains(s):!1}_startReceiving(a,i){let r=this._activeSiblings;!r.has(a)&&i.every(s=>this.enterPredicate(s,this)||this._draggables.indexOf(s)>-1)&&(r.add(a),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:a,receiver:this,items:i}))}_stopReceiving(a){this._activeSiblings.delete(a),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:a,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(a=>{if(this.isDragging()){let i=this._parentPositions.handleScroll(a);i&&this._sortStrategy.updateOnScroll(i.top,i.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let a=_o(this._container);this._cachedShadowRoot=a||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let a=this._sortStrategy.getActiveItemsSnapshot().filter(i=>i.isDragging());this._siblings.forEach(i=>i._startReceiving(this,a))}};function Wu(o,a){let{top:i,bottom:r,height:s}=o,l=s*qu;return a>=i-l&&a<=i+l?yi.UP:a>=r-l&&a<=r+l?yi.DOWN:yi.NONE}function ju(o,a){let{left:i,right:r,width:s}=o,l=s*qu;return a>=i-l&&a<=i+l?Lt.LEFT:a>=r-l&&a<=r+l?Lt.RIGHT:Lt.NONE}function L1(o,a,i,r,s){let l=Wu(a,s),h=ju(a,r),m=yi.NONE,w=Lt.NONE;if(l){let A=o.scrollTop;l===yi.UP?A>0&&(m=yi.UP):o.scrollHeight-A>o.clientHeight&&(m=yi.DOWN)}if(h){let A=o.scrollLeft;i==="rtl"?h===Lt.RIGHT?A<0&&(w=Lt.RIGHT):o.scrollWidth+A>o.clientWidth&&(w=Lt.LEFT):h===Lt.LEFT?A>0&&(w=Lt.LEFT):o.scrollWidth-A>o.clientWidth&&(w=Lt.RIGHT)}return[m,w]}var Eo=Qr({passive:!1,capture:!0}),Ro=new Set,N1=(()=>{class o{static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275cmp=vt({type:o,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],standalone:!0,features:[ul],decls:0,vars:0,template:function(r,s){},styles:["@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}"],encapsulation:2,changeDetection:0})}}return o})(),F1=(()=>{class o{constructor(i,r){this._ngZone=i,this._appRef=sr(yh),this._environmentInjector=sr(_h),this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=cl([]),this._globalListeners=new Map,this._draggingPredicate=s=>s.isDragging(),this.pointerMove=new ot,this.pointerUp=new ot,this.scroll=new ot,this._preventDefaultWhileDragging=s=>{this._activeDragInstances().length>0&&s.preventDefault()},this._persistentTouchmoveListener=s=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&s.preventDefault(),this.pointerMove.next(s))},this._document=r}registerDropContainer(i){this._dropInstances.has(i)||this._dropInstances.add(i)}registerDragItem(i){this._dragInstances.add(i),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,Eo)})}removeDropContainer(i){this._dropInstances.delete(i)}removeDragItem(i){this._dragInstances.delete(i),this.stopDragging(i),this._dragInstances.size===0&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Eo)}startDragging(i,r){if(!(this._activeDragInstances().indexOf(i)>-1)&&(this._loadResets(),this._activeDragInstances.update(s=>[...s,i]),this._activeDragInstances().length===1)){let s=r.type.startsWith("touch");this._globalListeners.set(s?"touchend":"mouseup",{handler:l=>this.pointerUp.next(l),options:!0}).set("scroll",{handler:l=>this.scroll.next(l),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Eo}),s||this._globalListeners.set("mousemove",{handler:l=>this.pointerMove.next(l),options:Eo}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((l,h)=>{this._document.addEventListener(h,l.handler,l.options)})})}}stopDragging(i){this._activeDragInstances.update(r=>{let s=r.indexOf(i);return s>-1?(r.splice(s,1),[...r]):r}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(i){return this._activeDragInstances().indexOf(i)>-1}scrolled(i){let r=[this.scroll];return i&&i!==this._document&&r.push(new Wi(s=>this._ngZone.runOutsideAngular(()=>{let h=m=>{this._activeDragInstances().length&&s.next(m)};return i.addEventListener("scroll",h,!0),()=>{i.removeEventListener("scroll",h,!0)}}))),Js(...r)}ngOnDestroy(){this._dragInstances.forEach(i=>this.removeDragItem(i)),this._dropInstances.forEach(i=>this.removeDropContainer(i)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((i,r)=>{this._document.removeEventListener(r,i.handler,i.options)}),this._globalListeners.clear()}_loadResets(){if(!Ro.has(this._appRef)){Ro.add(this._appRef);let i=Sh(N1,{environmentInjector:this._environmentInjector});this._appRef.onDestroy(()=>{Ro.delete(this._appRef),Ro.size===0&&i.destroy()})}}static{this.\u0275fac=function(r){return new(r||o)(Tt(Fn),Tt(Xi))}}static{this.\u0275prov=ki({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),B1={dragStartThreshold:5,pointerDirectionChangeThreshold:5},El=(()=>{class o{constructor(i,r,s,l){this._document=i,this._ngZone=r,this._viewportRuler=s,this._dragDropRegistry=l}createDrag(i,r=B1){return new Dl(i,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(i){return new Tl(i,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static{this.\u0275fac=function(r){return new(r||o)(Tt(Xi),Tt(Fn),Tt(yu),Tt(F1))}}static{this.\u0275prov=ki({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),Fu=new sn("CDK_DRAG_PARENT");var V1=new sn("CdkDragHandle");var Uu=new sn("CDK_DRAG_CONFIG"),G1="cdk-drag",Hu=new sn("CdkDropList"),Xu=(()=>{class o{static{this._dragInstances=[]}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(i){this._disabled=i,this._dragRef.disabled=this._disabled}constructor(i,r,s,l,h,m,w,A,V,ie,Z){this.element=i,this.dropContainer=r,this._ngZone=l,this._viewContainerRef=h,this._dir=w,this._changeDetectorRef=V,this._selfHandle=ie,this._parentDrag=Z,this._destroyed=new ot,this._handles=new ch([]),this.scale=1,this.started=new Pt,this.released=new Pt,this.ended=new Pt,this.entered=new Pt,this.exited=new Pt,this.dropped=new Pt,this.moved=new Wi($=>{let K=this._dragRef.moved.pipe(hh(F=>({source:this,pointerPosition:F.pointerPosition,event:F.event,delta:F.delta,distance:F.distance}))).subscribe($);return()=>{K.unsubscribe()}}),this._injector=sr(vh),this._dragRef=A.createDrag(i,{dragStartThreshold:m&&m.dragStartThreshold!=null?m.dragStartThreshold:5,pointerDirectionChangeThreshold:m&&m.pointerDirectionChangeThreshold!=null?m.pointerDirectionChangeThreshold:5,zIndex:m?.zIndex}),this._dragRef.data=this,o._dragInstances.push(this),m&&this._assignDefaults(m),r&&(this._dragRef._withDropContainer(r._dropListRef),r.addItem(this),r._dropListRef.beforeStarted.pipe(rr(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(i){this._dragRef.setFreeDragPosition(i)}ngAfterViewInit(){xh(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(i){let r=i.rootElementSelector,s=i.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,s&&!s.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);let i=o._dragInstances.indexOf(this);i>-1&&o._dragInstances.splice(i,1),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(i){let r=this._handles.getValue();r.push(i),this._handles.next(r)}_removeHandle(i){let r=this._handles.getValue(),s=r.indexOf(i);s>-1&&(r.splice(s,1),this._handles.next(r))}_setPreviewTemplate(i){this._previewTemplate=i}_resetPreviewTemplate(i){i===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(i){this._placeholderTemplate=i}_resetPlaceholderTemplate(i){i===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let i=this.element.nativeElement,r=i;this.rootElementSelector&&(r=i.closest!==void 0?i.closest(this.rootElementSelector):i.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||i)}_getBoundaryElement(){let i=this.boundaryElement;return i?typeof i=="string"?this.element.nativeElement.closest(i):Mi(i):null}_syncInputs(i){i.beforeStarted.subscribe(()=>{if(!i.isDragging()){let r=this._dir,s=this.dragStartDelay,l=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,h=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;i.disabled=this.disabled,i.lockAxis=this.lockAxis,i.scale=this.scale,i.dragStartDelay=typeof s=="object"&&s?s:go(s),i.constrainPosition=this.constrainPosition,i.previewClass=this.previewClass,i.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(l).withPreviewTemplate(h).withPreviewContainer(this.previewContainer||"global"),r&&i.withDirection(r.value)}}),i.beforeStarted.pipe(mh(1)).subscribe(()=>{if(this._parentDrag){i.withParent(this._parentDrag._dragRef);return}let r=this.element.nativeElement.parentElement;for(;r;){if(r.classList.contains(G1)){i.withParent(o._dragInstances.find(s=>s.element.nativeElement===r)?._dragRef||null);break}r=r.parentElement}})}_handleEvents(i){i.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),i.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),i.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),i.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),i.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),i.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(i){let{lockAxis:r,dragStartDelay:s,constrainPosition:l,previewClass:h,boundaryElement:m,draggingDisabled:w,rootElementSelector:A,previewContainer:V}=i;this.disabled=w??!1,this.dragStartDelay=s||0,r&&(this.lockAxis=r),l&&(this.constrainPosition=l),h&&(this.previewClass=h),m&&(this.boundaryElement=m),A&&(this.rootElementSelector=A),V&&(this.previewContainer=V)}_setupHandlesListener(){this._handles.pipe(gh(i=>{let r=i.map(s=>s.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),ol(i=>Js(...i.map(r=>r._stateChanges.pipe(eo(r))))),rr(this._destroyed)).subscribe(i=>{let r=this._dragRef,s=i.element.nativeElement;i.disabled?r.disableHandle(s):r.enableHandle(s)})}static{this.\u0275fac=function(r){return new(r||o)(Ie(to),Ie(Hu,12),Ie(Xi),Ie(Fn),Ie(ll),Ie(Uu,8),Ie(bl,8),Ie(El),Ie(ao),Ie(V1,10),Ie(Fu,12))}}static{this.\u0275dir=$r({type:o,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(r,s){r&2&&ro("cdk-drag-disabled",s.disabled)("cdk-drag-dragging",s._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",Zr],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",bh]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[Yr([{provide:Fu,useExisting:o}]),no,al]})}}return o})(),Bu=new sn("CdkDropListGroup");var q1=0,Ku=(()=>{class o{static{this._dropLists=[]}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(i){this._dropListRef.disabled=this._disabled=i}constructor(i,r,s,l,h,m,w){this.element=i,this._changeDetectorRef=s,this._scrollDispatcher=l,this._dir=h,this._group=m,this._destroyed=new ot,this.connectedTo=[],this.id=`cdk-drop-list-${q1++}`,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new Pt,this.entered=new Pt,this.exited=new Pt,this.sorted=new Pt,this._unsortedItems=new Set,this._dropListRef=r.createDropList(i),this._dropListRef.data=this,w&&this._assignDefaults(w),this._dropListRef.enterPredicate=(A,V)=>this.enterPredicate(A.data,V.data),this._dropListRef.sortPredicate=(A,V,ie)=>this.sortPredicate(A,V.data,ie.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),o._dropLists.push(this),m&&m._items.add(this)}addItem(i){this._unsortedItems.add(i),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(i){this._unsortedItems.delete(i),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((i,r)=>i._dragRef.getVisibleElement().compareDocumentPosition(r._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let i=o._dropLists.indexOf(this);i>-1&&o._dropLists.splice(i,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(i){this._dir&&this._dir.change.pipe(eo(this._dir.value),rr(this._destroyed)).subscribe(r=>i.withDirection(r)),i.beforeStarted.subscribe(()=>{let r=Th(this.connectedTo).map(s=>{if(typeof s=="string"){let l=o._dropLists.find(h=>h.id===s);return l}return s});if(this._group&&this._group._items.forEach(s=>{r.indexOf(s)===-1&&r.push(s)}),!this._scrollableParentsResolved){let s=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(l=>l.getElementRef().nativeElement);this._dropListRef.withScrollableParents(s),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){let s=this.element.nativeElement.querySelector(this.elementContainerSelector);i.withElementContainer(s)}i.disabled=this.disabled,i.lockAxis=this.lockAxis,i.sortingDisabled=this.sortingDisabled,i.autoScrollDisabled=this.autoScrollDisabled,i.autoScrollStep=go(this.autoScrollStep,2),i.connectedTo(r.filter(s=>s&&s!==this).map(s=>s._dropListRef)).withOrientation(this.orientation)})}_handleEvents(i){i.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),i.entered.subscribe(r=>{this.entered.emit({container:this,item:r.item.data,currentIndex:r.currentIndex})}),i.exited.subscribe(r=>{this.exited.emit({container:this,item:r.item.data}),this._changeDetectorRef.markForCheck()}),i.sorted.subscribe(r=>{this.sorted.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:r.item.data})}),i.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,item:r.item.data,isPointerOverContainer:r.isPointerOverContainer,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),Js(i.receivingStarted,i.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(i){let{lockAxis:r,draggingDisabled:s,sortingDisabled:l,listAutoScrollDisabled:h,listOrientation:m}=i;this.disabled=s??!1,this.sortingDisabled=l??!1,this.autoScrollDisabled=h??!1,this.orientation=m||"vertical",r&&(this.lockAxis=r)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(i=>i._dragRef))}static{this.\u0275fac=function(r){return new(r||o)(Ie(to),Ie(El),Ie(ao),Ie(xu),Ie(bl,8),Ie(Bu,12),Ie(Uu,8))}}static{this.\u0275dir=$r({type:o,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(r,s){r&2&&(dl("id",s.id),ro("cdk-drop-list-disabled",s.disabled)("cdk-drop-list-dragging",s._dropListRef.isDragging())("cdk-drop-list-receiving",s._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",Zr],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",Zr],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",Zr],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[Yr([{provide:Bu,useValue:void 0},{provide:Hu,useExisting:o}]),no]})}}return o})();var $u=(()=>{class o{static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275mod=Ui({type:o})}static{this.\u0275inj=ji({providers:[El],imports:[bu]})}}return o})();var j1=["actionSetting"],U1=["actionEdit"],H1=["actionEllipsis"],Yu=()=>({padding:"12px"}),zn=o=>({$implicit:o}),Zu=()=>["/","task","board","task"],Qu=o=>({TASK:o});function X1(o,a){o&1&&Hi(0)}function K1(o,a){o&1&&Hi(0)}function $1(o,a){o&1&&Hi(0)}function Y1(o,a){o&1&&Hi(0)}function Z1(o,a){if(o&1&&(M(0,"div",16)(1,"nz-card",17),ye(2,"nz-card-meta",18),M(3,"span",19)(4,"span")(5,"span",20),ue(6),nt(7,"date"),O()()(),M(8,"div",21)(9,"ul",22)(10,"li",23),xe(11,X1,1,0,"ng-container",24),O(),M(12,"li",23),xe(13,K1,1,0,"ng-container",24),O(),M(14,"li",25),xe(15,$1,1,0,"ng-container",24),O(),M(16,"li",26),xe(17,Y1,1,0,"ng-container",24),O()()()()()),o&2){let i=a.$implicit;ce(3);let r=We(14),s=We(16),l=We(18),h=We(20);W(),B("nzBordered",!1)("nzBodyStyle",ut(15,Yu)),W(),B("nzDescription",i.title),W(4),at(" ",dt(7,12,i.due_date,"dd MMM yyyy"),""),W(5),B("ngTemplateOutlet",h)("ngTemplateOutletContext",wt(16,zn,i)),W(2),B("ngTemplateOutlet",r)("ngTemplateOutletContext",wt(18,zn,i)),W(2),B("ngTemplateOutlet",s)("ngTemplateOutletContext",wt(20,zn,i)),W(2),B("ngTemplateOutlet",l)("ngTemplateOutletContext",wt(22,zn,i))}}function Q1(o,a){if(o&1){let i=Re();M(0,"div",15)(1,"h4",9),ue(2),O(),M(3,"div",10),ze("cdkDropListDropped",function(s){Se(i);let l=ce(2);return Ce(l.drop(s))}),xe(4,Z1,18,24,"div",11),O()()}if(o&2){let i=ce().$implicit,r=ce();B("ngClass",r.showSide?" boardCard boardCardSmall":"boardCard"),W(2),Ot(r.stateNames[i.value]),W(),B("id",i.key)("cdkDropListConnectedTo",r.taskStatesConnectivity[i.value])("cdkDropListData",r.listOfDisplayData[i.value]),W(),B("ngForOf",r.listOfDisplayData[i.value])}}function J1(o,a){if(o&1&&(Ct(0),xe(1,Q1,5,6,"div",14),It()),o&2){let i=a.$implicit,r=ce();W(),B("ngIf",i.value!==r.states.Backlog)}}function eb(o,a){o&1&&Hi(0)}function tb(o,a){o&1&&Hi(0)}function ib(o,a){o&1&&Hi(0)}function nb(o,a){o&1&&Hi(0)}function rb(o,a){if(o&1){let i=Re();M(0,"div",16)(1,"nz-card",27),ze("click",function(){Se(i);let s=ce();return Ce(s.showSide=!0)}),ye(2,"nz-card-meta",18),M(3,"span",19)(4,"span")(5,"span",20),ue(6),nt(7,"date"),O()()(),M(8,"div",21)(9,"ul",22)(10,"li",23),xe(11,eb,1,0,"ng-container",24),O(),M(12,"li",23),xe(13,tb,1,0,"ng-container",24),O(),M(14,"li",25),xe(15,ib,1,0,"ng-container",24),O(),M(16,"li",26),xe(17,nb,1,0,"ng-container",24),O()()()()()}if(o&2){let i=a.$implicit;ce();let r=We(14),s=We(16),l=We(18),h=We(20);W(),B("nzBordered",!1)("nzBodyStyle",ut(17,Yu))("routerLink",ut(18,Zu))("queryParams",wt(19,Qu,i.task_no)),W(),B("nzDescription",i.title),W(4),at(" ",dt(7,14,i.due_date,"dd MMM yyyy"),""),W(5),B("ngTemplateOutlet",h)("ngTemplateOutletContext",wt(21,zn,i)),W(2),B("ngTemplateOutlet",r)("ngTemplateOutletContext",wt(23,zn,i)),W(2),B("ngTemplateOutlet",s)("ngTemplateOutletContext",wt(25,zn,i)),W(2),B("ngTemplateOutlet",l)("ngTemplateOutletContext",wt(27,zn,i))}}function sb(o,a){if(o&1&&(M(0,"nz-col",28),ye(1,"router-outlet"),O()),o&2){let i=ce();B("nzSpan",!i.isMobile()&&i.showSide?16:0)}}function ob(o,a){o&1&&(Ct(0),ye(1,"router-outlet"),It())}function ab(o,a){if(o&1){let i=Re();M(0,"div")(1,"nz-drawer",29),ze("nzOnClose",function(){Se(i);let s=ce();return Ce(s.showSide=!1)}),xe(2,ob,2,0,"ng-container",30),O()()}if(o&2){let i=ce();W(),B("nzVisible",i.showSide)}}function lb(o,a){if(o&1&&ye(0,"span",31),o&2){let i=a.$implicit,r=ce();B("nzTheme","twotone")("nzTwotoneColor",r.taskTypeIcons[i==null?null:i.type])}}function cb(o,a){if(o&1&&ye(0,"span",32),o&2){let i=a.item,r=ce();B("nzTheme","twotone")("nzTwotoneColor",r.taskSeverityColors[i==null?null:i.severity])}}function db(o,a){if(o&1){let i=Re();M(0,"a",34),ze("click",function(){Se(i);let s=ce(2);return Ce(s.showSide=!0)}),ue(1),O()}if(o&2){let i=ce().$implicit;B("routerLink",ut(3,Zu))("queryParams",wt(4,Qu,i==null?null:i.task_no)),W(),at("TASK-",i==null?null:i.task_no,"")}}function hb(o,a){if(o&1&&xe(0,db,2,6,"a",33),o&2){let i=ce();B("appHasPermission",i.appPermissions.AddTask||i.appPermissions.ViewTasks)}}function ub(o,a){if(o&1&&(M(0,"div",35),ue(1),O()),o&2){let i=a.$implicit,r=ce();B("nz-tooltip",i.assignee_name),W(),at("",r.getInitials(i.assignee_name)," ")}}var Ju=(()=>{class o{constructor(i,r,s,l,h){this.appService=i,this.media=r,this.route=s,this.router=l,this.exportSheetService=h,this.apiUrl=pr.apiUrl,this.pendingInvoices=[],this.stateNames=qt,this.paymentConfirmations=[],this.states=ii,this.stateColors=uo,this.stateCardColors=po,this.taskTypeColors=qn,this.taskTypeIcons=qn,this.taskSeverity=fo,this.taskSeverityColors=mo,this.partialPayments=[],this.showSide=!1,this.searchVisible=!1,this.searchValue="",this.tabs=["Task Request","Task Returns","Sale Requests","Sale Return"],this.listOfDisplayData={},this.taskStatesConnectivity=ur,this.appPermissions=ti,this.total=1,this.loading=!0,this.pageSize=10,this.pageIndex=1,this.filterStates=Object.keys(qt).map(m=>({text:qt[m],value:m})),this.title="angular-drag-drop-tutorial",this.todo=["Get to work","Pick up groceries","Go home","Fall asleep"],this.done=["Get up","Brush teeth","Take a shower","Check e-mail","Walk dog"],this.sortByValue=(m,w)=>m.value<w.value?-1:m.value>w.value?1:0,this.isMobile=this.appService.isMobile}getActions(i){return[this.createActionTemplate(this.actionSetting,i),this.createActionTemplate(this.actionEdit,i),this.createActionTemplate(this.actionEllipsis,i)]}createActionTemplate(i,r){return At(it({},i),{context:{item:r}})}groupByState(i){let r=i.reduce((s,l)=>(s[l.state]||(s[l.state]=[]),s[l.state].push(l),s),{});return Object.keys(this.states).forEach(s=>{let h=this.states[s];r[h]||(r[h]=[])}),r}loadTaskDataFromServer(i=1,r=1e3,s="id",l="asc",h=[]){this.loading=!0;let m=new lr().append("page",`${i}`).append("results",`${r}`).append("sortField",`${s}`).append("sortOrder",`${l}`);h.forEach(w=>{w.value.forEach(A=>{m=m.append(w.key,A)})}),this.getAndSetTaskOrders(m)}drop(i){i.previousContainer===i.container?Rr(i.container.data,i.previousIndex,i.currentIndex):(No(i.previousContainer.data,i.container.data,i.previousIndex,i.currentIndex),this.updateDetails(i.container.data[i.currentIndex].id,ii[i.container.id]))}updateDetails(i,r){return Oe(this,null,function*(){let s={id:i,state:r},l=yield this.appService.updateTaskRequest(s)})}onTaskQueryParamsChange(i){console.log(i);let{pageSize:r,pageIndex:s,sort:l,filter:h}=i;if(this.sort&&this.appService.areArraysDifferent(this.sort,l)){this.sort=l,this.listOfDisplayData=this.groupByState(this.appService.sortDataArray(this.listOfDisplayData,this.sort));return}this.sort=l;let m=l.find(V=>V.value!==null),w=m&&m.key||null,A=m&&m.value||null;this.loadTaskDataFromServer(s,r,w,A,h)}getInitials(i){return i?i.split(" ").map(s=>s[0]).join("").toUpperCase():""}export(){let i=this.listOfDisplayData;this.exportSheetService.exportDataToXLSX(i,"Task Request")}ngOnInit(){this.clientSubscription=this.appService.currentClient.subscribe(i=>{i&&i.id>0&&this.currentOrganizationId!=i.id&&(this.currentOrganizationId&&this.router.navigate(["/","task","board"],{queryParams:{TASK:null},queryParamsHandling:"merge"}),this.currentOrganizationId=i.id,this.showSide=!1,this.route.queryParams.subscribe(r=>Oe(this,null,function*(){this.onTaskQueryParamsChange({pageIndex:0,pageSize:0,sort:[],filter:[]}),r.TASK?this.showSide=!0:this.showSide=!1})))})}ngOnDestroy(){this.clientSubscription&&this.clientSubscription.unsubscribe()}ngAfterViewInit(){}getAndSetTaskOrders(i){return Oe(this,null,function*(){this.pendingInvoices=yield this.appService.retireveTaskByState(i),this.listOfDisplayData=this.groupByState([...this.pendingInvoices]),this.loading=!1,this.total=this.pendingInvoices.length})}reset(){this.searchValue="",this.search()}search(){this.searchVisible=!1,this.searchValue?(this.listOfDisplayData=this.pendingInvoices.filter(i=>i.title&&i.title.toLowerCase().indexOf(this.searchValue.toLowerCase())>-1||i.project_name&&i.project_name.toLowerCase().indexOf(this.searchValue.toLowerCase())>-1),console.log(this.listOfDisplayData)):this.listOfDisplayData=this.pendingInvoices}actionSettingTemplate(i){return{item:i}}actionEditTemplate(i){return{item:i}}actionEllipsisTemplate(i){return{item:i}}static{this.\u0275fac=function(r){return new(r||o)(Ie(kt),Ie(fr),Ie(Ei),Ie(Ri),Ie(Dr))}}static{this.\u0275cmp=vt({type:o,selectors:[["app-board"]],viewQuery:function(r,s){if(r&1&&(Bn(j1,7),Bn(U1,7),Bn(H1,7)),r&2){let l;Vn(l=Gn())&&(s.actionSetting=l.first),Vn(l=Gn())&&(s.actionEdit=l.first),Vn(l=Gn())&&(s.actionEllipsis=l.first)}},decls:21,vars:14,consts:[["actionSetting",""],["actionEdit",""],["actionEllipsis",""],["initialsTemplate",""],[2,"height","100%"],[2,"height","100%","overflow-y","auto",3,"nzSpan"],["nz-row","",1,"boardCards"],[4,"ngFor","ngForOf"],["nz-col","","nz-col","","nzSpan","24",1,"boardCard",2,"margin","0px","padding","10px"],[1,"tab-heading"],["cdkDropList","",2,"padding-bottom","50px",3,"cdkDropListDropped","id","cdkDropListConnectedTo","cdkDropListData"],["class","item","cdkDrag","",4,"ngFor","ngForOf"],["class","sidebarright",3,"nzSpan",4,"ngIf"],[4,"ngIf"],["nz-col","","class","boardCard","nz-col","",3,"ngClass",4,"ngIf"],["nz-col","","nz-col","",1,"boardCard",3,"ngClass"],["cdkDrag","",1,"item"],[1,"custom-card",3,"nzBordered","nzBodyStyle"],[3,"nzDescription"],[1,"flex","space-between"],[1,"dateDisplay"],["nz-card-actions",""],[1,"ant-card-actions"],[2,"text-align","left","width","25%"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[2,"width","25%"],[2,"width","25%","text-align","right"],[1,"custom-card",3,"click","nzBordered","nzBodyStyle","routerLink","queryParams"],[1,"sidebarright",3,"nzSpan"],["nzWidth","100%","nzPlacement","right",3,"nzOnClose","nzVisible","nzTitle","nzExtra"],[4,"nzDrawerContent"],["nz-icon","","nzType","check-square",3,"nzTheme","nzTwotoneColor"],["nz-icon","","nzType","project",3,"nzTheme","nzTwotoneColor"],["style","font-size: 10px;",3,"routerLink","queryParams","click",4,"appHasPermission"],[2,"font-size","10px",3,"click","routerLink","queryParams"],[1,"avatar-initials2","ant-list-item-meta-avatar",3,"nz-tooltip"]],template:function(r,s){if(r&1){let l=Re();M(0,"nz-row",4)(1,"nz-col",5)(2,"div",6),xe(3,J1,2,1,"ng-container",7),nt(4,"keyvalue"),O(),M(5,"div",6)(6,"div",8)(7,"h4",9),ue(8),O(),M(9,"div",10),ze("cdkDropListDropped",function(m){return Se(l),Ce(s.drop(m))}),xe(10,rb,18,29,"div",11),O()()()(),xe(11,sb,2,1,"nz-col",12),O(),xe(12,ab,3,1,"div",13)(13,lb,1,2,"ng-template",null,0,$e)(15,cb,1,2,"ng-template",null,1,$e)(17,hb,1,1,"ng-template",null,2,$e)(19,ub,2,2,"ng-template",null,3,$e)}r&2&&(W(),B("nzSpan",!s.isMobile()&&s.showSide?8:24),W(2),B("ngForOf",dt(4,11,s.states,s.sortByValue)),W(3),hl("border-color",s.stateColors[s.states.Backlog]),W(2),Ot(s.stateNames[s.states.Backlog]),W(),B("id","Backlog")("cdkDropListConnectedTo",s.taskStatesConnectivity[s.states.Backlog])("cdkDropListData",s.listOfDisplayData[s.states.Backlog]),W(),B("ngForOf",s.listOfDisplayData[s.states.Backlog]),W(),B("ngIf",!s.isMobile()&&s.showSide),W(),B("ngIf",s.isMobile()&&s.showSide))},dependencies:[cr,dr,Ch,pi,Gt,wh,Wt,fn,Bh,fi,gn,mn,Ut,jt,yr,Cr,Ku,Xu,an,co],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{width:50%;background-color:#6495ed;color:#fff;display:flex;justify-content:center;align-items:center;cursor:move;padding:1em;transition:transform .2s ease-in-out}.container[_ngcontent-%COMP%]   .item.cdk-drag-preview[_ngcontent-%COMP%]{opacity:.8;background-color:orange;box-shadow:0 4px 8px #0000001a}  .boardCards .ant-card-meta-avatar{padding-right:0!important;width:34px!important;margin-top:3px!important}.avatar-initials2[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:20px;height:20px;font-variant:tabular-nums;line-height:1.5715;border-radius:50%;background-color:#bb86fc;color:#fff;font-size:9px;font-weight:700}}{%BLOCK%}"]})}}return o})();var pb=()=>({overflow:"auto"});function fb(o,a){if(o&1&&(M(0,"nz-form",3)(1,"div",4)(2,"div",5)(3,"nz-form-item")(4,"nz-form-label"),ue(5,"Name"),O(),M(6,"nz-form-control"),ye(7,"input",6),O()()(),M(8,"div",5)(9,"nz-form-item")(10,"nz-form-label"),ue(11,"Contact no"),O(),M(12,"nz-form-control"),ye(13,"input",7),O()()(),M(14,"div",5)(15,"nz-form-item")(16,"nz-form-label"),ue(17,"Account No"),O(),M(18,"nz-form-control"),ye(19,"input",8),O()()(),M(20,"div",5)(21,"nz-form-item")(22,"nz-form-label"),ue(23,"Address"),O(),M(24,"nz-form-control")(25,"textarea",9),ue(26," "),O()()()()()()),o&2){let i=ce();B("formGroup",i.customerForm),W(),B("nzGutter",8)}}function mb(o,a){if(o&1){let i=Re();M(0,"div",10)(1,"button",11),ze("click",function(){Se(i);let s=ce();return Ce(s.close())}),ue(2,"Cancel"),O(),M(3,"button",12),ze("click",function(){Se(i);let s=ce();return Ce(s.addCustomer())}),ue(4,"Submit"),O()()}if(o&2){let i=ce();W(3),B("disabled",!i.customerForm.valid)}}var ep=(()=>{class o{constructor(i,r){this.appService=i,this.fb=r,this.visible=!1,this.customers=[],this.closeDrawer=new Pt,this.customerForm=this.fb.group({name:["",[xt.required]],account_no:[0,[xt.required]],contact_no:[null,[xt.required]],address:[null,[xt.required]]})}ngOnInit(){}close(){this.closeDrawer.emit(!1)}addCustomer(){return Oe(this,null,function*(){console.log(this.customerForm),yield this.appService.createCustomer(this.customerForm.value),this.closeDrawer.emit(!0)})}objectKeys(i){return Object.keys(i).map(r=>({key:r,value:i[r]}))}static{this.\u0275fac=function(r){return new(r||o)(Ie(kt),Ie(un))}}static{this.\u0275cmp=vt({type:o,selectors:[["app-create-customer-drawer"]],inputs:{visible:"visible",customers:"customers"},outputs:{closeDrawer:"closeDrawer"},decls:4,vars:6,consts:[["footerTpl",""],["nzTitle","Create",3,"nzOnClose","nzBodyStyle","nzMaskClosable","nzWidth","nzVisible","nzFooter"],[3,"formGroup",4,"nzDrawerContent"],[3,"formGroup"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","24"],["formControlName","name","nz-input","","placeholder","please enter user name"],["formControlName","contact_no","nz-input","","placeholder","please enter contact no"],["formControlName","account_no","nz-input","","placeholder","please enter account no"],["nz-input","","rows","3","formControlName","address","placeholder","please enter account no"],[2,"float","right"],["nz-button","",2,"margin-right","8px",3,"click"],["nz-button","","nzType","primary",3,"click","disabled"]],template:function(r,s){if(r&1){let l=Re();M(0,"nz-drawer",1),ze("nzOnClose",function(){return Se(l),Ce(s.close())}),xe(1,fb,27,2,"nz-form",2)(2,mb,5,1,"ng-template",null,0,$e),O()}if(r&2){let l=We(3);B("nzBodyStyle",ut(5,pb))("nzMaskClosable",!1)("nzWidth",720)("nzVisible",s.visible)("nzFooter",l)}},dependencies:[gi,Wt,mi,gn,mn,Ut,jt,_n,xn,vn,xi,_i,vi,cn,dn,hn]})}}return o})();var _b=()=>[],vb=()=>["/","task","sales","sale"],xb=o=>({SALE:o});function yb(o,a){if(o&1){let i=Re();M(0,"span",17),ze("click",function(){Se(i);let s=ce(2);return s.searchValue="",Ce(s.search())}),O()}}function bb(o,a){o&1&&ye(0,"span",16)}function Sb(o,a){if(o&1&&xe(0,yb,1,0,"span",15)(1,bb,1,0,"span",16),o&2){let i=ce();so(i.searchValue?0:1)}}function Cb(o,a){o&1&&ye(0,"span",16)}function wb(o,a){if(o&1){let i=Re();M(0,"button",18),ze("click",function(){Se(i);let s=ce();return Ce(s.open())}),ye(1,"span",19),ue(2," Add Customer "),O()}o&2&&B("nzSize","small")}function Db(o,a){if(o&1){let i=Re();M(0,"app-create-customer-drawer",20),ze("closeDrawer",function(s){Se(i);let l=ce();return Ce(l.close(s))}),O()}if(o&2){let i=ce();B("visible",i.visible)("customers",i.listOfDisplayData)}}function zb(o,a){if(o&1&&(M(0,"th",21),ue(1),O()),o&2){let i=a.$implicit;B("nzSortFn",i.compare)("nzSortPriority",i.priority),W(),at(" ",i.title," ")}}function Tb(o,a){if(o&1){let i=Re();M(0,"td")(1,"a",37),ze("click",function(){Se(i);let s=ce(2).$implicit,l=ce();return Ce(l.startEdit(s.id))}),ue(2,"Edit"),O()()}}function Ib(o,a){if(o&1){let i=Re();Ct(0),M(1,"td",35),ze("nzExpandChange",function(s){Se(i);let l=ce().index,h=ce();return Ce(h.onExpandChange(l,s))}),O(),M(2,"td"),ue(3),O(),M(4,"td"),ue(5),O(),M(6,"td"),ue(7),O(),M(8,"td"),ue(9),O(),xe(10,Tb,3,0,"td",36),It()}if(o&2){let i=ce(),r=i.$implicit,s=i.index,l=ce();W(),B("nzExpand",l.expandSet.has(s)),W(2),Ot(r.name),W(2),Ot(r.contact_no),W(2),Ot(r.address),W(2),Ot(r.account_no),W(),B("appHasPermission",l.appPermissions.AddClients)}}function kb(o,a){if(o&1){let i=Re();M(0,"td")(1,"a",39),ze("click",function(){Se(i);let s=ce(2).$implicit,l=ce();return Ce(l.saveEdit(s.id))}),ue(2,"Save"),O(),ue(3," \xA0 "),M(4,"a",40),ze("nzOnConfirm",function(){Se(i);let s=ce(2).$implicit,l=ce();return Ce(l.cancelEdit(s.id))}),ue(5,"Cancel"),O()()}}function Eb(o,a){if(o&1){let i=Re();ye(0,"td"),M(1,"td")(2,"input",38),ei("ngModelChange",function(s){Se(i);let l=ce().$implicit,h=ce();return Jt(h.editCache[l.id].data.name,s)||(h.editCache[l.id].data.name=s),Ce(s)}),O()(),M(3,"td")(4,"input",38),ei("ngModelChange",function(s){Se(i);let l=ce().$implicit,h=ce();return Jt(h.editCache[l.id].data.contact_no,s)||(h.editCache[l.id].data.contact_no=s),Ce(s)}),O()(),M(5,"td")(6,"input",38),ei("ngModelChange",function(s){Se(i);let l=ce().$implicit,h=ce();return Jt(h.editCache[l.id].data.address,s)||(h.editCache[l.id].data.address=s),Ce(s)}),O()(),M(7,"td")(8,"input",38),ei("ngModelChange",function(s){Se(i);let l=ce().$implicit,h=ce();return Jt(h.editCache[l.id].data.account_no,s)||(h.editCache[l.id].data.account_no=s),Ce(s)}),O()(),xe(9,kb,6,0,"td",36)}if(o&2){let i=ce().$implicit,r=ce();W(2),Qt("ngModel",r.editCache[i.id].data.name),W(2),Qt("ngModel",r.editCache[i.id].data.contact_no),W(2),Qt("ngModel",r.editCache[i.id].data.address),W(2),Qt("ngModel",r.editCache[i.id].data.account_no),W(),B("appHasPermission",r.appPermissions.AddClients)}}function Rb(o,a){if(o&1&&(M(0,"tr")(1,"td")(2,"a",41),ue(3),O()(),M(4,"td"),ue(5),nt(6,"date"),O(),M(7,"td"),ue(8),O(),M(9,"td")(10,"button",42),ue(11),O()(),M(12,"td")(13,"span"),ue(14),nt(15,"currency"),O()()()),o&2){let i=a.$implicit,r=ce(2);W(2),B("routerLink",ut(16,vb))("queryParams",wt(17,xb,i.sale_no)),W(),at("SALE - ",i.sale_no,""),W(2),at(" ",dt(6,10,i.date_created,"dd MMM yyyy")," "),W(3),at(" ",i.title," "),W(2),B("className",i.state===r.states.Invoiced?"green-button":"default")("nzDanger",i.state===r.states.Cancelled)("nzSize","small"),W(),at(" ",r.stateNames[i.state]," "),W(3),Ot(dt(15,13,i.total,"PKR "))}}function Mb(o,a){if(o&1){let i=Re();M(0,"tr"),xe(1,Ib,11,6,"ng-container",22)(2,Eb,10,5,"ng-template",null,3,$e),O(),M(4,"tr",23)(5,"div",24),ye(6,"span"),M(7,"span")(8,"button",25),ze("click",function(){let s=Se(i).index,l=ce();return Ce(l.generatePDF(s))}),ye(9,"span",26),O(),M(10,"button",27),ze("click",function(){let s=Se(i).index,l=ce();return Ce(l.printCard(s))}),ye(11,"span",28),O()()(),M(12,"nz-table",29)(13,"thead")(14,"tr")(15,"th",30),ue(16,"Quote Number"),O(),M(17,"th",31),ue(18,"Date"),O(),M(19,"th",30),ue(20,"Title"),O(),M(21,"th",32),ue(22,"Status "),O(),M(23,"th",33),ue(24,"Amount"),O()()(),M(25,"tbody"),xe(26,Rb,16,19,"tr",34),O()()()}if(o&2){let i=a.$implicit,r=We(3),s=ce();W(),B("ngIf",!(s.editCache[i.id]!=null&&s.editCache[i.id].edit))("ngIfElse",r),W(3),B("nzExpand",i.expand),W(8),B("nzShowPagination",!1)("nzData",i.details||ut(14,_b))("nzFrontPagination",!1)("nzPageSize",1e3)("nzLoading",i.loading),W(3),B("nzSortFn",!0),W(2),B("nzSortFn",!0),W(2),B("nzSortFn",!0),W(2),B("nzFilterFn",!0),W(2),B("nzSortFn",!0),W(3),B("ngForOf",i.details)}}var tp=(()=>{class o{onExpandChange(i,r){r?(this.expandSet.add(i),this.listOfDisplayData[i].expand=!0,this.listOfDisplayData[i].details||this.retireveCustomerOrders(i)):(this.expandSet.delete(i),this.listOfDisplayData[i].expand=!1)}constructor(i,r,s){this.appService=i,this.pdfGeneratorService=r,this.userService=s,this.currentOrganizationId=0,this.expandSet=new Set,this.listOfDisplayData=[],this.listOfColumn=[{title:"Name",compare:(l,h)=>l.name.localeCompare(h.name),priority:!1},{title:"Contact No",compare:(l,h)=>l.contact_no-h.contact_no,priority:2},{title:"Address",compare:(l,h)=>l.address.localeCompare(h.address),priority:3},{title:"Account No",compare:(l,h)=>l.account_no-h.account_no,priority:4},{title:"Action",compare:(l,h)=>l.account_no-h.account_no,priority:5}],this.listOfData=[],this.states=Di,this.stateNames=ho,this.visible=!1,this.appPermissions=ti,this.editCache={}}ngOnInit(){this.clientSubscription=this.appService.currentClient.subscribe(i=>{i&&i.id>0&&this.currentOrganizationId!=i.id&&(this.currentOrganizationId=i.id,this.populateCustomerData())})}printCard(i){this.makePdf("print",i)}generatePDF(i){this.makePdf("download",i)}makePdf(i,r){let s=this.listOfData[r];this.pdfGeneratorService.invoice={type:"customer",status:"",invoiceDetailLabel:"Client/Project Ledger",personName:s.name,address:s.address||"",contactNo:s.contact_no,date_created:new Date,terms:"",email:"",additionalDetails:" ",created_by:this.userService.loggedInUser,title:" Ledger"},this.pdfGeneratorService.generatePDF(i)}ngOnDestroy(){this.clientSubscription&&this.clientSubscription.unsubscribe()}retireveCustomerOrders(i){return Oe(this,null,function*(){this.listOfData[i].loading=!0;let r=yield this.appService.retireveSaleByCustomer(this.listOfData[i].id);this.listOfData[i].details=r,this.listOfData[i].loading=!1})}open(){this.visible=!0}close(i=!1){this.visible=!1,i&&this.populateCustomerData()}populateCustomerData(){return Oe(this,null,function*(){this.listOfData=yield this.appService.getOrganizationCustomers(),this.listOfDisplayData=this.listOfData,this.updateEditCache()})}startEdit(i){this.editCache[i].edit=!0}cancelEdit(i){this.editCache[i]={data:it({},this.listOfDisplayData[i]),edit:!1}}saveEdit(i){return Oe(this,null,function*(){let r=this.listOfDisplayData.findIndex(s=>s.id===i);yield this.appService.updateCustomer({id:i,contact_no:this.editCache[i].data.contact_no,address:this.editCache[i].data.address,account_no:this.editCache[i].data.account_no,name:this.editCache[i].data.name}),this.editCache[i].edit=!1,Object.assign(this.listOfDisplayData[r],this.editCache[i].data),this.populateCustomerData()})}updateEditCache(){this.listOfDisplayData.forEach((i,r)=>{this.editCache[i.id]={edit:!1,data:it({},i)}})}search(){this.searchVisible=!1,this.searchValue?(this.listOfDisplayData=this.listOfData.filter(i=>i.name&&i.name.toLowerCase().indexOf(this.searchValue.toLowerCase())>-1),console.log(this.listOfDisplayData)):this.listOfDisplayData=this.listOfData}static{this.\u0275fac=function(r){return new(r||o)(Ie(kt),Ie(wr),Ie(ln))}}static{this.\u0275cmp=vt({type:o,selectors:[["app-customers"]],decls:22,vars:10,consts:[["inputClearTpl",""],["suffixIconSearch",""],["nestedTable","","editRowTable","","sortTable",""],["editTemplate",""],[1,"flex","space-between",2,"margin-bottom","5px"],[2,"display","-webkit-box","width","100%"],[2,"margin-right","5px"],[3,"nzSuffix"],["type","text","placeholder","Search here","nz-input","",3,"ngModelChange","keyup","ngModel"],["nz-button","","nzType","primary",3,"nzSize","click",4,"appHasPermission"],[3,"visible","customers","closeDrawer",4,"ngIf"],["nzShowPagination","false",3,"nzPageSize","nzData"],[3,"width"],[3,"nzSortFn","nzSortPriority",4,"ngFor","ngForOf"],["ngFor","",3,"ngForOf"],["nz-icon","","nzTheme","fill","nzType","close-circle",1,"ant-input-clear-icon"],["nz-icon","","nzType","search"],["nz-icon","","nzTheme","fill","nzType","close-circle",1,"ant-input-clear-icon",3,"click"],["nz-button","","nzType","primary",3,"click","nzSize"],["nz-icon","","nzType","plus"],[3,"closeDrawer","visible","customers"],[3,"nzSortFn","nzSortPriority"],[4,"ngIf","ngIfElse"],[3,"nzExpand"],[1,"detailBar"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","download"],["nz-button","","nzType","primary",2,"margin-left","12px",3,"click"],["nz-icon","","nzType","printer"],[3,"nzShowPagination","nzData","nzFrontPagination","nzPageSize","nzLoading"],["nzColumnKey","id","nzWidth","20%",3,"nzSortFn"],["nzColumnKey","date_create","nzWidth","20%",3,"nzSortFn"],["nzColumnKey","state",3,"nzFilterFn"],["nzColumnKey","amount","nzWidth","20%",3,"nzSortFn"],[4,"ngFor","ngForOf"],[3,"nzExpandChange","nzExpand"],[4,"appHasPermission"],[3,"click"],["type","text","nz-input","",3,"ngModelChange","ngModel"],[1,"save",3,"click"],["nz-popconfirm","","nzPopconfirmTitle","Sure to cancel?",3,"nzOnConfirm"],["href","",3,"routerLink","queryParams"],["nz-button","","nzType","primary","nzShape","round",3,"className","nzDanger","nzSize"]],template:function(r,s){if(r&1){let l=Re();M(0,"div",4)(1,"span",5)(2,"h3",6),ue(3," Customers "),O(),M(4,"nz-input-group",7)(5,"input",8),ei("ngModelChange",function(m){return Se(l),Jt(s.searchValue,m)||(s.searchValue=m),Ce(m)}),ze("keyup",function(){return Se(l),Ce(s.search())}),O()(),xe(6,Sb,2,1,"ng-template",null,0,$e)(8,Cb,1,0,"ng-template",null,1,$e),O(),xe(10,wb,3,1,"button",9),O(),xe(11,Db,1,2,"app-create-customer-drawer",10),M(12,"nz-table",11,2)(16,"thead")(17,"tr"),ye(18,"th",12),xe(19,zb,2,3,"th",13),O()(),M(20,"tbody"),xe(21,Mb,27,15,"ng-template",14),O()()}if(r&2){let l=We(7),h=We(9),m=We(15);W(4),B("nzSuffix",h)("nzSuffix",l),W(),Qt("ngModel",s.searchValue),W(5),B("appHasPermission",s.appPermissions.AddClients),W(),B("ngIf",s.visible),W(),B("nzPageSize",1e3)("nzData",s.listOfDisplayData),W(6),B("width","2%"),W(),B("ngForOf",s.listOfColumn),W(2),B("ngForOf",m.data)}},dependencies:[dr,pi,Gt,gi,Wt,mi,fi,xi,pn,vr,Do,Cn,Sr,yn,bn,Zh,Dn,Sn,wn,Jh,Qh,_i,vi,gr,Cr,ep,ar,an]})}}return o})();var cs=(()=>{class o{canDeactivate(i){return i&&i.canDeactivate?i.canDeactivate():!0}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275prov=ki({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var Rl=Qs(qx()),np=Qs(ip()),rp=Qs(Wx());function Ab(o,a){if(o&1&&ye(0,"highcharts-chart",6),o&2){let i=ce();B("Highcharts",i.Highcharts)("options",i.ganttChartOptions)("constructorType",i.chartConstructor)}}function Pb(o,a){if(o&1&&(M(0,"nz-col",7),ye(1,"router-outlet"),O()),o&2){let i=ce();B("nzSpan",!i.isMobile()&&i.showSide?16:0)}}function Ob(o,a){o&1&&(Ct(0),ye(1,"router-outlet"),It())}function Lb(o,a){if(o&1){let i=Re();M(0,"div")(1,"nz-drawer",8),ze("nzOnClose",function(){Se(i);let s=ce();return Ce(s.showSide=!1)}),xe(2,Ob,2,0,"ng-container",9),O()()}if(o&2){let i=ce();W(),B("nzVisible",i.showSide)}}(0,rp.default)(Rl);var sp=(()=>{class o{constructor(i,r,s,l,h){this.appService=i,this.media=r,this.route=s,this.router=l,this.exportSheetService=h,this.apiUrl=pr.apiUrl,this.pendingInvoices=[],this.stateNames=qt,this.chartConstructor="chart",this.Highcharts=Rl,this.paymentConfirmations=[],this.states=ii,this.stateColors=uo,this.stateCardColors=po,this.taskTypeColors=qn,this.partialPayments=[],this.showSide=!1,this.searchVisible=!1,this.searchValue="",this.tabs=["Task Request","Task Returns","Sale Requests","Sale Return"],this.listOfDisplayData={},this.taskStatesConnectivity=ur,this.ganttChartOptions={},this.showChart=!1,this.total=1,this.loading=!0,this.pageSize=10,this.pageIndex=1,this.filterStates=Object.keys(qt).map(m=>({text:qt[m],value:m})),this.title="angular-drag-drop-tutorial",this.todo=["Get to work","Pick up groceries","Go home","Fall asleep"],this.done=["Get up","Brush teeth","Take a shower","Check e-mail","Walk dog"],this.sortByValue=(m,w)=>m.value<w.value?-1:m.value>w.value?1:0,this.isMobile=this.appService.isMobile,(0,np.default)(Rl)}createGanttChart(){let r=this.pendingInvoices.map(l=>({name:l.task_no,title:l.title,status:l.state,start:new Date(l.start_date).getTime(),end:new Date(l.due_date).getTime()})).sort((l,h)=>h.start-l.start),s=l=>{this.router.navigate(["/","task","report","task"],{queryParams:{TASK:l.name},queryParamsHandling:"merge"}),this.showSide=!0};this.ganttChartOptions={chart:{type:"gantt",height:400},title:{text:"Tasks Timeline",align:"left",style:{fontSize:"12px",fontWeight:"bold"}},subtitle:{text:"",align:"left",style:{fontSize:"12px"}},credits:{enabled:!1},xAxis:{type:"datetime"},yAxis:{title:{text:"Tasks"},categories:r.map(l=>l.name)},series:[{type:"gantt",name:"Tasks",data:r.map(l=>({name:l.name,start:l.start,end:l.end,title:l.title,status:l.status,y:r.findIndex(h=>h.name===l.name),color:this.stateCardColors[l.status]}))}],tooltip:{pointFormat:"<b>{point.name} : {point.title}</b>: {point.start:%e. %b %Y} - {point.end:%e. %b %Y}"},legend:{enabled:!0,layout:"horizontal",align:"center",verticalAlign:"bottom",labelFormatter:function(){return this.name}},plotOptions:{series:{cursor:"pointer",point:{events:{click:function(){s(this)}}}},gantt:{dataLabels:{enabled:!0,format:"{point.title}",style:{color:"#000000",fontWeight:"bold",textOutline:"none"}}}}},this.showChart=!0}groupByState(i){let r=i.reduce((s,l)=>(s[l.state]||(s[l.state]=[]),s[l.state].push(l),s),{});return Object.keys(this.states).forEach(s=>{let h=this.states[s];r[h]||(r[h]=[])}),r}loadTaskDataFromServer(i=1,r=1e3,s="id",l="asc",h=[]){this.loading=!0;let m=new lr().append("page",`${i}`).append("results",`${r}`).append("sortField",`${s}`).append("sortOrder",`${l}`);h.forEach(w=>{w.value.forEach(A=>{m=m.append(w.key,A)})}),this.getAndSetTaskOrders(m)}drop(i){i.previousContainer===i.container?Rr(i.container.data,i.previousIndex,i.currentIndex):(No(i.previousContainer.data,i.container.data,i.previousIndex,i.currentIndex),this.updateDetails(i.container.data[i.currentIndex].id,ii[i.container.id]))}updateDetails(i,r){return Oe(this,null,function*(){let s={id:i,state:r},l=yield this.appService.updateTaskRequest(s)})}onTaskQueryParamsChange(i){console.log(i);let{pageSize:r,pageIndex:s,sort:l,filter:h}=i;if(this.sort&&this.appService.areArraysDifferent(this.sort,l)){this.sort=l,this.listOfDisplayData=this.groupByState(this.appService.sortDataArray(this.listOfDisplayData,this.sort));return}this.sort=l;let m=l.find(V=>V.value!==null),w=m&&m.key||null,A=m&&m.value||null;this.loadTaskDataFromServer(s,r,w,A,h)}getInitials(i){return i?i.split(" ").map(s=>s[0]).join("").toUpperCase():""}export(){let i=this.listOfDisplayData;this.exportSheetService.exportDataToXLSX(i,"Task Request")}ngOnInit(){this.clientSubscription=this.appService.currentClient.subscribe(i=>{i&&i.id>0&&this.currentOrganizationId!=i.id&&(this.currentOrganizationId&&this.router.navigate(["/","task","report"],{queryParams:{TASK:null},queryParamsHandling:"merge"}),this.currentOrganizationId=i.id,this.showSide=!1,this.route.queryParams.subscribe(r=>Oe(this,null,function*(){r.TASK?this.showSide=!0:(this.showSide=!1,this.onTaskQueryParamsChange({pageIndex:0,pageSize:0,sort:[],filter:[]}))})))})}ngOnDestroy(){this.clientSubscription&&this.clientSubscription.unsubscribe()}ngAfterViewInit(){}getAndSetTaskOrders(i){return Oe(this,null,function*(){this.pendingInvoices=yield this.appService.retireveTaskByState(i),this.listOfDisplayData=this.groupByState([...this.pendingInvoices]),this.loading=!1,this.total=this.pendingInvoices.length,this.createGanttChart()})}reset(){this.searchValue="",this.search()}search(){this.searchVisible=!1,this.searchValue?(this.listOfDisplayData=this.pendingInvoices.filter(i=>i.title&&i.title.toLowerCase().indexOf(this.searchValue.toLowerCase())>-1||i.project_name&&i.project_name.toLowerCase().indexOf(this.searchValue.toLowerCase())>-1),console.log(this.listOfDisplayData)):this.listOfDisplayData=this.pendingInvoices}static{this.\u0275fac=function(r){return new(r||o)(Ie(kt),Ie(fr),Ie(Ei),Ie(Ri),Ie(Dr))}}static{this.\u0275cmp=vt({type:o,selectors:[["app-report"]],decls:6,vars:4,consts:[[2,"height","100%"],[2,"height","100%","overflow-y","auto",3,"nzSpan"],["nz-row",""],["style","width: 100%;display: block;",3,"Highcharts","options","constructorType",4,"ngIf"],["class","sidebarright",3,"nzSpan",4,"ngIf"],[4,"ngIf"],[2,"width","100%","display","block",3,"Highcharts","options","constructorType"],[1,"sidebarright",3,"nzSpan"],["nzWidth","100%","nzPlacement","right",3,"nzOnClose","nzVisible","nzTitle","nzExtra"],[4,"nzDrawerContent"]],template:function(r,s){r&1&&(M(0,"nz-row",0)(1,"nz-col",1)(2,"div",2),xe(3,Ab,1,3,"highcharts-chart",3),O()(),xe(4,Pb,2,1,"nz-col",4),O(),xe(5,Lb,3,1,"div",5)),r&2&&(W(),B("nzSpan",!s.isMobile()&&s.showSide?8:24),W(2),B("ngIf",s.showChart),W(),B("ngIf",!s.isMobile()&&s.showSide),W(),B("ngIf",s.isMobile()&&s.showSide))},dependencies:[cr,Gt,gn,mn,Ut,jt,iu],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{width:50%;background-color:#6495ed;color:#fff;display:flex;justify-content:center;align-items:center;cursor:move;padding:1em;transition:transform .2s ease-in-out}.container[_ngcontent-%COMP%]   .item.cdk-drag-preview[_ngcontent-%COMP%]{opacity:.8;background-color:orange;box-shadow:0 4px 8px #0000001a}"]})}}return o})();var Nb=[{path:"",data:{name:" "},children:[{path:"list",component:vu,data:{name:" ",permission:ti.ViewTasks},canActivate:[Wn],children:[{path:"task",component:To,data:{name:" ",permission:ti.ViewTasks},canActivate:[Wn],canDeactivate:[cs]}]},{path:"board",component:Ju,data:{name:" ",permission:ti.ViewProjectBoard},canActivate:[Wn],children:[{path:"task",component:To,data:{name:" ",permission:ti.ViewTasks},canActivate:[Wn],canDeactivate:[cs]}]},{path:"report",component:sp,data:{name:" ",permission:ti.ViewProjectBoard},canActivate:[Wn],children:[{path:"task",component:To,data:{name:" ",permission:ti.ViewTasks},canActivate:[Wn],canDeactivate:[cs]}]},{path:"sale",component:mu,data:{name:" "},canDeactivate:[cs]},{path:"customers",component:tp,data:{name:" "}}]}],op=(()=>{class o{static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275mod=Ui({type:o})}static{this.\u0275inj=ji({imports:[fl.forChild(Nb),fl]})}}return o})();var ap=Ih,Fb=Object.keys(ap).map(o=>ap[o]),cw=(()=>{class o{static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275mod=Ui({type:o})}static{this.\u0275inj=ji({providers:[{provide:Rh,useValue:Eh},{provide:kh,useValue:Fb}],imports:[op,Dh,tu,Lh,ou,Oh,su,$u,nu]})}}return o})();export{cw as TaskModule};
