import{a as zo}from"./chunk-ICQOAD57.js";import{a as Nx}from"./chunk-34L3VTGA.js";import{a as Lx}from"./chunk-COVKA2NU.js";import{a as Qd,b as Jd}from"./chunk-2EKTRE4X.js";import{a as iu}from"./chunk-H24IXQUR.js";import{b as Zd,c as vr,d as tu,f as eu}from"./chunk-TFSPKEVB.js";import{a as Pn}from"./chunk-CXD6RW2A.js";import{a as Hi,d as Si,e as so,j as ti,k as oo,l as ao,n as Ge,q as sr,r as zd,s as or,t as Id,u as Td,v as ar}from"./chunk-62EMLTDR.js";import{a as xr}from"./chunk-MXNMPF3F.js";import{$a as Ui,$c as vo,A as cl,Aa as jr,Ab as gl,B as Yn,Ba as Ur,Bb as lr,Bc as po,C as _d,Ca as $t,Cb as on,Cc as fo,D as Me,Da as ct,Db as lo,Dc as fr,E as se,Ea as Ae,Eb as kd,Ec as Vd,F as _e,Fa as te,Fb as Ei,Fc as mr,G as Gi,Ga as Jn,Gb as _l,Gc as qd,H as Wr,Ha as Pe,Hb as $r,Hc as Wd,Ia as Oe,Ib as co,Ic as Gd,J as zt,Ja as Le,Jb as Kr,Jc as jd,K as It,Ka as Hr,Kb as cr,Kc as un,L as Ys,La as fl,Lb as Te,Lc as pn,M as Ii,Ma as pe,Mc as Ue,N as ji,Na as bi,Nb as Ed,Nc as He,O as rn,Oa as ml,Ob as Rd,Oc as mo,Pb as Ri,Pc as fn,Qa as ne,Qb as je,Qc as gr,R as ze,Ra as eo,Rb as di,Rc as mn,S as Zn,Sa as ue,Sb as ui,Sc as gn,Ta as Qt,Tb as Md,Tc as Ud,U as vd,Ub as Ad,V as hl,Va as bd,W as xd,X as sn,Xa as io,Xb as ho,Y as Zs,Ya as Xr,Yb as Pd,Z as j,Za as Sd,Zb as hr,Zc as go,_ as Ct,_a as Cd,_c as _o,a as ce,ac as pi,ad as Hd,b as zi,ba as An,bb as wd,bd as xo,c as ld,ca as yd,cb as hi,cc as ve,d as cd,da as dl,db as We,dc as fi,e as Xs,ea as ul,eb as no,ec as an,f as Pt,fa as Qs,fb as tr,fc as uo,fd as yo,g as Mn,ga as yt,gb as ro,gc as ft,gd as bo,h as Wi,ha as pl,hb as er,hc as dr,hd as So,i as ie,ia as H,ib as Dd,ic as ur,id as Co,j as hd,ja as Qn,jc as ln,jd as wo,k as al,ka as Js,kb as ir,kc as Od,l as dd,lc as Ld,ld as _n,mc as cn,md as Xd,n as ud,na as to,nc as hn,nd as _r,od as vn,pc as Nd,pd as $d,q as pd,qc as Fd,qd as xn,r as fd,ra as T,rc as mi,rd as yn,s as $s,sa as A,sc as pr,sd as bn,ta as _t,tc as dn,td as Sn,u as md,ua as Ce,uc as Bd,ud as Kd,v as ll,va as Ie,vb as Ti,w as gd,wa as At,wb as nr,xa as bt,xb as ki,xd as Do,ya as at,yb as rr,yd as Yd,z as Ks,za as Gr}from"./chunk-ALEK3DEW.js";var lu=cd((Cr,es)=>{"use strict";(function(){var a,s="4.17.21",l=200,i="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",r="Expected a function",o="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",p=500,x="__lodash_placeholder__",I=1,P=2,et=4,Z=1,M=2,K=1,B=2,E=4,z=8,O=16,D=32,L=64,V=128,X=256,$=512,rt=30,Q="...",nt=800,m=16,b=1,S=2,v=3,u=1/0,g=9007199254740991,y=17976931348623157e292,R=NaN,N=4294967295,q=N-1,J=N>>>1,F=[["ary",V],["bind",K],["bindKey",B],["curry",z],["curryRight",O],["flip",$],["partial",D],["partialRight",L],["rearg",X]],C="[object Arguments]",w="[object Array]",G="[object AsyncFunction]",W="[object Boolean]",it="[object Date]",ht="[object DOMException]",ot="[object Error]",mt="[object Function]",vt="[object GeneratorFunction]",gt="[object Map]",xt="[object Number]",kt="[object Null]",Tt="[object Object]",Nt="[object Promise]",Kt="[object Proxy]",Yt="[object RegExp]",Ft="[object Set]",ae="[object String]",xe="[object Symbol]",fe="[object Undefined]",Xe="[object WeakMap]",zr="[object WeakSet]",Mi="[object ArrayBuffer]",Ln="[object DataView]",Vo="[object Float32Array]",qo="[object Float64Array]",Wo="[object Int8Array]",Go="[object Int16Array]",jo="[object Int32Array]",Uo="[object Uint8Array]",Ho="[object Uint8ClampedArray]",Xo="[object Uint16Array]",$o="[object Uint32Array]",ip=/\b__p \+= '';/g,np=/\b(__p \+=) '' \+/g,rp=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Al=/&(?:amp|lt|gt|quot|#39);/g,Pl=/[&<>"']/g,sp=RegExp(Al.source),op=RegExp(Pl.source),ap=/<%-([\s\S]+?)%>/g,lp=/<%([\s\S]+?)%>/g,Ol=/<%=([\s\S]+?)%>/g,cp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,hp=/^\w*$/,dp=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ko=/[\\^$.*+?()[\]{}|]/g,up=RegExp(Ko.source),Yo=/^\s+/,pp=/\s/,fp=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,mp=/\{\n\/\* \[wrapped with (.+)\] \*/,gp=/,? & /,_p=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,vp=/[()=,{}\[\]\/\s]/,xp=/\\(\\)?/g,yp=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ll=/\w*$/,bp=/^[-+]0x[0-9a-f]+$/i,Sp=/^0b[01]+$/i,Cp=/^\[object .+?Constructor\]$/,wp=/^0o[0-7]+$/i,Dp=/^(?:0|[1-9]\d*)$/,zp=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ss=/($^)/,Ip=/['\n\r\u2028\u2029\\]/g,os="\\ud800-\\udfff",Tp="\\u0300-\\u036f",kp="\\ufe20-\\ufe2f",Ep="\\u20d0-\\u20ff",Nl=Tp+kp+Ep,Fl="\\u2700-\\u27bf",Bl="a-z\\xdf-\\xf6\\xf8-\\xff",Rp="\\xac\\xb1\\xd7\\xf7",Mp="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ap="\\u2000-\\u206f",Pp=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Vl="A-Z\\xc0-\\xd6\\xd8-\\xde",ql="\\ufe0e\\ufe0f",Wl=Rp+Mp+Ap+Pp,Zo="['\u2019]",Op="["+os+"]",Gl="["+Wl+"]",as="["+Nl+"]",jl="\\d+",Lp="["+Fl+"]",Ul="["+Bl+"]",Hl="[^"+os+Wl+jl+Fl+Bl+Vl+"]",Qo="\\ud83c[\\udffb-\\udfff]",Np="(?:"+as+"|"+Qo+")",Xl="[^"+os+"]",Jo="(?:\\ud83c[\\udde6-\\uddff]){2}",ta="[\\ud800-\\udbff][\\udc00-\\udfff]",Nn="["+Vl+"]",$l="\\u200d",Kl="(?:"+Ul+"|"+Hl+")",Fp="(?:"+Nn+"|"+Hl+")",Yl="(?:"+Zo+"(?:d|ll|m|re|s|t|ve))?",Zl="(?:"+Zo+"(?:D|LL|M|RE|S|T|VE))?",Ql=Np+"?",Jl="["+ql+"]?",Bp="(?:"+$l+"(?:"+[Xl,Jo,ta].join("|")+")"+Jl+Ql+")*",Vp="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",qp="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",tc=Jl+Ql+Bp,Wp="(?:"+[Lp,Jo,ta].join("|")+")"+tc,Gp="(?:"+[Xl+as+"?",as,Jo,ta,Op].join("|")+")",jp=RegExp(Zo,"g"),Up=RegExp(as,"g"),ea=RegExp(Qo+"(?="+Qo+")|"+Gp+tc,"g"),Hp=RegExp([Nn+"?"+Ul+"+"+Yl+"(?="+[Gl,Nn,"$"].join("|")+")",Fp+"+"+Zl+"(?="+[Gl,Nn+Kl,"$"].join("|")+")",Nn+"?"+Kl+"+"+Yl,Nn+"+"+Zl,qp,Vp,jl,Wp].join("|"),"g"),Xp=RegExp("["+$l+os+Nl+ql+"]"),$p=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Kp=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Yp=-1,ee={};ee[Vo]=ee[qo]=ee[Wo]=ee[Go]=ee[jo]=ee[Uo]=ee[Ho]=ee[Xo]=ee[$o]=!0,ee[C]=ee[w]=ee[Mi]=ee[W]=ee[Ln]=ee[it]=ee[ot]=ee[mt]=ee[gt]=ee[xt]=ee[Tt]=ee[Yt]=ee[Ft]=ee[ae]=ee[Xe]=!1;var Jt={};Jt[C]=Jt[w]=Jt[Mi]=Jt[Ln]=Jt[W]=Jt[it]=Jt[Vo]=Jt[qo]=Jt[Wo]=Jt[Go]=Jt[jo]=Jt[gt]=Jt[xt]=Jt[Tt]=Jt[Yt]=Jt[Ft]=Jt[ae]=Jt[xe]=Jt[Uo]=Jt[Ho]=Jt[Xo]=Jt[$o]=!0,Jt[ot]=Jt[mt]=Jt[Xe]=!1;var Zp={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Qp={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Jp={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},tf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ef=parseFloat,nf=parseInt,ec=typeof global=="object"&&global&&global.Object===Object&&global,rf=typeof self=="object"&&self&&self.Object===Object&&self,ye=ec||rf||Function("return this")(),ia=typeof Cr=="object"&&Cr&&!Cr.nodeType&&Cr,Cn=ia&&typeof es=="object"&&es&&!es.nodeType&&es,ic=Cn&&Cn.exports===ia,na=ic&&ec.process,ii=function(){try{var Y=Cn&&Cn.require&&Cn.require("util").types;return Y||na&&na.binding&&na.binding("util")}catch{}}(),nc=ii&&ii.isArrayBuffer,rc=ii&&ii.isDate,sc=ii&&ii.isMap,oc=ii&&ii.isRegExp,ac=ii&&ii.isSet,lc=ii&&ii.isTypedArray;function $e(Y,lt,st){switch(st.length){case 0:return Y.call(lt);case 1:return Y.call(lt,st[0]);case 2:return Y.call(lt,st[0],st[1]);case 3:return Y.call(lt,st[0],st[1],st[2])}return Y.apply(lt,st)}function sf(Y,lt,st,wt){for(var Ot=-1,Ut=Y==null?0:Y.length;++Ot<Ut;){var me=Y[Ot];lt(wt,me,st(me),Y)}return wt}function ni(Y,lt){for(var st=-1,wt=Y==null?0:Y.length;++st<wt&&lt(Y[st],st,Y)!==!1;);return Y}function of(Y,lt){for(var st=Y==null?0:Y.length;st--&&lt(Y[st],st,Y)!==!1;);return Y}function cc(Y,lt){for(var st=-1,wt=Y==null?0:Y.length;++st<wt;)if(!lt(Y[st],st,Y))return!1;return!0}function Xi(Y,lt){for(var st=-1,wt=Y==null?0:Y.length,Ot=0,Ut=[];++st<wt;){var me=Y[st];lt(me,st,Y)&&(Ut[Ot++]=me)}return Ut}function ls(Y,lt){var st=Y==null?0:Y.length;return!!st&&Fn(Y,lt,0)>-1}function ra(Y,lt,st){for(var wt=-1,Ot=Y==null?0:Y.length;++wt<Ot;)if(st(lt,Y[wt]))return!0;return!1}function re(Y,lt){for(var st=-1,wt=Y==null?0:Y.length,Ot=Array(wt);++st<wt;)Ot[st]=lt(Y[st],st,Y);return Ot}function $i(Y,lt){for(var st=-1,wt=lt.length,Ot=Y.length;++st<wt;)Y[Ot+st]=lt[st];return Y}function sa(Y,lt,st,wt){var Ot=-1,Ut=Y==null?0:Y.length;for(wt&&Ut&&(st=Y[++Ot]);++Ot<Ut;)st=lt(st,Y[Ot],Ot,Y);return st}function af(Y,lt,st,wt){var Ot=Y==null?0:Y.length;for(wt&&Ot&&(st=Y[--Ot]);Ot--;)st=lt(st,Y[Ot],Ot,Y);return st}function oa(Y,lt){for(var st=-1,wt=Y==null?0:Y.length;++st<wt;)if(lt(Y[st],st,Y))return!0;return!1}var lf=aa("length");function cf(Y){return Y.split("")}function hf(Y){return Y.match(_p)||[]}function hc(Y,lt,st){var wt;return st(Y,function(Ot,Ut,me){if(lt(Ot,Ut,me))return wt=Ut,!1}),wt}function cs(Y,lt,st,wt){for(var Ot=Y.length,Ut=st+(wt?1:-1);wt?Ut--:++Ut<Ot;)if(lt(Y[Ut],Ut,Y))return Ut;return-1}function Fn(Y,lt,st){return lt===lt?Sf(Y,lt,st):cs(Y,dc,st)}function df(Y,lt,st,wt){for(var Ot=st-1,Ut=Y.length;++Ot<Ut;)if(wt(Y[Ot],lt))return Ot;return-1}function dc(Y){return Y!==Y}function uc(Y,lt){var st=Y==null?0:Y.length;return st?ca(Y,lt)/st:R}function aa(Y){return function(lt){return lt==null?a:lt[Y]}}function la(Y){return function(lt){return Y==null?a:Y[lt]}}function pc(Y,lt,st,wt,Ot){return Ot(Y,function(Ut,me,Zt){st=wt?(wt=!1,Ut):lt(st,Ut,me,Zt)}),st}function uf(Y,lt){var st=Y.length;for(Y.sort(lt);st--;)Y[st]=Y[st].value;return Y}function ca(Y,lt){for(var st,wt=-1,Ot=Y.length;++wt<Ot;){var Ut=lt(Y[wt]);Ut!==a&&(st=st===a?Ut:st+Ut)}return st}function ha(Y,lt){for(var st=-1,wt=Array(Y);++st<Y;)wt[st]=lt(st);return wt}function pf(Y,lt){return re(lt,function(st){return[st,Y[st]]})}function fc(Y){return Y&&Y.slice(0,vc(Y)+1).replace(Yo,"")}function Ke(Y){return function(lt){return Y(lt)}}function da(Y,lt){return re(lt,function(st){return Y[st]})}function Ir(Y,lt){return Y.has(lt)}function mc(Y,lt){for(var st=-1,wt=Y.length;++st<wt&&Fn(lt,Y[st],0)>-1;);return st}function gc(Y,lt){for(var st=Y.length;st--&&Fn(lt,Y[st],0)>-1;);return st}function ff(Y,lt){for(var st=Y.length,wt=0;st--;)Y[st]===lt&&++wt;return wt}var mf=la(Zp),gf=la(Qp);function _f(Y){return"\\"+tf[Y]}function vf(Y,lt){return Y==null?a:Y[lt]}function Bn(Y){return Xp.test(Y)}function xf(Y){return $p.test(Y)}function yf(Y){for(var lt,st=[];!(lt=Y.next()).done;)st.push(lt.value);return st}function ua(Y){var lt=-1,st=Array(Y.size);return Y.forEach(function(wt,Ot){st[++lt]=[Ot,wt]}),st}function _c(Y,lt){return function(st){return Y(lt(st))}}function Ki(Y,lt){for(var st=-1,wt=Y.length,Ot=0,Ut=[];++st<wt;){var me=Y[st];(me===lt||me===x)&&(Y[st]=x,Ut[Ot++]=st)}return Ut}function hs(Y){var lt=-1,st=Array(Y.size);return Y.forEach(function(wt){st[++lt]=wt}),st}function bf(Y){var lt=-1,st=Array(Y.size);return Y.forEach(function(wt){st[++lt]=[wt,wt]}),st}function Sf(Y,lt,st){for(var wt=st-1,Ot=Y.length;++wt<Ot;)if(Y[wt]===lt)return wt;return-1}function Cf(Y,lt,st){for(var wt=st+1;wt--;)if(Y[wt]===lt)return wt;return wt}function Vn(Y){return Bn(Y)?Df(Y):lf(Y)}function _i(Y){return Bn(Y)?zf(Y):cf(Y)}function vc(Y){for(var lt=Y.length;lt--&&pp.test(Y.charAt(lt)););return lt}var wf=la(Jp);function Df(Y){for(var lt=ea.lastIndex=0;ea.test(Y);)++lt;return lt}function zf(Y){return Y.match(ea)||[]}function If(Y){return Y.match(Hp)||[]}var Tf=function Y(lt){lt=lt==null?ye:Yi.defaults(ye.Object(),lt,Yi.pick(ye,Kp));var st=lt.Array,wt=lt.Date,Ot=lt.Error,Ut=lt.Function,me=lt.Math,Zt=lt.Object,pa=lt.RegExp,kf=lt.String,ri=lt.TypeError,ds=st.prototype,Ef=Ut.prototype,qn=Zt.prototype,us=lt["__core-js_shared__"],ps=Ef.toString,Xt=qn.hasOwnProperty,Rf=0,xc=function(){var t=/[^.]+$/.exec(us&&us.keys&&us.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),fs=qn.toString,Mf=ps.call(Zt),Af=ye._,Pf=pa("^"+ps.call(Xt).replace(Ko,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ms=ic?lt.Buffer:a,Zi=lt.Symbol,gs=lt.Uint8Array,yc=ms?ms.allocUnsafe:a,_s=_c(Zt.getPrototypeOf,Zt),bc=Zt.create,Sc=qn.propertyIsEnumerable,vs=ds.splice,Cc=Zi?Zi.isConcatSpreadable:a,Tr=Zi?Zi.iterator:a,wn=Zi?Zi.toStringTag:a,xs=function(){try{var t=kn(Zt,"defineProperty");return t({},"",{}),t}catch{}}(),Of=lt.clearTimeout!==ye.clearTimeout&&lt.clearTimeout,Lf=wt&&wt.now!==ye.Date.now&&wt.now,Nf=lt.setTimeout!==ye.setTimeout&&lt.setTimeout,ys=me.ceil,bs=me.floor,fa=Zt.getOwnPropertySymbols,Ff=ms?ms.isBuffer:a,wc=lt.isFinite,Bf=ds.join,Vf=_c(Zt.keys,Zt),ge=me.max,we=me.min,qf=wt.now,Wf=lt.parseInt,Dc=me.random,Gf=ds.reverse,ma=kn(lt,"DataView"),kr=kn(lt,"Map"),ga=kn(lt,"Promise"),Wn=kn(lt,"Set"),Er=kn(lt,"WeakMap"),Rr=kn(Zt,"create"),Ss=Er&&new Er,Gn={},jf=En(ma),Uf=En(kr),Hf=En(ga),Xf=En(Wn),$f=En(Er),Cs=Zi?Zi.prototype:a,Mr=Cs?Cs.valueOf:a,zc=Cs?Cs.toString:a;function f(t){if(le(t)&&!Lt(t)&&!(t instanceof Gt)){if(t instanceof si)return t;if(Xt.call(t,"__wrapped__"))return Ih(t)}return new si(t)}var jn=function(){function t(){}return function(e){if(!oe(e))return{};if(bc)return bc(e);t.prototype=e;var n=new t;return t.prototype=a,n}}();function ws(){}function si(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=a}f.templateSettings={escape:ap,evaluate:lp,interpolate:Ol,variable:"",imports:{_:f}},f.prototype=ws.prototype,f.prototype.constructor=f,si.prototype=jn(ws.prototype),si.prototype.constructor=si;function Gt(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=N,this.__views__=[]}function Kf(){var t=new Gt(this.__wrapped__);return t.__actions__=Fe(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Fe(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Fe(this.__views__),t}function Yf(){if(this.__filtered__){var t=new Gt(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Zf(){var t=this.__wrapped__.value(),e=this.__dir__,n=Lt(t),c=e<0,d=n?t.length:0,_=cg(0,d,this.__views__),k=_.start,U=_.end,tt=U-k,dt=c?U:k-1,ut=this.__iteratees__,pt=ut.length,St=0,Dt=we(tt,this.__takeCount__);if(!n||!c&&d==tt&&Dt==tt)return Yc(t,this.__actions__);var Rt=[];t:for(;tt--&&St<Dt;){dt+=e;for(var Vt=-1,Mt=t[dt];++Vt<pt;){var Wt=ut[Vt],jt=Wt.iteratee,Qe=Wt.type,Re=jt(Mt);if(Qe==S)Mt=Re;else if(!Re){if(Qe==b)continue t;break t}}Rt[St++]=Mt}return Rt}Gt.prototype=jn(ws.prototype),Gt.prototype.constructor=Gt;function Dn(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var c=t[e];this.set(c[0],c[1])}}function Qf(){this.__data__=Rr?Rr(null):{},this.size=0}function Jf(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function tm(t){var e=this.__data__;if(Rr){var n=e[t];return n===h?a:n}return Xt.call(e,t)?e[t]:a}function em(t){var e=this.__data__;return Rr?e[t]!==a:Xt.call(e,t)}function im(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Rr&&e===a?h:e,this}Dn.prototype.clear=Qf,Dn.prototype.delete=Jf,Dn.prototype.get=tm,Dn.prototype.has=em,Dn.prototype.set=im;function Ai(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var c=t[e];this.set(c[0],c[1])}}function nm(){this.__data__=[],this.size=0}function rm(t){var e=this.__data__,n=Ds(e,t);if(n<0)return!1;var c=e.length-1;return n==c?e.pop():vs.call(e,n,1),--this.size,!0}function sm(t){var e=this.__data__,n=Ds(e,t);return n<0?a:e[n][1]}function om(t){return Ds(this.__data__,t)>-1}function am(t,e){var n=this.__data__,c=Ds(n,t);return c<0?(++this.size,n.push([t,e])):n[c][1]=e,this}Ai.prototype.clear=nm,Ai.prototype.delete=rm,Ai.prototype.get=sm,Ai.prototype.has=om,Ai.prototype.set=am;function Pi(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var c=t[e];this.set(c[0],c[1])}}function lm(){this.size=0,this.__data__={hash:new Dn,map:new(kr||Ai),string:new Dn}}function cm(t){var e=Ns(this,t).delete(t);return this.size-=e?1:0,e}function hm(t){return Ns(this,t).get(t)}function dm(t){return Ns(this,t).has(t)}function um(t,e){var n=Ns(this,t),c=n.size;return n.set(t,e),this.size+=n.size==c?0:1,this}Pi.prototype.clear=lm,Pi.prototype.delete=cm,Pi.prototype.get=hm,Pi.prototype.has=dm,Pi.prototype.set=um;function zn(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Pi;++e<n;)this.add(t[e])}function pm(t){return this.__data__.set(t,h),this}function fm(t){return this.__data__.has(t)}zn.prototype.add=zn.prototype.push=pm,zn.prototype.has=fm;function vi(t){var e=this.__data__=new Ai(t);this.size=e.size}function mm(){this.__data__=new Ai,this.size=0}function gm(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function _m(t){return this.__data__.get(t)}function vm(t){return this.__data__.has(t)}function xm(t,e){var n=this.__data__;if(n instanceof Ai){var c=n.__data__;if(!kr||c.length<l-1)return c.push([t,e]),this.size=++n.size,this;n=this.__data__=new Pi(c)}return n.set(t,e),this.size=n.size,this}vi.prototype.clear=mm,vi.prototype.delete=gm,vi.prototype.get=_m,vi.prototype.has=vm,vi.prototype.set=xm;function Ic(t,e){var n=Lt(t),c=!n&&Rn(t),d=!n&&!c&&nn(t),_=!n&&!c&&!d&&$n(t),k=n||c||d||_,U=k?ha(t.length,kf):[],tt=U.length;for(var dt in t)(e||Xt.call(t,dt))&&!(k&&(dt=="length"||d&&(dt=="offset"||dt=="parent")||_&&(dt=="buffer"||dt=="byteLength"||dt=="byteOffset")||Fi(dt,tt)))&&U.push(dt);return U}function Tc(t){var e=t.length;return e?t[Ia(0,e-1)]:a}function ym(t,e){return Fs(Fe(t),In(e,0,t.length))}function bm(t){return Fs(Fe(t))}function _a(t,e,n){(n!==a&&!xi(t[e],n)||n===a&&!(e in t))&&Oi(t,e,n)}function Ar(t,e,n){var c=t[e];(!(Xt.call(t,e)&&xi(c,n))||n===a&&!(e in t))&&Oi(t,e,n)}function Ds(t,e){for(var n=t.length;n--;)if(xi(t[n][0],e))return n;return-1}function Sm(t,e,n,c){return Qi(t,function(d,_,k){e(c,d,n(d),k)}),c}function kc(t,e){return t&&wi(e,be(e),t)}function Cm(t,e){return t&&wi(e,Ve(e),t)}function Oi(t,e,n){e=="__proto__"&&xs?xs(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function va(t,e){for(var n=-1,c=e.length,d=st(c),_=t==null;++n<c;)d[n]=_?a:Qa(t,e[n]);return d}function In(t,e,n){return t===t&&(n!==a&&(t=t<=n?t:n),e!==a&&(t=t>=e?t:e)),t}function oi(t,e,n,c,d,_){var k,U=e&I,tt=e&P,dt=e&et;if(n&&(k=d?n(t,c,d,_):n(t)),k!==a)return k;if(!oe(t))return t;var ut=Lt(t);if(ut){if(k=dg(t),!U)return Fe(t,k)}else{var pt=De(t),St=pt==mt||pt==vt;if(nn(t))return Jc(t,U);if(pt==Tt||pt==C||St&&!d){if(k=tt||St?{}:vh(t),!U)return tt?tg(t,Cm(k,t)):Jm(t,kc(k,t))}else{if(!Jt[pt])return d?t:{};k=ug(t,pt,U)}}_||(_=new vi);var Dt=_.get(t);if(Dt)return Dt;_.set(t,k),Xh(t)?t.forEach(function(Mt){k.add(oi(Mt,e,n,Mt,t,_))}):Uh(t)&&t.forEach(function(Mt,Wt){k.set(Wt,oi(Mt,e,n,Wt,t,_))});var Rt=dt?tt?Fa:Na:tt?Ve:be,Vt=ut?a:Rt(t);return ni(Vt||t,function(Mt,Wt){Vt&&(Wt=Mt,Mt=t[Wt]),Ar(k,Wt,oi(Mt,e,n,Wt,t,_))}),k}function wm(t){var e=be(t);return function(n){return Ec(n,t,e)}}function Ec(t,e,n){var c=n.length;if(t==null)return!c;for(t=Zt(t);c--;){var d=n[c],_=e[d],k=t[d];if(k===a&&!(d in t)||!_(k))return!1}return!0}function Rc(t,e,n){if(typeof t!="function")throw new ri(r);return Vr(function(){t.apply(a,n)},e)}function Pr(t,e,n,c){var d=-1,_=ls,k=!0,U=t.length,tt=[],dt=e.length;if(!U)return tt;n&&(e=re(e,Ke(n))),c?(_=ra,k=!1):e.length>=l&&(_=Ir,k=!1,e=new zn(e));t:for(;++d<U;){var ut=t[d],pt=n==null?ut:n(ut);if(ut=c||ut!==0?ut:0,k&&pt===pt){for(var St=dt;St--;)if(e[St]===pt)continue t;tt.push(ut)}else _(e,pt,c)||tt.push(ut)}return tt}var Qi=rh(Ci),Mc=rh(ya,!0);function Dm(t,e){var n=!0;return Qi(t,function(c,d,_){return n=!!e(c,d,_),n}),n}function zs(t,e,n){for(var c=-1,d=t.length;++c<d;){var _=t[c],k=e(_);if(k!=null&&(U===a?k===k&&!Ze(k):n(k,U)))var U=k,tt=_}return tt}function zm(t,e,n,c){var d=t.length;for(n=Bt(n),n<0&&(n=-n>d?0:d+n),c=c===a||c>d?d:Bt(c),c<0&&(c+=d),c=n>c?0:Kh(c);n<c;)t[n++]=e;return t}function Ac(t,e){var n=[];return Qi(t,function(c,d,_){e(c,d,_)&&n.push(c)}),n}function Se(t,e,n,c,d){var _=-1,k=t.length;for(n||(n=fg),d||(d=[]);++_<k;){var U=t[_];e>0&&n(U)?e>1?Se(U,e-1,n,c,d):$i(d,U):c||(d[d.length]=U)}return d}var xa=sh(),Pc=sh(!0);function Ci(t,e){return t&&xa(t,e,be)}function ya(t,e){return t&&Pc(t,e,be)}function Is(t,e){return Xi(e,function(n){return Bi(t[n])})}function Tn(t,e){e=tn(e,t);for(var n=0,c=e.length;t!=null&&n<c;)t=t[Di(e[n++])];return n&&n==c?t:a}function Oc(t,e,n){var c=e(t);return Lt(t)?c:$i(c,n(t))}function ke(t){return t==null?t===a?fe:kt:wn&&wn in Zt(t)?lg(t):bg(t)}function ba(t,e){return t>e}function Im(t,e){return t!=null&&Xt.call(t,e)}function Tm(t,e){return t!=null&&e in Zt(t)}function km(t,e,n){return t>=we(e,n)&&t<ge(e,n)}function Sa(t,e,n){for(var c=n?ra:ls,d=t[0].length,_=t.length,k=_,U=st(_),tt=1/0,dt=[];k--;){var ut=t[k];k&&e&&(ut=re(ut,Ke(e))),tt=we(ut.length,tt),U[k]=!n&&(e||d>=120&&ut.length>=120)?new zn(k&&ut):a}ut=t[0];var pt=-1,St=U[0];t:for(;++pt<d&&dt.length<tt;){var Dt=ut[pt],Rt=e?e(Dt):Dt;if(Dt=n||Dt!==0?Dt:0,!(St?Ir(St,Rt):c(dt,Rt,n))){for(k=_;--k;){var Vt=U[k];if(!(Vt?Ir(Vt,Rt):c(t[k],Rt,n)))continue t}St&&St.push(Rt),dt.push(Dt)}}return dt}function Em(t,e,n,c){return Ci(t,function(d,_,k){e(c,n(d),_,k)}),c}function Or(t,e,n){e=tn(e,t),t=Sh(t,e);var c=t==null?t:t[Di(li(e))];return c==null?a:$e(c,t,n)}function Lc(t){return le(t)&&ke(t)==C}function Rm(t){return le(t)&&ke(t)==Mi}function Mm(t){return le(t)&&ke(t)==it}function Lr(t,e,n,c,d){return t===e?!0:t==null||e==null||!le(t)&&!le(e)?t!==t&&e!==e:Am(t,e,n,c,Lr,d)}function Am(t,e,n,c,d,_){var k=Lt(t),U=Lt(e),tt=k?w:De(t),dt=U?w:De(e);tt=tt==C?Tt:tt,dt=dt==C?Tt:dt;var ut=tt==Tt,pt=dt==Tt,St=tt==dt;if(St&&nn(t)){if(!nn(e))return!1;k=!0,ut=!1}if(St&&!ut)return _||(_=new vi),k||$n(t)?mh(t,e,n,c,d,_):og(t,e,tt,n,c,d,_);if(!(n&Z)){var Dt=ut&&Xt.call(t,"__wrapped__"),Rt=pt&&Xt.call(e,"__wrapped__");if(Dt||Rt){var Vt=Dt?t.value():t,Mt=Rt?e.value():e;return _||(_=new vi),d(Vt,Mt,n,c,_)}}return St?(_||(_=new vi),ag(t,e,n,c,d,_)):!1}function Pm(t){return le(t)&&De(t)==gt}function Ca(t,e,n,c){var d=n.length,_=d,k=!c;if(t==null)return!_;for(t=Zt(t);d--;){var U=n[d];if(k&&U[2]?U[1]!==t[U[0]]:!(U[0]in t))return!1}for(;++d<_;){U=n[d];var tt=U[0],dt=t[tt],ut=U[1];if(k&&U[2]){if(dt===a&&!(tt in t))return!1}else{var pt=new vi;if(c)var St=c(dt,ut,tt,t,e,pt);if(!(St===a?Lr(ut,dt,Z|M,c,pt):St))return!1}}return!0}function Nc(t){if(!oe(t)||gg(t))return!1;var e=Bi(t)?Pf:Cp;return e.test(En(t))}function Om(t){return le(t)&&ke(t)==Yt}function Lm(t){return le(t)&&De(t)==Ft}function Nm(t){return le(t)&&js(t.length)&&!!ee[ke(t)]}function Fc(t){return typeof t=="function"?t:t==null?qe:typeof t=="object"?Lt(t)?qc(t[0],t[1]):Vc(t):od(t)}function wa(t){if(!Br(t))return Vf(t);var e=[];for(var n in Zt(t))Xt.call(t,n)&&n!="constructor"&&e.push(n);return e}function Fm(t){if(!oe(t))return yg(t);var e=Br(t),n=[];for(var c in t)c=="constructor"&&(e||!Xt.call(t,c))||n.push(c);return n}function Da(t,e){return t<e}function Bc(t,e){var n=-1,c=Be(t)?st(t.length):[];return Qi(t,function(d,_,k){c[++n]=e(d,_,k)}),c}function Vc(t){var e=Va(t);return e.length==1&&e[0][2]?yh(e[0][0],e[0][1]):function(n){return n===t||Ca(n,t,e)}}function qc(t,e){return Wa(t)&&xh(e)?yh(Di(t),e):function(n){var c=Qa(n,t);return c===a&&c===e?Ja(n,t):Lr(e,c,Z|M)}}function Ts(t,e,n,c,d){t!==e&&xa(e,function(_,k){if(d||(d=new vi),oe(_))Bm(t,e,k,n,Ts,c,d);else{var U=c?c(ja(t,k),_,k+"",t,e,d):a;U===a&&(U=_),_a(t,k,U)}},Ve)}function Bm(t,e,n,c,d,_,k){var U=ja(t,n),tt=ja(e,n),dt=k.get(tt);if(dt){_a(t,n,dt);return}var ut=_?_(U,tt,n+"",t,e,k):a,pt=ut===a;if(pt){var St=Lt(tt),Dt=!St&&nn(tt),Rt=!St&&!Dt&&$n(tt);ut=tt,St||Dt||Rt?Lt(U)?ut=U:he(U)?ut=Fe(U):Dt?(pt=!1,ut=Jc(tt,!0)):Rt?(pt=!1,ut=th(tt,!0)):ut=[]:qr(tt)||Rn(tt)?(ut=U,Rn(U)?ut=Yh(U):(!oe(U)||Bi(U))&&(ut=vh(tt))):pt=!1}pt&&(k.set(tt,ut),d(ut,tt,c,_,k),k.delete(tt)),_a(t,n,ut)}function Wc(t,e){var n=t.length;if(n)return e+=e<0?n:0,Fi(e,n)?t[e]:a}function Gc(t,e,n){e.length?e=re(e,function(_){return Lt(_)?function(k){return Tn(k,_.length===1?_[0]:_)}:_}):e=[qe];var c=-1;e=re(e,Ke(Et()));var d=Bc(t,function(_,k,U){var tt=re(e,function(dt){return dt(_)});return{criteria:tt,index:++c,value:_}});return uf(d,function(_,k){return Qm(_,k,n)})}function Vm(t,e){return jc(t,e,function(n,c){return Ja(t,c)})}function jc(t,e,n){for(var c=-1,d=e.length,_={};++c<d;){var k=e[c],U=Tn(t,k);n(U,k)&&Nr(_,tn(k,t),U)}return _}function qm(t){return function(e){return Tn(e,t)}}function za(t,e,n,c){var d=c?df:Fn,_=-1,k=e.length,U=t;for(t===e&&(e=Fe(e)),n&&(U=re(t,Ke(n)));++_<k;)for(var tt=0,dt=e[_],ut=n?n(dt):dt;(tt=d(U,ut,tt,c))>-1;)U!==t&&vs.call(U,tt,1),vs.call(t,tt,1);return t}function Uc(t,e){for(var n=t?e.length:0,c=n-1;n--;){var d=e[n];if(n==c||d!==_){var _=d;Fi(d)?vs.call(t,d,1):Ea(t,d)}}return t}function Ia(t,e){return t+bs(Dc()*(e-t+1))}function Wm(t,e,n,c){for(var d=-1,_=ge(ys((e-t)/(n||1)),0),k=st(_);_--;)k[c?_:++d]=t,t+=n;return k}function Ta(t,e){var n="";if(!t||e<1||e>g)return n;do e%2&&(n+=t),e=bs(e/2),e&&(t+=t);while(e);return n}function qt(t,e){return Ua(bh(t,e,qe),t+"")}function Gm(t){return Tc(Kn(t))}function jm(t,e){var n=Kn(t);return Fs(n,In(e,0,n.length))}function Nr(t,e,n,c){if(!oe(t))return t;e=tn(e,t);for(var d=-1,_=e.length,k=_-1,U=t;U!=null&&++d<_;){var tt=Di(e[d]),dt=n;if(tt==="__proto__"||tt==="constructor"||tt==="prototype")return t;if(d!=k){var ut=U[tt];dt=c?c(ut,tt,U):a,dt===a&&(dt=oe(ut)?ut:Fi(e[d+1])?[]:{})}Ar(U,tt,dt),U=U[tt]}return t}var Hc=Ss?function(t,e){return Ss.set(t,e),t}:qe,Um=xs?function(t,e){return xs(t,"toString",{configurable:!0,enumerable:!1,value:el(e),writable:!0})}:qe;function Hm(t){return Fs(Kn(t))}function ai(t,e,n){var c=-1,d=t.length;e<0&&(e=-e>d?0:d+e),n=n>d?d:n,n<0&&(n+=d),d=e>n?0:n-e>>>0,e>>>=0;for(var _=st(d);++c<d;)_[c]=t[c+e];return _}function Xm(t,e){var n;return Qi(t,function(c,d,_){return n=e(c,d,_),!n}),!!n}function ks(t,e,n){var c=0,d=t==null?c:t.length;if(typeof e=="number"&&e===e&&d<=J){for(;c<d;){var _=c+d>>>1,k=t[_];k!==null&&!Ze(k)&&(n?k<=e:k<e)?c=_+1:d=_}return d}return ka(t,e,qe,n)}function ka(t,e,n,c){var d=0,_=t==null?0:t.length;if(_===0)return 0;e=n(e);for(var k=e!==e,U=e===null,tt=Ze(e),dt=e===a;d<_;){var ut=bs((d+_)/2),pt=n(t[ut]),St=pt!==a,Dt=pt===null,Rt=pt===pt,Vt=Ze(pt);if(k)var Mt=c||Rt;else dt?Mt=Rt&&(c||St):U?Mt=Rt&&St&&(c||!Dt):tt?Mt=Rt&&St&&!Dt&&(c||!Vt):Dt||Vt?Mt=!1:Mt=c?pt<=e:pt<e;Mt?d=ut+1:_=ut}return we(_,q)}function Xc(t,e){for(var n=-1,c=t.length,d=0,_=[];++n<c;){var k=t[n],U=e?e(k):k;if(!n||!xi(U,tt)){var tt=U;_[d++]=k===0?0:k}}return _}function $c(t){return typeof t=="number"?t:Ze(t)?R:+t}function Ye(t){if(typeof t=="string")return t;if(Lt(t))return re(t,Ye)+"";if(Ze(t))return zc?zc.call(t):"";var e=t+"";return e=="0"&&1/t==-u?"-0":e}function Ji(t,e,n){var c=-1,d=ls,_=t.length,k=!0,U=[],tt=U;if(n)k=!1,d=ra;else if(_>=l){var dt=e?null:rg(t);if(dt)return hs(dt);k=!1,d=Ir,tt=new zn}else tt=e?[]:U;t:for(;++c<_;){var ut=t[c],pt=e?e(ut):ut;if(ut=n||ut!==0?ut:0,k&&pt===pt){for(var St=tt.length;St--;)if(tt[St]===pt)continue t;e&&tt.push(pt),U.push(ut)}else d(tt,pt,n)||(tt!==U&&tt.push(pt),U.push(ut))}return U}function Ea(t,e){return e=tn(e,t),t=Sh(t,e),t==null||delete t[Di(li(e))]}function Kc(t,e,n,c){return Nr(t,e,n(Tn(t,e)),c)}function Es(t,e,n,c){for(var d=t.length,_=c?d:-1;(c?_--:++_<d)&&e(t[_],_,t););return n?ai(t,c?0:_,c?_+1:d):ai(t,c?_+1:0,c?d:_)}function Yc(t,e){var n=t;return n instanceof Gt&&(n=n.value()),sa(e,function(c,d){return d.func.apply(d.thisArg,$i([c],d.args))},n)}function Ra(t,e,n){var c=t.length;if(c<2)return c?Ji(t[0]):[];for(var d=-1,_=st(c);++d<c;)for(var k=t[d],U=-1;++U<c;)U!=d&&(_[d]=Pr(_[d]||k,t[U],e,n));return Ji(Se(_,1),e,n)}function Zc(t,e,n){for(var c=-1,d=t.length,_=e.length,k={};++c<d;){var U=c<_?e[c]:a;n(k,t[c],U)}return k}function Ma(t){return he(t)?t:[]}function Aa(t){return typeof t=="function"?t:qe}function tn(t,e){return Lt(t)?t:Wa(t,e)?[t]:zh(Ht(t))}var $m=qt;function en(t,e,n){var c=t.length;return n=n===a?c:n,!e&&n>=c?t:ai(t,e,n)}var Qc=Of||function(t){return ye.clearTimeout(t)};function Jc(t,e){if(e)return t.slice();var n=t.length,c=yc?yc(n):new t.constructor(n);return t.copy(c),c}function Pa(t){var e=new t.constructor(t.byteLength);return new gs(e).set(new gs(t)),e}function Km(t,e){var n=e?Pa(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function Ym(t){var e=new t.constructor(t.source,Ll.exec(t));return e.lastIndex=t.lastIndex,e}function Zm(t){return Mr?Zt(Mr.call(t)):{}}function th(t,e){var n=e?Pa(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function eh(t,e){if(t!==e){var n=t!==a,c=t===null,d=t===t,_=Ze(t),k=e!==a,U=e===null,tt=e===e,dt=Ze(e);if(!U&&!dt&&!_&&t>e||_&&k&&tt&&!U&&!dt||c&&k&&tt||!n&&tt||!d)return 1;if(!c&&!_&&!dt&&t<e||dt&&n&&d&&!c&&!_||U&&n&&d||!k&&d||!tt)return-1}return 0}function Qm(t,e,n){for(var c=-1,d=t.criteria,_=e.criteria,k=d.length,U=n.length;++c<k;){var tt=eh(d[c],_[c]);if(tt){if(c>=U)return tt;var dt=n[c];return tt*(dt=="desc"?-1:1)}}return t.index-e.index}function ih(t,e,n,c){for(var d=-1,_=t.length,k=n.length,U=-1,tt=e.length,dt=ge(_-k,0),ut=st(tt+dt),pt=!c;++U<tt;)ut[U]=e[U];for(;++d<k;)(pt||d<_)&&(ut[n[d]]=t[d]);for(;dt--;)ut[U++]=t[d++];return ut}function nh(t,e,n,c){for(var d=-1,_=t.length,k=-1,U=n.length,tt=-1,dt=e.length,ut=ge(_-U,0),pt=st(ut+dt),St=!c;++d<ut;)pt[d]=t[d];for(var Dt=d;++tt<dt;)pt[Dt+tt]=e[tt];for(;++k<U;)(St||d<_)&&(pt[Dt+n[k]]=t[d++]);return pt}function Fe(t,e){var n=-1,c=t.length;for(e||(e=st(c));++n<c;)e[n]=t[n];return e}function wi(t,e,n,c){var d=!n;n||(n={});for(var _=-1,k=e.length;++_<k;){var U=e[_],tt=c?c(n[U],t[U],U,n,t):a;tt===a&&(tt=t[U]),d?Oi(n,U,tt):Ar(n,U,tt)}return n}function Jm(t,e){return wi(t,qa(t),e)}function tg(t,e){return wi(t,gh(t),e)}function Rs(t,e){return function(n,c){var d=Lt(n)?sf:Sm,_=e?e():{};return d(n,t,Et(c,2),_)}}function Un(t){return qt(function(e,n){var c=-1,d=n.length,_=d>1?n[d-1]:a,k=d>2?n[2]:a;for(_=t.length>3&&typeof _=="function"?(d--,_):a,k&&Ee(n[0],n[1],k)&&(_=d<3?a:_,d=1),e=Zt(e);++c<d;){var U=n[c];U&&t(e,U,c,_)}return e})}function rh(t,e){return function(n,c){if(n==null)return n;if(!Be(n))return t(n,c);for(var d=n.length,_=e?d:-1,k=Zt(n);(e?_--:++_<d)&&c(k[_],_,k)!==!1;);return n}}function sh(t){return function(e,n,c){for(var d=-1,_=Zt(e),k=c(e),U=k.length;U--;){var tt=k[t?U:++d];if(n(_[tt],tt,_)===!1)break}return e}}function eg(t,e,n){var c=e&K,d=Fr(t);function _(){var k=this&&this!==ye&&this instanceof _?d:t;return k.apply(c?n:this,arguments)}return _}function oh(t){return function(e){e=Ht(e);var n=Bn(e)?_i(e):a,c=n?n[0]:e.charAt(0),d=n?en(n,1).join(""):e.slice(1);return c[t]()+d}}function Hn(t){return function(e){return sa(rd(nd(e).replace(jp,"")),t,"")}}function Fr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=jn(t.prototype),c=t.apply(n,e);return oe(c)?c:n}}function ig(t,e,n){var c=Fr(t);function d(){for(var _=arguments.length,k=st(_),U=_,tt=Xn(d);U--;)k[U]=arguments[U];var dt=_<3&&k[0]!==tt&&k[_-1]!==tt?[]:Ki(k,tt);if(_-=dt.length,_<n)return dh(t,e,Ms,d.placeholder,a,k,dt,a,a,n-_);var ut=this&&this!==ye&&this instanceof d?c:t;return $e(ut,this,k)}return d}function ah(t){return function(e,n,c){var d=Zt(e);if(!Be(e)){var _=Et(n,3);e=be(e),n=function(U){return _(d[U],U,d)}}var k=t(e,n,c);return k>-1?d[_?e[k]:k]:a}}function lh(t){return Ni(function(e){var n=e.length,c=n,d=si.prototype.thru;for(t&&e.reverse();c--;){var _=e[c];if(typeof _!="function")throw new ri(r);if(d&&!k&&Ls(_)=="wrapper")var k=new si([],!0)}for(c=k?c:n;++c<n;){_=e[c];var U=Ls(_),tt=U=="wrapper"?Ba(_):a;tt&&Ga(tt[0])&&tt[1]==(V|z|D|X)&&!tt[4].length&&tt[9]==1?k=k[Ls(tt[0])].apply(k,tt[3]):k=_.length==1&&Ga(_)?k[U]():k.thru(_)}return function(){var dt=arguments,ut=dt[0];if(k&&dt.length==1&&Lt(ut))return k.plant(ut).value();for(var pt=0,St=n?e[pt].apply(this,dt):ut;++pt<n;)St=e[pt].call(this,St);return St}})}function Ms(t,e,n,c,d,_,k,U,tt,dt){var ut=e&V,pt=e&K,St=e&B,Dt=e&(z|O),Rt=e&$,Vt=St?a:Fr(t);function Mt(){for(var Wt=arguments.length,jt=st(Wt),Qe=Wt;Qe--;)jt[Qe]=arguments[Qe];if(Dt)var Re=Xn(Mt),Je=ff(jt,Re);if(c&&(jt=ih(jt,c,d,Dt)),_&&(jt=nh(jt,_,k,Dt)),Wt-=Je,Dt&&Wt<dt){var de=Ki(jt,Re);return dh(t,e,Ms,Mt.placeholder,n,jt,de,U,tt,dt-Wt)}var yi=pt?n:this,qi=St?yi[t]:t;return Wt=jt.length,U?jt=Sg(jt,U):Rt&&Wt>1&&jt.reverse(),ut&&tt<Wt&&(jt.length=tt),this&&this!==ye&&this instanceof Mt&&(qi=Vt||Fr(qi)),qi.apply(yi,jt)}return Mt}function ch(t,e){return function(n,c){return Em(n,t,e(c),{})}}function As(t,e){return function(n,c){var d;if(n===a&&c===a)return e;if(n!==a&&(d=n),c!==a){if(d===a)return c;typeof n=="string"||typeof c=="string"?(n=Ye(n),c=Ye(c)):(n=$c(n),c=$c(c)),d=t(n,c)}return d}}function Oa(t){return Ni(function(e){return e=re(e,Ke(Et())),qt(function(n){var c=this;return t(e,function(d){return $e(d,c,n)})})})}function Ps(t,e){e=e===a?" ":Ye(e);var n=e.length;if(n<2)return n?Ta(e,t):e;var c=Ta(e,ys(t/Vn(e)));return Bn(e)?en(_i(c),0,t).join(""):c.slice(0,t)}function ng(t,e,n,c){var d=e&K,_=Fr(t);function k(){for(var U=-1,tt=arguments.length,dt=-1,ut=c.length,pt=st(ut+tt),St=this&&this!==ye&&this instanceof k?_:t;++dt<ut;)pt[dt]=c[dt];for(;tt--;)pt[dt++]=arguments[++U];return $e(St,d?n:this,pt)}return k}function hh(t){return function(e,n,c){return c&&typeof c!="number"&&Ee(e,n,c)&&(n=c=a),e=Vi(e),n===a?(n=e,e=0):n=Vi(n),c=c===a?e<n?1:-1:Vi(c),Wm(e,n,c,t)}}function Os(t){return function(e,n){return typeof e=="string"&&typeof n=="string"||(e=ci(e),n=ci(n)),t(e,n)}}function dh(t,e,n,c,d,_,k,U,tt,dt){var ut=e&z,pt=ut?k:a,St=ut?a:k,Dt=ut?_:a,Rt=ut?a:_;e|=ut?D:L,e&=~(ut?L:D),e&E||(e&=~(K|B));var Vt=[t,e,d,Dt,pt,Rt,St,U,tt,dt],Mt=n.apply(a,Vt);return Ga(t)&&Ch(Mt,Vt),Mt.placeholder=c,wh(Mt,t,e)}function La(t){var e=me[t];return function(n,c){if(n=ci(n),c=c==null?0:we(Bt(c),292),c&&wc(n)){var d=(Ht(n)+"e").split("e"),_=e(d[0]+"e"+(+d[1]+c));return d=(Ht(_)+"e").split("e"),+(d[0]+"e"+(+d[1]-c))}return e(n)}}var rg=Wn&&1/hs(new Wn([,-0]))[1]==u?function(t){return new Wn(t)}:rl;function uh(t){return function(e){var n=De(e);return n==gt?ua(e):n==Ft?bf(e):pf(e,t(e))}}function Li(t,e,n,c,d,_,k,U){var tt=e&B;if(!tt&&typeof t!="function")throw new ri(r);var dt=c?c.length:0;if(dt||(e&=~(D|L),c=d=a),k=k===a?k:ge(Bt(k),0),U=U===a?U:Bt(U),dt-=d?d.length:0,e&L){var ut=c,pt=d;c=d=a}var St=tt?a:Ba(t),Dt=[t,e,n,c,d,ut,pt,_,k,U];if(St&&xg(Dt,St),t=Dt[0],e=Dt[1],n=Dt[2],c=Dt[3],d=Dt[4],U=Dt[9]=Dt[9]===a?tt?0:t.length:ge(Dt[9]-dt,0),!U&&e&(z|O)&&(e&=~(z|O)),!e||e==K)var Rt=eg(t,e,n);else e==z||e==O?Rt=ig(t,e,U):(e==D||e==(K|D))&&!d.length?Rt=ng(t,e,n,c):Rt=Ms.apply(a,Dt);var Vt=St?Hc:Ch;return wh(Vt(Rt,Dt),t,e)}function ph(t,e,n,c){return t===a||xi(t,qn[n])&&!Xt.call(c,n)?e:t}function fh(t,e,n,c,d,_){return oe(t)&&oe(e)&&(_.set(e,t),Ts(t,e,a,fh,_),_.delete(e)),t}function sg(t){return qr(t)?a:t}function mh(t,e,n,c,d,_){var k=n&Z,U=t.length,tt=e.length;if(U!=tt&&!(k&&tt>U))return!1;var dt=_.get(t),ut=_.get(e);if(dt&&ut)return dt==e&&ut==t;var pt=-1,St=!0,Dt=n&M?new zn:a;for(_.set(t,e),_.set(e,t);++pt<U;){var Rt=t[pt],Vt=e[pt];if(c)var Mt=k?c(Vt,Rt,pt,e,t,_):c(Rt,Vt,pt,t,e,_);if(Mt!==a){if(Mt)continue;St=!1;break}if(Dt){if(!oa(e,function(Wt,jt){if(!Ir(Dt,jt)&&(Rt===Wt||d(Rt,Wt,n,c,_)))return Dt.push(jt)})){St=!1;break}}else if(!(Rt===Vt||d(Rt,Vt,n,c,_))){St=!1;break}}return _.delete(t),_.delete(e),St}function og(t,e,n,c,d,_,k){switch(n){case Ln:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Mi:return!(t.byteLength!=e.byteLength||!_(new gs(t),new gs(e)));case W:case it:case xt:return xi(+t,+e);case ot:return t.name==e.name&&t.message==e.message;case Yt:case ae:return t==e+"";case gt:var U=ua;case Ft:var tt=c&Z;if(U||(U=hs),t.size!=e.size&&!tt)return!1;var dt=k.get(t);if(dt)return dt==e;c|=M,k.set(t,e);var ut=mh(U(t),U(e),c,d,_,k);return k.delete(t),ut;case xe:if(Mr)return Mr.call(t)==Mr.call(e)}return!1}function ag(t,e,n,c,d,_){var k=n&Z,U=Na(t),tt=U.length,dt=Na(e),ut=dt.length;if(tt!=ut&&!k)return!1;for(var pt=tt;pt--;){var St=U[pt];if(!(k?St in e:Xt.call(e,St)))return!1}var Dt=_.get(t),Rt=_.get(e);if(Dt&&Rt)return Dt==e&&Rt==t;var Vt=!0;_.set(t,e),_.set(e,t);for(var Mt=k;++pt<tt;){St=U[pt];var Wt=t[St],jt=e[St];if(c)var Qe=k?c(jt,Wt,St,e,t,_):c(Wt,jt,St,t,e,_);if(!(Qe===a?Wt===jt||d(Wt,jt,n,c,_):Qe)){Vt=!1;break}Mt||(Mt=St=="constructor")}if(Vt&&!Mt){var Re=t.constructor,Je=e.constructor;Re!=Je&&"constructor"in t&&"constructor"in e&&!(typeof Re=="function"&&Re instanceof Re&&typeof Je=="function"&&Je instanceof Je)&&(Vt=!1)}return _.delete(t),_.delete(e),Vt}function Ni(t){return Ua(bh(t,a,Eh),t+"")}function Na(t){return Oc(t,be,qa)}function Fa(t){return Oc(t,Ve,gh)}var Ba=Ss?function(t){return Ss.get(t)}:rl;function Ls(t){for(var e=t.name+"",n=Gn[e],c=Xt.call(Gn,e)?n.length:0;c--;){var d=n[c],_=d.func;if(_==null||_==t)return d.name}return e}function Xn(t){var e=Xt.call(f,"placeholder")?f:t;return e.placeholder}function Et(){var t=f.iteratee||il;return t=t===il?Fc:t,arguments.length?t(arguments[0],arguments[1]):t}function Ns(t,e){var n=t.__data__;return mg(e)?n[typeof e=="string"?"string":"hash"]:n.map}function Va(t){for(var e=be(t),n=e.length;n--;){var c=e[n],d=t[c];e[n]=[c,d,xh(d)]}return e}function kn(t,e){var n=vf(t,e);return Nc(n)?n:a}function lg(t){var e=Xt.call(t,wn),n=t[wn];try{t[wn]=a;var c=!0}catch{}var d=fs.call(t);return c&&(e?t[wn]=n:delete t[wn]),d}var qa=fa?function(t){return t==null?[]:(t=Zt(t),Xi(fa(t),function(e){return Sc.call(t,e)}))}:sl,gh=fa?function(t){for(var e=[];t;)$i(e,qa(t)),t=_s(t);return e}:sl,De=ke;(ma&&De(new ma(new ArrayBuffer(1)))!=Ln||kr&&De(new kr)!=gt||ga&&De(ga.resolve())!=Nt||Wn&&De(new Wn)!=Ft||Er&&De(new Er)!=Xe)&&(De=function(t){var e=ke(t),n=e==Tt?t.constructor:a,c=n?En(n):"";if(c)switch(c){case jf:return Ln;case Uf:return gt;case Hf:return Nt;case Xf:return Ft;case $f:return Xe}return e});function cg(t,e,n){for(var c=-1,d=n.length;++c<d;){var _=n[c],k=_.size;switch(_.type){case"drop":t+=k;break;case"dropRight":e-=k;break;case"take":e=we(e,t+k);break;case"takeRight":t=ge(t,e-k);break}}return{start:t,end:e}}function hg(t){var e=t.match(mp);return e?e[1].split(gp):[]}function _h(t,e,n){e=tn(e,t);for(var c=-1,d=e.length,_=!1;++c<d;){var k=Di(e[c]);if(!(_=t!=null&&n(t,k)))break;t=t[k]}return _||++c!=d?_:(d=t==null?0:t.length,!!d&&js(d)&&Fi(k,d)&&(Lt(t)||Rn(t)))}function dg(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&Xt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function vh(t){return typeof t.constructor=="function"&&!Br(t)?jn(_s(t)):{}}function ug(t,e,n){var c=t.constructor;switch(e){case Mi:return Pa(t);case W:case it:return new c(+t);case Ln:return Km(t,n);case Vo:case qo:case Wo:case Go:case jo:case Uo:case Ho:case Xo:case $o:return th(t,n);case gt:return new c;case xt:case ae:return new c(t);case Yt:return Ym(t);case Ft:return new c;case xe:return Zm(t)}}function pg(t,e){var n=e.length;if(!n)return t;var c=n-1;return e[c]=(n>1?"& ":"")+e[c],e=e.join(n>2?", ":" "),t.replace(fp,`{
/* [wrapped with `+e+`] */
`)}function fg(t){return Lt(t)||Rn(t)||!!(Cc&&t&&t[Cc])}function Fi(t,e){var n=typeof t;return e=e??g,!!e&&(n=="number"||n!="symbol"&&Dp.test(t))&&t>-1&&t%1==0&&t<e}function Ee(t,e,n){if(!oe(n))return!1;var c=typeof e;return(c=="number"?Be(n)&&Fi(e,n.length):c=="string"&&e in n)?xi(n[e],t):!1}function Wa(t,e){if(Lt(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Ze(t)?!0:hp.test(t)||!cp.test(t)||e!=null&&t in Zt(e)}function mg(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Ga(t){var e=Ls(t),n=f[e];if(typeof n!="function"||!(e in Gt.prototype))return!1;if(t===n)return!0;var c=Ba(n);return!!c&&t===c[0]}function gg(t){return!!xc&&xc in t}var _g=us?Bi:ol;function Br(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||qn;return t===n}function xh(t){return t===t&&!oe(t)}function yh(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==a||t in Zt(n))}}function vg(t){var e=Ws(t,function(c){return n.size===p&&n.clear(),c}),n=e.cache;return e}function xg(t,e){var n=t[1],c=e[1],d=n|c,_=d<(K|B|V),k=c==V&&n==z||c==V&&n==X&&t[7].length<=e[8]||c==(V|X)&&e[7].length<=e[8]&&n==z;if(!(_||k))return t;c&K&&(t[2]=e[2],d|=n&K?0:E);var U=e[3];if(U){var tt=t[3];t[3]=tt?ih(tt,U,e[4]):U,t[4]=tt?Ki(t[3],x):e[4]}return U=e[5],U&&(tt=t[5],t[5]=tt?nh(tt,U,e[6]):U,t[6]=tt?Ki(t[5],x):e[6]),U=e[7],U&&(t[7]=U),c&V&&(t[8]=t[8]==null?e[8]:we(t[8],e[8])),t[9]==null&&(t[9]=e[9]),t[0]=e[0],t[1]=d,t}function yg(t){var e=[];if(t!=null)for(var n in Zt(t))e.push(n);return e}function bg(t){return fs.call(t)}function bh(t,e,n){return e=ge(e===a?t.length-1:e,0),function(){for(var c=arguments,d=-1,_=ge(c.length-e,0),k=st(_);++d<_;)k[d]=c[e+d];d=-1;for(var U=st(e+1);++d<e;)U[d]=c[d];return U[e]=n(k),$e(t,this,U)}}function Sh(t,e){return e.length<2?t:Tn(t,ai(e,0,-1))}function Sg(t,e){for(var n=t.length,c=we(e.length,n),d=Fe(t);c--;){var _=e[c];t[c]=Fi(_,n)?d[_]:a}return t}function ja(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var Ch=Dh(Hc),Vr=Nf||function(t,e){return ye.setTimeout(t,e)},Ua=Dh(Um);function wh(t,e,n){var c=e+"";return Ua(t,pg(c,Cg(hg(c),n)))}function Dh(t){var e=0,n=0;return function(){var c=qf(),d=m-(c-n);if(n=c,d>0){if(++e>=nt)return arguments[0]}else e=0;return t.apply(a,arguments)}}function Fs(t,e){var n=-1,c=t.length,d=c-1;for(e=e===a?c:e;++n<e;){var _=Ia(n,d),k=t[_];t[_]=t[n],t[n]=k}return t.length=e,t}var zh=vg(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(dp,function(n,c,d,_){e.push(d?_.replace(xp,"$1"):c||n)}),e});function Di(t){if(typeof t=="string"||Ze(t))return t;var e=t+"";return e=="0"&&1/t==-u?"-0":e}function En(t){if(t!=null){try{return ps.call(t)}catch{}try{return t+""}catch{}}return""}function Cg(t,e){return ni(F,function(n){var c="_."+n[0];e&n[1]&&!ls(t,c)&&t.push(c)}),t.sort()}function Ih(t){if(t instanceof Gt)return t.clone();var e=new si(t.__wrapped__,t.__chain__);return e.__actions__=Fe(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function wg(t,e,n){(n?Ee(t,e,n):e===a)?e=1:e=ge(Bt(e),0);var c=t==null?0:t.length;if(!c||e<1)return[];for(var d=0,_=0,k=st(ys(c/e));d<c;)k[_++]=ai(t,d,d+=e);return k}function Dg(t){for(var e=-1,n=t==null?0:t.length,c=0,d=[];++e<n;){var _=t[e];_&&(d[c++]=_)}return d}function zg(){var t=arguments.length;if(!t)return[];for(var e=st(t-1),n=arguments[0],c=t;c--;)e[c-1]=arguments[c];return $i(Lt(n)?Fe(n):[n],Se(e,1))}var Ig=qt(function(t,e){return he(t)?Pr(t,Se(e,1,he,!0)):[]}),Tg=qt(function(t,e){var n=li(e);return he(n)&&(n=a),he(t)?Pr(t,Se(e,1,he,!0),Et(n,2)):[]}),kg=qt(function(t,e){var n=li(e);return he(n)&&(n=a),he(t)?Pr(t,Se(e,1,he,!0),a,n):[]});function Eg(t,e,n){var c=t==null?0:t.length;return c?(e=n||e===a?1:Bt(e),ai(t,e<0?0:e,c)):[]}function Rg(t,e,n){var c=t==null?0:t.length;return c?(e=n||e===a?1:Bt(e),e=c-e,ai(t,0,e<0?0:e)):[]}function Mg(t,e){return t&&t.length?Es(t,Et(e,3),!0,!0):[]}function Ag(t,e){return t&&t.length?Es(t,Et(e,3),!0):[]}function Pg(t,e,n,c){var d=t==null?0:t.length;return d?(n&&typeof n!="number"&&Ee(t,e,n)&&(n=0,c=d),zm(t,e,n,c)):[]}function Th(t,e,n){var c=t==null?0:t.length;if(!c)return-1;var d=n==null?0:Bt(n);return d<0&&(d=ge(c+d,0)),cs(t,Et(e,3),d)}function kh(t,e,n){var c=t==null?0:t.length;if(!c)return-1;var d=c-1;return n!==a&&(d=Bt(n),d=n<0?ge(c+d,0):we(d,c-1)),cs(t,Et(e,3),d,!0)}function Eh(t){var e=t==null?0:t.length;return e?Se(t,1):[]}function Og(t){var e=t==null?0:t.length;return e?Se(t,u):[]}function Lg(t,e){var n=t==null?0:t.length;return n?(e=e===a?1:Bt(e),Se(t,e)):[]}function Ng(t){for(var e=-1,n=t==null?0:t.length,c={};++e<n;){var d=t[e];c[d[0]]=d[1]}return c}function Rh(t){return t&&t.length?t[0]:a}function Fg(t,e,n){var c=t==null?0:t.length;if(!c)return-1;var d=n==null?0:Bt(n);return d<0&&(d=ge(c+d,0)),Fn(t,e,d)}function Bg(t){var e=t==null?0:t.length;return e?ai(t,0,-1):[]}var Vg=qt(function(t){var e=re(t,Ma);return e.length&&e[0]===t[0]?Sa(e):[]}),qg=qt(function(t){var e=li(t),n=re(t,Ma);return e===li(n)?e=a:n.pop(),n.length&&n[0]===t[0]?Sa(n,Et(e,2)):[]}),Wg=qt(function(t){var e=li(t),n=re(t,Ma);return e=typeof e=="function"?e:a,e&&n.pop(),n.length&&n[0]===t[0]?Sa(n,a,e):[]});function Gg(t,e){return t==null?"":Bf.call(t,e)}function li(t){var e=t==null?0:t.length;return e?t[e-1]:a}function jg(t,e,n){var c=t==null?0:t.length;if(!c)return-1;var d=c;return n!==a&&(d=Bt(n),d=d<0?ge(c+d,0):we(d,c-1)),e===e?Cf(t,e,d):cs(t,dc,d,!0)}function Ug(t,e){return t&&t.length?Wc(t,Bt(e)):a}var Hg=qt(Mh);function Mh(t,e){return t&&t.length&&e&&e.length?za(t,e):t}function Xg(t,e,n){return t&&t.length&&e&&e.length?za(t,e,Et(n,2)):t}function $g(t,e,n){return t&&t.length&&e&&e.length?za(t,e,a,n):t}var Kg=Ni(function(t,e){var n=t==null?0:t.length,c=va(t,e);return Uc(t,re(e,function(d){return Fi(d,n)?+d:d}).sort(eh)),c});function Yg(t,e){var n=[];if(!(t&&t.length))return n;var c=-1,d=[],_=t.length;for(e=Et(e,3);++c<_;){var k=t[c];e(k,c,t)&&(n.push(k),d.push(c))}return Uc(t,d),n}function Ha(t){return t==null?t:Gf.call(t)}function Zg(t,e,n){var c=t==null?0:t.length;return c?(n&&typeof n!="number"&&Ee(t,e,n)?(e=0,n=c):(e=e==null?0:Bt(e),n=n===a?c:Bt(n)),ai(t,e,n)):[]}function Qg(t,e){return ks(t,e)}function Jg(t,e,n){return ka(t,e,Et(n,2))}function t_(t,e){var n=t==null?0:t.length;if(n){var c=ks(t,e);if(c<n&&xi(t[c],e))return c}return-1}function e_(t,e){return ks(t,e,!0)}function i_(t,e,n){return ka(t,e,Et(n,2),!0)}function n_(t,e){var n=t==null?0:t.length;if(n){var c=ks(t,e,!0)-1;if(xi(t[c],e))return c}return-1}function r_(t){return t&&t.length?Xc(t):[]}function s_(t,e){return t&&t.length?Xc(t,Et(e,2)):[]}function o_(t){var e=t==null?0:t.length;return e?ai(t,1,e):[]}function a_(t,e,n){return t&&t.length?(e=n||e===a?1:Bt(e),ai(t,0,e<0?0:e)):[]}function l_(t,e,n){var c=t==null?0:t.length;return c?(e=n||e===a?1:Bt(e),e=c-e,ai(t,e<0?0:e,c)):[]}function c_(t,e){return t&&t.length?Es(t,Et(e,3),!1,!0):[]}function h_(t,e){return t&&t.length?Es(t,Et(e,3)):[]}var d_=qt(function(t){return Ji(Se(t,1,he,!0))}),u_=qt(function(t){var e=li(t);return he(e)&&(e=a),Ji(Se(t,1,he,!0),Et(e,2))}),p_=qt(function(t){var e=li(t);return e=typeof e=="function"?e:a,Ji(Se(t,1,he,!0),a,e)});function f_(t){return t&&t.length?Ji(t):[]}function m_(t,e){return t&&t.length?Ji(t,Et(e,2)):[]}function g_(t,e){return e=typeof e=="function"?e:a,t&&t.length?Ji(t,a,e):[]}function Xa(t){if(!(t&&t.length))return[];var e=0;return t=Xi(t,function(n){if(he(n))return e=ge(n.length,e),!0}),ha(e,function(n){return re(t,aa(n))})}function Ah(t,e){if(!(t&&t.length))return[];var n=Xa(t);return e==null?n:re(n,function(c){return $e(e,a,c)})}var __=qt(function(t,e){return he(t)?Pr(t,e):[]}),v_=qt(function(t){return Ra(Xi(t,he))}),x_=qt(function(t){var e=li(t);return he(e)&&(e=a),Ra(Xi(t,he),Et(e,2))}),y_=qt(function(t){var e=li(t);return e=typeof e=="function"?e:a,Ra(Xi(t,he),a,e)}),b_=qt(Xa);function S_(t,e){return Zc(t||[],e||[],Ar)}function C_(t,e){return Zc(t||[],e||[],Nr)}var w_=qt(function(t){var e=t.length,n=e>1?t[e-1]:a;return n=typeof n=="function"?(t.pop(),n):a,Ah(t,n)});function Ph(t){var e=f(t);return e.__chain__=!0,e}function D_(t,e){return e(t),t}function Bs(t,e){return e(t)}var z_=Ni(function(t){var e=t.length,n=e?t[0]:0,c=this.__wrapped__,d=function(_){return va(_,t)};return e>1||this.__actions__.length||!(c instanceof Gt)||!Fi(n)?this.thru(d):(c=c.slice(n,+n+(e?1:0)),c.__actions__.push({func:Bs,args:[d],thisArg:a}),new si(c,this.__chain__).thru(function(_){return e&&!_.length&&_.push(a),_}))});function I_(){return Ph(this)}function T_(){return new si(this.value(),this.__chain__)}function k_(){this.__values__===a&&(this.__values__=$h(this.value()));var t=this.__index__>=this.__values__.length,e=t?a:this.__values__[this.__index__++];return{done:t,value:e}}function E_(){return this}function R_(t){for(var e,n=this;n instanceof ws;){var c=Ih(n);c.__index__=0,c.__values__=a,e?d.__wrapped__=c:e=c;var d=c;n=n.__wrapped__}return d.__wrapped__=t,e}function M_(){var t=this.__wrapped__;if(t instanceof Gt){var e=t;return this.__actions__.length&&(e=new Gt(this)),e=e.reverse(),e.__actions__.push({func:Bs,args:[Ha],thisArg:a}),new si(e,this.__chain__)}return this.thru(Ha)}function A_(){return Yc(this.__wrapped__,this.__actions__)}var P_=Rs(function(t,e,n){Xt.call(t,n)?++t[n]:Oi(t,n,1)});function O_(t,e,n){var c=Lt(t)?cc:Dm;return n&&Ee(t,e,n)&&(e=a),c(t,Et(e,3))}function L_(t,e){var n=Lt(t)?Xi:Ac;return n(t,Et(e,3))}var N_=ah(Th),F_=ah(kh);function B_(t,e){return Se(Vs(t,e),1)}function V_(t,e){return Se(Vs(t,e),u)}function q_(t,e,n){return n=n===a?1:Bt(n),Se(Vs(t,e),n)}function Oh(t,e){var n=Lt(t)?ni:Qi;return n(t,Et(e,3))}function Lh(t,e){var n=Lt(t)?of:Mc;return n(t,Et(e,3))}var W_=Rs(function(t,e,n){Xt.call(t,n)?t[n].push(e):Oi(t,n,[e])});function G_(t,e,n,c){t=Be(t)?t:Kn(t),n=n&&!c?Bt(n):0;var d=t.length;return n<0&&(n=ge(d+n,0)),Us(t)?n<=d&&t.indexOf(e,n)>-1:!!d&&Fn(t,e,n)>-1}var j_=qt(function(t,e,n){var c=-1,d=typeof e=="function",_=Be(t)?st(t.length):[];return Qi(t,function(k){_[++c]=d?$e(e,k,n):Or(k,e,n)}),_}),U_=Rs(function(t,e,n){Oi(t,n,e)});function Vs(t,e){var n=Lt(t)?re:Bc;return n(t,Et(e,3))}function H_(t,e,n,c){return t==null?[]:(Lt(e)||(e=e==null?[]:[e]),n=c?a:n,Lt(n)||(n=n==null?[]:[n]),Gc(t,e,n))}var X_=Rs(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});function $_(t,e,n){var c=Lt(t)?sa:pc,d=arguments.length<3;return c(t,Et(e,4),n,d,Qi)}function K_(t,e,n){var c=Lt(t)?af:pc,d=arguments.length<3;return c(t,Et(e,4),n,d,Mc)}function Y_(t,e){var n=Lt(t)?Xi:Ac;return n(t,Gs(Et(e,3)))}function Z_(t){var e=Lt(t)?Tc:Gm;return e(t)}function Q_(t,e,n){(n?Ee(t,e,n):e===a)?e=1:e=Bt(e);var c=Lt(t)?ym:jm;return c(t,e)}function J_(t){var e=Lt(t)?bm:Hm;return e(t)}function t0(t){if(t==null)return 0;if(Be(t))return Us(t)?Vn(t):t.length;var e=De(t);return e==gt||e==Ft?t.size:wa(t).length}function e0(t,e,n){var c=Lt(t)?oa:Xm;return n&&Ee(t,e,n)&&(e=a),c(t,Et(e,3))}var i0=qt(function(t,e){if(t==null)return[];var n=e.length;return n>1&&Ee(t,e[0],e[1])?e=[]:n>2&&Ee(e[0],e[1],e[2])&&(e=[e[0]]),Gc(t,Se(e,1),[])}),qs=Lf||function(){return ye.Date.now()};function n0(t,e){if(typeof e!="function")throw new ri(r);return t=Bt(t),function(){if(--t<1)return e.apply(this,arguments)}}function Nh(t,e,n){return e=n?a:e,e=t&&e==null?t.length:e,Li(t,V,a,a,a,a,e)}function Fh(t,e){var n;if(typeof e!="function")throw new ri(r);return t=Bt(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=a),n}}var $a=qt(function(t,e,n){var c=K;if(n.length){var d=Ki(n,Xn($a));c|=D}return Li(t,c,e,n,d)}),Bh=qt(function(t,e,n){var c=K|B;if(n.length){var d=Ki(n,Xn(Bh));c|=D}return Li(e,c,t,n,d)});function Vh(t,e,n){e=n?a:e;var c=Li(t,z,a,a,a,a,a,e);return c.placeholder=Vh.placeholder,c}function qh(t,e,n){e=n?a:e;var c=Li(t,O,a,a,a,a,a,e);return c.placeholder=qh.placeholder,c}function Wh(t,e,n){var c,d,_,k,U,tt,dt=0,ut=!1,pt=!1,St=!0;if(typeof t!="function")throw new ri(r);e=ci(e)||0,oe(n)&&(ut=!!n.leading,pt="maxWait"in n,_=pt?ge(ci(n.maxWait)||0,e):_,St="trailing"in n?!!n.trailing:St);function Dt(de){var yi=c,qi=d;return c=d=a,dt=de,k=t.apply(qi,yi),k}function Rt(de){return dt=de,U=Vr(Wt,e),ut?Dt(de):k}function Vt(de){var yi=de-tt,qi=de-dt,ad=e-yi;return pt?we(ad,_-qi):ad}function Mt(de){var yi=de-tt,qi=de-dt;return tt===a||yi>=e||yi<0||pt&&qi>=_}function Wt(){var de=qs();if(Mt(de))return jt(de);U=Vr(Wt,Vt(de))}function jt(de){return U=a,St&&c?Dt(de):(c=d=a,k)}function Qe(){U!==a&&Qc(U),dt=0,c=tt=d=U=a}function Re(){return U===a?k:jt(qs())}function Je(){var de=qs(),yi=Mt(de);if(c=arguments,d=this,tt=de,yi){if(U===a)return Rt(tt);if(pt)return Qc(U),U=Vr(Wt,e),Dt(tt)}return U===a&&(U=Vr(Wt,e)),k}return Je.cancel=Qe,Je.flush=Re,Je}var r0=qt(function(t,e){return Rc(t,1,e)}),s0=qt(function(t,e,n){return Rc(t,ci(e)||0,n)});function o0(t){return Li(t,$)}function Ws(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new ri(r);var n=function(){var c=arguments,d=e?e.apply(this,c):c[0],_=n.cache;if(_.has(d))return _.get(d);var k=t.apply(this,c);return n.cache=_.set(d,k)||_,k};return n.cache=new(Ws.Cache||Pi),n}Ws.Cache=Pi;function Gs(t){if(typeof t!="function")throw new ri(r);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function a0(t){return Fh(2,t)}var l0=$m(function(t,e){e=e.length==1&&Lt(e[0])?re(e[0],Ke(Et())):re(Se(e,1),Ke(Et()));var n=e.length;return qt(function(c){for(var d=-1,_=we(c.length,n);++d<_;)c[d]=e[d].call(this,c[d]);return $e(t,this,c)})}),Ka=qt(function(t,e){var n=Ki(e,Xn(Ka));return Li(t,D,a,e,n)}),Gh=qt(function(t,e){var n=Ki(e,Xn(Gh));return Li(t,L,a,e,n)}),c0=Ni(function(t,e){return Li(t,X,a,a,a,e)});function h0(t,e){if(typeof t!="function")throw new ri(r);return e=e===a?e:Bt(e),qt(t,e)}function d0(t,e){if(typeof t!="function")throw new ri(r);return e=e==null?0:ge(Bt(e),0),qt(function(n){var c=n[e],d=en(n,0,e);return c&&$i(d,c),$e(t,this,d)})}function u0(t,e,n){var c=!0,d=!0;if(typeof t!="function")throw new ri(r);return oe(n)&&(c="leading"in n?!!n.leading:c,d="trailing"in n?!!n.trailing:d),Wh(t,e,{leading:c,maxWait:e,trailing:d})}function p0(t){return Nh(t,1)}function f0(t,e){return Ka(Aa(e),t)}function m0(){if(!arguments.length)return[];var t=arguments[0];return Lt(t)?t:[t]}function g0(t){return oi(t,et)}function _0(t,e){return e=typeof e=="function"?e:a,oi(t,et,e)}function v0(t){return oi(t,I|et)}function x0(t,e){return e=typeof e=="function"?e:a,oi(t,I|et,e)}function y0(t,e){return e==null||Ec(t,e,be(e))}function xi(t,e){return t===e||t!==t&&e!==e}var b0=Os(ba),S0=Os(function(t,e){return t>=e}),Rn=Lc(function(){return arguments}())?Lc:function(t){return le(t)&&Xt.call(t,"callee")&&!Sc.call(t,"callee")},Lt=st.isArray,C0=nc?Ke(nc):Rm;function Be(t){return t!=null&&js(t.length)&&!Bi(t)}function he(t){return le(t)&&Be(t)}function w0(t){return t===!0||t===!1||le(t)&&ke(t)==W}var nn=Ff||ol,D0=rc?Ke(rc):Mm;function z0(t){return le(t)&&t.nodeType===1&&!qr(t)}function I0(t){if(t==null)return!0;if(Be(t)&&(Lt(t)||typeof t=="string"||typeof t.splice=="function"||nn(t)||$n(t)||Rn(t)))return!t.length;var e=De(t);if(e==gt||e==Ft)return!t.size;if(Br(t))return!wa(t).length;for(var n in t)if(Xt.call(t,n))return!1;return!0}function T0(t,e){return Lr(t,e)}function k0(t,e,n){n=typeof n=="function"?n:a;var c=n?n(t,e):a;return c===a?Lr(t,e,a,n):!!c}function Ya(t){if(!le(t))return!1;var e=ke(t);return e==ot||e==ht||typeof t.message=="string"&&typeof t.name=="string"&&!qr(t)}function E0(t){return typeof t=="number"&&wc(t)}function Bi(t){if(!oe(t))return!1;var e=ke(t);return e==mt||e==vt||e==G||e==Kt}function jh(t){return typeof t=="number"&&t==Bt(t)}function js(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=g}function oe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function le(t){return t!=null&&typeof t=="object"}var Uh=sc?Ke(sc):Pm;function R0(t,e){return t===e||Ca(t,e,Va(e))}function M0(t,e,n){return n=typeof n=="function"?n:a,Ca(t,e,Va(e),n)}function A0(t){return Hh(t)&&t!=+t}function P0(t){if(_g(t))throw new Ot(i);return Nc(t)}function O0(t){return t===null}function L0(t){return t==null}function Hh(t){return typeof t=="number"||le(t)&&ke(t)==xt}function qr(t){if(!le(t)||ke(t)!=Tt)return!1;var e=_s(t);if(e===null)return!0;var n=Xt.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&ps.call(n)==Mf}var Za=oc?Ke(oc):Om;function N0(t){return jh(t)&&t>=-g&&t<=g}var Xh=ac?Ke(ac):Lm;function Us(t){return typeof t=="string"||!Lt(t)&&le(t)&&ke(t)==ae}function Ze(t){return typeof t=="symbol"||le(t)&&ke(t)==xe}var $n=lc?Ke(lc):Nm;function F0(t){return t===a}function B0(t){return le(t)&&De(t)==Xe}function V0(t){return le(t)&&ke(t)==zr}var q0=Os(Da),W0=Os(function(t,e){return t<=e});function $h(t){if(!t)return[];if(Be(t))return Us(t)?_i(t):Fe(t);if(Tr&&t[Tr])return yf(t[Tr]());var e=De(t),n=e==gt?ua:e==Ft?hs:Kn;return n(t)}function Vi(t){if(!t)return t===0?t:0;if(t=ci(t),t===u||t===-u){var e=t<0?-1:1;return e*y}return t===t?t:0}function Bt(t){var e=Vi(t),n=e%1;return e===e?n?e-n:e:0}function Kh(t){return t?In(Bt(t),0,N):0}function ci(t){if(typeof t=="number")return t;if(Ze(t))return R;if(oe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=oe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=fc(t);var n=Sp.test(t);return n||wp.test(t)?nf(t.slice(2),n?2:8):bp.test(t)?R:+t}function Yh(t){return wi(t,Ve(t))}function G0(t){return t?In(Bt(t),-g,g):t===0?t:0}function Ht(t){return t==null?"":Ye(t)}var j0=Un(function(t,e){if(Br(e)||Be(e)){wi(e,be(e),t);return}for(var n in e)Xt.call(e,n)&&Ar(t,n,e[n])}),Zh=Un(function(t,e){wi(e,Ve(e),t)}),Hs=Un(function(t,e,n,c){wi(e,Ve(e),t,c)}),U0=Un(function(t,e,n,c){wi(e,be(e),t,c)}),H0=Ni(va);function X0(t,e){var n=jn(t);return e==null?n:kc(n,e)}var $0=qt(function(t,e){t=Zt(t);var n=-1,c=e.length,d=c>2?e[2]:a;for(d&&Ee(e[0],e[1],d)&&(c=1);++n<c;)for(var _=e[n],k=Ve(_),U=-1,tt=k.length;++U<tt;){var dt=k[U],ut=t[dt];(ut===a||xi(ut,qn[dt])&&!Xt.call(t,dt))&&(t[dt]=_[dt])}return t}),K0=qt(function(t){return t.push(a,fh),$e(Qh,a,t)});function Y0(t,e){return hc(t,Et(e,3),Ci)}function Z0(t,e){return hc(t,Et(e,3),ya)}function Q0(t,e){return t==null?t:xa(t,Et(e,3),Ve)}function J0(t,e){return t==null?t:Pc(t,Et(e,3),Ve)}function tv(t,e){return t&&Ci(t,Et(e,3))}function ev(t,e){return t&&ya(t,Et(e,3))}function iv(t){return t==null?[]:Is(t,be(t))}function nv(t){return t==null?[]:Is(t,Ve(t))}function Qa(t,e,n){var c=t==null?a:Tn(t,e);return c===a?n:c}function rv(t,e){return t!=null&&_h(t,e,Im)}function Ja(t,e){return t!=null&&_h(t,e,Tm)}var sv=ch(function(t,e,n){e!=null&&typeof e.toString!="function"&&(e=fs.call(e)),t[e]=n},el(qe)),ov=ch(function(t,e,n){e!=null&&typeof e.toString!="function"&&(e=fs.call(e)),Xt.call(t,e)?t[e].push(n):t[e]=[n]},Et),av=qt(Or);function be(t){return Be(t)?Ic(t):wa(t)}function Ve(t){return Be(t)?Ic(t,!0):Fm(t)}function lv(t,e){var n={};return e=Et(e,3),Ci(t,function(c,d,_){Oi(n,e(c,d,_),c)}),n}function cv(t,e){var n={};return e=Et(e,3),Ci(t,function(c,d,_){Oi(n,d,e(c,d,_))}),n}var hv=Un(function(t,e,n){Ts(t,e,n)}),Qh=Un(function(t,e,n,c){Ts(t,e,n,c)}),dv=Ni(function(t,e){var n={};if(t==null)return n;var c=!1;e=re(e,function(_){return _=tn(_,t),c||(c=_.length>1),_}),wi(t,Fa(t),n),c&&(n=oi(n,I|P|et,sg));for(var d=e.length;d--;)Ea(n,e[d]);return n});function uv(t,e){return Jh(t,Gs(Et(e)))}var pv=Ni(function(t,e){return t==null?{}:Vm(t,e)});function Jh(t,e){if(t==null)return{};var n=re(Fa(t),function(c){return[c]});return e=Et(e),jc(t,n,function(c,d){return e(c,d[0])})}function fv(t,e,n){e=tn(e,t);var c=-1,d=e.length;for(d||(d=1,t=a);++c<d;){var _=t==null?a:t[Di(e[c])];_===a&&(c=d,_=n),t=Bi(_)?_.call(t):_}return t}function mv(t,e,n){return t==null?t:Nr(t,e,n)}function gv(t,e,n,c){return c=typeof c=="function"?c:a,t==null?t:Nr(t,e,n,c)}var td=uh(be),ed=uh(Ve);function _v(t,e,n){var c=Lt(t),d=c||nn(t)||$n(t);if(e=Et(e,4),n==null){var _=t&&t.constructor;d?n=c?new _:[]:oe(t)?n=Bi(_)?jn(_s(t)):{}:n={}}return(d?ni:Ci)(t,function(k,U,tt){return e(n,k,U,tt)}),n}function vv(t,e){return t==null?!0:Ea(t,e)}function xv(t,e,n){return t==null?t:Kc(t,e,Aa(n))}function yv(t,e,n,c){return c=typeof c=="function"?c:a,t==null?t:Kc(t,e,Aa(n),c)}function Kn(t){return t==null?[]:da(t,be(t))}function bv(t){return t==null?[]:da(t,Ve(t))}function Sv(t,e,n){return n===a&&(n=e,e=a),n!==a&&(n=ci(n),n=n===n?n:0),e!==a&&(e=ci(e),e=e===e?e:0),In(ci(t),e,n)}function Cv(t,e,n){return e=Vi(e),n===a?(n=e,e=0):n=Vi(n),t=ci(t),km(t,e,n)}function wv(t,e,n){if(n&&typeof n!="boolean"&&Ee(t,e,n)&&(e=n=a),n===a&&(typeof e=="boolean"?(n=e,e=a):typeof t=="boolean"&&(n=t,t=a)),t===a&&e===a?(t=0,e=1):(t=Vi(t),e===a?(e=t,t=0):e=Vi(e)),t>e){var c=t;t=e,e=c}if(n||t%1||e%1){var d=Dc();return we(t+d*(e-t+ef("1e-"+((d+"").length-1))),e)}return Ia(t,e)}var Dv=Hn(function(t,e,n){return e=e.toLowerCase(),t+(n?id(e):e)});function id(t){return tl(Ht(t).toLowerCase())}function nd(t){return t=Ht(t),t&&t.replace(zp,mf).replace(Up,"")}function zv(t,e,n){t=Ht(t),e=Ye(e);var c=t.length;n=n===a?c:In(Bt(n),0,c);var d=n;return n-=e.length,n>=0&&t.slice(n,d)==e}function Iv(t){return t=Ht(t),t&&op.test(t)?t.replace(Pl,gf):t}function Tv(t){return t=Ht(t),t&&up.test(t)?t.replace(Ko,"\\$&"):t}var kv=Hn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Ev=Hn(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Rv=oh("toLowerCase");function Mv(t,e,n){t=Ht(t),e=Bt(e);var c=e?Vn(t):0;if(!e||c>=e)return t;var d=(e-c)/2;return Ps(bs(d),n)+t+Ps(ys(d),n)}function Av(t,e,n){t=Ht(t),e=Bt(e);var c=e?Vn(t):0;return e&&c<e?t+Ps(e-c,n):t}function Pv(t,e,n){t=Ht(t),e=Bt(e);var c=e?Vn(t):0;return e&&c<e?Ps(e-c,n)+t:t}function Ov(t,e,n){return n||e==null?e=0:e&&(e=+e),Wf(Ht(t).replace(Yo,""),e||0)}function Lv(t,e,n){return(n?Ee(t,e,n):e===a)?e=1:e=Bt(e),Ta(Ht(t),e)}function Nv(){var t=arguments,e=Ht(t[0]);return t.length<3?e:e.replace(t[1],t[2])}var Fv=Hn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});function Bv(t,e,n){return n&&typeof n!="number"&&Ee(t,e,n)&&(e=n=a),n=n===a?N:n>>>0,n?(t=Ht(t),t&&(typeof e=="string"||e!=null&&!Za(e))&&(e=Ye(e),!e&&Bn(t))?en(_i(t),0,n):t.split(e,n)):[]}var Vv=Hn(function(t,e,n){return t+(n?" ":"")+tl(e)});function qv(t,e,n){return t=Ht(t),n=n==null?0:In(Bt(n),0,t.length),e=Ye(e),t.slice(n,n+e.length)==e}function Wv(t,e,n){var c=f.templateSettings;n&&Ee(t,e,n)&&(e=a),t=Ht(t),e=Hs({},e,c,ph);var d=Hs({},e.imports,c.imports,ph),_=be(d),k=da(d,_),U,tt,dt=0,ut=e.interpolate||ss,pt="__p += '",St=pa((e.escape||ss).source+"|"+ut.source+"|"+(ut===Ol?yp:ss).source+"|"+(e.evaluate||ss).source+"|$","g"),Dt="//# sourceURL="+(Xt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Yp+"]")+`
`;t.replace(St,function(Mt,Wt,jt,Qe,Re,Je){return jt||(jt=Qe),pt+=t.slice(dt,Je).replace(Ip,_f),Wt&&(U=!0,pt+=`' +
__e(`+Wt+`) +
'`),Re&&(tt=!0,pt+=`';
`+Re+`;
__p += '`),jt&&(pt+=`' +
((__t = (`+jt+`)) == null ? '' : __t) +
'`),dt=Je+Mt.length,Mt}),pt+=`';
`;var Rt=Xt.call(e,"variable")&&e.variable;if(!Rt)pt=`with (obj) {
`+pt+`
}
`;else if(vp.test(Rt))throw new Ot(o);pt=(tt?pt.replace(ip,""):pt).replace(np,"$1").replace(rp,"$1;"),pt="function("+(Rt||"obj")+`) {
`+(Rt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(U?", __e = _.escape":"")+(tt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+pt+`return __p
}`;var Vt=sd(function(){return Ut(_,Dt+"return "+pt).apply(a,k)});if(Vt.source=pt,Ya(Vt))throw Vt;return Vt}function Gv(t){return Ht(t).toLowerCase()}function jv(t){return Ht(t).toUpperCase()}function Uv(t,e,n){if(t=Ht(t),t&&(n||e===a))return fc(t);if(!t||!(e=Ye(e)))return t;var c=_i(t),d=_i(e),_=mc(c,d),k=gc(c,d)+1;return en(c,_,k).join("")}function Hv(t,e,n){if(t=Ht(t),t&&(n||e===a))return t.slice(0,vc(t)+1);if(!t||!(e=Ye(e)))return t;var c=_i(t),d=gc(c,_i(e))+1;return en(c,0,d).join("")}function Xv(t,e,n){if(t=Ht(t),t&&(n||e===a))return t.replace(Yo,"");if(!t||!(e=Ye(e)))return t;var c=_i(t),d=mc(c,_i(e));return en(c,d).join("")}function $v(t,e){var n=rt,c=Q;if(oe(e)){var d="separator"in e?e.separator:d;n="length"in e?Bt(e.length):n,c="omission"in e?Ye(e.omission):c}t=Ht(t);var _=t.length;if(Bn(t)){var k=_i(t);_=k.length}if(n>=_)return t;var U=n-Vn(c);if(U<1)return c;var tt=k?en(k,0,U).join(""):t.slice(0,U);if(d===a)return tt+c;if(k&&(U+=tt.length-U),Za(d)){if(t.slice(U).search(d)){var dt,ut=tt;for(d.global||(d=pa(d.source,Ht(Ll.exec(d))+"g")),d.lastIndex=0;dt=d.exec(ut);)var pt=dt.index;tt=tt.slice(0,pt===a?U:pt)}}else if(t.indexOf(Ye(d),U)!=U){var St=tt.lastIndexOf(d);St>-1&&(tt=tt.slice(0,St))}return tt+c}function Kv(t){return t=Ht(t),t&&sp.test(t)?t.replace(Al,wf):t}var Yv=Hn(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),tl=oh("toUpperCase");function rd(t,e,n){return t=Ht(t),e=n?a:e,e===a?xf(t)?If(t):hf(t):t.match(e)||[]}var sd=qt(function(t,e){try{return $e(t,a,e)}catch(n){return Ya(n)?n:new Ot(n)}}),Zv=Ni(function(t,e){return ni(e,function(n){n=Di(n),Oi(t,n,$a(t[n],t))}),t});function Qv(t){var e=t==null?0:t.length,n=Et();return t=e?re(t,function(c){if(typeof c[1]!="function")throw new ri(r);return[n(c[0]),c[1]]}):[],qt(function(c){for(var d=-1;++d<e;){var _=t[d];if($e(_[0],this,c))return $e(_[1],this,c)}})}function Jv(t){return wm(oi(t,I))}function el(t){return function(){return t}}function tx(t,e){return t==null||t!==t?e:t}var ex=lh(),ix=lh(!0);function qe(t){return t}function il(t){return Fc(typeof t=="function"?t:oi(t,I))}function nx(t){return Vc(oi(t,I))}function rx(t,e){return qc(t,oi(e,I))}var sx=qt(function(t,e){return function(n){return Or(n,t,e)}}),ox=qt(function(t,e){return function(n){return Or(t,n,e)}});function nl(t,e,n){var c=be(e),d=Is(e,c);n==null&&!(oe(e)&&(d.length||!c.length))&&(n=e,e=t,t=this,d=Is(e,be(e)));var _=!(oe(n)&&"chain"in n)||!!n.chain,k=Bi(t);return ni(d,function(U){var tt=e[U];t[U]=tt,k&&(t.prototype[U]=function(){var dt=this.__chain__;if(_||dt){var ut=t(this.__wrapped__),pt=ut.__actions__=Fe(this.__actions__);return pt.push({func:tt,args:arguments,thisArg:t}),ut.__chain__=dt,ut}return tt.apply(t,$i([this.value()],arguments))})}),t}function ax(){return ye._===this&&(ye._=Af),this}function rl(){}function lx(t){return t=Bt(t),qt(function(e){return Wc(e,t)})}var cx=Oa(re),hx=Oa(cc),dx=Oa(oa);function od(t){return Wa(t)?aa(Di(t)):qm(t)}function ux(t){return function(e){return t==null?a:Tn(t,e)}}var px=hh(),fx=hh(!0);function sl(){return[]}function ol(){return!1}function mx(){return{}}function gx(){return""}function _x(){return!0}function vx(t,e){if(t=Bt(t),t<1||t>g)return[];var n=N,c=we(t,N);e=Et(e),t-=N;for(var d=ha(c,e);++n<t;)e(n);return d}function xx(t){return Lt(t)?re(t,Di):Ze(t)?[t]:Fe(zh(Ht(t)))}function yx(t){var e=++Rf;return Ht(t)+e}var bx=As(function(t,e){return t+e},0),Sx=La("ceil"),Cx=As(function(t,e){return t/e},1),wx=La("floor");function Dx(t){return t&&t.length?zs(t,qe,ba):a}function zx(t,e){return t&&t.length?zs(t,Et(e,2),ba):a}function Ix(t){return uc(t,qe)}function Tx(t,e){return uc(t,Et(e,2))}function kx(t){return t&&t.length?zs(t,qe,Da):a}function Ex(t,e){return t&&t.length?zs(t,Et(e,2),Da):a}var Rx=As(function(t,e){return t*e},1),Mx=La("round"),Ax=As(function(t,e){return t-e},0);function Px(t){return t&&t.length?ca(t,qe):0}function Ox(t,e){return t&&t.length?ca(t,Et(e,2)):0}return f.after=n0,f.ary=Nh,f.assign=j0,f.assignIn=Zh,f.assignInWith=Hs,f.assignWith=U0,f.at=H0,f.before=Fh,f.bind=$a,f.bindAll=Zv,f.bindKey=Bh,f.castArray=m0,f.chain=Ph,f.chunk=wg,f.compact=Dg,f.concat=zg,f.cond=Qv,f.conforms=Jv,f.constant=el,f.countBy=P_,f.create=X0,f.curry=Vh,f.curryRight=qh,f.debounce=Wh,f.defaults=$0,f.defaultsDeep=K0,f.defer=r0,f.delay=s0,f.difference=Ig,f.differenceBy=Tg,f.differenceWith=kg,f.drop=Eg,f.dropRight=Rg,f.dropRightWhile=Mg,f.dropWhile=Ag,f.fill=Pg,f.filter=L_,f.flatMap=B_,f.flatMapDeep=V_,f.flatMapDepth=q_,f.flatten=Eh,f.flattenDeep=Og,f.flattenDepth=Lg,f.flip=o0,f.flow=ex,f.flowRight=ix,f.fromPairs=Ng,f.functions=iv,f.functionsIn=nv,f.groupBy=W_,f.initial=Bg,f.intersection=Vg,f.intersectionBy=qg,f.intersectionWith=Wg,f.invert=sv,f.invertBy=ov,f.invokeMap=j_,f.iteratee=il,f.keyBy=U_,f.keys=be,f.keysIn=Ve,f.map=Vs,f.mapKeys=lv,f.mapValues=cv,f.matches=nx,f.matchesProperty=rx,f.memoize=Ws,f.merge=hv,f.mergeWith=Qh,f.method=sx,f.methodOf=ox,f.mixin=nl,f.negate=Gs,f.nthArg=lx,f.omit=dv,f.omitBy=uv,f.once=a0,f.orderBy=H_,f.over=cx,f.overArgs=l0,f.overEvery=hx,f.overSome=dx,f.partial=Ka,f.partialRight=Gh,f.partition=X_,f.pick=pv,f.pickBy=Jh,f.property=od,f.propertyOf=ux,f.pull=Hg,f.pullAll=Mh,f.pullAllBy=Xg,f.pullAllWith=$g,f.pullAt=Kg,f.range=px,f.rangeRight=fx,f.rearg=c0,f.reject=Y_,f.remove=Yg,f.rest=h0,f.reverse=Ha,f.sampleSize=Q_,f.set=mv,f.setWith=gv,f.shuffle=J_,f.slice=Zg,f.sortBy=i0,f.sortedUniq=r_,f.sortedUniqBy=s_,f.split=Bv,f.spread=d0,f.tail=o_,f.take=a_,f.takeRight=l_,f.takeRightWhile=c_,f.takeWhile=h_,f.tap=D_,f.throttle=u0,f.thru=Bs,f.toArray=$h,f.toPairs=td,f.toPairsIn=ed,f.toPath=xx,f.toPlainObject=Yh,f.transform=_v,f.unary=p0,f.union=d_,f.unionBy=u_,f.unionWith=p_,f.uniq=f_,f.uniqBy=m_,f.uniqWith=g_,f.unset=vv,f.unzip=Xa,f.unzipWith=Ah,f.update=xv,f.updateWith=yv,f.values=Kn,f.valuesIn=bv,f.without=__,f.words=rd,f.wrap=f0,f.xor=v_,f.xorBy=x_,f.xorWith=y_,f.zip=b_,f.zipObject=S_,f.zipObjectDeep=C_,f.zipWith=w_,f.entries=td,f.entriesIn=ed,f.extend=Zh,f.extendWith=Hs,nl(f,f),f.add=bx,f.attempt=sd,f.camelCase=Dv,f.capitalize=id,f.ceil=Sx,f.clamp=Sv,f.clone=g0,f.cloneDeep=v0,f.cloneDeepWith=x0,f.cloneWith=_0,f.conformsTo=y0,f.deburr=nd,f.defaultTo=tx,f.divide=Cx,f.endsWith=zv,f.eq=xi,f.escape=Iv,f.escapeRegExp=Tv,f.every=O_,f.find=N_,f.findIndex=Th,f.findKey=Y0,f.findLast=F_,f.findLastIndex=kh,f.findLastKey=Z0,f.floor=wx,f.forEach=Oh,f.forEachRight=Lh,f.forIn=Q0,f.forInRight=J0,f.forOwn=tv,f.forOwnRight=ev,f.get=Qa,f.gt=b0,f.gte=S0,f.has=rv,f.hasIn=Ja,f.head=Rh,f.identity=qe,f.includes=G_,f.indexOf=Fg,f.inRange=Cv,f.invoke=av,f.isArguments=Rn,f.isArray=Lt,f.isArrayBuffer=C0,f.isArrayLike=Be,f.isArrayLikeObject=he,f.isBoolean=w0,f.isBuffer=nn,f.isDate=D0,f.isElement=z0,f.isEmpty=I0,f.isEqual=T0,f.isEqualWith=k0,f.isError=Ya,f.isFinite=E0,f.isFunction=Bi,f.isInteger=jh,f.isLength=js,f.isMap=Uh,f.isMatch=R0,f.isMatchWith=M0,f.isNaN=A0,f.isNative=P0,f.isNil=L0,f.isNull=O0,f.isNumber=Hh,f.isObject=oe,f.isObjectLike=le,f.isPlainObject=qr,f.isRegExp=Za,f.isSafeInteger=N0,f.isSet=Xh,f.isString=Us,f.isSymbol=Ze,f.isTypedArray=$n,f.isUndefined=F0,f.isWeakMap=B0,f.isWeakSet=V0,f.join=Gg,f.kebabCase=kv,f.last=li,f.lastIndexOf=jg,f.lowerCase=Ev,f.lowerFirst=Rv,f.lt=q0,f.lte=W0,f.max=Dx,f.maxBy=zx,f.mean=Ix,f.meanBy=Tx,f.min=kx,f.minBy=Ex,f.stubArray=sl,f.stubFalse=ol,f.stubObject=mx,f.stubString=gx,f.stubTrue=_x,f.multiply=Rx,f.nth=Ug,f.noConflict=ax,f.noop=rl,f.now=qs,f.pad=Mv,f.padEnd=Av,f.padStart=Pv,f.parseInt=Ov,f.random=wv,f.reduce=$_,f.reduceRight=K_,f.repeat=Lv,f.replace=Nv,f.result=fv,f.round=Mx,f.runInContext=Y,f.sample=Z_,f.size=t0,f.snakeCase=Fv,f.some=e0,f.sortedIndex=Qg,f.sortedIndexBy=Jg,f.sortedIndexOf=t_,f.sortedLastIndex=e_,f.sortedLastIndexBy=i_,f.sortedLastIndexOf=n_,f.startCase=Vv,f.startsWith=qv,f.subtract=Ax,f.sum=Px,f.sumBy=Ox,f.template=Wv,f.times=vx,f.toFinite=Vi,f.toInteger=Bt,f.toLength=Kh,f.toLower=Gv,f.toNumber=ci,f.toSafeInteger=G0,f.toString=Ht,f.toUpper=jv,f.trim=Uv,f.trimEnd=Hv,f.trimStart=Xv,f.truncate=$v,f.unescape=Kv,f.uniqueId=yx,f.upperCase=Yv,f.upperFirst=tl,f.each=Oh,f.eachRight=Lh,f.first=Rh,nl(f,function(){var t={};return Ci(f,function(e,n){Xt.call(f.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),f.VERSION=s,ni(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){f[t].placeholder=f}),ni(["drop","take"],function(t,e){Gt.prototype[t]=function(n){n=n===a?1:ge(Bt(n),0);var c=this.__filtered__&&!e?new Gt(this):this.clone();return c.__filtered__?c.__takeCount__=we(n,c.__takeCount__):c.__views__.push({size:we(n,N),type:t+(c.__dir__<0?"Right":"")}),c},Gt.prototype[t+"Right"]=function(n){return this.reverse()[t](n).reverse()}}),ni(["filter","map","takeWhile"],function(t,e){var n=e+1,c=n==b||n==v;Gt.prototype[t]=function(d){var _=this.clone();return _.__iteratees__.push({iteratee:Et(d,3),type:n}),_.__filtered__=_.__filtered__||c,_}}),ni(["head","last"],function(t,e){var n="take"+(e?"Right":"");Gt.prototype[t]=function(){return this[n](1).value()[0]}}),ni(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");Gt.prototype[t]=function(){return this.__filtered__?new Gt(this):this[n](1)}}),Gt.prototype.compact=function(){return this.filter(qe)},Gt.prototype.find=function(t){return this.filter(t).head()},Gt.prototype.findLast=function(t){return this.reverse().find(t)},Gt.prototype.invokeMap=qt(function(t,e){return typeof t=="function"?new Gt(this):this.map(function(n){return Or(n,t,e)})}),Gt.prototype.reject=function(t){return this.filter(Gs(Et(t)))},Gt.prototype.slice=function(t,e){t=Bt(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Gt(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==a&&(e=Bt(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},Gt.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Gt.prototype.toArray=function(){return this.take(N)},Ci(Gt.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),c=/^(?:head|last)$/.test(e),d=f[c?"take"+(e=="last"?"Right":""):e],_=c||/^find/.test(e);d&&(f.prototype[e]=function(){var k=this.__wrapped__,U=c?[1]:arguments,tt=k instanceof Gt,dt=U[0],ut=tt||Lt(k),pt=function(Wt){var jt=d.apply(f,$i([Wt],U));return c&&St?jt[0]:jt};ut&&n&&typeof dt=="function"&&dt.length!=1&&(tt=ut=!1);var St=this.__chain__,Dt=!!this.__actions__.length,Rt=_&&!St,Vt=tt&&!Dt;if(!_&&ut){k=Vt?k:new Gt(this);var Mt=t.apply(k,U);return Mt.__actions__.push({func:Bs,args:[pt],thisArg:a}),new si(Mt,St)}return Rt&&Vt?t.apply(this,U):(Mt=this.thru(pt),Rt?c?Mt.value()[0]:Mt.value():Mt)})}),ni(["pop","push","shift","sort","splice","unshift"],function(t){var e=ds[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",c=/^(?:pop|shift)$/.test(t);f.prototype[t]=function(){var d=arguments;if(c&&!this.__chain__){var _=this.value();return e.apply(Lt(_)?_:[],d)}return this[n](function(k){return e.apply(Lt(k)?k:[],d)})}}),Ci(Gt.prototype,function(t,e){var n=f[e];if(n){var c=n.name+"";Xt.call(Gn,c)||(Gn[c]=[]),Gn[c].push({name:e,func:n})}}),Gn[Ms(a,B).name]=[{name:"wrapper",func:a}],Gt.prototype.clone=Kf,Gt.prototype.reverse=Yf,Gt.prototype.value=Zf,f.prototype.at=z_,f.prototype.chain=I_,f.prototype.commit=T_,f.prototype.next=k_,f.prototype.plant=R_,f.prototype.reverse=M_,f.prototype.toJSON=f.prototype.valueOf=f.prototype.value=A_,f.prototype.first=f.prototype.head,Tr&&(f.prototype[Tr]=E_),f},Yi=Tf();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(ye._=Yi,define(function(){return Yi})):Cn?((Cn.exports=Yi)._=Yi,ia._=Yi):ye._=Yi}).call(Cr)});var Yu=cd((KS,Bo)=>{"use strict";(function(a){typeof Bo=="object"&&Bo.exports?(a.default=a,Bo.exports=a):typeof define=="function"&&define.amd?define("highcharts/modules/gantt",["highcharts"],function(s){return a(s),a.Highcharts=s,a}):a(typeof Highcharts<"u"?Highcharts:void 0)})(function(a){"use strict";var s=a?a._modules:{};function l(i,r,o,h){i.hasOwnProperty(r)||(i[r]=h.apply(null,o),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:r,module:i[r]}})))}l(s,"Extensions/ArrowSymbols.js",[],function(){function i(p,x,I,P){return[["M",p,x+P/2],["L",p+I,x],["L",p,x+P/2],["L",p+I,x+P]]}function r(p,x,I,P){return i(p,x,I/2,P)}function o(p,x,I,P){return[["M",p+I,x],["L",p,x+P/2],["L",p+I,x+P],["Z"]]}function h(p,x,I,P){return o(p,x,I/2,P)}return{compose:function(p){let x=p.prototype.symbols;x.arrow=i,x["arrow-filled"]=o,x["arrow-filled-half"]=h,x["arrow-half"]=r,x["triangle-left"]=o,x["triangle-left-half"]=h}}}),l(s,"Gantt/Connection.js",[s["Core/Globals.js"],s["Core/Utilities.js"]],function(i,r){let{defined:o,error:h,merge:p,objectEach:x}=r,I=i.deg2rad,P=Math.max,et=Math.min;return class{constructor(Z,M,K){this.init(Z,M,K)}init(Z,M,K){this.fromPoint=Z,this.toPoint=M,this.options=K,this.chart=Z.series.chart,this.pathfinder=this.chart.pathfinder}renderPath(Z,M){let K=this.chart,B=K.styledMode,E=this.pathfinder,z={},O=this.graphics&&this.graphics.path;E.group||(E.group=K.renderer.g().addClass("highcharts-pathfinder-group").attr({zIndex:-1}).add(K.seriesGroup)),E.group.translate(K.plotLeft,K.plotTop),O&&O.renderer||(O=K.renderer.path().add(E.group),B||O.attr({opacity:0})),O.attr(M),z.d=Z,B||(z.opacity=1),O.animate(z),this.graphics=this.graphics||{},this.graphics.path=O}addMarker(Z,M,K){let B,E,z,O,D,L,V,X,$=this.fromPoint.series.chart,rt=$.pathfinder,Q=$.renderer,nt=Z==="start"?this.fromPoint:this.toPoint,m=nt.getPathfinderAnchorPoint(M);M.enabled&&((X=Z==="start"?K[1]:K[K.length-2])&&X[0]==="M"||X[0]==="L")&&(V={x:X[1],y:X[2]},E=nt.getRadiansToVector(V,m),B=nt.getMarkerVector(E,M.radius,m),z=-E/I,M.width&&M.height?(D=M.width,L=M.height):D=L=2*M.radius,this.graphics=this.graphics||{},O={x:B.x-D/2,y:B.y-L/2,width:D,height:L,rotation:z,rotationOriginX:B.x,rotationOriginY:B.y},this.graphics[Z]?this.graphics[Z].animate(O):(this.graphics[Z]=Q.symbol(M.symbol).addClass("highcharts-point-connecting-path-"+Z+"-marker highcharts-color-"+this.fromPoint.colorIndex).attr(O).add(rt.group),Q.styledMode||this.graphics[Z].attr({fill:M.color||this.fromPoint.color,stroke:M.lineColor,"stroke-width":M.lineWidth,opacity:0}).animate({opacity:1},nt.series.options.animation)))}getPath(Z){let M=this.pathfinder,K=this.chart,B=M.algorithms[Z.type],E=M.chartObstacles;return typeof B!="function"?(h('"'+Z.type+'" is not a Pathfinder algorithm.'),{path:[],obstacles:[]}):(B.requiresObstacles&&!E&&(E=M.chartObstacles=M.getChartObstacles(Z),K.options.connectors.algorithmMargin=Z.algorithmMargin,M.chartObstacleMetrics=M.getObstacleMetrics(E)),B(this.fromPoint.getPathfinderAnchorPoint(Z.startMarker),this.toPoint.getPathfinderAnchorPoint(Z.endMarker),p({chartObstacles:E,lineObstacles:M.lineObstacles||[],obstacleMetrics:M.chartObstacleMetrics,hardBounds:{xMin:0,xMax:K.plotWidth,yMin:0,yMax:K.plotHeight},obstacleOptions:{margin:Z.algorithmMargin},startDirectionX:M.getAlgorithmStartDirection(Z.startMarker)},Z)))}render(){let Z=this.fromPoint,M=Z.series,K=M.chart,B=K.pathfinder,E={},z=p(K.options.connectors,M.options.connectors,Z.options.connectors,this.options);!K.styledMode&&(E.stroke=z.lineColor||Z.color,E["stroke-width"]=z.lineWidth,z.dashStyle&&(E.dashstyle=z.dashStyle)),E.class="highcharts-point-connecting-path highcharts-color-"+Z.colorIndex,o((z=p(E,z)).marker.radius)||(z.marker.radius=et(P(Math.ceil((z.algorithmMargin||8)/2)-1,1),5));let O=this.getPath(z),D=O.path;O.obstacles&&(B.lineObstacles=B.lineObstacles||[],B.lineObstacles=B.lineObstacles.concat(O.obstacles)),this.renderPath(D,E),this.addMarker("start",p(z.marker,z.startMarker),D),this.addMarker("end",p(z.marker,z.endMarker),D)}destroy(){this.graphics&&(x(this.graphics,function(Z){Z.destroy()}),delete this.graphics)}}}),l(s,"Extensions/CurrentDateIndication.js",[s["Core/Globals.js"],s["Core/Utilities.js"]],function(i,r){let{composed:o}=i,{addEvent:h,merge:p,pushUnique:x,wrap:I}=r,P={color:"#ccd3ff",width:2,label:{format:"%a, %b %d %Y, %H:%M",formatter:function(K,B){return this.axis.chart.time.dateFormat(B||"",K)},rotation:0,style:{fontSize:"0.7em"}}};function et(){let K=this.options,B=K.currentDateIndicator;if(B){let E=typeof B=="object"?p(P,B):p(P);E.value=Date.now(),E.className="highcharts-current-date-indicator",K.plotLines||(K.plotLines=[]),K.plotLines.push(E)}}function Z(){this.label&&this.label.attr({text:this.getLabelText(this.options.label)})}function M(K,B){let E=this.options;return E&&E.className&&E.className.indexOf("highcharts-current-date-indicator")!==-1&&E.label&&typeof E.label.formatter=="function"?(E.value=Date.now(),E.label.formatter.call(this,E.value,E.label.format)):K.call(this,B)}return{compose:function(K,B){x(o,"CurrentDateIndication")&&(h(K,"afterSetOptions",et),h(B,"render",Z),I(B.prototype,"getLabelText",M))}}}),l(s,"Core/Chart/GanttChart.js",[s["Core/Chart/Chart.js"],s["Core/Defaults.js"],s["Core/Utilities.js"]],function(i,r,o){var h;let{defaultOptions:p}=r,{isArray:x,merge:I,splat:P}=o;class et extends i{init(M,K){let B,E=M.xAxis,z=M.yAxis;M.xAxis=M.yAxis=void 0;let O=I(!0,{chart:{type:"gantt"},title:{text:""},legend:{enabled:!1},navigator:{series:{type:"gantt"},yAxis:{type:"category"}}},M,{isGantt:!0});M.xAxis=E,M.yAxis=z,O.xAxis=(x(M.xAxis)?M.xAxis:[M.xAxis||{},{}]).map((D,L)=>(L===1&&(B=0),I({grid:{borderColor:"#cccccc",enabled:!0},opposite:p.xAxis?.opposite??D.opposite??!0,linkedTo:B},D,{type:"datetime"}))),O.yAxis=P(M.yAxis||{}).map(D=>I({grid:{borderColor:"#cccccc",enabled:!0},staticScale:50,reversed:!0,type:D.categories?D.type:"treegrid"},D)),super.init(O,K)}}return(h=et||(et={})).ganttChart=function(Z,M,K){return new h(Z,M,K)},et}),l(s,"Stock/Navigator/ChartNavigatorComposition.js",[s["Core/Globals.js"],s["Core/Utilities.js"]],function(i,r){let o,{isTouchDevice:h}=i,{addEvent:p,merge:x,pick:I}=r,P=[];function et(){this.navigator&&this.navigator.setBaseSeries(null,!1)}function Z(){let O,D,L,V=this.legend,X=this.navigator;if(X){O=V&&V.options,D=X.xAxis,L=X.yAxis;let{scrollbarHeight:$,scrollButtonSize:rt}=X;this.inverted?(X.left=X.opposite?this.chartWidth-$-X.height:this.spacing[3]+$,X.top=this.plotTop+rt):(X.left=I(D.left,this.plotLeft+rt),X.top=X.navigatorOptions.top||this.chartHeight-X.height-$-(this.scrollbar?.options.margin||0)-this.spacing[2]-(this.rangeSelector&&this.extraBottomMargin?this.rangeSelector.getHeight():0)-(O&&O.verticalAlign==="bottom"&&O.layout!=="proximate"&&O.enabled&&!O.floating?V.legendHeight+I(O.margin,10):0)-(this.titleOffset?this.titleOffset[2]:0)),D&&L&&(this.inverted?D.options.left=L.options.left=X.left:D.options.top=L.options.top=X.top,D.setAxisSize(),L.setAxisSize())}}function M(O){!this.navigator&&!this.scroller&&(this.options.navigator.enabled||this.options.scrollbar.enabled)&&(this.scroller=this.navigator=new o(this),I(O.redraw,!0)&&this.redraw(O.animation))}function K(){let O=this.options;(O.navigator.enabled||O.scrollbar.enabled)&&(this.scroller=this.navigator=new o(this))}function B(){let O=this.options,D=O.navigator,L=O.rangeSelector;if((D&&D.enabled||L&&L.enabled)&&(!h&&this.zooming.type==="x"||h&&this.zooming.pinchType==="x"))return!1}function E(O){let D=O.navigator;if(D&&O.xAxis[0]){let L=O.xAxis[0].getExtremes();D.render(L.min,L.max)}}function z(O){let D=O.options.navigator||{},L=O.options.scrollbar||{};!this.navigator&&!this.scroller&&(D.enabled||L.enabled)&&(x(!0,this.options.navigator,D),x(!0,this.options.scrollbar,L),delete O.options.navigator,delete O.options.scrollbar)}return{compose:function(O,D){if(r.pushUnique(P,O)){let L=O.prototype;o=D,L.callbacks.push(E),p(O,"afterAddSeries",et),p(O,"afterSetChartSize",Z),p(O,"afterUpdate",M),p(O,"beforeRender",K),p(O,"beforeShowResetZoom",B),p(O,"update",z)}}}}),l(s,"Core/Axis/NavigatorAxisComposition.js",[s["Core/Globals.js"],s["Core/Utilities.js"]],function(i,r){let{isTouchDevice:o}=i,{addEvent:h,correctFloat:p,defined:x,isNumber:I,pick:P}=r;function et(){this.navigatorAxis||(this.navigatorAxis=new M(this))}function Z(K){let B,E=this.chart,z=E.options,O=z.navigator,D=this.navigatorAxis,L=E.zooming.pinchType,V=z.rangeSelector,X=E.zooming.type;if(this.isXAxis&&(O?.enabled||V?.enabled)){if(X==="y"&&K.trigger==="zoom")B=!1;else if((K.trigger==="zoom"&&X==="xy"||o&&L==="xy")&&this.options.range){let $=D.previousZoom;x(K.min)?D.previousZoom=[this.min,this.max]:$&&(K.min=$[0],K.max=$[1],D.previousZoom=void 0)}}B!==void 0&&K.preventDefault()}class M{static compose(B){B.keepProps.includes("navigatorAxis")||(B.keepProps.push("navigatorAxis"),h(B,"init",et),h(B,"setExtremes",Z))}constructor(B){this.axis=B}destroy(){this.axis=void 0}toFixedRange(B,E,z,O){let D=this.axis,L=(D.pointRange||0)/2,V=P(z,D.translate(B,!0,!D.horiz)),X=P(O,D.translate(E,!0,!D.horiz));return x(z)||(V=p(V+L)),x(O)||(X=p(X-L)),I(V)&&I(X)||(V=X=void 0),{min:V,max:X}}}return M}),l(s,"Stock/Navigator/NavigatorDefaults.js",[s["Core/Color/Color.js"],s["Core/Series/SeriesRegistry.js"]],function(i,r){let{parse:o}=i,{seriesTypes:h}=r;return{height:40,margin:25,maskInside:!0,handles:{width:7,height:15,symbols:["navigator-handle","navigator-handle"],enabled:!0,lineWidth:1,backgroundColor:"#f2f2f2",borderColor:"#999999"},maskFill:o("#667aff").setOpacity(.3).get(),outlineColor:"#999999",outlineWidth:1,series:{type:h.areaspline===void 0?"line":"areaspline",fillOpacity:.05,lineWidth:1,compare:null,sonification:{enabled:!1},dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,firstAnchor:"firstPoint",anchor:"middle",lastAnchor:"lastPoint",units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2,3,4]],["week",[1,2,3]],["month",[1,3,6]],["year",null]]},dataLabels:{enabled:!1,zIndex:2},id:"highcharts-navigator-series",className:"highcharts-navigator-series",lineColor:null,marker:{enabled:!1},threshold:null},xAxis:{className:"highcharts-navigator-xaxis",tickLength:0,lineWidth:0,gridLineColor:"#e6e6e6",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#000000",fontSize:"0.7em",opacity:.6,textOutline:"2px contrast"},x:3,y:-4},crosshair:!1},yAxis:{className:"highcharts-navigator-yaxis",gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:.1,maxPadding:.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickLength:0,tickWidth:0}}}),l(s,"Stock/Navigator/NavigatorSymbols.js",[],function(){return{"navigator-handle":function(i,r,o,h,p={}){let x=p.width?p.width/2:o,I=Math.round(x/3)+.5;return[["M",-x-1,.5],["L",x,.5],["L",x,(h=p.height||h)+.5],["L",-x-1,h+.5],["L",-x-1,.5],["M",-I,4],["L",-I,h-3],["M",I-1,4],["L",I-1,h-3]]}}}),l(s,"Stock/Utilities/StockUtilities.js",[s["Core/Utilities.js"]],function(i){let{defined:r}=i;return{setFixedRange:function(o){let h=this.xAxis[0];r(h.dataMax)&&r(h.dataMin)&&o?this.fixedRange=Math.min(o,h.dataMax-h.dataMin):this.fixedRange=o}}}),l(s,"Stock/Navigator/NavigatorComposition.js",[s["Core/Defaults.js"],s["Core/Globals.js"],s["Core/Axis/NavigatorAxisComposition.js"],s["Stock/Navigator/NavigatorDefaults.js"],s["Stock/Navigator/NavigatorSymbols.js"],s["Core/Renderer/RendererRegistry.js"],s["Stock/Utilities/StockUtilities.js"],s["Core/Utilities.js"]],function(i,r,o,h,p,x,I,P){let{setOptions:et}=i,{composed:Z}=r,{getRendererType:M}=x,{setFixedRange:K}=I,{addEvent:B,extend:E,pushUnique:z}=P;function O(){this.chart.navigator&&!this.options.isInternal&&this.chart.navigator.setBaseSeries(null,!1)}return{compose:function(D,L,V){o.compose(L),z(Z,"Navigator")&&(D.prototype.setFixedRange=K,E(M().prototype.symbols,p),B(V,"afterUpdate",O),et({navigator:h}))}}}),l(s,"Core/Axis/ScrollbarAxis.js",[s["Core/Globals.js"],s["Core/Utilities.js"]],function(i,r){var o;let{composed:h}=i,{addEvent:p,defined:x,pick:I,pushUnique:P}=r;return function(et){let Z;function M(z){let O=I(z.options&&z.options.min,z.min),D=I(z.options&&z.options.max,z.max);return{axisMin:O,axisMax:D,scrollMin:x(z.dataMin)?Math.min(O,z.min,z.dataMin,I(z.threshold,1/0)):O,scrollMax:x(z.dataMax)?Math.max(D,z.max,z.dataMax,I(z.threshold,-1/0)):D}}function K(){let z=this.scrollbar,O=z&&!z.options.opposite,D=this.horiz?2:O?3:1;z&&(this.chart.scrollbarsOffsets=[0,0],this.chart.axisOffset[D]+=z.size+(z.options.margin||0))}function B(){let z=this;z.options&&z.options.scrollbar&&z.options.scrollbar.enabled&&(z.options.scrollbar.vertical=!z.horiz,z.options.startOnTick=z.options.endOnTick=!1,z.scrollbar=new Z(z.chart.renderer,z.options.scrollbar,z.chart),p(z.scrollbar,"changed",function(O){let D,L,{axisMin:V,axisMax:X,scrollMin:$,scrollMax:rt}=M(z),Q=rt-$;if(x(V)&&x(X))if(z.horiz&&!z.reversed||!z.horiz&&z.reversed?(D=$+Q*this.to,L=$+Q*this.from):(D=$+Q*(1-this.from),L=$+Q*(1-this.to)),this.shouldUpdateExtremes(O.DOMType)){let nt=O.DOMType!=="mousemove"&&O.DOMType!=="touchmove"&&void 0;z.setExtremes(L,D,!0,nt,O)}else this.setRange(this.from,this.to)}))}function E(){let z,O,D,{scrollMin:L,scrollMax:V}=M(this),X=this.scrollbar,$=this.axisTitleMargin+(this.titleOffset||0),rt=this.chart.scrollbarsOffsets,Q=this.options.margin||0;if(X&&rt){if(this.horiz)this.opposite||(rt[1]+=$),X.position(this.left,this.top+this.height+2+rt[1]-(this.opposite?Q:0),this.width,this.height),this.opposite||(rt[1]+=Q),z=1;else{let nt;this.opposite&&(rt[0]+=$),nt=X.options.opposite?this.left+this.width+2+rt[0]-(this.opposite?0:Q):this.opposite?0:Q,X.position(nt,this.top,this.width,this.height),this.opposite&&(rt[0]+=Q),z=0}rt[z]+=X.size+(X.options.margin||0),isNaN(L)||isNaN(V)||!x(this.min)||!x(this.max)||this.min===this.max?X.setRange(0,1):(O=(this.min-L)/(V-L),D=(this.max-L)/(V-L),this.horiz&&!this.reversed||!this.horiz&&this.reversed?X.setRange(O,D):X.setRange(1-D,1-O))}}et.compose=function(z,O){P(h,"Axis.Scrollbar")&&(Z=O,p(z,"afterGetOffset",K),p(z,"afterInit",B),p(z,"afterRender",E))}}(o||(o={})),o}),l(s,"Stock/Scrollbar/ScrollbarDefaults.js",[],function(){return{height:10,barBorderRadius:5,buttonBorderRadius:0,buttonsEnabled:!1,liveRedraw:void 0,margin:void 0,minWidth:6,opposite:!0,step:.2,zIndex:3,barBackgroundColor:"#cccccc",barBorderWidth:0,barBorderColor:"#cccccc",buttonArrowColor:"#333333",buttonBackgroundColor:"#e6e6e6",buttonBorderColor:"#cccccc",buttonBorderWidth:1,rifleColor:"none",trackBackgroundColor:"rgba(255, 255, 255, 0.001)",trackBorderColor:"#cccccc",trackBorderRadius:5,trackBorderWidth:1}}),l(s,"Stock/Scrollbar/Scrollbar.js",[s["Core/Defaults.js"],s["Core/Globals.js"],s["Core/Axis/ScrollbarAxis.js"],s["Stock/Scrollbar/ScrollbarDefaults.js"],s["Core/Utilities.js"]],function(i,r,o,h,p){let{defaultOptions:x}=i,{addEvent:I,correctFloat:P,defined:et,destroyObjectProperties:Z,fireEvent:M,merge:K,pick:B,removeEvent:E}=p;class z{static compose(D){o.compose(D,z)}static swapXY(D,L){return L&&D.forEach(V=>{let X,$=V.length;for(let rt=0;rt<$;rt+=2)typeof(X=V[rt+1])=="number"&&(V[rt+1]=V[rt+2],V[rt+2]=X)}),D}constructor(D,L,V){this._events=[],this.chartX=0,this.chartY=0,this.from=0,this.scrollbarButtons=[],this.scrollbarLeft=0,this.scrollbarStrokeWidth=1,this.scrollbarTop=0,this.size=0,this.to=0,this.trackBorderWidth=1,this.x=0,this.y=0,this.init(D,L,V)}addEvents(){let D=this.options.inverted?[1,0]:[0,1],L=this.scrollbarButtons,V=this.scrollbarGroup.element,X=this.track.element,$=this.mouseDownHandler.bind(this),rt=this.mouseMoveHandler.bind(this),Q=this.mouseUpHandler.bind(this),nt=[[L[D[0]].element,"click",this.buttonToMinClick.bind(this)],[L[D[1]].element,"click",this.buttonToMaxClick.bind(this)],[X,"click",this.trackClick.bind(this)],[V,"mousedown",$],[V.ownerDocument,"mousemove",rt],[V.ownerDocument,"mouseup",Q],[V,"touchstart",$],[V.ownerDocument,"touchmove",rt],[V.ownerDocument,"touchend",Q]];nt.forEach(function(m){I.apply(null,m)}),this._events=nt}buttonToMaxClick(D){let L=(this.to-this.from)*B(this.options.step,.2);this.updatePosition(this.from+L,this.to+L),M(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:D})}buttonToMinClick(D){let L=P(this.to-this.from)*B(this.options.step,.2);this.updatePosition(P(this.from-L),P(this.to-L)),M(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:D})}cursorToScrollbarPosition(D){let L=this.options,V=L.minWidth>this.calculatedWidth?L.minWidth:0;return{chartX:(D.chartX-this.x-this.xOffset)/(this.barWidth-V),chartY:(D.chartY-this.y-this.yOffset)/(this.barWidth-V)}}destroy(){let D=this,L=D.chart.scroller;D.removeEvents(),["track","scrollbarRifles","scrollbar","scrollbarGroup","group"].forEach(function(V){D[V]&&D[V].destroy&&(D[V]=D[V].destroy())}),L&&D===L.scrollbar&&(L.scrollbar=null,Z(L.scrollbarButtons))}drawScrollbarButton(D){let L=this.renderer,V=this.scrollbarButtons,X=this.options,$=this.size,rt=L.g().add(this.group);if(V.push(rt),X.buttonsEnabled){let Q=L.rect().addClass("highcharts-scrollbar-button").add(rt);this.chart.styledMode||Q.attr({stroke:X.buttonBorderColor,"stroke-width":X.buttonBorderWidth,fill:X.buttonBackgroundColor}),Q.attr(Q.crisp({x:-.5,y:-.5,width:$+1,height:$+1,r:X.buttonBorderRadius},Q.strokeWidth()));let nt=L.path(z.swapXY([["M",$/2+(D?-1:1),$/2-3],["L",$/2+(D?-1:1),$/2+3],["L",$/2+(D?2:-2),$/2]],X.vertical)).addClass("highcharts-scrollbar-arrow").add(V[D]);this.chart.styledMode||nt.attr({fill:X.buttonArrowColor})}}init(D,L,V){this.scrollbarButtons=[],this.renderer=D,this.userOptions=L,this.options=K(h,x.scrollbar,L),this.options.margin=B(this.options.margin,10),this.chart=V,this.size=B(this.options.size,this.options.height),L.enabled&&(this.render(),this.addEvents())}mouseDownHandler(D){let L=this.chart.pointer?.normalize(D)||D,V=this.cursorToScrollbarPosition(L);this.chartX=V.chartX,this.chartY=V.chartY,this.initPositions=[this.from,this.to],this.grabbedCenter=!0}mouseMoveHandler(D){let L,V=this.chart.pointer?.normalize(D)||D,X=this.options.vertical?"chartY":"chartX",$=this.initPositions||[];this.grabbedCenter&&(!D.touches||D.touches[0][X]!==0)&&(L=this.cursorToScrollbarPosition(V)[X]-this[X],this.hasDragged=!0,this.updatePosition($[0]+L,$[1]+L),this.hasDragged&&M(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:D.type,DOMEvent:D}))}mouseUpHandler(D){this.hasDragged&&M(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:D.type,DOMEvent:D}),this.grabbedCenter=this.hasDragged=this.chartX=this.chartY=null}position(D,L,V,X){let{buttonsEnabled:$,margin:rt=0,vertical:Q}=this.options,nt=this.rendered?"animate":"attr",m=X,b=0;this.group.show(),this.x=D,this.y=L+this.trackBorderWidth,this.width=V,this.height=X,this.xOffset=m,this.yOffset=b,Q?(this.width=this.yOffset=V=b=this.size,this.xOffset=m=0,this.yOffset=b=$?this.size:0,this.barWidth=X-($?2*V:0),this.x=D+=rt):(this.height=X=this.size,this.xOffset=m=$?this.size:0,this.barWidth=V-($?2*X:0),this.y=this.y+rt),this.group[nt]({translateX:D,translateY:this.y}),this.track[nt]({width:V,height:X}),this.scrollbarButtons[1][nt]({translateX:Q?0:V-m,translateY:Q?X-b:0})}removeEvents(){this._events.forEach(function(D){E.apply(null,D)}),this._events.length=0}render(){let D=this.renderer,L=this.options,V=this.size,X=this.chart.styledMode,$=D.g("scrollbar").attr({zIndex:L.zIndex}).hide().add();this.group=$,this.track=D.rect().addClass("highcharts-scrollbar-track").attr({r:L.trackBorderRadius||0,height:V,width:V}).add($),X||this.track.attr({fill:L.trackBackgroundColor,stroke:L.trackBorderColor,"stroke-width":L.trackBorderWidth});let rt=this.trackBorderWidth=this.track.strokeWidth();this.track.attr({x:-rt%2/2,y:-rt%2/2}),this.scrollbarGroup=D.g().add($),this.scrollbar=D.rect().addClass("highcharts-scrollbar-thumb").attr({height:V-rt,width:V-rt,r:L.barBorderRadius||0}).add(this.scrollbarGroup),this.scrollbarRifles=D.path(z.swapXY([["M",-3,V/4],["L",-3,2*V/3],["M",0,V/4],["L",0,2*V/3],["M",3,V/4],["L",3,2*V/3]],L.vertical)).addClass("highcharts-scrollbar-rifles").add(this.scrollbarGroup),X||(this.scrollbar.attr({fill:L.barBackgroundColor,stroke:L.barBorderColor,"stroke-width":L.barBorderWidth}),this.scrollbarRifles.attr({stroke:L.rifleColor,"stroke-width":1})),this.scrollbarStrokeWidth=this.scrollbar.strokeWidth(),this.scrollbarGroup.translate(-this.scrollbarStrokeWidth%2/2,-this.scrollbarStrokeWidth%2/2),this.drawScrollbarButton(0),this.drawScrollbarButton(1)}setRange(D,L){let V,X,$=this.options,rt=$.vertical,Q=$.minWidth,nt=this.barWidth,m=!this.rendered||this.hasDragged||this.chart.navigator&&this.chart.navigator.hasDragged?"attr":"animate";if(!et(nt))return;let b=nt*Math.min(L,1);V=Math.ceil(nt*(D=Math.max(D,0))),this.calculatedWidth=X=P(b-V),X<Q&&(V=(nt-Q+X)*D,X=Q);let S=Math.floor(V+this.xOffset+this.yOffset),v=X/2-.5;this.from=D,this.to=L,rt?(this.scrollbarGroup[m]({translateY:S}),this.scrollbar[m]({height:X}),this.scrollbarRifles[m]({translateY:v}),this.scrollbarTop=S,this.scrollbarLeft=0):(this.scrollbarGroup[m]({translateX:S}),this.scrollbar[m]({width:X}),this.scrollbarRifles[m]({translateX:v}),this.scrollbarLeft=S,this.scrollbarTop=0),X<=12?this.scrollbarRifles.hide():this.scrollbarRifles.show(),$.showFull===!1&&(D<=0&&L>=1?this.group.hide():this.group.show()),this.rendered=!0}shouldUpdateExtremes(D){return B(this.options.liveRedraw,r.svg&&!r.isTouchDevice&&!this.chart.boosted)||D==="mouseup"||D==="touchend"||!et(D)}trackClick(D){let L=this.chart.pointer?.normalize(D)||D,V=this.to-this.from,X=this.y+this.scrollbarTop,$=this.x+this.scrollbarLeft;this.options.vertical&&L.chartY>X||!this.options.vertical&&L.chartX>$?this.updatePosition(this.from+V,this.to+V):this.updatePosition(this.from-V,this.to-V),M(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:D})}update(D){this.destroy(),this.init(this.chart.renderer,K(!0,this.options,D),this.chart)}updatePosition(D,L){L>1&&(D=P(1-P(L-D)),L=1),D<0&&(L=P(L-D),D=0),this.from=D,this.to=L}}return z.defaultOptions=h,x.scrollbar=K(!0,z.defaultOptions,x.scrollbar),z}),l(s,"Stock/Navigator/Navigator.js",[s["Core/Axis/Axis.js"],s["Stock/Navigator/ChartNavigatorComposition.js"],s["Core/Defaults.js"],s["Core/Globals.js"],s["Core/Axis/NavigatorAxisComposition.js"],s["Stock/Navigator/NavigatorComposition.js"],s["Stock/Scrollbar/Scrollbar.js"],s["Core/Utilities.js"]],function(i,r,o,h,p,x,I,P){let{defaultOptions:et}=o,{isTouchDevice:Z}=h,{addEvent:M,clamp:K,correctFloat:B,defined:E,destroyObjectProperties:z,erase:O,extend:D,find:L,fireEvent:V,isArray:X,isNumber:$,merge:rt,pick:Q,removeEvent:nt,splat:m}=P;function b(v,...u){let g=[].filter.call(u,$);if(g.length)return Math[v].apply(0,g)}class S{static compose(u,g,y){r.compose(u,S),x.compose(u,g,y)}constructor(u){this.scrollbarHeight=0,this.init(u)}drawHandle(u,g,y,R){let N=this.navigatorOptions.handles.height;this.handles[g][R](y?{translateX:Math.round(this.left+this.height/2),translateY:Math.round(this.top+parseInt(u,10)+.5-N)}:{translateX:Math.round(this.left+parseInt(u,10)),translateY:Math.round(this.top+this.height/2-N/2-1)})}drawOutline(u,g,y,R){let N=this.navigatorOptions.maskInside,q=this.outline.strokeWidth(),J=q/2,F=q%2/2,C=this.scrollButtonSize,w=this.size,G=this.top,W=this.height,it=G-J,ht=G+W,ot=this.left,mt,vt;y?(mt=G+g+F,g=G+u+F,vt=[["M",ot+W,G-C-F],["L",ot+W,mt],["L",ot,mt],["M",ot,g],["L",ot+W,g],["L",ot+W,G+w+C]],N&&vt.push(["M",ot+W,mt-J],["L",ot+W,g+J])):(ot-=C,u+=ot+C-F,g+=ot+C-F,vt=[["M",ot,it],["L",u,it],["L",u,ht],["M",g,ht],["L",g,it],["L",ot+w+2*C,G+J]],N&&vt.push(["M",u-J,it],["L",g+J,it])),this.outline[R]({d:vt})}drawMasks(u,g,y,R){let N,q,J,F,C=this.left,w=this.top,G=this.height;y?(J=[C,C,C],F=[w,w+u,w+g],q=[G,G,G],N=[u,g-u,this.size-g]):(J=[C,C+u,C+g],F=[w,w,w],q=[u,g-u,this.size-g],N=[G,G,G]),this.shades.forEach((W,it)=>{W[R]({x:J[it],y:F[it],width:q[it],height:N[it]})})}renderElements(){let u=this,g=u.navigatorOptions,y=g.maskInside,R=u.chart,N=R.inverted,q=R.renderer,J={cursor:N?"ns-resize":"ew-resize"},F=u.navigatorGroup=q.g("navigator").attr({zIndex:8,visibility:"hidden"}).add();if([!y,y,!y].forEach((C,w)=>{let G=q.rect().addClass("highcharts-navigator-mask"+(w===1?"-inside":"-outside")).add(F);R.styledMode||(G.attr({fill:C?g.maskFill:"rgba(0,0,0,0)"}),w===1&&G.css(J)),u.shades[w]=G}),u.outline=q.path().addClass("highcharts-navigator-outline").add(F),R.styledMode||u.outline.attr({"stroke-width":g.outlineWidth,stroke:g.outlineColor}),g.handles&&g.handles.enabled){let C=g.handles,{height:w,width:G}=C;[0,1].forEach(W=>{u.handles[W]=q.symbol(C.symbols[W],-G/2-1,0,G,w,C),R.inverted&&u.handles[W].attr({rotation:90,rotationOriginX:Math.floor(-G/2),rotationOriginY:(w+G)/2}),u.handles[W].attr({zIndex:7-W}).addClass("highcharts-navigator-handle highcharts-navigator-handle-"+["left","right"][W]).add(F),R.styledMode||u.handles[W].attr({fill:C.backgroundColor,stroke:C.borderColor,"stroke-width":C.lineWidth}).css(J)})}}update(u){(this.series||[]).forEach(g=>{g.baseSeries&&delete g.baseSeries.navigatorSeries}),this.destroy(),rt(!0,this.chart.options.navigator,u),this.init(this.chart)}render(u,g,y,R){let N=this.chart,q=this.xAxis,J=q.pointRange||0,F=q.navigatorAxis.fake?N.xAxis[0]:q,C=this.navigatorEnabled,w=this.rendered,G=N.inverted,W=N.xAxis[0].minRange,it=N.xAxis[0].options.maxRange,ht=this.scrollButtonSize,ot,mt,vt,gt=this.scrollbarHeight,xt,kt;if(this.hasDragged&&!E(y))return;if(u=B(u-J/2),g=B(g+J/2),!$(u)||!$(g)){if(!w)return;y=0,R=Q(q.width,F.width)}this.left=Q(q.left,N.plotLeft+ht+(G?N.plotWidth:0));let Tt=this.size=xt=Q(q.len,(G?N.plotHeight:N.plotWidth)-2*ht);ot=G?gt:xt+2*ht,y=Q(y,q.toPixels(u,!0)),R=Q(R,q.toPixels(g,!0)),$(y)&&Math.abs(y)!==1/0||(y=0,R=ot);let Nt=q.toValue(y,!0),Kt=q.toValue(R,!0),Yt=Math.abs(B(Kt-Nt));Yt<W?this.grabbedLeft?y=q.toPixels(Kt-W-J,!0):this.grabbedRight&&(R=q.toPixels(Nt+W+J,!0)):E(it)&&B(Yt-J)>it&&(this.grabbedLeft?y=q.toPixels(Kt-it-J,!0):this.grabbedRight&&(R=q.toPixels(Nt+it+J,!0))),this.zoomedMax=K(Math.max(y,R),0,Tt),this.zoomedMin=K(this.fixedWidth?this.zoomedMax-this.fixedWidth:Math.min(y,R),0,Tt),this.range=this.zoomedMax-this.zoomedMin,Tt=Math.round(this.zoomedMax);let Ft=Math.round(this.zoomedMin);C&&(this.navigatorGroup.attr({visibility:"inherit"}),kt=w&&!this.hasDragged?"animate":"attr",this.drawMasks(Ft,Tt,G,kt),this.drawOutline(Ft,Tt,G,kt),this.navigatorOptions.handles.enabled&&(this.drawHandle(Ft,0,G,kt),this.drawHandle(Tt,1,G,kt))),this.scrollbar&&(G?(vt=this.top-ht,mt=this.left-gt+(C||!F.opposite?0:(F.titleOffset||0)+F.axisTitleMargin),gt=xt+2*ht):(vt=this.top+(C?this.height:-gt),mt=this.left-ht),this.scrollbar.position(mt,vt,ot,gt),this.scrollbar.setRange(this.zoomedMin/(xt||1),this.zoomedMax/(xt||1))),this.rendered=!0,V(this,"afterRender")}addMouseEvents(){let u=this,g=u.chart,y=g.container,R=[],N,q;u.mouseMoveHandler=N=function(J){u.onMouseMove(J)},u.mouseUpHandler=q=function(J){u.onMouseUp(J)},(R=u.getPartsEvents("mousedown")).push(M(g.renderTo,"mousemove",N),M(y.ownerDocument,"mouseup",q),M(g.renderTo,"touchmove",N),M(y.ownerDocument,"touchend",q)),R.concat(u.getPartsEvents("touchstart")),u.eventsToUnbind=R,u.series&&u.series[0]&&R.push(M(u.series[0].xAxis,"foundExtremes",function(){g.navigator.modifyNavigatorAxisExtremes()}))}getPartsEvents(u){let g=this,y=[];return["shades","handles"].forEach(function(R){g[R].forEach(function(N,q){y.push(M(N.element,u,function(J){g[R+"Mousedown"](J,q)}))})}),y}shadesMousedown(u,g){u=this.chart.pointer?.normalize(u)||u;let y=this.chart,R=this.xAxis,N=this.zoomedMin,q=this.size,J=this.range,F=this.left,C=u.chartX,w,G,W,it;y.inverted&&(C=u.chartY,F=this.top),g===1?(this.grabbedCenter=C,this.fixedWidth=J,this.dragOffset=C-N):(it=C-F-J/2,g===0?it=Math.max(0,it):g===2&&it+J>=q&&(it=q-J,this.reversedExtremes?(it-=J,G=this.getUnionExtremes().dataMin):w=this.getUnionExtremes().dataMax),it!==N&&(this.fixedWidth=J,E((W=R.navigatorAxis.toFixedRange(it,it+J,G,w)).min)&&V(this,"setRange",{min:Math.min(W.min,W.max),max:Math.max(W.min,W.max),redraw:!0,eventArguments:{trigger:"navigator"}})))}handlesMousedown(u,g){u=this.chart.pointer?.normalize(u)||u;let y=this.chart,R=y.xAxis[0],N=this.reversedExtremes;g===0?(this.grabbedLeft=!0,this.otherHandlePos=this.zoomedMax,this.fixedExtreme=N?R.min:R.max):(this.grabbedRight=!0,this.otherHandlePos=this.zoomedMin,this.fixedExtreme=N?R.max:R.min),y.setFixedRange(void 0)}onMouseMove(u){let g=this,y=g.chart,R=g.navigatorSize,N=g.range,q=g.dragOffset,J=y.inverted,F=g.left,C;(!u.touches||u.touches[0].pageX!==0)&&(C=(u=y.pointer?.normalize(u)||u).chartX,J&&(F=g.top,C=u.chartY),g.grabbedLeft?(g.hasDragged=!0,g.render(0,0,C-F,g.otherHandlePos)):g.grabbedRight?(g.hasDragged=!0,g.render(0,0,g.otherHandlePos,C-F)):g.grabbedCenter&&(g.hasDragged=!0,C<q?C=q:C>R+q-N&&(C=R+q-N),g.render(0,0,C-q,C-q+N)),g.hasDragged&&g.scrollbar&&Q(g.scrollbar.options.liveRedraw,!Z&&!this.chart.boosted)&&(u.DOMType=u.type,setTimeout(function(){g.onMouseUp(u)},0)))}onMouseUp(u){let g,y,R,N,q,J,F=this.chart,C=this.xAxis,w=this.scrollbar,G=u.DOMEvent||u,W=F.inverted,it=this.rendered&&!this.hasDragged?"animate":"attr";(this.hasDragged&&(!w||!w.hasDragged)||u.trigger==="scrollbar")&&(R=this.getUnionExtremes(),this.zoomedMin===this.otherHandlePos?N=this.fixedExtreme:this.zoomedMax===this.otherHandlePos&&(q=this.fixedExtreme),this.zoomedMax===this.size&&(q=this.reversedExtremes?R.dataMin:R.dataMax),this.zoomedMin===0&&(N=this.reversedExtremes?R.dataMax:R.dataMin),E((J=C.navigatorAxis.toFixedRange(this.zoomedMin,this.zoomedMax,N,q)).min)&&V(this,"setRange",{min:Math.min(J.min,J.max),max:Math.max(J.min,J.max),redraw:!0,animation:!this.hasDragged&&null,eventArguments:{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:G}})),u.DOMType!=="mousemove"&&u.DOMType!=="touchmove"&&(this.grabbedLeft=this.grabbedRight=this.grabbedCenter=this.fixedWidth=this.fixedExtreme=this.otherHandlePos=this.hasDragged=this.dragOffset=null),this.navigatorEnabled&&$(this.zoomedMin)&&$(this.zoomedMax)&&(y=Math.round(this.zoomedMin),g=Math.round(this.zoomedMax),this.shades&&this.drawMasks(y,g,W,it),this.outline&&this.drawOutline(y,g,W,it),this.navigatorOptions.handles.enabled&&Object.keys(this.handles).length===this.handles.length&&(this.drawHandle(y,0,W,it),this.drawHandle(g,1,W,it)))}removeEvents(){this.eventsToUnbind&&(this.eventsToUnbind.forEach(function(u){u()}),this.eventsToUnbind=void 0),this.removeBaseSeriesEvents()}removeBaseSeriesEvents(){let u=this.baseSeries||[];this.navigatorEnabled&&u[0]&&(this.navigatorOptions.adaptToUpdatedData!==!1&&u.forEach(function(g){nt(g,"updatedData",this.updatedDataHandler)},this),u[0].xAxis&&nt(u[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes))}init(u){let g=u.options,y=g.navigator||{},R=y.enabled,N=g.scrollbar||{},q=N.enabled,J=R&&y.height||0,F=q&&N.height||0,C=N.buttonsEnabled&&F||0;this.handles=[],this.shades=[],this.chart=u,this.setBaseSeries(),this.height=J,this.scrollbarHeight=F,this.scrollButtonSize=C,this.scrollbarEnabled=q,this.navigatorEnabled=R,this.navigatorOptions=y,this.scrollbarOptions=N,this.opposite=Q(y.opposite,!!(!R&&u.inverted));let w=this,G=w.baseSeries,W=u.xAxis.length,it=u.yAxis.length,ht=G&&G[0]&&G[0].xAxis||u.xAxis[0]||{options:{}};if(u.isDirtyBox=!0,w.navigatorEnabled?(w.xAxis=new i(u,rt({breaks:ht.options.breaks,ordinal:ht.options.ordinal,overscroll:ht.options.overscroll},y.xAxis,{id:"navigator-x-axis",yAxis:"navigator-y-axis",type:"datetime",index:W,isInternal:!0,offset:0,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:0,maxPadding:0,zoomEnabled:!1},u.inverted?{offsets:[C,0,-C,0],width:J}:{offsets:[0,-C,0,C],height:J}),"xAxis"),w.yAxis=new i(u,rt(y.yAxis,{id:"navigator-y-axis",alignTicks:!1,offset:0,index:it,isInternal:!0,reversed:Q(y.yAxis&&y.yAxis.reversed,u.yAxis[0]&&u.yAxis[0].reversed,!1),zoomEnabled:!1},u.inverted?{width:J}:{height:J}),"yAxis"),G||y.series.data?w.updateNavigatorSeries(!1):u.series.length===0&&(w.unbindRedraw=M(u,"beforeRedraw",function(){u.series.length>0&&!w.series&&(w.setBaseSeries(),w.unbindRedraw())})),w.reversedExtremes=u.inverted&&!w.xAxis.reversed||!u.inverted&&w.xAxis.reversed,w.renderElements(),w.addMouseEvents()):(w.xAxis={chart:u,navigatorAxis:{fake:!0},translate:function(ot,mt){let vt=u.xAxis[0],gt=vt.getExtremes(),xt=vt.len-2*C,kt=b("min",vt.options.min,gt.dataMin),Tt=b("max",vt.options.max,gt.dataMax)-kt;return mt?ot*Tt/xt+kt:xt*(ot-kt)/Tt},toPixels:function(ot){return this.translate(ot)},toValue:function(ot){return this.translate(ot,!0)}},w.xAxis.navigatorAxis.axis=w.xAxis,w.xAxis.navigatorAxis.toFixedRange=p.prototype.toFixedRange.bind(w.xAxis.navigatorAxis)),u.options.scrollbar.enabled){let ot=rt(u.options.scrollbar,{vertical:u.inverted});!$(ot.margin)&&w.navigatorEnabled&&(ot.margin=u.inverted?-3:3),u.scrollbar=w.scrollbar=new I(u.renderer,ot,u),M(w.scrollbar,"changed",function(mt){let vt=w.size,gt=vt*this.to,xt=vt*this.from;w.hasDragged=w.scrollbar.hasDragged,w.render(0,0,xt,gt),this.shouldUpdateExtremes(mt.DOMType)&&setTimeout(function(){w.onMouseUp(mt)})})}w.addBaseSeriesEvents(),w.addChartEvents()}getUnionExtremes(u){let g,y=this.chart.xAxis[0],R=this.xAxis,N=R.options,q=y.options;return u&&y.dataMin===null||(g={dataMin:Q(N&&N.min,b("min",q.min,y.dataMin,R.dataMin,R.min)),dataMax:Q(N&&N.max,b("max",q.max,y.dataMax,R.dataMax,R.max))}),g}setBaseSeries(u,g){let y=this.chart,R=this.baseSeries=[];u=u||y.options&&y.options.navigator.baseSeries||(y.series.length?L(y.series,N=>!N.options.isInternal).index:0),(y.series||[]).forEach((N,q)=>{!N.options.isInternal&&(N.options.showInNavigator||(q===u||N.options.id===u)&&N.options.showInNavigator!==!1)&&R.push(N)}),this.xAxis&&!this.xAxis.navigatorAxis.fake&&this.updateNavigatorSeries(!0,g)}updateNavigatorSeries(u,g){let y=this,R=y.chart,N=y.baseSeries,q={enableMouseTracking:!1,index:null,linkedTo:null,group:"nav",padXAxis:!1,xAxis:"navigator-x-axis",yAxis:"navigator-y-axis",showInLegend:!1,stacking:void 0,isInternal:!0,states:{inactive:{opacity:1}}},J=y.series=(y.series||[]).filter(W=>{let it=W.baseSeries;return!(0>N.indexOf(it))||(it&&(nt(it,"updatedData",y.updatedDataHandler),delete it.navigatorSeries),W.chart&&W.destroy(),!1)}),F,C,w=y.navigatorOptions.series,G;N&&N.length&&N.forEach(W=>{let it=W.navigatorSeries,ht=D({color:W.color,visible:W.visible},X(w)?et.navigator.series:w);if(it&&y.navigatorOptions.adaptToUpdatedData===!1)return;q.name="Navigator "+N.length,G=(F=W.options||{}).navigatorOptions||{},ht.dataLabels=m(ht.dataLabels),(C=rt(F,q,ht,G)).pointRange=Q(ht.pointRange,G.pointRange,et.plotOptions[C.type||"line"].pointRange);let ot=G.data||ht.data;y.hasNavigatorData=y.hasNavigatorData||!!ot,C.data=ot||F.data&&F.data.slice(0),it&&it.options?it.update(C,g):(W.navigatorSeries=R.initSeries(C),R.setSortedData(),W.navigatorSeries.baseSeries=W,J.push(W.navigatorSeries))}),(w.data&&!(N&&N.length)||X(w))&&(y.hasNavigatorData=!1,(w=m(w)).forEach((W,it)=>{q.name="Navigator "+(J.length+1),(C=rt(et.navigator.series,{color:R.series[it]&&!R.series[it].options.isInternal&&R.series[it].color||R.options.colors[it]||R.options.colors[0]},q,W)).data=W.data,C.data&&(y.hasNavigatorData=!0,J.push(R.initSeries(C)))})),u&&this.addBaseSeriesEvents()}addBaseSeriesEvents(){let u=this,g=u.baseSeries||[];g[0]&&g[0].xAxis&&g[0].eventsToUnbind.push(M(g[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes)),g.forEach(y=>{y.eventsToUnbind.push(M(y,"show",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!0,!1)})),y.eventsToUnbind.push(M(y,"hide",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!1,!1)})),this.navigatorOptions.adaptToUpdatedData!==!1&&y.xAxis&&y.eventsToUnbind.push(M(y,"updatedData",this.updatedDataHandler)),y.eventsToUnbind.push(M(y,"remove",function(){this.navigatorSeries&&(O(u.series,this.navigatorSeries),E(this.navigatorSeries.options)&&this.navigatorSeries.remove(!1),delete this.navigatorSeries)}))})}getBaseSeriesMin(u){return this.baseSeries.reduce(function(g,y){return Math.min(g,y.xData&&y.xData.length?y.xData[0]:g)},u)}modifyNavigatorAxisExtremes(){let u=this.xAxis;if(u.getExtremes!==void 0){let g=this.getUnionExtremes(!0);g&&(g.dataMin!==u.min||g.dataMax!==u.max)&&(u.min=g.dataMin,u.max=g.dataMax)}}modifyBaseAxisExtremes(){let u,g,y=this.chart.navigator,R=this.getExtremes(),N=R.min,q=R.max,J=R.dataMin,F=R.dataMax,C=q-N,w=y.stickToMin,G=y.stickToMax,W=Q(this.ordinal?.convertOverscroll(this.options.overscroll),0),it=y.series&&y.series[0],ht=!!this.setExtremes;!(this.eventArgs&&this.eventArgs.trigger==="rangeSelectorButton")&&(w&&(u=(g=J)+C),G&&(u=F+W,w||(g=Math.max(J,u-C,y.getBaseSeriesMin(it&&it.xData?it.xData[0]:-Number.MAX_VALUE)))),ht&&(w||G)&&$(g)&&(this.min=this.userMin=g,this.max=this.userMax=u)),y.stickToMin=y.stickToMax=null}updatedDataHandler(){let u=this.chart.navigator,g=this.navigatorSeries,y=u.reversedExtremes?Math.round(u.zoomedMin)===0:Math.round(u.zoomedMax)>=Math.round(u.size);u.stickToMax=Q(this.chart.options.navigator&&this.chart.options.navigator.stickToMax,y),u.stickToMin=u.shouldStickToMin(this,u),g&&!u.hasNavigatorData&&(g.options.pointStart=this.xData[0],g.setData(this.options.data,!1,null,!1))}shouldStickToMin(u,g){let y=g.getBaseSeriesMin(u.xData[0]),R=u.xAxis,N=R.max,q=R.min,J=R.options.range;return!!($(N)&&$(q))&&(J&&N-y>0?N-y<J:q<=y)}addChartEvents(){this.eventsToUnbind||(this.eventsToUnbind=[]),this.eventsToUnbind.push(M(this.chart,"redraw",function(){let u=this.navigator,g=u&&(u.baseSeries&&u.baseSeries[0]&&u.baseSeries[0].xAxis||this.xAxis[0]);g&&u.render(g.min,g.max)}),M(this.chart,"getMargins",function(){let u=this.navigator,g=u.opposite?"plotTop":"marginBottom";this.inverted&&(g=u.opposite?"marginRight":"plotLeft"),this[g]=(this[g]||0)+(u.navigatorEnabled||!this.inverted?u.height+u.scrollbarHeight:0)+u.navigatorOptions.margin}),M(S,"setRange",function(u){this.chart.xAxis[0].setExtremes(u.min,u.max,u.redraw,u.animation,u.eventArguments)}))}destroy(){this.removeEvents(),this.xAxis&&(O(this.chart.xAxis,this.xAxis),O(this.chart.axes,this.xAxis)),this.yAxis&&(O(this.chart.yAxis,this.yAxis),O(this.chart.axes,this.yAxis)),(this.series||[]).forEach(u=>{u.destroy&&u.destroy()}),["series","xAxis","yAxis","shades","outline","scrollbarTrack","scrollbarRifles","scrollbarGroup","scrollbar","navigatorGroup","rendered"].forEach(u=>{this[u]&&this[u].destroy&&this[u].destroy(),this[u]=null}),[this.handles].forEach(u=>{z(u)})}}return S}),l(s,"Stock/RangeSelector/RangeSelectorDefaults.js",[],function(){return{lang:{rangeSelectorZoom:"Zoom",rangeSelectorFrom:"",rangeSelectorTo:"\u2192"},rangeSelector:{allButtonsEnabled:!1,buttons:void 0,buttonSpacing:5,dropdown:"responsive",enabled:void 0,verticalAlign:"top",buttonTheme:{width:28,height:18,padding:2,zIndex:7},floating:!1,x:0,y:0,height:void 0,inputBoxBorderColor:"none",inputBoxHeight:17,inputBoxWidth:void 0,inputDateFormat:"%e %b %Y",inputDateParser:void 0,inputEditDateFormat:"%Y-%m-%d",inputEnabled:!0,inputPosition:{align:"right",x:0,y:0},inputSpacing:5,selected:void 0,buttonPosition:{align:"left",x:0,y:0},inputStyle:{color:"#334eff",cursor:"pointer",fontSize:"0.8em"},labelStyle:{color:"#666666",fontSize:"0.8em"}}}}),l(s,"Stock/RangeSelector/RangeSelectorComposition.js",[s["Core/Defaults.js"],s["Core/Globals.js"],s["Stock/RangeSelector/RangeSelectorDefaults.js"],s["Core/Utilities.js"]],function(i,r,o,h){let p,{defaultOptions:x}=i,{composed:I}=r,{addEvent:P,defined:et,extend:Z,find:M,isNumber:K,merge:B,pick:E,pushUnique:z}=h,O=[];function D(){let m,b,S=this.range,v=S.type,u=this.max,g=this.chart.time,y=function(N,q){let J=v==="year"?"FullYear":"Month",F=new g.Date(N),C=g.get(J,F);return g.set(J,F,C+q),C===g.get(J,F)&&g.set("Date",F,0),F.getTime()-N};K(S)?(m=u-S,b=S):S&&(m=u+y(u,-(S.count||1)),this.chart&&this.chart.setFixedRange(u-m));let R=E(this.dataMin,Number.MIN_VALUE);return K(m)||(m=R),m<=R&&(m=R,b===void 0&&(b=y(m,S.count)),this.newMax=Math.min(m+b,E(this.dataMax,Number.MAX_VALUE))),K(u)?!K(S)&&S&&S._offsetMin&&(m+=S._offsetMin):m=void 0,m}function L(){this.options.rangeSelector&&this.options.rangeSelector.enabled&&(this.rangeSelector=new p(this))}function V(){let m=this.axes,b=this.rangeSelector;if(b){K(b.deferredYTDClick)&&(b.clickButton(b.deferredYTDClick),delete b.deferredYTDClick),m.forEach(v=>{v.updateNames(),v.setScale()}),this.getAxisMargins(),b.render();let S=b.options.verticalAlign;b.options.floating||(S==="bottom"?this.extraBottomMargin=!0:S==="middle"||(this.extraTopMargin=!0))}}function X(m){let b,S,v,u,g=m.rangeSelector,y=()=>{g&&(b=m.xAxis[0].getExtremes(),S=m.legend,u=g&&g.options.verticalAlign,K(b.min)&&g.render(b.min,b.max),S.display&&u==="top"&&u===S.options.verticalAlign&&(v=B(m.spacingBox),S.options.layout==="vertical"?v.y=m.plotTop:v.y+=g.getHeight(),S.group.placed=!1,S.align(v)))};g&&(M(O,R=>R[0]===m)||O.push([m,[P(m.xAxis[0],"afterSetExtremes",function(R){g&&g.render(R.min,R.max)}),P(m,"redraw",y)]]),y())}function $(){for(let m=0,b=O.length;m<b;++m){let S=O[m];if(S[0]===this){S[1].forEach(v=>v()),O.splice(m,1);return}}}function rt(){let m=this.rangeSelector;if(m){let b=m.getHeight();this.extraTopMargin&&(this.plotTop+=b),this.extraBottomMargin&&(this.marginBottom+=b)}}function Q(){let m=this.rangeSelector;if(m&&!m.options.floating){m.render();let b=m.options.verticalAlign;b==="bottom"?this.extraBottomMargin=!0:b!=="middle"&&(this.extraTopMargin=!0)}}function nt(m){let b=m.options.rangeSelector,S=this.extraBottomMargin,v=this.extraTopMargin,u=this.rangeSelector;if(b&&b.enabled&&!et(u)&&this.options.rangeSelector&&(this.options.rangeSelector.enabled=!0,this.rangeSelector=u=new p(this)),this.extraBottomMargin=!1,this.extraTopMargin=!1,u){X(this);let g=b&&b.verticalAlign||u.options&&u.options.verticalAlign;u.options.floating||(g==="bottom"?this.extraBottomMargin=!0:g==="middle"||(this.extraTopMargin=!0)),(this.extraBottomMargin!==S||this.extraTopMargin!==v)&&(this.isDirtyBox=!0)}}return{compose:function(m,b,S){if(p=S,z(I,"RangeSelector")){let v=b.prototype;m.prototype.minFromRange=D,P(b,"afterGetContainer",L),P(b,"beforeRender",V),P(b,"destroy",$),P(b,"getMargins",rt),P(b,"render",Q),P(b,"update",nt),v.callbacks.push(X),Z(x,{rangeSelector:o.rangeSelector}),Z(x.lang,o.lang)}}}}),l(s,"Stock/RangeSelector/RangeSelector.js",[s["Core/Axis/Axis.js"],s["Core/Defaults.js"],s["Core/Globals.js"],s["Stock/RangeSelector/RangeSelectorComposition.js"],s["Core/Renderer/SVG/SVGElement.js"],s["Core/Utilities.js"]],function(i,r,o,h,p,x){let{defaultOptions:I}=r,{addEvent:P,createElement:et,css:Z,defined:M,destroyObjectProperties:K,discardElement:B,extend:E,fireEvent:z,isNumber:O,merge:D,objectEach:L,pad:V,pick:X,pInt:$,splat:rt}=x;class Q{static compose(m,b){h.compose(m,b,Q)}constructor(m){this.buttonOptions=Q.prototype.defaultButtons,this.initialButtonGroupWidth=0,this.chart=m,this.init(m)}clickButton(m,b){let S=this.chart,v=this.buttonOptions[m],u=S.xAxis[0],g=S.scroller&&S.scroller.getUnionExtremes()||u||{},y=v.type,R=v.dataGrouping,N=g.dataMin,q=g.dataMax,J,F=u&&Math.round(Math.min(u.max,X(q,u.max))),C,w=v._range,G,W,it,ht,ot,mt=!0;if(N!==null&&q!==null){if(this.setSelected(m),R&&(this.forcedDataGrouping=!0,i.prototype.setDataGrouping.call(u||{chart:this.chart},R,!1),this.frozenStates=v.preserveDataGrouping),y==="month"||y==="year")u?(ht={range:v,max:F,chart:S,dataMin:N,dataMax:q},J=u.minFromRange.call(ht),O(ht.newMax)&&(F=ht.newMax),mt=!1):w=v;else if(w)F=Math.min((J=Math.max(F-w,N))+w,q),mt=!1;else if(y==="ytd")if(u)(q===void 0||N===void 0)&&(N=Number.MAX_VALUE,q=Number.MIN_VALUE,S.series.forEach(vt=>{let gt=vt.xData;gt&&(N=Math.min(gt[0],N),q=Math.max(gt[gt.length-1],q))}),b=!1),J=G=(ot=this.getYTDExtremes(q,N,S.time.useUTC)).min,F=ot.max;else{this.deferredYTDClick=m;return}else y==="all"&&u&&(S.navigator&&S.navigator.baseSeries[0]&&(S.navigator.baseSeries[0].xAxis.options.range=void 0),J=N,F=q);mt&&v._offsetMin&&M(J)&&(J+=v._offsetMin),v._offsetMax&&M(F)&&(F+=v._offsetMax),this.dropdown&&(this.dropdown.selectedIndex=m+1),u?(u.setExtremes(J,F,X(b,!0),void 0,{trigger:"rangeSelectorButton",rangeSelectorButton:v}),S.setFixedRange(v._range)):(it=(C=rt(S.options.xAxis)[0]).range,C.range=w,W=C.min,C.min=G,P(S,"load",function(){S.setFixedRange(v._range),C.range=it,C.min=W})),z(this,"afterBtnClick")}}setSelected(m){this.selected=this.options.selected=m}init(m){let b=this,S=m.options.rangeSelector,v=S.buttons||b.defaultButtons.slice(),u=S.selected,g=function(){let y=b.minInput,R=b.maxInput;y&&y.blur&&z(y,"blur"),R&&R.blur&&z(R,"blur")};b.chart=m,b.options=S,b.buttons=[],b.buttonOptions=v,this.eventsToUnbind=[],this.eventsToUnbind.push(P(m.container,"mousedown",g)),this.eventsToUnbind.push(P(m,"resize",g)),v.forEach(b.computeButtonRange),u!==void 0&&v[u]&&this.clickButton(u,!1),this.eventsToUnbind.push(P(m,"load",function(){m.xAxis&&m.xAxis[0]&&P(m.xAxis[0],"setExtremes",function(y){O(this.max)&&O(this.min)&&this.max-this.min!==m.fixedRange&&y.trigger!=="rangeSelectorButton"&&y.trigger!=="updatedData"&&b.forcedDataGrouping&&!b.frozenStates&&this.setDataGrouping(!1,!1)})}))}updateButtonStates(){let m=this,b=this.chart,S=this.dropdown,v=b.xAxis[0],u=Math.round(v.max-v.min),g=!v.hasVisibleSeries,y=24*36e5,R=b.scroller&&b.scroller.getUnionExtremes()||v,N=R.dataMin,q=R.dataMax,J=m.getYTDExtremes(q,N,b.time.useUTC),F=J.min,C=J.max,w=m.selected,G=m.options.allButtonsEnabled,W=m.buttons,it=O(w),ht=!1;m.buttonOptions.forEach((ot,mt)=>{let vt=ot._range,gt=ot.type,xt=ot.count||1,kt=W[mt],Tt=ot._offsetMax-ot._offsetMin,Nt=mt===w,Kt=vt>q-N,Yt=vt<v.minRange,Ft=0,ae=!1,xe=!1,fe=vt===u;if(Nt&&Kt&&(ht=!0),v.isOrdinal&&v.ordinal?.positions&&vt&&u<vt){let Mi=v.ordinal.positions;Mi[Mi.length-1]-Mi[0]>vt&&(fe=!0)}else(gt==="month"||gt==="year")&&u+36e5>={month:28,year:365}[gt]*y*xt-Tt&&u-36e5<={month:31,year:366}[gt]*y*xt+Tt?fe=!0:gt==="ytd"?(fe=C-F+Tt===u,ae=!Nt):gt==="all"&&(fe=v.max-v.min>=q-N,xe=!Nt&&it&&fe);let Xe=!G&&!(ht&&gt==="all")&&(Kt||Yt||xe||g),zr=ht&&gt==="all"||Nt&&fe||fe&&!it&&!ae||Nt&&m.frozenStates;Xe?Ft=3:zr&&(it=!0,Ft=2),kt.state!==Ft&&(kt.setState(Ft),S&&(S.options[mt+1].disabled=Xe,Ft===2&&(S.selectedIndex=mt+1)),Ft===0&&w===mt?m.setSelected():(Ft===2&&!M(w)||ht)&&m.setSelected(mt))})}computeButtonRange(m){let b=m.type,S=m.count||1,v={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5};v[b]?m._range=v[b]*S:(b==="month"||b==="year")&&(m._range=24*{month:30,year:365}[b]*36e5*S),m._offsetMin=X(m.offsetMin,0),m._offsetMax=X(m.offsetMax,0),m._range+=m._offsetMax-m._offsetMin}getInputValue(m){let b=m==="min"?this.minInput:this.maxInput,S=this.chart.options.rangeSelector,v=this.chart.time;return b?(b.type==="text"&&S.inputDateParser||this.defaultInputDateParser)(b.value,v.useUTC,v):0}setInputValue(m,b){let S=this.options,v=this.chart.time,u=m==="min"?this.minInput:this.maxInput,g=m==="min"?this.minDateBox:this.maxDateBox;if(u){let y=u.getAttribute("data-hc-time"),R=M(y)?Number(y):void 0;if(M(b)){let N=R;M(N)&&u.setAttribute("data-hc-time-previous",N),u.setAttribute("data-hc-time",b),R=b}u.value=v.dateFormat(this.inputTypeFormats[u.type]||S.inputEditDateFormat,R),g&&g.attr({text:v.dateFormat(S.inputDateFormat,R)})}}setInputExtremes(m,b,S){let v=m==="min"?this.minInput:this.maxInput;if(v){let u=this.inputTypeFormats[v.type],g=this.chart.time;if(u){let y=g.dateFormat(u,b);v.min!==y&&(v.min=y);let R=g.dateFormat(u,S);v.max!==R&&(v.max=R)}}}showInput(m){let b=m==="min"?this.minDateBox:this.maxDateBox,S=m==="min"?this.minInput:this.maxInput;if(S&&b&&this.inputGroup){let v=S.type==="text",{translateX:u=0,translateY:g=0}=this.inputGroup,{x:y=0,width:R=0,height:N=0}=b,{inputBoxWidth:q}=this.options;Z(S,{width:v?R+(q?-2:20)+"px":"auto",height:N-2+"px",border:"2px solid silver"}),v&&q?Z(S,{left:u+y+"px",top:g+"px"}):Z(S,{left:Math.min(Math.round(y+u-(S.offsetWidth-R)/2),this.chart.chartWidth-S.offsetWidth)+"px",top:g-(S.offsetHeight-N)/2+"px"})}}hideInput(m){let b=m==="min"?this.minInput:this.maxInput;b&&Z(b,{top:"-9999em",border:0,width:"1px",height:"1px"})}defaultInputDateParser(m,b,S){let v=m.split("/").join("-").split(" ").join("T");if(v.indexOf("T")===-1&&(v+="T00:00"),b)v+="Z";else{let g;if(o.isSafari&&!((g=v).length>6&&(g.lastIndexOf("-")===g.length-6||g.lastIndexOf("+")===g.length-6))){let y=new Date(v).getTimezoneOffset()/60;v+=y<=0?`+${V(-y)}:00`:`-${V(y)}:00`}}let u=Date.parse(v);if(!O(u)){let g=m.split("-");u=Date.UTC($(g[0]),$(g[1])-1,$(g[2]))}return S&&b&&O(u)&&(u+=S.getTimezoneOffset(u)),u}drawInput(m){let{chart:b,div:S,inputGroup:v}=this,u=this,g=b.renderer.style||{},y=b.renderer,R=b.options.rangeSelector,N=I.lang,q=m==="min";function J(){let{maxInput:it,minInput:ht}=u,ot=b.xAxis[0],mt=b.scroller&&b.scroller.getUnionExtremes()||ot,vt=mt.dataMin,gt=mt.dataMax,xt=u.getInputValue(m);xt!==Number(G.getAttribute("data-hc-time-previous"))&&O(xt)&&(G.setAttribute("data-hc-time-previous",xt),q&&it&&O(vt)?xt>Number(it.getAttribute("data-hc-time"))?xt=void 0:xt<vt&&(xt=vt):ht&&O(gt)&&(xt<Number(ht.getAttribute("data-hc-time"))?xt=void 0:xt>gt&&(xt=gt)),xt!==void 0&&ot.setExtremes(q?xt:ot.min,q?ot.max:xt,void 0,void 0,{trigger:"rangeSelectorInput"}))}let F=N[q?"rangeSelectorFrom":"rangeSelectorTo"]||"",C=y.label(F,0).addClass("highcharts-range-label").attr({padding:F?2:0,height:F?R.inputBoxHeight:0}).add(v),w=y.label("",0).addClass("highcharts-range-input").attr({padding:2,width:R.inputBoxWidth,height:R.inputBoxHeight,"text-align":"center"}).on("click",function(){u.showInput(m),u[m+"Input"].focus()});b.styledMode||w.attr({stroke:R.inputBoxBorderColor,"stroke-width":1}),w.add(v);let G=et("input",{name:m,className:"highcharts-range-selector"},void 0,S);G.setAttribute("type",function(it){if(it.indexOf("%L")!==-1)return"text";let ht=["a","A","d","e","w","b","B","m","o","y","Y"].some(mt=>it.indexOf("%"+mt)!==-1),ot=["H","k","I","l","M","S"].some(mt=>it.indexOf("%"+mt)!==-1);return ht&&ot?"datetime-local":ht?"date":ot?"time":"text"}(R.inputDateFormat||"%e %b %Y")),b.styledMode||(C.css(D(g,R.labelStyle)),w.css(D({color:"#333333"},g,R.inputStyle)),Z(G,E({position:"absolute",border:0,boxShadow:"0 0 15px rgba(0,0,0,0.3)",width:"1px",height:"1px",padding:0,textAlign:"center",fontSize:g.fontSize,fontFamily:g.fontFamily,top:"-9999em"},R.inputStyle))),G.onfocus=()=>{u.showInput(m)},G.onblur=()=>{G===o.doc.activeElement&&J(),u.hideInput(m),u.setInputValue(m),G.blur()};let W=!1;return G.onchange=()=>{W||(J(),u.hideInput(m),G.blur())},G.onkeypress=it=>{it.keyCode===13&&J()},G.onkeydown=it=>{W=!0,(it.keyCode===38||it.keyCode===40)&&J()},G.onkeyup=()=>{W=!1},{dateBox:w,input:G,label:C}}getPosition(){let m=this.chart,b=m.options.rangeSelector,S=b.verticalAlign==="top"?m.plotTop-m.axisOffset[0]:0;return{buttonTop:S+b.buttonPosition.y,inputTop:S+b.inputPosition.y-10}}getYTDExtremes(m,b,S){let v=this.chart.time,u=new v.Date(m),g=v.get("FullYear",u),y=S?v.Date.UTC(g,0,1):+new v.Date(g,0,1),R=u.getTime();return{max:Math.min(m||R,R),min:Math.max(b,y)}}render(m,b){let S=this.chart,v=S.renderer,u=S.container,g=S.options,y=g.rangeSelector,R=X(g.chart.style&&g.chart.style.zIndex,0)+1,N=y.inputEnabled,q=this.rendered;if(y.enabled!==!1){if(!q&&(this.group=v.g("range-selector-group").attr({zIndex:7}).add(),this.div=et("div",void 0,{position:"relative",height:0,zIndex:R}),this.buttonOptions.length&&this.renderButtons(),u.parentNode&&u.parentNode.insertBefore(this.div,u),N)){this.inputGroup=v.g("input-group").add(this.group);let J=this.drawInput("min");this.minDateBox=J.dateBox,this.minLabel=J.label,this.minInput=J.input;let F=this.drawInput("max");this.maxDateBox=F.dateBox,this.maxLabel=F.label,this.maxInput=F.input}if(N){this.setInputValue("min",m),this.setInputValue("max",b);let J=S.scroller&&S.scroller.getUnionExtremes()||S.xAxis[0]||{};if(M(J.dataMin)&&M(J.dataMax)){let F=S.xAxis[0].minRange||0;this.setInputExtremes("min",J.dataMin,Math.min(J.dataMax,this.getInputValue("max"))-F),this.setInputExtremes("max",Math.max(J.dataMin,this.getInputValue("min"))+F,J.dataMax)}if(this.inputGroup){let F=0;[this.minLabel,this.minDateBox,this.maxLabel,this.maxDateBox].forEach(C=>{if(C){let{width:w}=C.getBBox();w&&(C.attr({x:F}),F+=w+y.inputSpacing)}})}}this.alignElements(),this.rendered=!0}}renderButtons(){let{buttons:m,chart:b,options:S}=this,v=I.lang,u=b.renderer,g=D(S.buttonTheme),y=g&&g.states,R=g.width||28;delete g.width,delete g.states,this.buttonGroup=u.g("range-selector-buttons").add(this.group);let N=this.dropdown=et("select",void 0,{position:"absolute",width:"1px",height:"1px",padding:0,border:0,top:"-9999em",cursor:"pointer",opacity:1e-4},this.div);P(N,"touchstart",()=>{N.style.fontSize="16px"}),[[o.isMS?"mouseover":"mouseenter"],[o.isMS?"mouseout":"mouseleave"],["change","click"]].forEach(([q,J])=>{P(N,q,()=>{let F=m[this.currentButtonIndex()];F&&z(F.element,J||q)})}),this.zoomText=u.label(v&&v.rangeSelectorZoom||"",0).attr({padding:S.buttonTheme.padding,height:S.buttonTheme.height,paddingLeft:0,paddingRight:0}).add(this.buttonGroup),this.chart.styledMode||(this.zoomText.css(S.labelStyle),g["stroke-width"]=X(g["stroke-width"],0)),et("option",{textContent:this.zoomText.textStr,disabled:!0},void 0,N),this.buttonOptions.forEach((q,J)=>{et("option",{textContent:q.title||q.text},void 0,N),m[J]=u.button(q.text,0,0,F=>{let C,w=q.events&&q.events.click;w&&(C=w.call(q,F)),C!==!1&&this.clickButton(J),this.isActive=!0},g,y&&y.hover,y&&y.select,y&&y.disabled).attr({"text-align":"center",width:R}).add(this.buttonGroup),q.title&&m[J].attr("title",q.title)})}alignElements(){let{buttonGroup:m,buttons:b,chart:S,group:v,inputGroup:u,options:g,zoomText:y}=this,R=S.options,N=R.exporting&&R.exporting.enabled!==!1&&R.navigation&&R.navigation.buttonOptions,{buttonPosition:q,inputPosition:J,verticalAlign:F}=g,C=(G,W)=>N&&this.titleCollision(S)&&F==="top"&&W.align==="right"&&W.y-G.getBBox().height-12<(N.y||0)+(N.height||0)+S.spacing[0]?-40:0,w=S.plotLeft;if(v&&q&&J){let G=q.x-S.spacing[3];if(m){if(this.positionButtons(),!this.initialButtonGroupWidth){let kt=0;y&&(kt+=y.getBBox().width+5),b.forEach((Tt,Nt)=>{kt+=Tt.width||0,Nt!==b.length-1&&(kt+=g.buttonSpacing)}),this.initialButtonGroupWidth=kt}w-=S.spacing[3],this.updateButtonStates();let xt=C(m,q);this.alignButtonGroup(xt),v.placed=m.placed=S.hasLoaded}let W=0;u&&(W=C(u,J),J.align==="left"?G=w:J.align==="right"&&(G=-Math.max(S.axisOffset[1],-W)),u.align({y:J.y,width:u.getBBox().width,align:J.align,x:J.x+G-2},!0,S.spacingBox),u.placed=S.hasLoaded),this.handleCollision(W),v.align({verticalAlign:F},!0,S.spacingBox);let it=v.alignAttr.translateY,ht=v.getBBox().height+20,ot=0;if(F==="bottom"){let xt=S.legend&&S.legend.options;ot=it-(ht=ht+(xt&&xt.verticalAlign==="bottom"&&xt.enabled&&!xt.floating?S.legend.legendHeight+X(xt.margin,10):0)-20)-(g.floating?0:g.y)-(S.titleOffset?S.titleOffset[2]:0)-10}F==="top"?(g.floating&&(ot=0),S.titleOffset&&S.titleOffset[0]&&(ot=S.titleOffset[0]),ot+=S.margin[0]-S.spacing[0]||0):F==="middle"&&(J.y===q.y?ot=it:(J.y||q.y)&&(J.y<0||q.y<0?ot-=Math.min(J.y,q.y):ot=it-ht)),v.translate(g.x,g.y+Math.floor(ot));let{minInput:mt,maxInput:vt,dropdown:gt}=this;g.inputEnabled&&mt&&vt&&(mt.style.marginTop=v.translateY+"px",vt.style.marginTop=v.translateY+"px"),gt&&(gt.style.marginTop=v.translateY+"px")}}alignButtonGroup(m,b){let{chart:S,options:v,buttonGroup:u}=this,{buttonPosition:g}=v,y=S.plotLeft-S.spacing[3],R=g.x-S.spacing[3];g.align==="right"?R+=m-y:g.align==="center"&&(R-=y/2),u&&u.align({y:g.y,width:X(b,this.initialButtonGroupWidth),align:g.align,x:R},!0,S.spacingBox)}positionButtons(){let{buttons:m,chart:b,options:S,zoomText:v}=this,u=b.hasLoaded?"animate":"attr",{buttonPosition:g}=S,y=b.plotLeft,R=y;v&&v.visibility!=="hidden"&&(v[u]({x:X(y+g.x,y)}),R+=g.x+v.getBBox().width+5);for(let N=0,q=this.buttonOptions.length;N<q;++N)m[N].visibility!=="hidden"?(m[N][u]({x:R}),R+=(m[N].width||0)+S.buttonSpacing):m[N][u]({x:y})}handleCollision(m){let{chart:b,buttonGroup:S,inputGroup:v}=this,{buttonPosition:u,dropdown:g,inputPosition:y}=this.options,R=()=>{let J=0;return this.buttons.forEach(F=>{let C=F.getBBox();C.width>J&&(J=C.width)}),J},N=J=>{if(v&&S){let F=v.alignAttr.translateX+v.alignOptions.x-m+v.getBBox().x+2,C=v.alignOptions.width,w=S.alignAttr.translateX+S.getBBox().x;return w+J>F&&F+C>w&&u.y<y.y+v.getBBox().height}return!1},q=()=>{v&&S&&v.attr({translateX:v.alignAttr.translateX+(b.axisOffset[1]>=-m?0:-m),translateY:v.alignAttr.translateY+S.getBBox().height+10})};if(S){if(g==="always"){this.collapseButtons(m),N(R())&&q();return}g==="never"&&this.expandButtons()}v&&S?y.align===u.align||N(this.initialButtonGroupWidth+20)?g==="responsive"?(this.collapseButtons(m),N(R())&&q()):q():g==="responsive"&&this.expandButtons():S&&g==="responsive"&&(this.initialButtonGroupWidth>b.plotWidth?this.collapseButtons(m):this.expandButtons())}collapseButtons(m){let{buttons:b,buttonOptions:S,chart:v,dropdown:u,options:g,zoomText:y}=this;if(this.isCollapsed===!0)return;this.isCollapsed=!0;let R=v.userOptions.rangeSelector&&v.userOptions.rangeSelector.buttonTheme||{},N=F=>({text:F?`${F} \u25BE`:"\u25BE",width:"auto",paddingLeft:X(g.buttonTheme.paddingLeft,R.padding,8),paddingRight:X(g.buttonTheme.paddingRight,R.padding,8)});y&&y.hide();let q=!1;S.forEach((F,C)=>{let w=b[C];w.state!==2?w.hide():(w.show(),w.attr(N(F.text)),q=!0)}),q||(u&&(u.selectedIndex=0),b[0].show(),b[0].attr(N(this.zoomText&&this.zoomText.textStr)));let{align:J}=g.buttonPosition;this.positionButtons(),(J==="right"||J==="center")&&this.alignButtonGroup(m,b[this.currentButtonIndex()].getBBox().width),this.showDropdown()}expandButtons(){let{buttons:m,buttonOptions:b,options:S,zoomText:v}=this;this.hideDropdown(),this.isCollapsed!==!1&&(this.isCollapsed=!1,v&&v.show(),b.forEach((u,g)=>{let y=m[g];y.show(),y.attr({text:u.text,width:S.buttonTheme.width||28,paddingLeft:X(S.buttonTheme.paddingLeft,"unset"),paddingRight:X(S.buttonTheme.paddingRight,"unset")}),y.state<2&&y.setState(0)}),this.positionButtons())}currentButtonIndex(){let{dropdown:m}=this;return m&&m.selectedIndex>0?m.selectedIndex-1:0}showDropdown(){let{buttonGroup:m,buttons:b,chart:S,dropdown:v}=this;if(m&&v){let{translateX:u=0,translateY:g=0}=m,y=b[this.currentButtonIndex()].getBBox();Z(v,{left:S.plotLeft+u+"px",top:g+.5+"px",width:y.width+"px",height:y.height+"px"}),this.hasVisibleDropdown=!0}}hideDropdown(){let{dropdown:m}=this;m&&(Z(m,{top:"-9999em",width:"1px",height:"1px"}),this.hasVisibleDropdown=!1)}getHeight(){let m=this.options,b=this.group,S=m.inputPosition,v=m.buttonPosition,u=m.y,g=v.y,y=S.y,R=0;return m.height?m.height:(this.alignElements(),R=b?b.getBBox(!0).height+13+u:0,(y<0&&g<0||y>0&&g>0)&&(R+=Math.abs(Math.min(y,g))),R)}titleCollision(m){return!(m.options.title.text||m.options.subtitle.text)}update(m){let b=this.chart;D(!0,b.options.rangeSelector,m),this.destroy(),this.init(b),this.render()}destroy(){let m=this,b=m.minInput,S=m.maxInput;m.eventsToUnbind&&(m.eventsToUnbind.forEach(v=>v()),m.eventsToUnbind=void 0),K(m.buttons),b&&(b.onfocus=b.onblur=b.onchange=null),S&&(S.onfocus=S.onblur=S.onchange=null),L(m,function(v,u){v&&u!=="chart"&&(v instanceof p?v.destroy():v instanceof window.HTMLElement&&B(v)),v!==Q.prototype[u]&&(m[u]=null)},this)}}return E(Q.prototype,{defaultButtons:[{type:"month",count:1,text:"1m",title:"View 1 month"},{type:"month",count:3,text:"3m",title:"View 3 months"},{type:"month",count:6,text:"6m",title:"View 6 months"},{type:"ytd",text:"YTD",title:"View year to date"},{type:"year",count:1,text:"1y",title:"View 1 year"},{type:"all",text:"All",title:"View all"}],inputTypeFormats:{"datetime-local":"%Y-%m-%dT%H:%M:%S",date:"%Y-%m-%d",time:"%H:%M:%S"}}),Q}),l(s,"Series/PathUtilities.js",[],function(){function i(r,o){let h=[];for(let p=0;p<r.length;p++){let x=r[p][1],I=r[p][2];if(typeof x=="number"&&typeof I=="number")if(p===0)h.push(["M",x,I]);else if(p===r.length-1)h.push(["L",x,I]);else if(o){let P=r[p-1],et=r[p+1];if(P&&et){let Z=P[1],M=P[2],K=et[1],B=et[2];if(typeof Z=="number"&&typeof K=="number"&&typeof M=="number"&&typeof B=="number"&&Z!==K&&M!==B){let E=Z<K?1:-1,z=M<B?1:-1;h.push(["L",x-E*Math.min(Math.abs(x-Z),o),I-z*Math.min(Math.abs(I-M),o)],["C",x,I,x,I,x+E*Math.min(Math.abs(x-K),o),I+z*Math.min(Math.abs(I-B),o)])}}}else h.push(["L",x,I])}return h}return{applyRadius:i,getLinkPath:{default:function(r){let{x1:o,y1:h,x2:p,y2:x,width:I=0,inverted:P=!1,radius:et,parentVisible:Z}=r;return Z?i([["M",o,h],["L",o+I*(P?-.5:.5),h],["L",o+I*(P?-.5:.5),x],["L",p,x]],et):[["M",o,h],["L",o,h],["C",o,h,o,x,o,x],["L",o,x],["C",o,h,o,x,o,x],["L",o,x]]},straight:function(r){let{x1:o,y1:h,x2:p,y2:x,width:I=0,inverted:P=!1,parentVisible:et}=r;return et?[["M",o,h],["L",o+I*(P?-1:1),x],["L",p,x]]:[["M",o,h],["L",o,x],["L",o,x]]},curved:function(r){let{x1:o,y1:h,x2:p,y2:x,offset:I=0,width:P=0,inverted:et=!1,parentVisible:Z}=r;return Z?[["M",o,h],["C",o+I,h,o-I+P*(et?-1:1),x,o+P*(et?-1:1),x],["L",p,x]]:[["M",o,h],["C",o,h,o,x,o,x],["L",p,x]]}}}}),l(s,"Gantt/PathfinderAlgorithms.js",[s["Series/PathUtilities.js"],s["Core/Utilities.js"]],function(i,r){let{pick:o}=r,{min:h,max:p,abs:x}=Math;function I(B,E,z){let O=E-1e-7,D=z||0,L=B.length-1,V,X;for(;D<=L;)if((X=O-B[V=L+D>>1].xMin)>0)D=V+1;else{if(!(X<0))return V;L=V-1}return D>0?D-1:0}function P(B,E){let z=I(B,E.x+1)+1;for(;z--;){var O;if(B[z].xMax>=E.x&&(O=B[z],E.x<=O.xMax&&E.x>=O.xMin&&E.y<=O.yMax&&E.y>=O.yMin))return z}return-1}function et(B){let E=[];if(B.length){E.push(["M",B[0].start.x,B[0].start.y]);for(let z=0;z<B.length;++z)E.push(["L",B[z].end.x,B[z].end.y])}return E}function Z(B,E){B.yMin=p(B.yMin,E.yMin),B.yMax=h(B.yMax,E.yMax),B.xMin=p(B.xMin,E.xMin),B.xMax=h(B.xMax,E.xMax)}let M=function(B,E,z){let O=[],D=z.chartObstacles,L=P(D,B),V=P(D,E),X,$=o(z.startDirectionX,x(E.x-B.x)>x(E.y-B.y))?"x":"y",rt,Q,nt,m;function b(g,y,R,N,q){let J={x:g.x,y:g.y};return J[y]=R[N||y]+(q||0),J}function S(g,y,R){let N=x(y[R]-g[R+"Min"])>x(y[R]-g[R+"Max"]);return b(y,R,g,R+(N?"Max":"Min"),N?1:-1)}V>-1?(X={start:Q=S(D[V],E,$),end:E},m=Q):m=E,L>-1&&(Q=S(rt=D[L],B,$),O.push({start:B,end:Q}),Q[$]>=B[$]==Q[$]>=m[$]&&(nt=B[$=$==="y"?"x":"y"]<E[$],O.push({start:Q,end:b(Q,$,rt,$+(nt?"Max":"Min"),nt?1:-1)}),$=$==="y"?"x":"y"));let v=O.length?O[O.length-1].end:B;Q=b(v,$,m),O.push({start:v,end:Q});let u=b(Q,$=$==="y"?"x":"y",m);return O.push({start:Q,end:u}),O.push(X),{path:i.applyRadius(et(O),z.radius),obstacles:O}};function K(B,E,z){let O=o(z.startDirectionX,x(E.x-B.x)>x(E.y-B.y)),D=O?"x":"y",L=[],V=z.obstacleMetrics,X=h(B.x,E.x)-V.maxWidth-10,$=p(B.x,E.x)+V.maxWidth+10,rt=h(B.y,E.y)-V.maxHeight-10,Q=p(B.y,E.y)+V.maxHeight+10,nt,m,b,S=!1,v=z.chartObstacles,u=I(v,$),g=I(v,X);function y(N,q,J){let F,C,w,G,W=N.x<q.x?1:-1;N.x<q.x?(F=N,C=q):(F=q,C=N),N.y<q.y?(G=N,w=q):(G=q,w=N);let it=W<0?h(I(v,C.x),v.length-1):0;for(;v[it]&&(W>0&&v[it].xMin<=C.x||W<0&&v[it].xMax>=F.x);){if(v[it].xMin<=C.x&&v[it].xMax>=F.x&&v[it].yMin<=w.y&&v[it].yMax>=G.y)return J?{y:N.y,x:N.x<q.x?v[it].xMin-1:v[it].xMax+1,obstacle:v[it]}:{x:N.x,y:N.y<q.y?v[it].yMin-1:v[it].yMax+1,obstacle:v[it]};it+=W}return q}function R(N,q,J,F,C){let w=C.soft,G=C.hard,W=F?"x":"y",it={x:q.x,y:q.y},ht={x:q.x,y:q.y},ot=N[W+"Max"]>=w[W+"Max"],mt=N[W+"Min"]<=w[W+"Min"],vt=N[W+"Max"]>=G[W+"Max"],gt=N[W+"Min"]<=G[W+"Min"],xt=x(N[W+"Min"]-q[W]),kt=x(N[W+"Max"]-q[W]),Tt=10>x(xt-kt)?q[W]<J[W]:kt<xt;ht[W]=N[W+"Min"],it[W]=N[W+"Max"];let Nt=y(q,ht,F)[W]!==ht[W],Kt=y(q,it,F)[W]!==it[W];return Tt=Nt?!Kt||Tt:!Kt&&Tt,Tt=mt?!ot||Tt:!ot&&Tt,Tt=gt?!vt||Tt:!vt&&Tt}for((u=P(v=v.slice(g,u+1),E))>-1&&(b=function(N,q,J){let F=h(N.xMax-q.x,q.x-N.xMin)<h(N.yMax-q.y,q.y-N.yMin),C=R(N,q,J,F,{soft:z.hardBounds,hard:z.hardBounds});return F?{y:q.y,x:N[C?"xMax":"xMin"]+(C?1:-1)}:{x:q.x,y:N[C?"yMax":"yMin"]+(C?1:-1)}}(v[u],E,B),L.push({end:E,start:b}),E=b);(u=P(v,E))>-1;)m=E[D]-B[D]<0,(b={x:E.x,y:E.y})[D]=v[u][m?D+"Max":D+"Min"]+(m?1:-1),L.push({end:E,start:b}),E=b;return{path:et(nt=(nt=function N(q,J,F){let C,w,G,W,it,ht,ot;if(q.x===J.x&&q.y===J.y)return[];let mt=F?"x":"y",vt=z.obstacleOptions.margin,gt={soft:{xMin:X,xMax:$,yMin:rt,yMax:Q},hard:z.hardBounds};return(it=P(v,q))>-1?(W=R(it=v[it],q,J,F,gt),Z(it,z.hardBounds),ot=F?{y:q.y,x:it[W?"xMax":"xMin"]+(W?1:-1)}:{x:q.x,y:it[W?"yMax":"yMin"]+(W?1:-1)},(ht=P(v,ot))>-1&&(Z(ht=v[ht],z.hardBounds),ot[mt]=W?p(it[mt+"Max"]-vt+1,(ht[mt+"Min"]+it[mt+"Max"])/2):h(it[mt+"Min"]+vt-1,(ht[mt+"Max"]+it[mt+"Min"])/2),q.x===ot.x&&q.y===ot.y?(S&&(ot[mt]=W?p(it[mt+"Max"],ht[mt+"Max"])+1:h(it[mt+"Min"],ht[mt+"Min"])-1),S=!S):S=!1),w=[{start:q,end:ot}]):(C=y(q,{x:F?J.x:q.x,y:F?q.y:J.y},F),w=[{start:q,end:{x:C.x,y:C.y}}],C[F?"x":"y"]!==J[F?"x":"y"]&&(W=R(C.obstacle,C,J,!F,gt),Z(C.obstacle,z.hardBounds),G={x:F?C.x:C.obstacle[W?"xMax":"xMin"]+(W?1:-1),y:F?C.obstacle[W?"yMax":"yMin"]+(W?1:-1):C.y},F=!F,w=w.concat(N({x:C.x,y:C.y},G,F)))),w=w.concat(N(w[w.length-1].end,J,!F))}(B,E,O)).concat(L.reverse())),obstacles:nt}}return M.requiresObstacles=!0,K.requiresObstacles=!0,{fastAvoid:K,straight:function(B,E){return{path:[["M",B.x,B.y],["L",E.x,E.y]],obstacles:[{start:B,end:E}]}},simpleConnect:M}}),l(s,"Gantt/ConnectorsDefaults.js",[],function(){return{connectors:{type:"straight",radius:0,lineWidth:1,marker:{enabled:!1,align:"center",verticalAlign:"middle",inside:!1,lineWidth:1},startMarker:{symbol:"diamond"},endMarker:{symbol:"arrow-filled"}}}}),l(s,"Gantt/PathfinderComposition.js",[s["Gantt/ConnectorsDefaults.js"],s["Core/Defaults.js"],s["Core/Utilities.js"]],function(i,r,o){var h;let{setOptions:p}=r,{defined:x,error:I,merge:P}=o;function et(Z){let M=Z.shapeArgs;if(M)return{xMin:M.x||0,xMax:(M.x||0)+(M.width||0),yMin:M.y||0,yMax:(M.y||0)+(M.height||0)};let K=Z.graphic&&Z.graphic.getBBox();return K?{xMin:Z.plotX-K.width/2,xMax:Z.plotX+K.width/2,yMin:Z.plotY-K.height/2,yMax:Z.plotY+K.height/2}:null}return function(Z){function M(E){let z,O,D=et(this);switch(E.align){case"right":z="xMax";break;case"left":z="xMin"}switch(E.verticalAlign){case"top":O="yMin";break;case"bottom":O="yMax"}return{x:z?D[z]:(D.xMin+D.xMax)/2,y:O?D[O]:(D.yMin+D.yMax)/2}}function K(E,z){let O;return!x(z)&&(O=et(this))&&(z={x:(O.xMin+O.xMax)/2,y:(O.yMin+O.yMax)/2}),Math.atan2(z.y-E.y,E.x-z.x)}function B(E,z,O){let D=2*Math.PI,L=et(this),V=L.xMax-L.xMin,X=L.yMax-L.yMin,$=Math.atan2(X,V),rt=V/2,Q=X/2,nt=L.xMin+rt,m=L.yMin+Q,b={x:nt,y:m},S=E,v=1,u=!1,g=1,y=1;for(;S<-Math.PI;)S+=D;for(;S>Math.PI;)S-=D;return v=Math.tan(S),S>-$&&S<=$?(y=-1,u=!0):S>$&&S<=Math.PI-$?y=-1:S>Math.PI-$||S<=-(Math.PI-$)?(g=-1,u=!0):g=-1,u?(b.x+=g*rt,b.y+=y*rt*v):(b.x+=X/(2*v)*g,b.y+=y*Q),O.x!==nt&&(b.x=O.x),O.y!==m&&(b.y=O.y),{x:b.x+z*Math.cos(S),y:b.y-z*Math.sin(S)}}Z.compose=function(E,z,O){let D=O.prototype;D.getPathfinderAnchorPoint||(E.prototype.callbacks.push(function(L){L.options.connectors.enabled!==!1&&((L.options.pathfinder||L.series.reduce(function(V,X){return X.options&&P(!0,X.options.connectors=X.options.connectors||{},X.options.pathfinder),V||X.options&&X.options.pathfinder},!1))&&(P(!0,L.options.connectors=L.options.connectors||{},L.options.pathfinder),I('WARNING: Pathfinder options have been renamed. Use "chart.connectors" or "series.connectors" instead.')),this.pathfinder=new z(this),this.pathfinder.update(!0))}),D.getMarkerVector=B,D.getPathfinderAnchorPoint=M,D.getRadiansToVector=K,p(i))}}(h||(h={})),h}),l(s,"Gantt/Pathfinder.js",[s["Gantt/Connection.js"],s["Gantt/PathfinderAlgorithms.js"],s["Gantt/PathfinderComposition.js"],s["Core/Series/Point.js"],s["Core/Utilities.js"]],function(i,r,o,h,p){let{addEvent:x,defined:I,pick:P,splat:et}=p,Z=Math.max,M=Math.min;class K{static compose(E,z){o.compose(E,K,z)}constructor(E){this.init(E)}init(E){this.chart=E,this.connections=[],x(E,"redraw",function(){this.pathfinder.update()})}update(E){let z=this.chart,O=this,D=O.connections;O.connections=[],z.series.forEach(function(L){L.visible&&!L.options.isInternal&&L.points.forEach(function(V){let X,$=V.options;$&&$.dependency&&($.connect=$.dependency);let rt=V.options?.connect&&et(V.options.connect);V.visible&&V.isInside!==!1&&rt&&rt.forEach(function(Q){(X=z.get(typeof Q=="string"?Q:Q.to))instanceof h&&X.series.visible&&X.visible&&X.isInside!==!1&&O.connections.push(new i(V,X,typeof Q=="string"?{}:Q))})})});for(let L=0,V,X,$=D.length,rt=O.connections.length;L<$;++L){X=!1;let Q=D[L];for(V=0;V<rt;++V){let nt=O.connections[V];if((Q.options&&Q.options.type)===(nt.options&&nt.options.type)&&Q.fromPoint===nt.fromPoint&&Q.toPoint===nt.toPoint){nt.graphics=Q.graphics,X=!0;break}}X||Q.destroy()}delete this.chartObstacles,delete this.lineObstacles,O.renderConnections(E)}renderConnections(E){E?this.chart.series.forEach(function(z){let O=function(){let D=z.chart.pathfinder;(D&&D.connections||[]).forEach(function(L){L.fromPoint&&L.fromPoint.series===z&&L.render()}),z.pathfinderRemoveRenderEvent&&(z.pathfinderRemoveRenderEvent(),delete z.pathfinderRemoveRenderEvent)};z.options.animation===!1?O():z.pathfinderRemoveRenderEvent=x(z,"afterAnimate",O)}):this.connections.forEach(function(z){z.render()})}getChartObstacles(E){let z=this.chart.series,O=P(E.algorithmMargin,0),D=[],L;for(let V=0,X=z.length;V<X;++V)if(z[V].visible&&!z[V].options.isInternal)for(let $=0,rt=z[V].points.length,Q,nt;$<rt;++$)(nt=z[V].points[$]).visible&&(Q=function(m){let b=m.shapeArgs;if(b)return{xMin:b.x||0,xMax:(b.x||0)+(b.width||0),yMin:b.y||0,yMax:(b.y||0)+(b.height||0)};let S=m.graphic&&m.graphic.getBBox();return S?{xMin:m.plotX-S.width/2,xMax:m.plotX+S.width/2,yMin:m.plotY-S.height/2,yMax:m.plotY+S.height/2}:null}(nt))&&D.push({xMin:Q.xMin-O,xMax:Q.xMax+O,yMin:Q.yMin-O,yMax:Q.yMax+O});return D=D.sort(function(V,X){return V.xMin-X.xMin}),I(E.algorithmMargin)||(L=E.algorithmMargin=function(V){let X,$=V.length,rt=[];for(let Q=0;Q<$;++Q)for(let nt=Q+1;nt<$;++nt)(X=function m(b,S,v){let u=P(v,10),g=b.yMax+u>S.yMin-u&&b.yMin-u<S.yMax+u,y=b.xMax+u>S.xMin-u&&b.xMin-u<S.xMax+u,R=g?b.xMin>S.xMax?b.xMin-S.xMax:S.xMin-b.xMax:1/0,N=y?b.yMin>S.yMax?b.yMin-S.yMax:S.yMin-b.yMax:1/0;return y&&g?u?m(b,S,Math.floor(u/2)):1/0:M(R,N)}(V[Q],V[nt]))<80&&rt.push(X);return rt.push(80),Z(Math.floor(rt.sort(function(Q,nt){return Q-nt})[Math.floor(rt.length/10)]/2-1),1)}(D),D.forEach(function(V){V.xMin-=L,V.xMax+=L,V.yMin-=L,V.yMax+=L})),D}getObstacleMetrics(E){let z=0,O=0,D,L,V=E.length;for(;V--;)D=E[V].xMax-E[V].xMin,L=E[V].yMax-E[V].yMin,z<D&&(z=D),O<L&&(O=L);return{maxHeight:O,maxWidth:z}}getAlgorithmStartDirection(E){let z=E.align!=="left"&&E.align!=="right",O=E.verticalAlign!=="top"&&E.verticalAlign!=="bottom";return z?!!O&&void 0:!!O||void 0}}return K.prototype.algorithms=r,K}),l(s,"masters/modules/pathfinder.src.js",[s["Core/Globals.js"],s["Gantt/Pathfinder.js"],s["Extensions/ArrowSymbols.js"]],function(i,r,o){return i.Pathfinder=i.Pathfinder||r,o.compose(i.SVGRenderer),i.Pathfinder.compose(i.Chart,i.Point),i}),l(s,"Extensions/StaticScale.js",[s["Core/Utilities.js"]],function(i){let{addEvent:r,defined:o,isNumber:h,pick:p}=i;function x(){let P=this.chart.options.chart;!this.horiz&&h(this.options.staticScale)&&(!P.height||P.scrollablePlotArea&&P.scrollablePlotArea.minHeight)&&(this.staticScale=this.options.staticScale)}function I(){if(this.redrawTrigger!=="adjustHeight"){for(let P of this.axes||[]){let et=P.chart,Z=!!et.initiatedScale&&et.options.animation,M=P.options.staticScale;if(P.staticScale&&o(P.min)){let K=p(P.brokenAxis&&P.brokenAxis.unitLength,P.max+P.tickInterval-P.min)*M,B=(K=Math.max(K,M))-et.plotHeight;!et.scrollablePixelsY&&Math.abs(B)>=1&&(et.plotHeight=K,et.redrawTrigger="adjustHeight",et.setSize(void 0,et.chartHeight+B,Z)),P.series.forEach(function(E){let z=E.sharedClipKey&&et.sharedClips[E.sharedClipKey];z&&z.attr(et.inverted?{width:et.plotHeight}:{height:et.plotHeight})})}}this.initiatedScale=!0}this.redrawTrigger=null}return{compose:function(P,et){let Z=et.prototype;Z.adjustHeight||(r(P,"afterSetOptions",x),Z.adjustHeight=I,r(et,"render",Z.adjustHeight))}}}),l(s,"masters/modules/static-scale.src.js",[s["Core/Globals.js"],s["Extensions/StaticScale.js"]],function(i,r){return r.compose(i.Axis,i.Chart),i}),l(s,"Series/XRange/XRangeSeriesDefaults.js",[s["Core/Utilities.js"]],function(i){let{correctFloat:r,isNumber:o,isObject:h}=i;return{colorByPoint:!0,dataLabels:{formatter:function(){let p=this.point.partialFill;if(h(p)&&(p=p.amount),o(p)&&p>0)return r(100*p)+"%"},inside:!0,verticalAlign:"middle",style:{whiteSpace:"nowrap"}},tooltip:{headerFormat:'<span style="font-size: 0.8em">{point.x} - {point.x2}</span><br/>',pointFormat:'<span style="color:{point.color}">\u25CF</span> {series.name}: <b>{point.yCategory}</b><br/>'},borderRadius:3,pointRange:0}}),l(s,"Series/XRange/XRangePoint.js",[s["Core/Series/SeriesRegistry.js"],s["Core/Utilities.js"]],function(i,r){let{column:{prototype:{pointClass:o}}}=i.seriesTypes,{extend:h}=r;class p extends o{static getColorByCategory(I,P){let et=I.options.colors||I.chart.options.colors,Z=et?et.length:I.chart.options.chart.colorCount,M=P.y%Z,K=et&&et[M];return{colorIndex:M,color:K}}resolveColor(){let I=this.series;if(I.options.colorByPoint&&!this.options.color){let P=p.getColorByCategory(I,this);I.chart.styledMode||(this.color=P.color),this.options.colorIndex||(this.colorIndex=P.colorIndex)}else this.color=this.options.color||I.color}constructor(I,P){super(I,P),this.y||(this.y=0)}setState(){super.setState.apply(this,arguments),this.series.drawPoint(this,this.series.getAnimationVerb())}getLabelConfig(){let I=super.getLabelConfig.call(this),P=this.series.yAxis.categories;return I.x2=this.x2,I.yCategory=this.yCategory=P&&P[this.y],I.key=this.category||this.name,I}isValid(){return typeof this.x=="number"&&typeof this.x2=="number"}}return h(p.prototype,{ttBelow:!1,tooltipDateKeys:["x","x2"]}),p}),l(s,"Series/XRange/XRangeSeries.js",[s["Core/Globals.js"],s["Core/Color/Color.js"],s["Core/Series/SeriesRegistry.js"],s["Core/Utilities.js"],s["Series/XRange/XRangeSeriesDefaults.js"],s["Series/XRange/XRangePoint.js"]],function(i,r,o,h,p,x){let{composed:I,noop:P}=i,{parse:et}=r,{column:Z}=o.seriesTypes,{addEvent:M,clamp:K,defined:B,extend:E,find:z,isNumber:O,isObject:D,merge:L,pick:V,pushUnique:X,relativeLength:$}=h;function rt(){let nt,m;if(this.isXAxis){for(let b of(nt=V(this.dataMax,-Number.MAX_VALUE),this.series))if(b.x2Data)for(let S of b.x2Data)S&&S>nt&&(nt=S,m=!0);m&&(this.dataMax=nt)}}class Q extends Z{static compose(m){X(I,"Series.XRange")&&M(m,"afterGetSeriesExtremes",rt)}init(){super.init.apply(this,arguments),this.options.stacking=void 0}getColumnMetrics(){let m=()=>{for(let S of this.chart.series){let v=S.xAxis;S.xAxis=S.yAxis,S.yAxis=v}};m();let b=super.getColumnMetrics();return m(),b}cropData(m,b,S,v){let u=super.cropData(this.x2Data,b,S,v);return u.xData=m.slice(u.start,u.end),u}findPointIndex(m){let b,{cropStart:S,points:v}=this,{id:u}=m;if(u){let g=z(v,y=>y.id===u);b=g?g.index:void 0}if(b===void 0){let g=z(v,y=>y.x===m.x&&y.x2===m.x2&&!y.touched);b=g?g.index:void 0}return this.cropped&&O(b)&&O(S)&&b>=S&&(b-=S),b}alignDataLabel(m){let b=m.plotX;m.plotX=V(m.dlBox&&m.dlBox.centerX,m.plotX),m.dataLabel&&m.shapeArgs?.width&&m.dataLabel.css({width:`${m.shapeArgs.width}px`}),super.alignDataLabel.apply(this,arguments),m.plotX=b}translatePoint(m){let b=this.xAxis,S=this.yAxis,v=this.columnMetrics,u=this.options,g=u.minPointLength||0,y=(m.shapeArgs&&m.shapeArgs.width||0)/2,R=this.pointXOffset=v.offset,N=V(m.x2,m.x+(m.len||0)),q=u.borderRadius,J=this.chart.plotTop,F=this.chart.plotLeft,C=m.plotX,w=b.translate(N,0,0,0,1),G=Math.abs(w-C),W=this.chart.inverted,it=V(u.borderWidth,1)%2/2,ht,ot,mt=v.offset,vt=Math.round(v.width),gt,xt,kt,Tt;g&&((ht=g-G)<0&&(ht=0),C-=ht/2,w+=ht/2),C=Math.max(C,-10),w=K(w,-10,b.len+10),B(m.options.pointWidth)&&(mt-=(Math.ceil(m.options.pointWidth)-vt)/2,vt=Math.ceil(m.options.pointWidth)),u.pointPlacement&&O(m.plotY)&&S.categories&&(m.plotY=S.translate(m.y,0,1,0,1,u.pointPlacement));let Nt=Math.floor(Math.min(C,w))+it,Kt=Math.floor(Math.max(C,w))+it-Nt,Yt=Math.min($(typeof q=="object"?q.radius:q||0,vt),Math.min(Kt,vt)/2),Ft={x:Nt,y:Math.floor(m.plotY+mt)+it,width:Kt,height:vt,r:Yt};m.shapeArgs=Ft,W?m.tooltipPos[1]+=R+y:m.tooltipPos[0]-=y+R-Ft.width/2,xt=(gt=Ft.x)+Ft.width,gt<0||xt>b.len?(gt=K(gt,0,b.len),kt=(xt=K(xt,0,b.len))-gt,m.dlBox=L(Ft,{x:gt,width:xt-gt,centerX:kt?kt/2:null})):m.dlBox=null;let ae=m.tooltipPos,xe=W?1:0,fe=W?0:1,Xe=this.columnMetrics?this.columnMetrics.offset:-v.width/2;W?ae[xe]+=Ft.width/2:ae[xe]=K(ae[xe]+(b.reversed?-1:0)*Ft.width,b.left-F,b.left+b.len-F-1),ae[fe]=K(ae[fe]+(W?-1:1)*Xe,S.top-J,S.top+S.len-J-1),(ot=m.partialFill)&&(D(ot)&&(ot=ot.amount),O(ot)||(ot=0),m.partShapeArgs=L(Ft),Tt=Math.max(Math.round(G*ot+m.plotX-C),0),m.clipRectArgs={x:b.reversed?Ft.x+G-Tt:Ft.x,y:Ft.y,width:Tt,height:Ft.height})}translate(){for(let m of(super.translate.apply(this,arguments),this.points))this.translatePoint(m)}drawPoint(m,b){let S=this.options,v=this.chart.renderer,u=m.shapeType,g=m.shapeArgs,y=m.partShapeArgs,R=m.clipRectArgs,N=m.state,q=S.states[N||"normal"]||{},J=N===void 0?"attr":b,F=this.pointAttribs(m,N),C=V(this.chart.options.chart.animation,q.animation),w=m.graphic,G=m.partialFill;if(m.isNull||m.visible===!1)w&&(m.graphic=w.destroy());else if(w?w.rect[b](g):(m.graphic=w=v.g("point").addClass(m.getClassName()).add(m.group||this.group),w.rect=v[u](L(g)).addClass(m.getClassName()).addClass("highcharts-partfill-original").add(w)),y&&(w.partRect?(w.partRect[b](L(y)),w.partialClipRect[b](L(R))):(w.partialClipRect=v.clipRect(R.x,R.y,R.width,R.height),w.partRect=v[u](y).addClass("highcharts-partfill-overlay").add(w).clip(w.partialClipRect))),!this.chart.styledMode&&(w.rect[b](F,C).shadow(S.shadow),y)){D(G)||(G={}),D(S.partialFill)&&(G=L(S.partialFill,G));let W=G.fill||et(F.fill).brighten(-.3).get()||et(m.color||this.color).brighten(-.3).get();F.fill=W,w.partRect[J](F,C).shadow(S.shadow)}}drawPoints(){let m=this.getAnimationVerb();for(let b of this.points)this.drawPoint(b,m)}getAnimationVerb(){return this.chart.pointCount<(this.options.animationLimit||250)?"animate":"attr"}isPointInside(m){let b=m.shapeArgs,S=m.plotX,v=m.plotY;return b?S!==void 0&&v!==void 0&&v>=0&&v<=this.yAxis.len&&(b.x||0)+(b.width||0)>=0&&S<=this.xAxis.len:super.isPointInside.apply(this,arguments)}}return Q.defaultOptions=L(Z.defaultOptions,p),E(Q.prototype,{pointClass:x,pointArrayMap:["x2","y"],getExtremesFromAll:!0,parallelArrays:["x","x2","y"],requireSorting:!1,type:"xrange",animate:o.series.prototype.animate,autoIncrement:P,buildKDTree:P}),o.registerSeriesType("xrange",Q),Q}),l(s,"masters/modules/xrange.src.js",[s["Core/Globals.js"],s["Series/XRange/XRangeSeries.js"]],function(i,r){return r.compose(i.Axis),i}),l(s,"Series/Gantt/GanttPoint.js",[s["Core/Series/SeriesRegistry.js"],s["Core/Utilities.js"]],function(i,r){let{xrange:{prototype:{pointClass:o}}}=i.seriesTypes,{pick:h}=r;class p extends o{static setGanttPointAliases(I){function P(et,Z){Z!==void 0&&(I[et]=Z)}P("x",h(I.start,I.x)),P("x2",h(I.end,I.x2)),P("partialFill",h(I.completed,I.partialFill))}applyOptions(I,P){let et=super.applyOptions(I,P);return p.setGanttPointAliases(et),et}isValid(){return(typeof this.start=="number"||typeof this.x=="number")&&(typeof this.end=="number"||typeof this.x2=="number"||this.milestone)}}return p}),l(s,"Series/Gantt/GanttSeriesDefaults.js",[s["Core/Utilities.js"]],function(i){let{isNumber:r}=i;return{grouping:!1,dataLabels:{enabled:!0},tooltip:{headerFormat:'<span style="font-size: 0.8em">{series.name}</span><br/>',pointFormat:null,pointFormatter:function(){let o=this.series,h=o.xAxis,p=o.tooltipOptions.dateTimeLabelFormats,x=h.options.startOfWeek,I=o.tooltipOptions,P=this.options.milestone,et=I.xDateFormat,Z="<b>"+(this.name||this.yCategory)+"</b>";if(I.pointFormat)return this.tooltipFormatter(I.pointFormat);!et&&r(this.start)&&(et=o.chart.time.getDateFormat(h.closestPointRange,this.start,x,p||{}));let M=o.chart.time.dateFormat(et,this.start),K=o.chart.time.dateFormat(et,this.end);return Z+="<br/>",P?Z+=M+"<br/>":Z+="Start: "+M+"<br/>End: "+K+"<br/>",Z}},connectors:{type:"simpleConnect",animation:{reversed:!0},radius:0,startMarker:{enabled:!0,symbol:"arrow-filled",radius:4,fill:"#fa0",align:"left"},endMarker:{enabled:!1,align:"right"}}}}),l(s,"Core/Axis/BrokenAxis.js",[s["Core/Axis/Stacking/StackItem.js"],s["Core/Utilities.js"]],function(i,r){var o;let{addEvent:h,find:p,fireEvent:x,isArray:I,isNumber:P,pick:et}=r;return function(Z){function M(){this.brokenAxis!==void 0&&this.brokenAxis.setBreaks(this.options.breaks,!1)}function K(){this.brokenAxis?.hasBreaks&&(this.options.ordinal=!1)}function B(){let X=this.brokenAxis;if(X?.hasBreaks){let $=this.tickPositions,rt=this.tickPositions.info,Q=[];for(let nt=0;nt<$.length;nt++)X.isInAnyBreak($[nt])||Q.push($[nt]);this.tickPositions=Q,this.tickPositions.info=rt}}function E(){this.brokenAxis||(this.brokenAxis=new V(this))}function z(){let{isDirty:X,options:{connectNulls:$},points:rt,xAxis:Q,yAxis:nt}=this;if(X){let m=rt.length;for(;m--;){let b=rt[m],S=!(b.y===null&&$===!1)&&(Q?.brokenAxis?.isInAnyBreak(b.x,!0)||nt?.brokenAxis?.isInAnyBreak(b.y,!0));b.visible=!S&&b.options.visible!==!1}}}function O(){this.drawBreaks(this.xAxis,["x"]),this.drawBreaks(this.yAxis,et(this.pointArrayMap,["y"]))}function D(X,$){let rt,Q,nt,m=this,b=m.points;if(X?.brokenAxis?.hasBreaks){let S=X.brokenAxis;$.forEach(function(v){rt=S?.breakArray||[],Q=X.isXAxis?X.min:et(m.options.threshold,X.min);let u=X?.options?.breaks?.filter(function(g){let y=!0;for(let R=0;R<rt.length;R++){let N=rt[R];if(N.from===g.from&&N.to===g.to){y=!1;break}}return y});b.forEach(function(g){nt=et(g["stack"+v.toUpperCase()],g[v]),rt.forEach(function(y){if(P(Q)&&P(nt)){let R="";Q<y.from&&nt>y.to||Q>y.from&&nt<y.from?R="pointBreak":(Q<y.from&&nt>y.from&&nt<y.to||Q>y.from&&nt>y.to&&nt<y.from)&&(R="pointInBreak"),R&&x(X,R,{point:g,brk:y})}}),u?.forEach(function(y){x(X,"pointOutsideOfBreak",{point:g,brk:y})})})})}}function L(){let X=this.currentDataGrouping,$=X?.gapSize,rt=this.points.slice(),Q=this.yAxis,nt=this.options.gapSize,m=rt.length-1;if(nt&&m>0){let b,S;for(this.options.gapUnit!=="value"&&(nt*=this.basePointRange),$&&$>nt&&$>=this.basePointRange&&(nt=$);m--;)if(S&&S.visible!==!1||(S=rt[m+1]),b=rt[m],S.visible!==!1&&b.visible!==!1){if(S.x-b.x>nt){let v=(b.x+S.x)/2;rt.splice(m+1,0,{isNull:!0,x:v}),Q.stacking&&this.options.stacking&&((Q.stacking.stacks[this.stackKey][v]=new i(Q,Q.options.stackLabels,!1,v,this.stack)).total=0)}S=b}}return this.getGraphPath(rt)}Z.compose=function(X,$){if(!X.keepProps.includes("brokenAxis")){X.keepProps.push("brokenAxis"),h(X,"init",E),h(X,"afterInit",M),h(X,"afterSetTickPositions",B),h(X,"afterSetOptions",K);let rt=$.prototype;rt.drawBreaks=D,rt.gappedPath=L,h($,"afterGeneratePoints",z),h($,"afterRender",O)}return X};class V{static isInBreak($,rt){let Q=$.repeat||1/0,nt=$.from,m=$.to-$.from,b=rt>=nt?(rt-nt)%Q:Q-(nt-rt)%Q;return $.inclusive?b<=m:b<m&&b!==0}static lin2Val($){let rt=this.brokenAxis,Q=rt&&rt.breakArray;if(!Q||!P($))return $;let nt=$,m,b;for(b=0;b<Q.length&&!((m=Q[b]).from>=nt);b++)(m.to<nt||V.isInBreak(m,nt))&&(nt+=m.len);return nt}static val2Lin($){let rt=this.brokenAxis,Q=rt&&rt.breakArray;if(!Q||!P($))return $;let nt=$,m,b;for(b=0;b<Q.length;b++)if((m=Q[b]).to<=$)nt-=m.len;else{if(m.from>=$)break;if(V.isInBreak(m,$)){nt-=$-m.from;break}}return nt}constructor($){this.hasBreaks=!1,this.axis=$}findBreakAt($,rt){return p(rt,function(Q){return Q.from<$&&$<Q.to})}isInAnyBreak($,rt){let Q=this.axis,nt=Q.options.breaks||[],m=nt.length,b,S,v;if(m&&P($)){for(;m--;)V.isInBreak(nt[m],$)&&(b=!0,S||(S=et(nt[m].showPoints,!Q.isXAxis)));v=b&&rt?b&&!S:b}return v}setBreaks($,rt){let Q=this,nt=Q.axis,m=I($)&&!!$.length&&!!Object.keys($[0]).length;nt.isDirty=Q.hasBreaks!==m,Q.hasBreaks=m,$!==nt.options.breaks&&(nt.options.breaks=nt.userOptions.breaks=$),nt.forceRedraw=!0,nt.series.forEach(function(b){b.isDirty=!0}),m||nt.val2lin!==V.val2Lin||(delete nt.val2lin,delete nt.lin2val),m&&(nt.userOptions.ordinal=!1,nt.lin2val=V.lin2Val,nt.val2lin=V.val2Lin,nt.setExtremes=function(b,S,v,u,g){if(Q.hasBreaks){let y,R=this.options.breaks||[];for(;y=Q.findBreakAt(b,R);)b=y.to;for(;y=Q.findBreakAt(S,R);)S=y.from;S<b&&(S=b)}nt.constructor.prototype.setExtremes.call(this,b,S,v,u,g)},nt.setAxisTranslation=function(){if(nt.constructor.prototype.setAxisTranslation.call(this),Q.unitLength=void 0,Q.hasBreaks){let b=nt.options.breaks||[],S=[],v=[],u=et(nt.pointRangePadding,0),g=0,y,R,N=nt.userMin||nt.min,q=nt.userMax||nt.max,J,F;b.forEach(function(C){R=C.repeat||1/0,P(N)&&P(q)&&(V.isInBreak(C,N)&&(N+=C.to%R-N%R),V.isInBreak(C,q)&&(q-=q%R-C.from%R))}),b.forEach(function(C){if(J=C.from,R=C.repeat||1/0,P(N)&&P(q)){for(;J-R>N;)J-=R;for(;J<N;)J+=R;for(F=J;F<q;F+=R)S.push({value:F,move:"in"}),S.push({value:F+C.to-C.from,move:"out",size:C.breakSize})}}),S.sort(function(C,w){return C.value===w.value?(C.move==="in"?0:1)-(w.move==="in"?0:1):C.value-w.value}),y=0,J=N,S.forEach(function(C){(y+=C.move==="in"?1:-1)===1&&C.move==="in"&&(J=C.value),y===0&&P(J)&&(v.push({from:J,to:C.value,len:C.value-J-(C.size||0)}),g+=C.value-J-(C.size||0))}),Q.breakArray=v,P(N)&&P(q)&&P(nt.min)&&(Q.unitLength=q-N-g+u,x(nt,"afterBreaks"),nt.staticScale?nt.transA=nt.staticScale:Q.unitLength&&(nt.transA*=(q-nt.min+u)/Q.unitLength),u&&(nt.minPixelPadding=nt.transA*(nt.minPointOffset||0)),nt.min=N,nt.max=q)}}),et(rt,!0)&&nt.chart.redraw()}}Z.Additions=V}(o||(o={})),o}),l(s,"Core/Axis/GridAxis.js",[s["Core/Axis/Axis.js"],s["Core/Globals.js"],s["Core/Utilities.js"]],function(i,r,o){var h,p;let{dateFormats:x}=r,{addEvent:I,defined:P,erase:et,find:Z,isArray:M,isNumber:K,merge:B,pick:E,timeUnits:z,wrap:O}=o;function D(F){return o.isObject(F,!0)}function L(F,C){let w={width:0,height:0};if(C.forEach(function(G){let W=F[G],it=0,ht=0,ot;D(W)&&(it=(ot=D(W.label)?W.label:{}).getBBox?ot.getBBox().height:0,ot.textStr&&!K(ot.textPxLength)&&(ot.textPxLength=ot.getBBox().width),ht=K(ot.textPxLength)?Math.round(ot.textPxLength):0,ot.textStr&&(ht=Math.round(ot.getBBox().width)),w.height=Math.max(it,w.height),w.width=Math.max(ht,w.width))}),this.options.type==="treegrid"&&this.treeGrid&&this.treeGrid.mapOfPosToGridNode){let G=this.treeGrid.mapOfPosToGridNode[-1].height||0;w.width+=this.options.labels.indentation*(G-1)}return w}function V(F){let{grid:C}=this,w=this.side===3;if(w||F.apply(this),!C?.isColumn){let G=C?.columns||[];w&&(G=G.slice().reverse()),G.forEach(W=>{W.getOffset()})}w&&F.apply(this)}function X(F){if((this.options.grid||{}).enabled===!0){let{axisTitle:C,height:w,horiz:G,left:W,offset:it,opposite:ht,options:ot,top:mt,width:vt}=this,gt=this.tickSize(),xt=C&&C.getBBox().width,kt=ot.title.x,Tt=ot.title.y,Nt=E(ot.title.margin,G?5:10),Kt=C?this.chart.renderer.fontMetrics(C).f:0,Yt=(G?mt+w:W)+(G?1:-1)*(ht?-1:1)*(gt?gt[0]/2:0)+(this.side===h.bottom?Kt:0);F.titlePosition.x=G?W-(xt||0)/2-Nt+kt:Yt+(ht?vt:0)+it+kt,F.titlePosition.y=G?Yt-(ht?w:0)+(ht?Kt:-Kt)/2+it+Tt:mt-Nt+Tt}}function $(){let{chart:F,options:{grid:C={}},userOptions:w}=this;if(C.enabled&&function(G){let W=G.options;W.labels.align=E(W.labels.align,"center"),G.categories||(W.showLastLabel=!1),G.labelRotation=0,W.labels.rotation=0,W.minTickInterval=1}(this),C.columns){let G=this.grid.columns=[],W=this.grid.columnIndex=0;for(;++W<C.columns.length;){let it=B(w,C.columns[W],{isInternal:!0,linkedTo:0,scrollbar:{enabled:!1}},{grid:{columns:void 0}}),ht=new i(this.chart,it,"yAxis");ht.grid.isColumn=!0,ht.grid.columnIndex=W,et(F.axes,ht),et(F[this.coll]||[],ht),G.push(ht)}}}function rt(){let{axisTitle:F,grid:C,options:w}=this;if((w.grid||{}).enabled===!0){let G=this.min||0,W=this.max||0,it=this.ticks[this.tickPositions[0]];if(F&&!this.chart.styledMode&&it?.slotWidth&&!this.options.title.style.width&&F.css({width:`${it.slotWidth}px`}),this.maxLabelDimensions=this.getMaxLabelDimensions(this.ticks,this.tickPositions),this.rightWall&&this.rightWall.destroy(),this.grid&&this.grid.isOuterAxis()&&this.axisLine){let ht=w.lineWidth;if(ht){let ot=this.getLinePath(ht),mt=ot[0],vt=ot[1],gt=((this.tickSize("tick")||[1])[0]-1)*(this.side===h.top||this.side===h.left?-1:1);if(mt[0]==="M"&&vt[0]==="L"&&(this.horiz?(mt[2]+=gt,vt[2]+=gt):(mt[1]+=gt,vt[1]+=gt)),!this.horiz&&this.chart.marginRight){let xt=["L",this.left,mt[2]||0],kt=[mt,xt],Tt=["L",this.chart.chartWidth-this.chart.marginRight,this.toPixels(W+this.tickmarkOffset)],Nt=[["M",vt[1]||0,this.toPixels(W+this.tickmarkOffset)],Tt];this.grid.upperBorder||G%1==0||(this.grid.upperBorder=this.grid.renderBorder(kt)),this.grid.upperBorder&&(this.grid.upperBorder.attr({stroke:w.lineColor,"stroke-width":w.lineWidth}),this.grid.upperBorder.animate({d:kt})),this.grid.lowerBorder||W%1==0||(this.grid.lowerBorder=this.grid.renderBorder(Nt)),this.grid.lowerBorder&&(this.grid.lowerBorder.attr({stroke:w.lineColor,"stroke-width":w.lineWidth}),this.grid.lowerBorder.animate({d:Nt}))}this.grid.axisLineExtra?(this.grid.axisLineExtra.attr({stroke:w.lineColor,"stroke-width":w.lineWidth}),this.grid.axisLineExtra.animate({d:ot})):this.grid.axisLineExtra=this.grid.renderBorder(ot),this.axisLine[this.showAxis?"show":"hide"]()}}if((C&&C.columns||[]).forEach(ht=>ht.render()),!this.horiz&&this.chart.hasRendered&&(this.scrollbar||this.linkedParent&&this.linkedParent.scrollbar)&&this.tickPositions.length){let ht,ot,mt=this.tickmarkOffset,vt=this.tickPositions[this.tickPositions.length-1],gt=this.tickPositions[0];for(;(ht=this.hiddenLabels.pop())&&ht.element;)ht.show();for(;(ot=this.hiddenMarks.pop())&&ot.element;)ot.show();(ht=this.ticks[gt].label)&&(G-gt>mt?this.hiddenLabels.push(ht.hide()):ht.show()),(ht=this.ticks[vt].label)&&(vt-W>mt?this.hiddenLabels.push(ht.hide()):ht.show());let xt=this.ticks[vt].mark;xt&&vt-W<mt&&vt-W>0&&this.ticks[vt].isLast&&this.hiddenMarks.push(xt.hide())}}}function Q(){let F=this.tickPositions&&this.tickPositions.info,C=this.options,w=C.grid||{},G=this.userOptions.labels||{};w.enabled&&(this.horiz?(this.series.forEach(W=>{W.options.pointRange=0}),F&&C.dateTimeLabelFormats&&C.labels&&!P(G.align)&&(C.dateTimeLabelFormats[F.unitName].range===!1||F.count>1)&&(C.labels.align="left",P(G.x)||(C.labels.x=3))):this.options.type!=="treegrid"&&this.grid&&this.grid.columns&&(this.minPointOffset=this.tickInterval))}function nt(F){let C,w=this.options,G=F.userOptions,W=w&&D(w.grid)?w.grid:{};W.enabled===!0&&(C=B(!0,{className:"highcharts-grid-axis "+(G.className||""),dateTimeLabelFormats:{hour:{list:["%H:%M","%H"]},day:{list:["%A, %e. %B","%a, %e. %b","%E"]},week:{list:["Week %W","W%W"]},month:{list:["%B","%b","%o"]}},grid:{borderWidth:1},labels:{padding:2,style:{fontSize:"0.9em"}},margin:0,title:{text:null,reserveSpace:!1,rotation:0,style:{textOverflow:"ellipsis"}},units:[["millisecond",[1,10,100]],["second",[1,10]],["minute",[1,5,15]],["hour",[1,6]],["day",[1]],["week",[1]],["month",[1]],["year",null]]},G),this.coll!=="xAxis"||(P(G.linkedTo)&&!P(G.tickPixelInterval)&&(C.tickPixelInterval=350),!(!P(G.tickPixelInterval)&&P(G.linkedTo))||P(G.tickPositioner)||P(G.tickInterval)||P(G.units)||(C.tickPositioner=function(it,ht){let ot=this.linkedParent&&this.linkedParent.tickPositions&&this.linkedParent.tickPositions.info;if(ot){let mt=C.units||[],vt,gt=1,xt="year";for(let Nt=0;Nt<mt.length;Nt++){let Kt=mt[Nt];if(Kt&&Kt[0]===ot.unitName){vt=Nt;break}}let kt=K(vt)&&mt[vt+1];if(kt){xt=kt[0]||"year";let Nt=kt[1];gt=Nt&&Nt[0]||1}else ot.unitName==="year"&&(gt=10*ot.count);let Tt=z[xt];return this.tickInterval=Tt*gt,this.chart.time.getTimeTicks({unitRange:Tt,count:gt,unitName:xt},it,ht,this.options.startOfWeek)}})),B(!0,this.options,C),this.horiz&&(w.minPadding=E(G.minPadding,0),w.maxPadding=E(G.maxPadding,0)),K(w.grid.borderWidth)&&(w.tickWidth=w.lineWidth=W.borderWidth))}function m(F){let C=F.userOptions,w=C&&C.grid||{},G=w.columns;w.enabled&&G&&B(!0,this.options,G[0])}function b(){(this.grid.columns||[]).forEach(F=>F.setScale())}function S(F){let{horiz:C,maxLabelDimensions:w,options:{grid:G={}}}=this;if(G.enabled&&w){let W=2*this.options.labels.distance,it=C?G.cellHeight||W+w.height:W+w.width;M(F.tickSize)?F.tickSize[0]=it:F.tickSize=[it,0]}}function v(){this.axes.forEach(F=>{(F.grid&&F.grid.columns||[]).forEach(C=>{C.setAxisSize(),C.setAxisTranslation()})})}function u(F){let{grid:C}=this;(C.columns||[]).forEach(w=>w.destroy(F.keepEvents)),C.columns=void 0}function g(F){let C=F.userOptions||{},w=C.grid||{};w.enabled&&P(w.borderColor)&&(C.tickColor=C.lineColor=w.borderColor),this.grid||(this.grid=new J(this)),this.hiddenLabels=[],this.hiddenMarks=[]}function y(F){let C=this.label,w=this.axis,G=w.reversed,W=w.chart,it=w.options.grid||{},ht=w.options.labels,ot=ht.align,mt=h[w.side],vt=F.tickmarkOffset,gt=w.tickPositions,xt=this.pos-vt,kt=K(gt[F.index+1])?gt[F.index+1]-vt:(w.max||0)+vt,Tt=w.tickSize("tick"),Nt=Tt?Tt[0]:0,Kt=Tt?Tt[1]/2:0;if(it.enabled===!0){let Yt,Ft,ae,xe;if(mt==="top"?Ft=(Yt=w.top+w.offset)-Nt:mt==="bottom"?Yt=(Ft=W.chartHeight-w.bottom+w.offset)+Nt:(Yt=w.top+w.len-(w.translate(G?kt:xt)||0),Ft=w.top+w.len-(w.translate(G?xt:kt)||0)),mt==="right"?xe=(ae=W.chartWidth-w.right+w.offset)+Nt:mt==="left"?ae=(xe=w.left+w.offset)-Nt:(ae=Math.round(w.left+(w.translate(G?kt:xt)||0))-Kt,xe=Math.min(Math.round(w.left+(w.translate(G?xt:kt)||0))-Kt,w.left+w.len)),this.slotWidth=xe-ae,F.pos.x=ot==="left"?ae:ot==="right"?xe:ae+(xe-ae)/2,F.pos.y=Ft+(Yt-Ft)/2,C){let fe=W.renderer.fontMetrics(C),Xe=C.getBBox().height;if(ht.useHTML)F.pos.y+=fe.b+-(Xe/2);else{let zr=Math.round(Xe/fe.h);F.pos.y+=(fe.b-(fe.h-fe.f))/2+-((zr-1)*fe.h/2)}}F.pos.x+=w.horiz&&ht.x||0}}function R(F){let{axis:C,value:w}=F;if(C.options.grid&&C.options.grid.enabled){let G,W=C.tickPositions,it=(C.linkedParent||C).series[0],ht=w===W[0],ot=w===W[W.length-1],mt=it&&Z(it.options.data,function(vt){return vt[C.isXAxis?"x":"y"]===w});mt&&it.is("gantt")&&(G=B(mt),r.seriesTypes.gantt.prototype.pointClass.setGanttPointAliases(G)),F.isFirst=ht,F.isLast=ot,F.point=G}}function N(){let F=this.options,C=F.grid||{},w=this.categories,G=this.tickPositions,W=G[0],it=G[1],ht=G[G.length-1],ot=G[G.length-2],mt=this.linkedParent&&this.linkedParent.min,vt=this.linkedParent&&this.linkedParent.max,gt=mt||this.min,xt=vt||this.max,kt=this.tickInterval,Tt=K(gt)&&gt>=W+kt&&gt<it,Nt=K(gt)&&W<gt&&W+kt>gt,Kt=K(xt)&&ht>xt&&ht-kt<xt,Yt=K(xt)&&xt<=ht-kt&&xt>ot;C.enabled===!0&&!w&&(this.isXAxis||this.isLinked)&&((Nt||Tt)&&!F.startOnTick&&(G[0]=gt),(Kt||Yt)&&!F.endOnTick&&(G[G.length-1]=xt))}function q(F){var C;let{options:{grid:w={}}}=this;return w.enabled===!0&&this.categories?this.tickInterval:F.apply(this,(C=arguments,Array.prototype.slice.call(C,1)))}(p=h||(h={}))[p.top=0]="top",p[p.right=1]="right",p[p.bottom=2]="bottom",p[p.left=3]="left";class J{constructor(C){this.axis=C}isOuterAxis(){let C=this.axis,w=C.chart,G=C.grid.columnIndex,W=C.linkedParent?.grid.columns||C.grid.columns||[],it=G?C.linkedParent:C,ht=-1,ot=0;return C.side===3&&!w.inverted&&W.length?!C.linkedParent:((w[C.coll]||[]).forEach((mt,vt)=>{mt.side!==C.side||mt.options.isInternal||(ot=vt,mt!==it||(ht=vt))}),ot===ht&&(!K(G)||W.length===G))}renderBorder(C){let w=this.axis,G=w.chart.renderer,W=w.options,it=G.path(C).addClass("highcharts-axis-line").add(w.axisGroup);return G.styledMode||it.attr({stroke:W.lineColor,"stroke-width":W.lineWidth,zIndex:7}),it}}return x.E=function(F){return this.dateFormat("%a",F,!0).charAt(0)},x.W=function(F){let C=this,w=new this.Date(F);["Hours","Milliseconds","Minutes","Seconds"].forEach(function(ht){C.set(ht,w,0)});let G=(this.get("Day",w)+6)%7,W=new this.Date(w.valueOf());this.set("Date",W,this.get("Date",w)-G+3);let it=new this.Date(this.get("FullYear",W),0,1);return this.get("Day",it)!==4&&(this.set("Month",w,0),this.set("Date",w,1+(11-this.get("Day",it))%7)),(1+Math.floor((W.valueOf()-it.valueOf())/6048e5)).toString()},{compose:function(F,C,w){return F.keepProps.includes("grid")||(F.keepProps.push("grid"),F.prototype.getMaxLabelDimensions=L,O(F.prototype,"unsquish",q),O(F.prototype,"getOffset",V),I(F,"init",g),I(F,"afterGetTitlePosition",X),I(F,"afterInit",$),I(F,"afterRender",rt),I(F,"afterSetAxisTranslation",Q),I(F,"afterSetOptions",nt),I(F,"afterSetOptions",m),I(F,"afterSetScale",b),I(F,"afterTickSize",S),I(F,"trimTicks",N),I(F,"destroy",u),I(C,"afterSetChartSize",v),I(w,"afterGetLabelPosition",y),I(w,"labelFormat",R)),F}}}),l(s,"Gantt/Tree.js",[s["Core/Utilities.js"]],function(i){let{extend:r,isNumber:o,pick:h}=i;function p(x,I,P,et,Z,M){let K=M&&M.after,B=M&&M.before,E={data:et,depth:P-1,id:x,level:P,parent:I||""},z=0,O=0,D,L;typeof B=="function"&&B(E,M);let V=(Z[x]||[]).map(X=>{let $=p(X.id,x,P+1,X,Z,M),rt=X.start||NaN,Q=X.milestone===!0?rt:X.end||NaN;return D=!o(D)||rt<D?rt:D,L=!o(L)||Q>L?Q:L,z=z+1+$.descendants,O=Math.max($.height+1,O),$});return et&&(et.start=h(et.start,D),et.end=h(et.end,L)),r(E,{children:V,descendants:z,height:O}),typeof K=="function"&&K(E,M),E}return{getNode:p,getTree:function(x,I){return p("",null,1,null,function(P){let et=[],Z=P.reduce((M,K)=>{let{parent:B="",id:E}=K;return M[B]===void 0&&(M[B]=[]),M[B].push(K),E&&et.push(E),M},{});return Object.keys(Z).forEach(M=>{if(M!==""&&et.indexOf(M)===-1){let K=Z[M].map(function(B){return ld(B,[])});Z[""].push(...K),delete Z[M]}}),Z}(x),I)}}}),l(s,"Core/Axis/TreeGrid/TreeGridTick.js",[s["Core/Utilities.js"]],function(i){let{addEvent:r,removeEvent:o,isObject:h,isNumber:p,pick:x,wrap:I}=i;function P(){this.treeGrid||(this.treeGrid=new M(this))}function et(K,B,E,z,O,D,L,V,X){let $,rt,Q,nt=x(this.options&&this.options.labels,D),m=this.pos,b=this.axis,S=b.options.type==="treegrid",v=K.apply(this,[B,E,z,O,nt,L,V,X]);if(S){let{width:u=0,padding:g=b.linkedParent?0:5}=nt&&h(nt.symbol,!0)?nt.symbol:{},y=nt&&p(nt.indentation)?nt.indentation:0;Q=(rt=($=b.treeGrid.mapOfPosToGridNode)&&$[m])&&rt.depth||1,v.x+=u+2*g+(Q-1)*y}return v}function Z(K){let B,E,z,{pos:O,axis:D,label:L,treeGrid:V,options:X}=this,$=V?.labelIcon,rt=L?.element,{treeGrid:Q,options:nt,chart:m,tickPositions:b}=D,S=Q.mapOfPosToGridNode,v=x(X?.labels,nt?.labels),u=v&&h(v.symbol,!0)?v.symbol:{},g=S&&S[O],{descendants:y,depth:R}=g||{},N=g&&y&&y>0,q=nt.type==="treegrid"&&rt,J=b.indexOf(O)>-1,F="highcharts-treegrid-node-",C=F+"level-",w=m.styledMode;q&&g&&L.removeClass(RegExp(C+".*")).addClass(C+R),K.apply(this,Array.prototype.slice.call(arguments,1)),q&&N?(B=Q.isCollapsed(g),function(G,W){let it=G.treeGrid,ht=!it.labelIcon,ot=W.renderer,mt=W.xy,vt=W.options,gt=vt.width||0,xt=vt.height||0,kt=vt.padding??G.axis.linkedParent?0:5,Tt={x:mt.x-gt/2-kt,y:mt.y-xt/2},Nt=W.collapsed?90:180,Kt=W.show&&p(Tt.y),Yt=it.labelIcon;Yt||(it.labelIcon=Yt=ot.path(ot.symbols[vt.type](vt.x||0,vt.y||0,gt,xt)).addClass("highcharts-label-icon").add(W.group)),Yt[Kt?"show":"hide"](),ot.styledMode||Yt.attr({cursor:"pointer",fill:x(W.color,"#666666"),"stroke-width":1,stroke:vt.lineColor,strokeWidth:vt.lineWidth||0}),Yt[ht?"attr":"animate"]({translateX:Tt.x,translateY:Tt.y,rotation:Nt})}(this,{color:!w&&L.styles.color||"",collapsed:B,group:L.parentGroup,options:u,renderer:L.renderer,show:J,xy:L.xy}),E=F+(B?"collapsed":"expanded"),z=F+(B?"expanded":"collapsed"),L.addClass(E).removeClass(z),w||L.css({cursor:"pointer"}),[L,$].forEach(G=>{G&&!G.attachedTreeGridEvents&&(r(G.element,"mouseover",function(){L.addClass("highcharts-treegrid-node-active"),L.renderer.styledMode||L.css({textDecoration:"underline"})}),r(G.element,"mouseout",function(){(function(W,it){let ht=h(it.style)?it.style:{};W.removeClass("highcharts-treegrid-node-active"),W.renderer.styledMode||W.css({textDecoration:ht.textDecoration||"none"})})(L,v)}),r(G.element,"click",function(){V.toggleCollapse()}),G.attachedTreeGridEvents=!0)})):$&&(o(rt),L?.css({cursor:"default"}),$.destroy())}class M{static compose(B){let E=B.prototype;E.toggleCollapse||(r(B,"init",P),I(E,"getLabelPosition",et),I(E,"renderLabel",Z),E.collapse=function(z){this.treeGrid.collapse(z)},E.expand=function(z){this.treeGrid.expand(z)},E.toggleCollapse=function(z){this.treeGrid.toggleCollapse(z)})}constructor(B){this.tick=B}collapse(B){let E=this.tick,z=E.axis,O=z.brokenAxis;if(O&&z.treeGrid.mapOfPosToGridNode){let D=E.pos,L=z.treeGrid.mapOfPosToGridNode[D],V=z.treeGrid.collapse(L);O.setBreaks(V,x(B,!0))}}destroy(){this.labelIcon&&this.labelIcon.destroy()}expand(B){let{pos:E,axis:z}=this.tick,{treeGrid:O,brokenAxis:D}=z,L=O.mapOfPosToGridNode;if(D&&L){let V=L[E],X=O.expand(V);D.setBreaks(X,x(B,!0))}}toggleCollapse(B){let E=this.tick,z=E.axis,O=z.brokenAxis;if(O&&z.treeGrid.mapOfPosToGridNode){let D=E.pos,L=z.treeGrid.mapOfPosToGridNode[D],V=z.treeGrid.toggleCollapse(L);O.setBreaks(V,x(B,!0))}}}return M}),l(s,"Series/TreeUtilities.js",[s["Core/Color/Color.js"],s["Core/Utilities.js"]],function(i,r){let{extend:o,isArray:h,isNumber:p,isObject:x,merge:I,pick:P,relativeLength:et}=r;return{getColor:function(Z,M){let K,B,E,z,O,D,L=M.index,V=M.mapOptionsToLevel,X=M.parentColor,$=M.parentColorIndex,rt=M.series,Q=M.colors,nt=M.siblings,m=rt.points,b=rt.chart.options.chart;return Z&&(K=m[Z.i],B=V[Z.level]||{},K&&B.colorByPoint&&(z=K.index%(Q?Q.length:b.colorCount),E=Q&&Q[z]),rt.chart.styledMode||(O=P(K&&K.options.color,B&&B.color,E,X&&(S=>{let v=B&&B.colorVariation;return v&&v.key==="brightness"&&L&&nt?i.parse(S).brighten(v.to*(L/nt)).get():S})(X),rt.color)),D=P(K&&K.options.colorIndex,B&&B.colorIndex,z,$,M.colorIndex)),{color:O,colorIndex:D}},getLevelOptions:function(Z){let M,K,B,E,z,O,D={};if(x(Z))for(E=p(Z.from)?Z.from:1,O=Z.levels,K={},M=x(Z.defaults)?Z.defaults:{},h(O)&&(K=O.reduce((L,V)=>{let X,$,rt;return x(V)&&p(V.level)&&($=P((rt=I({},V)).levelIsConstant,M.levelIsConstant),delete rt.levelIsConstant,delete rt.level,x(L[X=V.level+($?0:E-1)])?I(!0,L[X],rt):L[X]=rt),L},{})),z=p(Z.to)?Z.to:1,B=0;B<=z;B++)D[B]=I({},M,x(K[B])?K[B]:{});return D},getNodeWidth:function(Z,M){let{chart:K,options:B}=Z,{nodeDistance:E=0,nodeWidth:z=0}=B,{plotSizeX:O=1}=K;if(z==="auto"){if(typeof E=="string"&&/%$/.test(E))return O/(M+parseFloat(E)/100*(M-1));let D=Number(E);return(O+D)/(M||1)-D}return et(z,O)},setTreeValues:function Z(M,K){let B=K.before,E=K.idRoot,z=K.mapIdToNode[E],O=K.levelIsConstant!==!1,D=K.points[M.i],L=D&&D.options||{},V=[],X=0;M.levelDynamic=M.level-(O?0:z.level),M.name=P(D&&D.name,""),M.visible=E===M.id||K.visible===!0,typeof B=="function"&&(M=B(M,K)),M.children.forEach((rt,Q)=>{let nt=o({},K);o(nt,{index:Q,siblings:M.children.length,visible:M.visible}),rt=Z(rt,nt),V.push(rt),rt.visible&&(X+=rt.val)});let $=P(L.value,X);return M.visible=$>=0&&(X>0||M.visible),M.children=V,M.childrenTotal=X,M.isLeaf=M.visible&&!X,M.val=$,M},updateRootId:function(Z){let M,K;return x(Z)&&(K=x(Z.options)?Z.options:{},M=P(Z.rootNode,K.rootId,""),x(Z.userOptions)&&(Z.userOptions.rootId=M),Z.rootNode=M),M}}}),l(s,"Core/Axis/TreeGrid/TreeGridAxis.js",[s["Core/Axis/BrokenAxis.js"],s["Core/Axis/GridAxis.js"],s["Gantt/Tree.js"],s["Core/Axis/TreeGrid/TreeGridTick.js"],s["Series/TreeUtilities.js"],s["Core/Utilities.js"]],function(i,r,o,h,p,x){let I,{getLevelOptions:P}=p,{addEvent:et,find:Z,fireEvent:M,isArray:K,isObject:B,isString:E,merge:z,pick:O,removeEvent:D,wrap:L}=x;function V(S,v){let u=S.collapseEnd||0,g=S.collapseStart||0;return u>=v&&(g-=.5),{from:g,to:u,showPoints:!1}}function X(S,v,u){let g=[],y=[],R={},N=typeof v=="boolean"&&v,q={},J=-1,F=o.getTree(S,{after:function(C){let w=q[C.pos],G=0,W=0;w.children.forEach(function(it){W+=(it.descendants||0)+1,G=Math.max((it.height||0)+1,G)}),w.descendants=W,w.height=G,w.collapsed&&y.push(w)},before:function(C){let w,G,W=B(C.data,!0)?C.data:{},it=E(W.name)?W.name:"",ht=R[C.parent],ot=B(ht,!0)?q[ht.pos]:null;N&&B(ot,!0)&&(w=Z(ot.children,function(mt){return mt.name===it}))?(G=w.pos,w.nodes.push(C)):G=J++,!q[G]&&(q[G]=w={depth:ot?ot.depth+1:0,name:it,id:W.id,nodes:[C],children:[],pos:G},G!==-1&&g.push(it),B(ot,!0)&&ot.children.push(w)),E(C.id)&&(R[C.id]=C),w&&W.collapsed===!0&&(w.collapsed=!0),C.pos=G}});return{categories:g,mapOfIdToNode:R,mapOfPosToGridNode:q=function(C,w){let G=function(W,it,ht){let ot=W.nodes,mt=it+(it===-1?0:w-1),vt=(mt-it)/2,gt=it+vt;return ot.forEach(function(xt){let kt=xt.data;B(kt,!0)&&(kt.y=it+(kt.seriesIndex||0),delete kt.seriesIndex),xt.pos=gt}),ht[gt]=W,W.pos=gt,W.tickmarkOffset=vt+.5,W.collapseStart=mt+.5,W.children.forEach(function(xt){G(xt,mt+1,ht),mt=(xt.collapseEnd||0)-.5}),W.collapseEnd=mt+.5,ht};return G(C[-1],-1,{})}(q,u),collapsedNodes:y,tree:F}}function $(S){S.target.axes.filter(function(v){return v.options.type==="treegrid"}).forEach(function(v){let u=v.options||{},g=u.labels,y=u.uniqueNames,R=u.max,N=!v.treeGrid.mapOfPosToGridNode||v.series.some(function(C){return!C.hasRendered||C.isDirtyData||C.isDirty}),q=0,J,F;if(N){if(J=v.series.reduce(function(C,w){return w.visible&&((w.options.data||[]).forEach(function(G){w.options.keys&&w.options.keys.length&&(G=w.pointClass.prototype.optionsToObject.call({series:w},G),w.pointClass.setGanttPointAliases(G)),B(G,!0)&&(G.seriesIndex=q,C.push(G))}),y===!0&&q++),C},[]),R&&J.length<R)for(let C=J.length;C<=R;C++)J.push({name:C+"\u200B"});F=X(J,y||!1,y===!0?q:1),v.categories=F.categories,v.treeGrid.mapOfPosToGridNode=F.mapOfPosToGridNode,v.hasNames=!0,v.treeGrid.tree=F.tree,v.series.forEach(function(C){let w=(C.options.data||[]).map(function(G){return K(G)&&C.options.keys&&C.options.keys.length&&J.forEach(function(W){G.indexOf(W.x)>=0&&G.indexOf(W.x2)>=0&&(G=W)}),B(G,!0)?z(G):G});C.visible&&C.setData(w,!1)}),v.treeGrid.mapOptionsToLevel=P({defaults:g,from:1,levels:g&&g.levels,to:v.treeGrid.tree&&v.treeGrid.tree.height}),S.type==="beforeRender"&&(v.treeGrid.collapsedNodes=F.collapsedNodes)}})}function rt(S,v){let u=this.treeGrid.mapOptionsToLevel||{},g=this.options.type==="treegrid",y=this.ticks,R=y[v],N,q,J;g&&this.treeGrid.mapOfPosToGridNode?((N=u[(J=this.treeGrid.mapOfPosToGridNode[v]).depth])&&(q={labels:N}),!R&&I?y[v]=R=new I(this,v,void 0,void 0,{category:J.name,tickmarkOffset:J.tickmarkOffset,options:q}):(R.parameters.category=J.name,R.options=q,R.addLabel())):S.apply(this,Array.prototype.slice.call(arguments,1))}function Q(S,v,u,g){let y=this,R=u.type==="treegrid";y.treeGrid||(y.treeGrid=new b(y)),R&&(et(v,"beforeRender",$),et(v,"beforeRedraw",$),et(v,"addSeries",function(N){if(N.options.data){let q=X(N.options.data,u.uniqueNames||!1,1);y.treeGrid.collapsedNodes=(y.treeGrid.collapsedNodes||[]).concat(q.collapsedNodes)}}),et(y,"foundExtremes",function(){y.treeGrid.collapsedNodes&&y.treeGrid.collapsedNodes.forEach(function(N){let q=y.treeGrid.collapse(N);y.brokenAxis&&(y.brokenAxis.setBreaks(q,!1),y.treeGrid.collapsedNodes&&(y.treeGrid.collapsedNodes=y.treeGrid.collapsedNodes.filter(J=>N.collapseStart!==J.collapseStart||N.collapseEnd!==J.collapseEnd)))})}),et(y,"afterBreaks",function(){y.coll==="yAxis"&&!y.staticScale&&y.chart.options.chart.height&&(y.isDirty=!0)}),u=z({grid:{enabled:!0},labels:{align:"left",levels:[{level:void 0},{level:1,style:{fontWeight:"bold"}}],symbol:{type:"triangle",x:-5,y:-5,height:10,width:10}},uniqueNames:!1},u,{reversed:!0})),S.apply(y,[v,u,g]),R&&(y.hasNames=!0,y.options.showLastLabel=!0)}function nt(S){let v=this.options,u=typeof v.linkedTo=="number"?this.chart[this.coll]?.[v.linkedTo]:void 0;if(v.type==="treegrid"){if(this.min=O(this.userMin,v.min,this.dataMin),this.max=O(this.userMax,v.max,this.dataMax),M(this,"foundExtremes"),this.setAxisTranslation(),this.tickInterval=1,this.tickmarkOffset=.5,this.tickPositions=this.treeGrid.mapOfPosToGridNode?this.treeGrid.getTickPositions():[],u){let g=u.getExtremes();this.min=O(g.min,g.dataMin),this.max=O(g.max,g.dataMax),this.tickPositions=u.tickPositions}this.linkedParent=u}else S.apply(this,Array.prototype.slice.call(arguments,1))}function m(S){let v=this;v.options.type==="treegrid"&&v.visible&&v.tickPositions.forEach(function(u){let g=v.ticks[u];g.label&&g.label.attachedTreeGridEvents&&(D(g.label.element),g.label.attachedTreeGridEvents=!1)}),S.apply(v,Array.prototype.slice.call(arguments,1))}class b{static compose(v,u,g,y){if(!v.keepProps.includes("treeGrid")){let R=v.prototype;v.keepProps.push("treeGrid"),L(R,"generateTick",rt),L(R,"init",Q),L(R,"setTickInterval",nt),L(R,"redraw",m),R.utils={getNode:o.getNode},I||(I=y)}return r.compose(v,u,y),i.compose(v,g),h.compose(y),v}constructor(v){this.axis=v}setCollapsedStatus(v){let u=this.axis,g=u.chart;u.series.forEach(function(y){let R=y.options.data;if(v.id&&R){let N=g.get(v.id),q=R[y.data.indexOf(N)];N&&q&&(N.collapsed=v.collapsed,q.collapsed=v.collapsed)}})}collapse(v){let u=this.axis,g=u.options.breaks||[],y=V(v,u.max);return g.push(y),v.collapsed=!0,u.treeGrid.setCollapsedStatus(v),g}expand(v){let u=this.axis,g=u.options.breaks||[],y=V(v,u.max);return v.collapsed=!1,u.treeGrid.setCollapsedStatus(v),g.reduce(function(R,N){return(N.to!==y.to||N.from!==y.from)&&R.push(N),R},[])}getTickPositions(){let v=this.axis,u=Math.floor(v.min/v.tickInterval)*v.tickInterval,g=Math.ceil(v.max/v.tickInterval)*v.tickInterval;return Object.keys(v.treeGrid.mapOfPosToGridNode||{}).reduce(function(y,R){let N=+R;return N>=u&&N<=g&&!(v.brokenAxis&&v.brokenAxis.isInAnyBreak(N))&&y.push(N),y},[])}isCollapsed(v){let u=this.axis,g=u.options.breaks||[],y=V(v,u.max);return g.some(function(R){return R.from===y.from&&R.to===y.to})}toggleCollapse(v){return this.isCollapsed(v)?this.expand(v):this.collapse(v)}}return b}),l(s,"Series/Gantt/GanttSeries.js",[s["Series/Gantt/GanttPoint.js"],s["Series/Gantt/GanttSeriesDefaults.js"],s["Gantt/Pathfinder.js"],s["Core/Series/SeriesRegistry.js"],s["Extensions/StaticScale.js"],s["Core/Axis/TreeGrid/TreeGridAxis.js"],s["Core/Utilities.js"]],function(i,r,o,h,p,x,I){let{series:P,seriesTypes:{xrange:et}}=h,{extend:Z,isNumber:M,merge:K}=I;class B extends et{static compose(z,O,D,L){et.compose(z),O&&(p.compose(z,O),D)&&(o.compose(O,D.prototype.pointClass),L&&x.compose(z,O,D,L))}drawPoint(z,O){let D=this.options,L=this.chart.renderer,V=z.shapeArgs,X=z.plotY,$=z.selected&&"select",rt=D.stacking&&!D.borderRadius,Q=z.graphic,nt;z.options.milestone?M(X)&&z.y!==null&&z.visible!==!1?(nt=L.symbols.diamond(V.x||0,V.y||0,V.width||0,V.height||0),Q?Q[O]({d:nt}):z.graphic=Q=L.path(nt).addClass(z.getClassName(),!0).add(z.group||this.group),this.chart.styledMode||z.graphic.attr(this.pointAttribs(z,$)).shadow(D.shadow,null,rt)):Q&&(z.graphic=Q.destroy()):super.drawPoint(z,O)}translatePoint(z){let O,D;super.translatePoint(z),z.options.milestone&&(D=(O=z.shapeArgs).height||0,z.shapeArgs={x:(O.x||0)-D/2,y:O.y,width:D,height:D})}}return B.defaultOptions=K(et.defaultOptions,r),Z(B.prototype,{pointArrayMap:["start","end","y"],pointClass:i,setData:P.prototype.setData}),h.registerSeriesType("gantt",B),B}),l(s,"masters/modules/gantt.src.js",[s["Core/Globals.js"],s["Extensions/ArrowSymbols.js"],s["Gantt/Connection.js"],s["Extensions/CurrentDateIndication.js"],s["Core/Chart/GanttChart.js"],s["Stock/Navigator/Navigator.js"],s["Stock/RangeSelector/RangeSelector.js"],s["Stock/Scrollbar/Scrollbar.js"],s["Series/Gantt/GanttSeries.js"]],function(i,r,o,h,p,x,I,P,et){return i.Connection=i.Connection||o,i.GanttChart=i.GanttChart||p,i.Navigator=i.Navigator||x,i.RangeSelector=i.RangeSelector||I,i.Scrollbar=i.Scrollbar||P,i.ganttChart=i.GanttChart.ganttChart,r.compose(i.SVGRenderer),h.compose(i.Axis,i.PlotLineOrBand),et.compose(i.Axis,i.Chart,i.Series,i.Tick),i.Navigator.compose(i.Chart,i.Axis,i.Series),i.RangeSelector.compose(i.Axis,i.Chart),i.Scrollbar.compose(i.Axis),i})})});function Bx(a,s){if(a&1){let l=At();T(0,"div",10)(1,"p")(2,"strong"),ct(3," Work Log "),A()(),T(4,"button",11),bt("click",function(){zt(l);let r=at();return It(r.showModal())}),_t(5,"span",12),A()()}}var Vx=()=>({standalone:!0});function qx(a,s){if(a&1){let l=At();T(0,"nz-col",17)(1,"nz-form-item")(2,"nz-form-label",24),ct(3,"From"),A(),T(4,"nz-form-control",19)(5,"nz-range-picker",25),Le("ngModelChange",function(r){zt(l);let o=at(2);return Oe(o.date,r)||(o.date=r),It(r)}),bt("ngModelChange",function(r){zt(l);let o=at(2);return It(o.onChange(r))}),A()()()()}if(a&2){let l=at(2);H("nzMd",24)("nzSm",24)("nzXs",24),j(2),H("nzMd",8)("nzSm",24)("nzXs",12),j(2),H("nzSm",14)("nzXs",24),j(),H("ngModelOptions",pe(10,Vx)),Pe("ngModel",l.date)}}function Wx(a,s){if(a&1){let l=At();T(0,"nz-input-number",26),bt("change",function(r){zt(l);let o=at(2);return It(o.setAmout(r))}),A()}}function Gx(a,s){if(a&1){let l=At();T(0,"nz-card",13)(1,"form",14),bt("ngSubmit",function(){zt(l);let r=at();return It(r.handleOk())}),T(2,"nz-row",15),yt(3,qx,6,11,"nz-col",16),T(4,"nz-col",17)(5,"nz-form-item")(6,"nz-form-label",18),ct(7,"No of hours "),A(),T(8,"nz-form-control",19),ct(9),yt(10,Wx,1,0,"nz-input-number",20),A()()()(),T(11,"nz-row",15)(12,"nz-col",17)(13,"nz-form-item")(14,"nz-form-label",21),ct(15," Log Description"),A(),T(16,"nz-form-control",22),_t(17,"textarea",23),A()()()()()()}if(a&2){let l=at(),i;j(),H("formGroup",l.addContractorWorkLogForm),j(2),H("ngIf",l.contractDetails.contract_type=="1"),j(),H("nzMd",24)("nzSm",24)("nzXs",24),j(2),H("nzMd",8)("nzSm",24)("nzXs",12),j(2),H("nzSm",14)("nzXs",24),j(),te(" ",l.contractDetails.contract_type=="1"?(i=l.addContractorWorkLogForm.get("no_of_hours"))==null?null:i.value:""," "),j(),H("ngIf",l.contractDetails.contract_type!="1"),j(2),H("nzMd",24)("nzSm",24)("nzXs",24),j(2),H("nzMd",8)("nzSm",24)("nzXs",24),j(2),H("nzSm",14)("nzXs",24)}}function jx(a,s){if(a&1){let l=At();T(0,"div",27),_t(1,"input",28,29),T(3,"a",30),bt("click",function(){zt(l);let r=$t(2),o=at();return It(o.addItem(r))}),_t(4,"span",12),ct(5," Add item "),A()()}}function Ux(a,s){if(a&1&&(T(0,"th",31),ct(1),A()),a&2){let l=s.$implicit;H("nzSortFn",l.compare)("nzSortPriority",l.priority),j(),te(" ",l.title," ")}}function Hx(a,s){if(a&1){let l=At();T(0,"a",35),bt("click",function(){zt(l);let r=at().$implicit,o=at();return It(o.startEdit(r.id))}),ct(1,"Edit"),A()}}function Xx(a,s){if(a&1){let l=At();T(0,"a",36),bt("click",function(){zt(l);let r=at().$implicit,o=at();return It(o.saveEdit(r.id))}),ct(1,"Save"),A()}}function $x(a,s){if(a&1){let l=At();T(0,"a",37),bt("nzOnConfirm",function(){zt(l);let r=at().$implicit,o=at();return It(o.cancelEdit(r.id))}),ct(1,"Cancel"),A()}}function Kx(a,s){if(a&1&&(T(0,"tr")(1,"td"),ct(2),A(),T(3,"td"),ct(4),ne(5,"date"),A(),T(6,"td"),ct(7),A(),T(8,"td"),ct(9),A(),T(10,"td"),yt(11,Hx,2,0,"a",32)(12,Xx,2,0,"a",33),ct(13," \xA0 "),yt(14,$x,2,0,"a",34),A()()),a&2){let l=s.$implicit,i=at();j(2),Ae(l.created_by==null?null:l.created_by.name),j(2),te(" ",ue(5,7,l.date_created,"dd MMM yyyy")," "),j(3),te(" ",l.no_of_hours," "),j(2),te(" ",l.note,""),j(2),H("ngIf",!(i.editCache[l.id]!=null&&i.editCache[l.id].edit)),j(),H("ngIf",i.editCache[l.id]==null?null:i.editCache[l.id].edit),j(2),H("ngIf",i.editCache[l.id]==null?null:i.editCache[l.id].edit)}}var ou=(()=>{let s=class s{constructor(i,r,o){this.appService=i,this.userService=r,this.fb=o,this.projectItems=[],this.active=!1,this.listOfColumn=[{title:"User",compare:(h,p)=>h.created_by.name-p.created_by.name,priority:1},{title:"Created At",compare:(h,p)=>h.created_by.date_created-p.created_by.date_created,priority:2},{title:"Hours",compare:(h,p)=>(h.no_of_hours?1:0)-(p.no_of_hours?1:0),priority:3},{title:"Note",compare:(h,p)=>h.note.localeCompare(p.note),priority:4},{title:"Action",compare:(h,p)=>h.amount-p.amount,priority:5}],this.listOfData=[],this.visible=!1,this.isVisible=!1,this.isOkLoading=!1,this.index=0,this.editCache={}}showModal(){this.isVisible=!0}handleOk(){return Pt(this,null,function*(){try{this.isVisible=!1,this.isOkLoading=!0,yield this.addContractorWorkLog(),this.isVisible=!1,this.addContractorWorkLogForm.reset()}catch{}finally{this.isOkLoading=!1,this.populateContractorWorkLogData()}})}addContractorWorkLog(){return Pt(this,null,function*(){this.clients=yield this.appService.saveSiteContractorWorkLog(zi(ce({},this.addContractorWorkLogForm.getRawValue()),{userId:this.user_id,task:this.task_id}))})}handleCancel(){this.isVisible=!1}ngOnInit(){this.addContractorWorkLogForm=new uo({id:new ft(0),amount:new ft(0,[ve.required]),note:new ft,work_from:new ft(new Date),work_to:new ft(new Date),no_of_hours:new ft(0),contract:new ft(this.contractDetails.id),site:new ft(this.task_id)}),this.populateContractorWorkLogData()}open(){this.visible=!0}close(i=!1){this.visible=!1,i&&this.populateContractorWorkLogData()}populateContractorWorkLogData(){return Pt(this,null,function*(){this.listOfData=yield this.appService.retrieveWorkLogByTaskId(this.task_id),this.updateEditCache()})}addItem(i){let r=i.value;this.projectItems.some(o=>!r||o.name===r.trim())||(this.projectItems=[...this.projectItems,{name:i.value,isCustom:!0}],i.value="")}onChange(i){if(i&&i.length>1){let r=this.appService.getNumberOfDays(i[0],i[1],this.contractDetails.include_weekends);this.addContractorWorkLogForm.patchValue({work_from:i[0],work_to:i[1],no_of_hours:r,amount:r*this.contractDetails.amount_per_unit},{emitEvent:!1})}}setAmout(i){this.addContractorWorkLogForm.patchValue({work_from:new Date,work_to:new Date,no_of_hours:Number(i.target.value),amount:Number(i.target.value)*this.contractDetails.amount_per_unit},{emitEvent:!1})}startEdit(i){this.editCache[i].edit=!0}cancelEdit(i){let r=this.listOfData.findIndex(o=>o.id===i);this.editCache[i]={data:ce({},this.listOfData[r]),edit:!1}}saveEdit(i){return Pt(this,null,function*(){let r=this.listOfData.findIndex(o=>o.id===i);this.editCache[i].edit=!1,Object.assign(this.listOfData[r],this.editCache[i].data),this.populateContractorWorkLogData()})}updateEditCache(){this.listOfData.forEach(i=>{this.editCache[i.id]={edit:!1,data:ce({},i)}})}};s.\u0275fac=function(r){return new(r||s)(Ct(Te),Ct(on),Ct(hn))},s.\u0275cmp=_e({type:s,selectors:[["app-work-log"]],inputs:{contractDetails:"contractDetails",task_id:"task_id",user_id:"user_id"},decls:16,vars:9,consts:[["nzGhost","",2,"margin","5px"],[3,"nzHeader","nzActive"],["title",""],["nzTitle","Add Work Log",3,"nzVisible","nzOkDisabled","nzOkLoading","nzVisibleChange","nzOnCancel","nzOnOk"],["style","width:100%",4,"nzModalContent"],["renderTemplate",""],["nzShowPagination","false",3,"nzPageSize","nzData"],["editRowTable","","sortTable",""],[3,"nzSortFn","nzSortPriority",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"flex","center","space-between",2,"width","100%"],["nz-button","","nzType","primary","nzSize","small",3,"click"],["nz-icon","","nzType","plus"],[2,"width","100%"],["nz-form","",3,"formGroup","ngSubmit"],["nzGutter","2",2,"margin-bottom","12px"],[3,"nzMd","nzSm","nzXs",4,"ngIf"],[3,"nzMd","nzSm","nzXs"],["nzRequired","","nzFor","no_of_hours",3,"nzMd","nzSm","nzXs"],["nzErrorTip","The input is not valid date!",3,"nzSm","nzXs"],["class","inputField","formControlName","no_of_hours",3,"change",4,"ngIf"],["nzRequired","","nzFor","name",3,"nzMd","nzSm","nzXs"],["nzErrorTip","The input is not valid date!",1,"flex","space-between","center",3,"nzSm","nzXs"],["nz-input","","formControlName","note",1,"inputField"],["nzRequired","","nzFor","from",3,"nzMd","nzSm","nzXs"],[3,"ngModelOptions","ngModel","ngModelChange"],["formControlName","no_of_hours",1,"inputField",3,"change"],[1,"container"],["type","text","nz-input",""],["inputElement",""],[1,"add-item",3,"click"],[3,"nzSortFn","nzSortPriority"],[3,"click",4,"ngIf"],["class","save",3,"click",4,"ngIf"],["nz-popconfirm","","nzPopconfirmTitle","Sure to cancel?",3,"nzOnConfirm",4,"ngIf"],[3,"click"],[1,"save",3,"click"],["nz-popconfirm","","nzPopconfirmTitle","Sure to cancel?",3,"nzOnConfirm"]],template:function(r,o){if(r&1&&(T(0,"nz-collapse",0)(1,"nz-collapse-panel",1),yt(2,Bx,6,0,"ng-template",null,2,Qt),T(4,"nz-modal",3),Le("nzVisibleChange",function(p){return Oe(o.isVisible,p)||(o.isVisible=p),p}),bt("nzOnCancel",function(){return o.handleCancel()})("nzOnOk",function(){return o.handleOk()}),yt(5,Gx,18,20,"nz-card",4),A(),yt(6,jx,6,0,"ng-template",null,5,Qt),T(8,"nz-table",6,7)(11,"thead")(12,"tr"),yt(13,Ux,2,3,"th",8),A()(),T(14,"tbody"),yt(15,Kx,15,10,"tr",9),A()()()()),r&2){let h=$t(3),p=$t(10);j(),H("nzHeader",h)("nzActive",o.active),j(3),Pe("nzVisible",o.isVisible),H("nzOkDisabled",o.addContractorWorkLogForm.invalid)("nzOkLoading",o.isOkLoading),j(4),H("nzPageSize",1e3)("nzData",o.listOfData),j(5),H("ngForOf",o.listOfColumn),j(2),H("ngForOf",p.data)}},dependencies:[hi,We,ui,je,di,mr,Gd,Wd,Ri,fr,Vd,He,Ue,gr,fn,gn,mn,mi,Ud,hr,Pd,wo,yn,_r,_n,vn,Sn,xn,bn,ur,pi,fi,an,ln,cn,dr,tr]});let a=s;return a})();var ry=["content"];function sy(a,s){if(a&1&&_t(0,"nz-option",51),a&2){let l=s.$implicit;H("nzValue",l==null?null:l.id)("nzLabel",l==null?null:l.name)}}function oy(a,s){if(a&1&&_t(0,"nz-option",52),a&2){let l=s.$implicit,i=at();H("nzDisabled",i.taskStatesConnectivity[i.taskDetails.controls.state.value].indexOf(l.key)==-1)("nzLabel",i.stateNames[l.value])("nzValue",l.value)}}function ay(a,s){if(a&1&&_t(0,"nz-option",51),a&2){let l=s.$implicit;H("nzValue",l==null?null:l.employee)("nzLabel",l==null?null:l.employeeName)}}function ly(a,s){if(a&1&&_t(0,"nz-option",53),a&2){let l=s.$implicit;H("nzLabel",l.value)("nzValue",l.key)}}function cy(a,s){if(a&1&&(T(0,"span",54),_t(1,"span",55),T(2,"span"),ct(3),A()()),a&2){let l=s.$implicit,i=at();j(),H("nzTheme","twotone")("nzTwotoneColor",i.taskSeverityColors[l.nzValue]),j(2),Ae(i.taskSeverity[l.nzValue])}}function hy(a,s){if(a&1&&_t(0,"nz-option",53),a&2){let l=s.$implicit;H("nzLabel",l.value)("nzValue",l.key)}}function dy(a,s){if(a&1&&_t(0,"span",57),a&2){let l=s.$implicit,i=at(2);H("nzTheme","twotone")("nzTwotoneColor",i.taskTypeIcons[l.nzValue])}}function uy(a,s){if(a&1&&(T(0,"nz-select",56),yt(1,hy,1,2,"nz-option",29),ne(2,"keyvalue"),A(),yt(3,dy,1,2,"ng-template",null,30,Qt)),a&2){let l=$t(4),i=at();H("nzCustomTemplate",l),j(),H("ngForOf",eo(2,2,i.taskTypes))}}function py(a,s){if(a&1&&_t(0,"app-work-log",58),a&2){let l=at(),i;H("user_id",l.taskDetails.controls.assignee.value)("task_id",(i=l.taskDetails.get("id"))==null?null:i.value)("contractDetails",l.taskDetails.getRawValue())}}var fy=()=>({width:"100%"});function my(a,s){if(a&1&&_t(0,"img",59),a&2){let l=at();H("src",l.previewImage,Zs)("ngStyle",pe(2,fy))}}function gy(a,s){if(a&1){let l=At();T(0,"button",60),bt("click",function(){zt(l);let r=at();return It(r.submitRequest())}),ct(1,"Submit"),A()}if(a&2){let l=at();H("disabled",l.taskDetails.invalid)("disabled",l.taskDetails.invalid)}}function _y(a,s){if(a&1){let l=At();T(0,"button",60),bt("click",function(){zt(l);let r=at();return It(r.updateDetails())}),ct(1,"Save"),A()}if(a&2){let l=at();H("disabled",l.taskDetails.invalid)}}var vy=a=>({showPreviewIcon:!0,showRemoveIcon:a,showDownloadIcon:!0}),To=(()=>{let s=class s{constructor(i,r,o,h,p,x,I,P,et,Z){this.appService=i,this.route=r,this.userService=o,this.fb=h,this.notification=p,this.router=x,this.msg=I,this.modal=P,this.pdfGeneratorService=et,this.imageCompress=Z,this.projects=[],this.projectItems=[],this.discountTotal=0,this.taskTotal=0,this.loading=!1,this.taskTypes=zd,this.taskTypeIcons=or,this.taskSeverity=Id,this.taskSeverityColors=Td,this.TaskStates=ti,this.stateNames=Ge,this.taskStatesConnectivity=ar,this.listOfData=[],this.defaultItemValues={id:0,name:"",qty:0,task_id:0,discount:0,total:0,date_created:new Date,isCustom:!1,unit_price:0},this.isSpinning=!1,this.taskDetails=new uo({id:new ft,task_no:new ft,title:new ft,type:new ft(2),state:new ft(ti.Backlog),description:new ft,severity:new ft(1),created_by:new ft(0),date_created:new ft(new Date),organization_id:new ft(0),client_id:new ft(0),start_date:new ft(new Date),due_date:new ft(new Date),assignee:new ft(0),attachment:new ft,terms:new ft("")}),this.fileList=[],this.displayControlColumns=[{value:"name",name:"Item"}],this.previewImage="",this.previewVisible=!1,this.beforeUpload=(M,K)=>new Wi(B=>{let E=M.type==="image/jpeg"||M.type==="image/png";if(!E){this.msg.error("You can only upload JPG file!"),B.complete();return}let z=M.size/1024/1024<2;if(!z){this.msg.error("Image must smaller than 2MB!"),B.complete();return}B.next(E&&z),B.complete()}),this.handlePreview=M=>Pt(this,null,function*(){this.previewImage=M.url||M.preview,this.previewVisible=!0}),this.donwnloadFile=M=>{console.log(M);let K=`${M.url}`,B=document.createElement("a");B.href=K,B.download=M.filename||"",B.click(),B.remove()},this.taskDetails=this.fb.group({id:new ft,title:new ft(null,[ve.required]),task_no:new ft,type:new ft(2),severity:new ft(2),state:new ft(ti.Backlog),description:new ft,created_by:new ft(0),date_created:new ft(new Date),organization_id:new ft(0),client_id:new ft(0),start_date:new ft(new Date),due_date:new ft(new Date),assignee:new ft(0),attachment:new ft,terms:new ft("")}),this.taskDetails.controls.type.setValue(Object.keys(this.taskTypes).find(M=>Number(M)===2)),this.taskDetails.controls.severity.setValue(Object.keys(this.taskSeverity).find(M=>Number(M)===1))}submitForm(){}ngOnInit(){this.currentClientSubscription=this.appService.currentClient.subscribe(i=>{i&&i.id>0&&this.currentOrganizationId!=i.id&&(this.currentOrganizationId=i.id,this.setUpTaskForm())})}ngOnDestroy(){this.routerSubscription&&this.routerSubscription.unsubscribe()}canDeactivate(){return this.shouldConfirmNavigation()?confirm(sr):!0}shouldConfirmNavigation(){return this.taskDetails.dirty||this.taskDetails.touched}close(){this.router.navigate(["/","task",location.href.indexOf("board")>-1?"board":location.href.indexOf("report")>-1?"report":"list"],{queryParams:{PO:null},queryParamsHandling:"merge"})}setUpTaskForm(){return Pt(this,null,function*(){yield this.loadProjectsProjectsAndUsers(),this.routerSubscription=this.route.queryParams.subscribe(i=>Pt(this,null,function*(){if((this.taskDetails.dirty||this.taskDetails.touched)&&!confirm(sr))return;this.isSpinning=!0;let r=0;!i.PO||i.PO==="new"?(this.taskDetails.enable(),this.taskDetails.updateValueAndValidity()):r=i.PO,this.created_by_users=[this.userService.loggedInUser],this.taskDetails.controls.id.setValue(r||0),yield this.setTaskRequestDetails(),setTimeout(()=>Pt(this,null,function*(){this.isSpinning=!1}),1e3)}))})}setProjectsData(){return Pt(this,null,function*(){let i=yield this.appService.getAndSetProjects(),r=i&&i.length?i.map(o=>ce({label:o.name},o)):[];this.sites=[...r]})}setTaskRequestDetails(){return Pt(this,null,function*(){this.loading=!0,this.taskDetails.controls.id.value?yield this.getExistingTask():(this.taskDetails.controls.client_id.setValue(this.appService.currentSubOrgId),this.taskDetails.controls.organization_id.setValue(parseInt(localStorage.getItem("organization_id")||"")),this.taskDetails.controls.created_by.setValue(this.userService.loggedInUser.id)),this.disableAndEnableSpecificControls(),this.loading=!1})}getExistingTask(){return Pt(this,null,function*(){let i=yield this.appService.retireveTaskById(this.taskDetails.controls.id.value);i&&(this.created_by_users=[i.created_by],this.taskDetails.patchValue({id:i.id,task_no:i.task_no,title:i.title,state:i.state,type:i.type,severity:i.severity,description:i.description,assignee:i.assignee,created_by:i.created_by.id,date_created:new Date(i.date_created),start_date:i.start_date,due_date:i.due_date,organization_id:i.organization_id,client_id:i.client_id,attachment:i.attachment}),i.attachment&&i.attachment.length&&(this.fileList=i.attachment.map(r=>({name:"image.png",status:"done",url:r,message:"",thumbUrl:r})))),this.taskDetails.controls.type.setValue(Object.keys(this.taskTypes).find(r=>Number(r)===Number(i.type))),this.taskDetails.controls.severity.setValue(Object.keys(this.taskSeverity).find(r=>Number(r)===Number(i.severity))),this.previousTaskDetails=this.taskDetails.getRawValue()})}loadProjectsProjectsAndUsers(){return Pt(this,null,function*(){this.listOfData=yield this.appService.getOrganizationEmployees()})}getItemFormGroup(i=this.defaultItemValues){return this.fb.group({id:new ft(i.id),task_id:new ft(i.task_id),name:new ft(i.name,[ve.required]),qty:new ft(i.qty,[ve.required]),unit_price:new ft(i.unit_price),discount:new ft(i.discount),total:new ft(i.total),date_created:new ft(i.date_created),isCustom:new ft(i.isCustom)})}submitRequest(){return Pt(this,null,function*(){let i=yield this.appService.addTaskRequest({details:zi(ce({},this.taskDetails.getRawValue()),{state:ti.Backlog})});i&&this.notification.create("success","Task Order - "+i.task_no,"Task order submitted successfly. Please check for invoice and update later").onClose.subscribe(r=>{this.router.navigate(["/task",location.href.indexOf("board")>-1?"board":"list"])})})}updateDetails(){return Pt(this,null,function*(){let i=this.appService.findObjectDifferences(this.previousTaskDetails,this.taskDetails.getRawValue());console.log(i);let r=ce({id:this.previousTaskDetails.id},i);if(Object.keys(i).length<=1){this.notification.create("error","Task Updated","Please update missing details before submission.");return}(yield this.appService.updateTaskRequest(r))&&this.notification.create("success","Task - "+this.previousTaskDetails.task_no,"Task updated successfly.").onClose.subscribe(h=>{this.router.navigate(["/task",location.href.indexOf("board")>-1?"board":"list"])})})}printCard(){this.makePdf("print")}generatePDF(){this.makePdf("download")}makePdf(i){let r=this.taskDetails.getRawValue();this.pdfGeneratorService.invoice=zi(ce({},r),{type:this.taskTypes[r.type],status:this.stateNames[r.state],invoiceDetailLabel:"Task Details",personName:r.assignee.name,address:r.assignee.address||"",contactNo:r.assignee.contact_no||"",terms:r.terms,email:r.assignee.email||"",additionalDetails:r.description||"",created_by:this.created_by_users[0]}),this.pdfGeneratorService.generatePDF(i)}disableAndEnableSpecificControls(){let i=this.taskDetails.get("state");i&&i.value==this.TaskStates.InProgress&&(this.taskDetails.controls.created_by.disable(),this.taskDetails.controls.date_created.disable()),i&&i.value!==this.TaskStates.Backlog&&(console.log(this.taskDetails),Object.keys(this.taskDetails.controls).forEach(r=>{let o=this.taskDetails.get(r);o&&r!=="description"&&r!=="invoice_date"&&r!=="due_date"&&r!=="start_date"&&r!=="attachment"&&r!=="terms"&&r!=="items"&&r!=="discount_total"&&r!=="item_cost"&&r!=="shipment_charges"&&r!=="additional_cost"&&r!=="overall_discount_total"&&r!=="items_discount_total"&&r!=="total"&&r!=="overall_discount"&&i.value===this.TaskStates.InProgress&&(console.log(r),o.disable()),o&&(r!=="attachment"&&r!=="amount_paid"&&i.value===this.TaskStates.Completed||i.value===this.TaskStates.Completed||i.value===this.TaskStates.Completed)&&o.disable()}),console.log(this.taskDetails),this.taskDetails.updateValueAndValidity())}getBase64(i,r){let o=new FileReader;o.addEventListener("load",()=>r(o.result.toString())),o.readAsDataURL(i)}handleChange(i){this.getBase64(i.file.originFileObj,r=>Pt(this,null,function*(){if(this.loading=!1,i.type==="error"){let o=yield this.imageCompress.getOrientation(i.file.originFileObj||new File([],""));this.imageCompress.compressFile(r,o,50,80,800,800).then(h=>{console.warn(`Compressed: ${h.substring(0,50)}... (${h.length} characters)`),console.warn("Size in bytes is now:",this.imageCompress.byteCount(h)),i.fileList?.forEach(p=>{p.uid==i.file.uid&&(p.name="image.png",p.status="done",p.url=h,p.message="",p.thumbUrl=h)}),Object.assign(this.fileList,i.fileList),this.taskDetails.patchValue({attachment:i.fileList?.map(p=>p.url)})})}}))}};s.\u0275fac=function(r){return new(r||s)(Ct(Te),Ct(Ti),Ct(on),Ct(hn),Ct(Co),Ct(ki),Ct(So),Ct(ho),Ct(vr),Ct(zo))},s.\u0275cmp=_e({type:s,selectors:[["app-task"]],viewQuery:function(r,o){if(r&1&&Gr(ry,5),r&2){let h;jr(h=Ur())&&(o.content=h.first)}},decls:97,vars:77,consts:[[3,"nzSpinning","nzDelay"],[1,"container"],[1,"detailBar"],["nz-button","","nzType","primary","nz-tooltip","Generate PDF",3,"click"],["nz-icon","","nzType","download"],["nz-button","","nz-tooltip","Print request","nzType","primary",2,"margin-left","12px",3,"click"],["nz-icon","","nzType","printer"],["nz-button","","nz-tooltip","Close request","nzType","default","nzDanger","",2,"margin-left","12px",3,"click"],["nz-icon","","nzType","close"],["id","print-section",1,"task-request"],["nzBordered","false",2,"width","100%"],["nz-form","",3,"formGroup","ngSubmit"],["content",""],["nzRequired","","nzFor","created_by",3,"nzSm","nzXs"],["nzErrorTip","The input is not valid date!",3,"nzSm","nzXs"],["id","created_by","formControlName","created_by","placeholder","created_by"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzRequired","","nzFor","state",3,"nzSm","nzXs"],["formControlName","state","nzPlaceHolder","Status",1,"taskTypeSelector"],[3,"nzDisabled","nzLabel","nzValue",4,"ngFor","ngForOf"],["nzRequired","","nzFor","date_created",3,"nzSm","nzXs"],["nzFormat","MM-dd-yyyy","formControlName","date_created",1,"inputField"],["nzRequired","","nzFor","assignee",3,"nzSm","nzXs"],["id","assignee","formControlName","assignee","placeholder","Select user"],["nzRequired","","nzFor","start_date",3,"nzSm","nzXs"],["nzFormat","MM-dd-yyyy","formControlName","start_date",1,"inputField"],["nzRequired","","nzFor","due_date",3,"nzSm","nzXs"],["nzFormat","MM-dd-yyyy","formControlName","due_date",1,"inputField"],["formControlName","severity","nzPlaceHolder","severity",3,"nzCustomTemplate"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["defaultTemplate",""],["addOnBeforeTemplate",""],["nzRequired","","nzFor","title",3,"nzSm","nzXs"],[3,"nzAddOnBefore"],["type","text","nz-input","","formControlName","title"],[2,"width","100%","margin-bottom","12px"],["nzFor","description"],["nzErrorTip","",3,"nzSm","nzXs","nzMd","nzXl","nzXXl"],["rows","6","nz-input","","formControlName","description","placeholder","textarea with clear icon"],["nzFor","terms"],["nz-input","","formControlName","terms","placeholder","textarea with clear icon"],["nzRequired","","nzFor","due_date"],["nzHasFeedback","","nzErrorTip","Please input Organization name",3,"nzSm","nzXs","nzMd","nzXl","nzXXl"],["nzAction","null","nzListType","picture-card",3,"nzFileList","nzDisabled","nzShowButton","nzPreview","nzDownload","nzShowUploadList","nzBeforeUpload","nzFileListChange","nzChange"],["nz-icon","","nzType","plus"],[2,"margin-top","8px"],[3,"user_id","task_id","contractDetails",4,"ngIf"],[3,"nzVisible","nzContent","nzFooter","nzOnCancel"],["modalContent",""],[1,"flex","space-between"],["nz-button","","nzType","primary","style","margin-bottom: 12px;float: right;",3,"disabled","click",4,"ngIf"],[3,"nzValue","nzLabel"],[3,"nzDisabled","nzLabel","nzValue"],[3,"nzLabel","nzValue"],[1,"flex","center"],["nz-icon","","nzType","project",3,"nzTheme","nzTwotoneColor"],["formControlName","type","nzPlaceHolder","Type",1,"taskTypeSelector",2,"width","auto",3,"nzCustomTemplate"],["nz-icon","","nzType","check-square",3,"nzTheme","nzTwotoneColor"],[3,"user_id","task_id","contractDetails"],[3,"src","ngStyle"],["nz-button","","nzType","primary",2,"margin-bottom","12px","float","right",3,"disabled","click"]],template:function(r,o){if(r&1&&(T(0,"nz-spin",0)(1,"div",1)(2,"div",2)(3,"span")(4,"h4"),ct(5),A()(),T(6,"span")(7,"button",3),bt("click",function(){return o.generatePDF()}),_t(8,"span",4),A(),T(9,"button",5),bt("click",function(){return o.printCard()}),_t(10,"span",6),A(),T(11,"button",7),bt("click",function(){return o.close()}),_t(12,"span",8),A()()(),T(13,"div",9)(14,"nz-card",10)(15,"form",11),bt("ngSubmit",function(){return o.submitForm()}),T(16,"div",null,12)(18,"nz-form-item")(19,"nz-form-label",13),ct(20,"Created By"),A(),T(21,"nz-form-control",14)(22,"nz-select",15),yt(23,sy,1,2,"nz-option",16),A()()(),T(24,"nz-form-item")(25,"nz-form-label",17),ct(26,"Status"),A(),T(27,"nz-form-control",14)(28,"nz-select",18),yt(29,oy,1,3,"nz-option",19),ne(30,"keyvalue"),A()()(),T(31,"nz-form-item")(32,"nz-form-label",20),ct(33,"Date Created"),A(),T(34,"nz-form-control",14),_t(35,"nz-date-picker",21),A()(),T(36,"nz-form-item")(37,"nz-form-label",22),ct(38,"Assignee"),A(),T(39,"nz-form-control",14)(40,"nz-select",23),yt(41,ay,1,2,"nz-option",16),A()()(),T(42,"nz-form-item")(43,"nz-form-label",24),ct(44,"Start Date"),A(),T(45,"nz-form-control",14),_t(46,"nz-date-picker",25),A()(),T(47,"nz-form-item")(48,"nz-form-label",26),ct(49,"Due Date"),A(),T(50,"nz-form-control",14),_t(51,"nz-date-picker",27),A()(),T(52,"nz-form-item")(53,"nz-form-label",26),ct(54,"Severity"),A(),T(55,"nz-form-control",14)(56,"nz-select",28),yt(57,ly,1,2,"nz-option",29),ne(58,"keyvalue"),A(),yt(59,cy,4,3,"ng-template",null,30,Qt),A()(),yt(61,uy,5,4,"ng-template",null,31,Qt),T(63,"nz-form-item")(64,"nz-form-label",32),ct(65,"Title"),A(),T(66,"nz-form-control",14)(67,"nz-input-group",33),_t(68,"input",34),A()()(),T(69,"nz-card",35)(70,"nz-form-item")(71,"nz-form-label",36),ct(72,"Task Description"),A(),T(73,"nz-form-control",37),_t(74,"textarea",38),A()(),T(75,"nz-form-item")(76,"nz-form-label",39),ct(77,"Terms & Conditions"),A(),T(78,"nz-form-control",37),_t(79,"textarea",40),A()(),T(80,"nz-form-item")(81,"nz-form-label",41),ct(82,"Attachments"),A(),T(83,"nz-form-control",42)(84,"nz-upload",43),Le("nzFileListChange",function(p){return Oe(o.fileList,p)||(o.fileList=p),p}),bt("nzChange",function(p){return o.handleChange(p)}),T(85,"div"),_t(86,"span",44),T(87,"div",45),ct(88,"Upload"),A()()()()(),yt(89,py,1,3,"app-work-log",46),A()(),T(90,"nz-modal",47),bt("nzOnCancel",function(){return o.previewVisible=!1}),yt(91,my,1,3,"ng-template",null,48,Qt),A(),T(93,"span",49)(94,"span"),yt(95,gy,2,2,"button",50)(96,_y,2,1,"button",50),A()()()()()()()),r&2){let h=$t(60),p=$t(62),x=$t(92),I,P;H("nzSpinning",o.isSpinning)("nzDelay",500),j(5),Jn(" Task - ",((I=o.taskDetails.get("task_no"))==null?null:I.value)||"New"," / ",o.stateNames[(I=o.taskDetails.get("state"))==null?null:I.value]," "),j(10),H("formGroup",o.taskDetails),j(4),H("nzSm",6)("nzXs",24),j(2),H("nzSm",14)("nzXs",24),j(2),H("ngForOf",o.created_by_users),j(2),H("nzSm",6)("nzXs",24),j(2),H("nzSm",14)("nzXs",24),j(2),H("ngForOf",eo(30,71,o.TaskStates)),j(3),H("nzSm",6)("nzXs",24),j(2),H("nzSm",14)("nzXs",24),j(3),H("nzSm",6)("nzXs",24),j(2),H("nzSm",14)("nzXs",24),j(2),H("ngForOf",o.listOfData),j(2),H("nzSm",6)("nzXs",24),j(2),H("nzSm",14)("nzXs",24),j(3),H("nzSm",6)("nzXs",24),j(2),H("nzSm",14)("nzXs",24),j(3),H("nzSm",6)("nzXs",24),j(2),H("nzSm",14)("nzXs",24),j(),H("nzCustomTemplate",h),j(),H("ngForOf",eo(58,73,o.taskSeverity)),j(7),H("nzSm",6)("nzXs",24),j(2),H("nzSm",14)("nzXs",24),j(),H("nzAddOnBefore",p),j(6),H("nzSm",24)("nzXs",24)("nzMd",24)("nzXl",24)("nzXXl",24),j(5),H("nzSm",24)("nzXs",24)("nzMd",24)("nzXl",24)("nzXXl",24),j(5),H("nzSm",24)("nzXs",24)("nzMd",24)("nzXl",24)("nzXXl",24),j(),Pe("nzFileList",o.fileList),H("nzDisabled",o.taskDetails.controls.attachment.disabled)("nzShowButton",!o.taskDetails.controls.attachment.disabled&&o.fileList.length<4)("nzPreview",o.handlePreview)("nzDownload",o.donwnloadFile)("nzShowUploadList",bi(75,vy,!o.taskDetails.controls.attachment.disabled))("nzBeforeUpload",o.beforeUpload),j(5),H("ngIf",(P=o.taskDetails.get("id"))==null?null:P.value),j(),H("nzVisible",o.previewVisible)("nzContent",x)("nzFooter",null),j(5),H("ngIf",!o.taskDetails.controls.id.value),j(),H("ngIf",o.taskDetails.controls.id.value)}},dependencies:[hi,We,no,ui,je,di,mr,Ri,fr,He,Ue,gr,fn,gn,mn,mi,dn,hr,po,fo,go,mo,Do,ur,pi,fi,an,ln,cn,ou,ro],styles:["nz-select[_ngcontent-%COMP%]{width:240px}nz-divider[_ngcontent-%COMP%]{margin:4px 0}.container[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;padding:8px}.add-item[_ngcontent-%COMP%]{flex:0 0 auto;padding:8px;display:block}input[_ngcontent-%COMP%]{width:66px}.container[_ngcontent-%COMP%]{background:#f1e5ff;padding:5px}.anticon[_ngcontent-%COMP%]{margin-right:6px;font-size:24px}  .taskTypeSelector .ant-select-arrow{visibility:hidden!important}  .taskTypeSelector .ant-select-selector{padding:0!important}  .taskTypeSelector .ant-select-selection-item{padding:5px!important}  .ant-input-group-wrapper .ant-input-group-addon{background:none!important;border-color:transparent!important}"]});let a=s;return a})();var ko=Xs(lu());var xy=["content"];function yy(a,s){if(a&1&&_t(0,"nz-option",69),a&2){let l=s.$implicit;H("nzValue",l==null?null:l.id)("nzLabel",l==null?null:l.name)}}function by(a,s){if(a&1&&_t(0,"nz-option",69),a&2){let l=s.$implicit;H("nzValue",l==null?null:l.id)("nzLabel",l==null?null:l.name)}}function Sy(a,s){a&1&&(T(0,"th",70),ct(1," Custom"),A())}function Cy(a,s){a&1&&_t(0,"th")}function wy(a,s){if(a&1){let l=At();T(0,"td",70)(1,"button",71),bt("click",function(){zt(l);let r=at();return It(r.addProductRow())}),_t(2,"span",72),A()()}}function Dy(a,s){a&1&&_t(0,"label",81)}function zy(a,s){if(a&1&&(T(0,"td"),yt(1,Dy,1,0,"label",80),A()),a&2){let l=at(2);j(),H("ngIf",l.SaleRequestDetails.controls.state.value==l.SaleStates.Draft)}}var Iy=()=>({minRows:1,maxRows:6});function Ty(a,s){a&1&&(T(0,"textarea",82),ct(1," "),A()),a&2&&H("nzAutosize",pe(1,Iy))}function ky(a,s){if(a&1){let l=At();T(0,"app-select-modal-control",83),bt("ngModelChange",function(r){zt(l);let o=at().index,h=at();return It(h.onItemChange(r,o))}),A()}if(a&2){let l=at(2);H("data",l.projectItems)("displayColumns",l.displayControlColumns)("header","Select Product")}}function Ey(a,s){if(a&1){let l=At();T(0,"a",85),bt("click",function(){zt(l);let r=at(2).index,o=at();return It(o.removeProduct(r))}),T(1,"button",86),_t(2,"span",87),A()()}}function Ry(a,s){if(a&1){let l=At();T(0,"a",85),bt("click",function(){zt(l);let r=at(2).index,o=at();return It(o.returnProduct(r))}),T(1,"button",86),_t(2,"span",88),A()()}}function My(a,s){if(a&1&&(T(0,"td"),yt(1,Ey,3,0,"a",84)(2,Ry,3,0,"a",84),A()),a&2){let l=at().$implicit,i=at(),r;j(),H("ngIf",i.SaleRequestDetails.controls.state.value==i.SaleStates.Draft),j(),H("ngIf",i.SaleRequestDetails.controls.state.value==i.SaleStates.Invoiced&&!((r=l.get("returned_now"))!=null&&r.value))}}function Ay(a,s){if(a&1){let l=At();Ce(0,73),T(1,"tr",89)(2,"td"),_t(3,"input",91),A(),T(4,"td")(5,"input",92),bt("change",function(){let o=zt(l).index,h=at(2).index,p=at();return It(p.calculateCharge(h,o))}),A()(),T(6,"td"),ct(7),ne(8,"currency"),A(),T(9,"td")(10,"input",93),bt("change",function(){let o=zt(l).index,h=at(2).index,p=at();return It(p.calculateCharge(h,o))}),A()(),T(11,"td"),ct(12),ne(13,"currency"),A()(),Ie()}if(a&2){let l=s.$implicit,i=s.index,r,o;H("formGroupName",i),j(7),te(" ",ue(8,3,(r=l.get("unit_price"))==null?null:r.value,"PKR ")," "),j(5),te(" ",ue(13,6,(o=l.get("returnAmount"))==null?null:o.value,"PKR ")," ")}}function Py(a,s){if(a&1&&(Ce(0),T(1,"tr",89)(2,"td"),ct(3,"Reason"),A(),T(4,"td"),ct(5,"Quantity"),A(),T(6,"td"),ct(7,"Price Charged / Item"),A(),T(8,"td"),ct(9," Charges "),A(),_t(10,"td"),A(),Ce(11,90),yt(12,Ay,14,9,"ng-container",35),Ie()()),a&2){let l=at().$implicit,i=at(),r;j(12),H("ngForOf",(r=i.getReturnItemFormGroup(l))==null?null:r.controls)}}function Oy(a,s){if(a&1){let l=At();Ce(0,73),T(1,"tr"),yt(2,zy,2,1,"td",32),T(3,"td"),yt(4,Ty,2,2,"textarea",74)(5,ky,1,3,"app-select-modal-control",75),A(),T(6,"td")(7,"nz-input-group",76)(8,"input",77),bt("ngModelChange",function(){let o=zt(l).index,h=at();return It(h.onQuantityChange(o))}),A()()(),T(9,"td")(10,"nz-input-group",76)(11,"input",78),bt("ngModelChange",function(){let o=zt(l).index,h=at();return It(h.onPriceChange(o))}),A()()(),T(12,"td")(13,"input",79),bt("ngModelChange",function(){let o=zt(l).index,h=at();return It(h.onDiscountChange(o))}),A()(),T(14,"td"),_t(15,"h5",33),ne(16,"currency"),A(),yt(17,My,3,2,"td",32),A(),yt(18,Py,13,1,"ng-container",32),Ie()}if(a&2){let l=s.$implicit,i=s.index,r=at(),o,h,p;H("formGroupName",i),j(2),H("ngIf",r.SaleRequestDetails.controls.state.value==r.SaleStates.Draft),j(2),H("ngIf",r.SaleRequestDetails.controls.state.value!==r.SaleStates.Draft||(l.controls.isCustom==null?null:l.controls.isCustom.value)),j(),H("ngIf",r.SaleRequestDetails.controls.state.value==r.SaleStates.Draft&&!(l.controls.isCustom!=null&&l.controls.isCustom.value)),j(2),H("nzSuffix",(o=l.get("max_qty"))==null?null:o.value),j(3),H("nzSuffix",(h=l.get("min_unit_price"))==null?null:h.value),j(5),H("innerHTML",ue(16,9,((p=l.get("total"))==null?null:p.value)*1,"PKR "),sn),j(2),H("ngIf",r.SaleRequestDetails.controls.state.value==r.SaleStates.Draft||r.SaleRequestDetails.controls.state.value==r.SaleStates.Invoiced),j(),H("ngIf",!!r.hasReturnItemFormGroup(l))}}function Ly(a,s){if(a&1){let l=At();T(0,"button",99),bt("click",function(){zt(l);let r=at(3);return It(r.addPaymentControlRow())}),_t(1,"span",72),A()}}function Ny(a,s){if(a&1){let l=At();Ce(0,73),T(1,"tr")(2,"td"),_t(3,"input",100),A(),T(4,"td")(5,"input",101),bt("change",function(){zt(l);let r=at(3);return It(r.calculateBalance())}),A()()(),Ie()}if(a&2){let l=s.index;H("formGroupName",l)}}function Fy(a,s){if(a&1&&(T(0,"nz-table",96)(1,"thead"),_t(2,"tr"),T(3,"tr")(4,"th"),ct(5,"Description"),A(),T(6,"th")(7,"span",63),ct(8," Amount "),yt(9,Ly,2,0,"button",97),A()()()(),Ce(10,98),yt(11,Ny,6,1,"ng-container",35),Ie(),A()),a&2){let l=at(2);j(9),H("ngIf",l.SaleRequestDetails.controls.state.value==l.SaleStates.PaymentConfirmation||l.returningItem),j(2),H("ngForOf",l.SaleRequestDetails.controls.payment_history.controls)}}var cu=(a,s)=>[a,s];function By(a,s){if(a&1&&(T(0,"nz-card",94),yt(1,Fy,12,2,"nz-table",95),A()),a&2){let l=at(),i=$t(113),r=$t(115),o=$t(117);H("nzTitle",i)("nzActions",ml(3,cu,r,o)),j(),H("ngIf",l.SaleRequestDetails.controls.state.value!=l.SaleStates.Draft)}}function Vy(a,s){a&1&&(T(0,"h5"),ct(1,"Discount"),A(),T(2,"h3"),ct(3,"Total"),A())}function qy(a,s){if(a&1&&(_t(0,"p",33),ne(1,"currency"),_t(2,"h4",33),ne(3,"currency")),a&2){let l=at(),i,r;H("innerHTML",ue(1,2,((i=l.SaleRequestDetails.get("items_discount_total"))==null?null:i.value)*1+((i=l.SaleRequestDetails.get("overall_discount_total"))==null?null:i.value)*1,"PKR "),sn),j(2),H("innerHTML",ue(3,5,(r=l.SaleRequestDetails.get("total"))==null?null:r.value,"PKR "),sn)}}function Wy(a,s){a&1&&(T(0,"h5"),ct(1," Payment Details "),A())}function Gy(a,s){if(a&1&&yt(0,Wy,2,0,"h5",32),a&2){let l=at();H("ngIf",l.SaleRequestDetails.controls.state.value!==l.SaleStates.Draft)}}function jy(a,s){a&1&&(T(0,"h5"),ct(1,"Amount Paid"),A(),T(2,"h3"),ct(3,"Balance"),A())}function Uy(a,s){if(a&1&&(_t(0,"p",33),ne(1,"currency"),_t(2,"h4",33),ne(3,"currency")),a&2){let l=at(),i,r;H("innerHTML",ue(1,2,(i=l.SaleRequestDetails.get("amount_paid"))==null?null:i.value,"PKR "),sn),j(2),H("innerHTML",ue(3,5,(r=l.SaleRequestDetails.get("balance"))==null?null:r.value,"PKR "),sn)}}var Hy=()=>({width:"100%"});function Xy(a,s){if(a&1&&_t(0,"img",102),a&2){let l=at();H("src",l.previewImage,Zs)("ngStyle",pe(2,Hy))}}function $y(a,s){if(a&1){let l=At();T(0,"button",103),bt("click",function(){zt(l);let r=at();return It(r.cancelPaymentDetails())}),ct(1,"Cancel"),A()}}function Ky(a,s){if(a&1){let l=At();T(0,"button",104),bt("click",function(){zt(l);let r=at();return It(r.submitRequest())}),ct(1,"Submit"),A()}if(a&2){let l=at();H("disabled",l.SaleRequestDetails.invalid)}}function Yy(a,s){if(a&1){let l=At();T(0,"button",104),bt("click",function(){zt(l);let r=at();return It(r.confirmPaymentDetails())}),ct(1,"Confirm Payment"),A()}if(a&2){let l=at();H("disabled",l.SaleRequestDetails.invalid)}}function Zy(a,s){if(a&1){let l=At();T(0,"button",105),bt("click",function(){zt(l);let r=at();return It(r.confirmPaymentDetails(!0))}),ct(1," Save "),A()}if(a&2){let l=at();H("disabled",l.SaleRequestDetails.invalid)}}function Qy(a,s){if(a&1){let l=At();T(0,"button",105),bt("click",function(){zt(l);let r=at();return It(r.submitRequest(!0))}),ct(1," Save as Draft "),A()}if(a&2){let l=at();H("disabled",l.SaleRequestDetails.invalid)}}function Jy(a,s){if(a&1){let l=At();T(0,"div",1),_t(1,"input",106,107),T(3,"a",108),bt("click",function(){zt(l);let r=$t(2),o=at();return It(o.addItem(r))}),_t(4,"span",59),ct(5," Add item "),A()()}}function tb(a,s){}var eb=a=>({showPreviewIcon:!0,showRemoveIcon:a,showDownloadIcon:!0}),hu=(()=>{let s=class s{constructor(i,r,o,h,p,x,I,P,et,Z){this.appService=i,this.route=r,this.userService=o,this.fb=h,this.notification=p,this.router=x,this.msg=I,this.modal=P,this.pdfGeneratorService=et,this.imageCompress=Z,this.projectItems=[],this.expandableKey=[],this.discountTotal=0,this.SaleRequestTotal=0,this.loading=!1,this.SaleStates=Si,this.stateNames=so,this.listOfData=[],this.displayControlColumns=[{value:"project_name",name:"Project Name"},{value:"name",name:"Item"}],this.defaultItemValues={id:0,name:"",qty:0,SaleRequest_id:0,discount:0,total:0,date_created:new Date,isCustom:!1,project:{},max_qty:0,min_unit_price:0,unit_price:0,return_details:[],actualQty:0},this.isSpinning=!1,this.fileList=[],this.created_by_users=[],this.index=0,this.previewImage="",this.previewVisible=!1,this.beforeUpload=(M,K)=>new Wi(B=>{let E=M.type==="image/jpeg"||M.type==="image/png";if(!E){this.msg.error("You can only upload JPG file!"),B.complete();return}let z=M.size/1024/1024<2;if(!z){this.msg.error("Image must smaller than 2MB!"),B.complete();return}B.next(E&&z),B.complete()}),this.handlePreview=M=>Pt(this,null,function*(){this.previewImage=M.url||M.preview,this.previewVisible=!0}),this.donwnloadFile=M=>{console.log(M);let K=`${M.url}`,B=document.createElement("a");B.href=K,B.download=M.filename||"",B.click(),B.remove()},this.SaleRequestDetails=this.fb.group({id:new ft,sale_no:new ft,title:new ft(null,[ve.required]),items:this.fb.array([]),state:new ft(Si.Draft),description:new ft,items_discount_total:new ft(0),overall_discount_total:new ft(0),item_cost:new ft(0),amount_paid:new ft(0),date_created:new ft(new Date),created_by:new ft({value:this.userService.loggedInUser.id,disabled:!0}),payment_history:this.fb.array([]),additional_cost:new ft(0),overall_discount:new ft(0),shipment_charges:new ft(0),total:new ft(0),balance:new ft(0),organization_id:new ft(0),client_id:new ft(0),invoice_date:new ft(new Date),due_date:new ft(new Date),customer:new ft(0,[ve.required]),attachment:new ft(!1),new_customer:new ft,terms:new ft("")})}submitForm(){}canDeactivate(){return this.shouldConfirmNavigation()?confirm(sr):!0}shouldConfirmNavigation(){return this.SaleRequestDetails.dirty||this.SaleRequestDetails.touched}ngOnDestroy(){this.routeSubscription&&this.routeSubscription.unsubscribe()}ngOnInit(){this.currentClientSubscription=this.appService.currentClient.subscribe(i=>{i&&i.id>0&&this.currentOrganizationId!=i.id&&(this.currentOrganizationId=i.id,this.appService.getOrganizationCustomers().then(r=>{this.listOfData=r}),this.routeSubscription=this.route.queryParams.subscribe(r=>Pt(this,null,function*(){if((this.SaleRequestDetails.dirty||this.SaleRequestDetails.touched)&&!confirm(sr))return;this.isSpinning=!0;let o=0;!r.SALE||r.SALE==="new"||(o=r.SALE),this.SaleRequestDetails.enable(),this.clearItems(),this.created_by_users=[this.userService.loggedInUser],this.SaleRequestDetails.reset({state:Si.Draft,created_by:this.userService.loggedInUser.id,date_created:new Date,id:0,items:[],payment_history:[]}),this.SaleRequestDetails.updateValueAndValidity(),this.SaleRequestDetails.controls.id.setValue(o||0),yield this.setSaleRequestRequestDetails(),setTimeout(()=>{this.isSpinning=!1},1e3)})),this.SaleRequestDetails.controls.client_id.setValue(i.id))})}clearItems(){for(;this.SaleRequestDetails.get("items").value.length!==0;)this.SaleRequestDetails.controls.items.removeAt(0);for(;this.SaleRequestDetails.get("payment_history").value.length!==0;)this.SaleRequestDetails.controls.payment_history.removeAt(0)}close(){this.router.navigate(["/","task","sales"],{queryParams:{SALE:null},queryParamsHandling:"merge"})}getReturnItemFormGroup(i){return i.get("return_details")}hasReturnItemFormGroup(i){return!!i.controls.return_details.controls?.length}setSaleRequestRequestDetails(){return Pt(this,null,function*(){this.loading=!0,this.SaleRequestDetails.controls.id.value?yield this.getExistingSaleRequest():(this.SaleRequestDetails.controls.organization_id.setValue(parseInt(localStorage.getItem("organization_id")||"")),this.nodes=this.transformToNodeStructure(this.projectItems),this.expandableKey=this.nodes.map(i=>i.key)||[],this.SaleRequestDetails.controls.created_by.setValue(this.userService.loggedInUser.id)),this.SaleRequestDetails.controls.state.value==this.SaleStates.Draft&&(this.projectItems=yield this.appService.getInventory(),this.SaleRequestDetails.controls.items.controls.forEach((i,r)=>{let o=this.projectItems.find(h=>h.name===i.controls.name.value);i.patchValue({selected_item:o}),setTimeout(()=>{this.onItemChange(o,r)},500)})),this.disableAndEnableSpecificControls(),this.loading=!1})}onItemChange(i,r){let o=this.SaleRequestDetails.controls.items.controls[r];if(o.controls.selected_item.value){let h=o.controls.selected_item.value.item_name,p=o.controls.selected_item.value.qty,x=o.controls.selected_item.value.avg_unit_price,I=i.project?i.project:o.controls.selected_item.value.project_id;o.controls.name.setValue(h),o.controls.project.setValue(I),o.controls.name.setValue(h),o.controls.max_qty.setValue(p),o.controls.min_unit_price.setValue(x),o.controls.qty.setValidators([ve.max(p)]),o.controls.unit_price.setValidators([ve.min(x)]),o.updateValueAndValidity()}}getExistingSaleRequest(){return Pt(this,null,function*(){let i=yield this.appService.retireveSaleById(this.SaleRequestDetails.controls.id.value);if(i&&i){this.created_by_users=[i.created_by],this.SaleRequestDetails.patchValue({id:i.id,title:i.title,state:i.state,sale_no:i.sale_no,description:i.description,customer:i.customer.id,items_discount_total:i.items_discount_total,due_date:new Date(i.due_date),date_created:new Date(i.date_created),invoice_date:new Date(i.invoice_date),overall_discount_total:i.overall_discount_total,item_cost:i.item_cost,amount_paid:i.amount_paid,additional_cost:i.additional_cost,created_by:i.created_by.id,shipment_charges:i.shipment_charges,total:i.total,balance:i.balance,organization_id:i.organization_id,client_id:i.client_id,attachment:i.attachment}),i.attachment&&i.attachment.length?this.fileList=i.attachment.map(h=>({name:"image.png",status:"done",url:h,message:"",thumbUrl:h})):this.fileList=[];let r=i.items||[],o=i.payment_history||[];r.forEach(h=>{this.addRow(h)}),o.forEach(h=>{this.addPaymentRow(h)})}this.previousSaleRequestDetails=this.SaleRequestDetails.getRawValue()})}getItemFormGroup(i=this.defaultItemValues){return this.fb.group({id:new ft(i.id),sale_id:new ft(i.SaleRequest_id),name:new ft(i.name,[ve.required]),selected_item:new ft(i.name),qty:new ft(i.qty,[ve.required]),actualQty:new ft(i.actualQty),project:new ft(i.project),unit_price:new ft(i.unit_price,[ve.required]),discount:new ft(i.discount),total:new ft(i.total),isCustom:new ft(i.isCustom),date_created:new ft(new Date(i.date_created)),min_unit_price:new ft(i.min_unit_price),max_qty:new ft(i.max_qty),return_details:this.getReturnItemsFormArray(i.return_details||[]),returned_now:new ft(!1)})}getPaymentHistoryItemFormGroup(i){return this.fb.group({description:new ft(i.description),total:new ft(i.total),date_created:new ft(new Date(i.date_created)),added_by:new ft(i.added_by)})}getReturnItemsFormArray(i=[]){let r=this.fb.array([]);return i.forEach(o=>{let h=this.getReturnItemForm(o);r.push(h)}),r}getReturnItemForm(i){return this.fb.group({reason:new ft(i.reason),qty:new ft(i.qty),unit_price:new ft(i.unit_price),charge:new ft(i.charge),date_created:new ft(i.date_created||new Date),max_qty:new ft(i.max_qty),returnAmount:new ft(i.returnAmount)})}addRow(i=this.defaultItemValues){this.SaleRequestDetails.controls.items.push(this.getItemFormGroup(i))}addPaymentControlRow(){this.addPaymentRow({description:"",total:0,date_created:new Date,added_by:this.userService.loggedInUser.id})}addPaymentRow(i){this.SaleRequestDetails.controls.payment_history.push(this.getPaymentHistoryItemFormGroup(i))}addProductRow(){this.SaleRequestDetails.controls.items.push(this.getItemFormGroup())}calculateBalance(){if(this.loading)return;let i=this.SaleRequestDetails.getRawValue(),r=0;i.payment_history.forEach(o=>{r+=o.total*1}),this.SaleRequestDetails.get("amount_paid")?.setValue(r),this.SaleRequestDetails.controls.balance.setValue(this.SaleRequestDetails.get("total")?.value-r)}calculateTotal(){let r=this.SaleRequestDetails.get("items").getRawValue(),o=r.reduce((x,I)=>x+I.qty*I.unit_price*I.discount/100,0),h=r.reduce((x,I)=>x+I.unit_price*(100-I.discount)/100*I.qty,0),p=this.sumReturnAmount(r);this.SaleRequestDetails.patchValue({items_discount_total:o,item_cost:h-p}),this.calculateOverAllDiscountAndTotal()}sumReturnAmount(i){let r=0;return i.forEach(o=>{o.return_details.forEach(h=>{r+=h.returnAmount})}),r*-1}calculateOverAllDiscountAndTotal(){if(this.loading)return;let i=this.SaleRequestDetails.getRawValue(),r=i.item_cost*(i.overall_discount/100);this.SaleRequestDetails.controls.overall_discount_total.setValue(r),this.SaleRequestDetails.controls.total.setValue(i.item_cost+Number(i.shipment_charges||"0")+Number(i.additional_cost||"0")-r),this.calculateBalance()}removeProduct(i){this.SaleRequestDetails.get("items").removeAt(i),this.calculateTotal()}removePayments(i){this.SaleRequestDetails.get("payment_history").removeAt(i),this.calculateTotal()}returnProduct(i){let r=this.SaleRequestDetails.get("items"),o=r.at(i).get("return_details"),h=r.at(i).get("unit_price")?.value||0;r.at(i).get("returned_now")?.setValue(!0);let p=r.at(i).get("discount")?.value||0;o.controls&&(o.push(this.getReturnItemForm({unit_price:h-h*p/100})),this.returningItem=!0)}calculateCharge(i,r){if(this.loading)return;let h=this.SaleRequestDetails.get("items").at(i).get("return_details");if(h?.controls){let p=h?.controls,x=p[r].get("unit_price")?.value||0,I=p[r].get("charge")?.value||0,P=p[r].get("qty")?.value||0,et=(x-x*I/100)*P*-1;p[r].get("returnAmount")?.setValue(et),this.calculateTotal()}}onReturnPriceChange(i){this.loading}onQuantityChange(i){if(this.loading)return;let o=this.SaleRequestDetails.get("items").at(i);o&&(this.setItemTotal(o),this.calculateTotal())}onPriceChange(i){if(this.loading)return;let o=this.SaleRequestDetails.get("items").at(i);o&&(this.setItemTotal(o),this.calculateTotal())}onDiscountChange(i){if(this.loading)return;let o=this.SaleRequestDetails.get("items").at(i);o&&(this.setItemTotal(o),this.calculateTotal())}setItemTotal(i){if(i){let r=i.get("unit_price")?.value??0,o=i.get("discount")?.value??0,h=i.get("qty")?.value??0,p=r*(1-o/100)*h;i.patchValue({total:p})}}addItem(i){let r=i.value;this.projectItems.some(o=>!r||o.name===r.trim())||(this.projectItems=[...this.projectItems,{name:i.value}])}submitRequest(i=!1){return Pt(this,null,function*(){let r=yield this.appService.addSaleRequest({details:zi(ce({},this.SaleRequestDetails.value),{state:i?Si.Draft:Si.PaymentConfirmation}),products:this.SaleRequestDetails.controls.items.value});r&&this.notification.create("success","Sale request - "+r.sale_no,`Sale request ${i?"saved":"submitted"} successfly. Please check for invoice and update later`).onClose.subscribe(o=>{this.router.navigate(["task","sales"])})})}cancelPaymentDetails(){return Pt(this,null,function*(){this.modal.confirm({nzTitle:"Cancel PO "+this.SaleRequestDetails.get("id")?.value,nzContent:"<h4> Are you sure cancel this SaleRequest order.</h4>",nzOkText:"Yes",nzOkType:"primary",nzOkDanger:!0,nzOnOk:()=>Pt(this,null,function*(){let i={id:this.previousSaleRequestDetails.id};console.log(i),(yield this.appService.updateSaleRequest({details:{id:this.previousSaleRequestDetails.id,state:Si.Cancelled},products:[]}))&&this.notification.create("success","SaleRequest Order - "+this.previousSaleRequestDetails.sale_no,"SaleRequest order invoice cancelled successfly.").onClose.subscribe(o=>{this.router.navigate(["task","sales"])})}),nzCancelText:"No",nzOnCancel:()=>console.log("Cancel")})})}confirmPaymentDetails(i=!1){return Pt(this,null,function*(){if(!i&&(!this.SaleRequestDetails.value.amount_paid||Number(this.SaleRequestDetails.value.amount_paid)!==Number(this.SaleRequestDetails.get("total")?.value))){this.notification.create("error","Balance exists",`Your payment have balance of PKR ${this.SaleRequestDetails.get("total")?.value-this.SaleRequestDetails.value.amount_paid}. Please clear it first.`);return}let r=this.appService.findObjectDifferences(this.previousSaleRequestDetails,this.SaleRequestDetails.getRawValue());console.log(r);let o=ce({id:this.previousSaleRequestDetails.id},r);console.log(o),(yield this.appService.updateSaleRequest({details:zi(ce({},ce({},ko.default.omit(o,"items"))),{state:i?o.state:Si.Invoiced}),products:r.items.map(p=>({id:p.id,return_details:p.return_details}))}))&&this.notification.create("success","SaleRequest Order - "+this.previousSaleRequestDetails.sale_no,"SaleRequest order invoice submitted successfly. Please proceed next for payment details").onClose.subscribe(p=>{this.router.navigate(["task","sales"])})})}confirmInvoiceDetails(){return Pt(this,null,function*(){let i=this.appService.findObjectDifferences(this.previousSaleRequestDetails,this.SaleRequestDetails.getRawValue());console.log(i);let r=ce({id:this.previousSaleRequestDetails.id},i);if(Object.keys(i).length<=1){this.notification.create("error","Invoice Updates","Please update invoice details before confirmation.");return}(yield this.appService.updateSaleRequest({details:zi(ce({},ce({},ko.default.omit(r,"items"))),{state:Si.PaymentConfirmation}),products:i.items.map(h=>ko.default.omit(h,"SaleRequest_id"))}))&&this.notification.create("success","SaleRequest Order - "+this.previousSaleRequestDetails.sale_no,"SaleRequest order invoice submitted successfly. Please proceed next for payment details").onClose.subscribe(h=>{this.router.navigate(["task","sales"])})})}printCard(){this.makePdf("print")}generatePDF(){this.makePdf("download")}makePdf(i){let r=this.SaleRequestDetails.getRawValue();this.pdfGeneratorService.invoice=zi(ce({},r),{type:"Sale",status:this.stateNames[r.state],invoiceDetailLabel:"Sale Details",personName:r.customer.name,address:r.customer.address||"",contactNo:r.customer.contact_no||"",terms:r.terms,email:r.customer.email||"",additionalDetails:r.description||"",created_by:this.created_by_users[0]}),this.pdfGeneratorService.generatePDF(i)}disableAndEnableSpecificControls(){let i=this.SaleRequestDetails.get("state");if(i&&i.value==this.SaleStates.Draft&&(this.SaleRequestDetails.controls.created_by.disable(),this.SaleRequestDetails.controls.date_created.disable()),i&&i.value!==this.SaleStates.Draft){let r=this.SaleRequestDetails.get("items");Object.keys(this.SaleRequestDetails.controls).forEach(o=>{let h=this.SaleRequestDetails.get(o);h&&(o!=="attachment"&&o!=="amount_paid"&&o!=="shipment_charges"&&o!=="additional_cost"&&i.value===this.SaleStates.PaymentConfirmation||i.value===this.SaleStates.Invoiced||i.value===this.SaleStates.Cancelled)&&h.disable()}),this.SaleRequestDetails.updateValueAndValidity(),console.log(this.SaleRequestDetails)}}getBase64(i,r){let o=new FileReader;o.addEventListener("load",()=>r(o.result.toString())),o.readAsDataURL(i)}transformToNodeStructure(i){let r=new Map;return i.forEach(o=>{if(r.has(o.project_name)){let h=r.get(o.project_name);(!h||!h.children)&&h&&(h.children=[]),h?.children&&h?.children.push({title:o.item_name,key:o,isLeaf:!0})}else{let h={title:o.project_name,key:`project-${o.project_name}`,children:[{title:o.item_name,key:o,isLeaf:!0}],isLeaf:!1};r.set(o.project_name,h)}}),Array.from(r.values())}handleChange(i){this.getBase64(i.file.originFileObj,r=>Pt(this,null,function*(){if(this.loading=!1,i.type==="error"){let o=yield this.imageCompress.getOrientation(i.file.originFileObj||new File([],""));this.imageCompress.compressFile(r,o,50,80,800,800).then(h=>{console.warn(`Compressed: ${h.substring(0,50)}... (${h.length} characters)`),console.warn("Size in bytes is now:",this.imageCompress.byteCount(h)),i.fileList?.forEach(p=>{p.uid==i.file.uid&&(p.name="image.png",p.status="done",p.url=h,p.message="",p.thumbUrl=h)}),Object.assign(this.fileList,i.fileList),this.SaleRequestDetails.patchValue({attachment:i.fileList?.map(p=>p.url)})})}}))}};s.\u0275fac=function(r){return new(r||s)(Ct(Te),Ct(Ti),Ct(on),Ct(hn),Ct(Co),Ct(ki),Ct(So),Ct(ho),Ct(vr),Ct(zo))},s.\u0275cmp=_e({type:s,selectors:[["app-sale-request"]],viewQuery:function(r,o){if(r&1&&Gr(xy,5),r&2){let h;jr(h=Ur())&&(o.content=h.first)}},decls:153,vars:77,consts:[[3,"nzSpinning","nzDelay"],[1,"container"],[1,"detailBar"],["nz-button","","nzType","primary","nz-tooltip","Generate PDF",3,"click"],["nz-icon","","nzType","download"],["nz-button","","nz-tooltip","Print request","nzType","primary",2,"margin-left","12px",3,"click"],["nz-icon","","nzType","printer"],["nz-button","","nz-tooltip","Close request","nzType","default","nzDanger","",2,"margin-left","12px",3,"click"],["nz-icon","","nzType","close"],["id","print-section",1,"SaleRequest-request"],["nzBordered","false",2,"width","100%"],["nz-form","",3,"formGroup","ngSubmit"],["content",""],["nz-row","",3,"nzGutter"],["nz-col","",1,"gutter-row",3,"nzSpan"],["nzRequired","","nzFor","created_by"],["nzErrorTip","The input is not valid date!"],["id","created_by","formControlName","created_by","placeholder","created_by"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzRequired","","nzFor","date_created"],["nzFormat","MM-dd-yyyy","formControlName","date_created",1,"inputField"],["nzRequired","","nzFor","customer"],["id","customer","formControlName","customer","placeholder","Select user"],["nzRequired","","nzFor","invoice_date"],["nzFormat","MM-dd-yyyy","formControlName","invoice_date",1,"inputField"],["nzRequired","","nzFor","due_date"],["nzFormat","MM-dd-yyyy","formControlName","due_date",1,"inputField"],["nzRequired","","nzFor","title"],["nz-input","","formControlName","title",1,"inputField"],[2,"margin-bottom","12px",3,"nzPageSize","nzNoResult","nzBordered","nzShowPagination"],["width","5%",4,"ngIf"],["width","30%"],[4,"ngIf"],[3,"innerHTML"],["formArrayName","items"],[3,"formGroupName",4,"ngFor","ngForOf"],["nzGutter","4",2,"margin-bottom","12px"],[3,"nzSm","nzXs","nzMd","nzXl","nzXXl"],[2,"margin-top","12px !important",3,"nzActions"],["nzFor","shipment_charges"],["nz-input","","formControlName","shipment_charges",1,"inputField",3,"change"],["nzFor","additional_cost"],["nzErrorTip","The iinput is not valid date!"],["nz-input","","formControlName","additional_cost",1,"inputField",3,"change"],["nz-input","","formControlName","overall_discount",1,"inputField",3,"change"],["style","margin-top: 12px !important;",3,"nzTitle","nzActions",4,"ngIf"],["totalLabel",""],["totalAmount",""],["header",""],["balanceLabel",""],["balanceAmount",""],[2,"width","100%","margin-bottom","12px"],["nzFor","description"],["nzErrorTip","",3,"nzSm","nzXs","nzMd","nzXl","nzXXl"],["nz-input","","formControlName","description","placeholder","textarea with clear icon"],["nzFor","terms"],["nz-input","","formControlName","terms","placeholder","textarea with clear icon"],["nzHasFeedback","","nzErrorTip","Please input Organization name",3,"nzSm","nzXs","nzMd","nzXl","nzXXl"],["nzAction","null","nzListType","picture-card",3,"nzDisabled","nzFileList","nzShowUploadList","nzShowButton","nzPreview","nzDownload","nzBeforeUpload","nzFileListChange","nzChange"],["nz-icon","","nzType","plus"],[2,"margin-top","8px"],[3,"nzVisible","nzContent","nzFooter","nzOnCancel"],["modalContent",""],[1,"flex","space-between"],["nz-button","","nzType","primary","nzDanger","","style","margin-bottom: 12px;float: right;",3,"click",4,"ngIf"],["nz-button","","nzType","primary","style","margin-bottom: 12px;float: right;",3,"disabled","click",4,"ngIf"],["nz-button","","nzType","primary","style","margin-bottom: 12px;margin-right: 12px;",3,"disabled","click",4,"ngIf"],["renderTemplate",""],["customNoDataTemplate",""],[3,"nzValue","nzLabel"],["width","5%"],["nz-button","","nzType","primary","nzSize","small","nzShape","round",2,"float","left",3,"click"],["nz-icon","","nzTheme","outline","nzType","plus"],[3,"formGroupName"],["nz-input-number","","formControlName","name",3,"nzAutosize",4,"ngIf"],["formControlName","selected_item",3,"data","displayColumns","header","ngModelChange",4,"ngIf"],[3,"nzSuffix"],["nz-input-number","","formControlName","qty",3,"ngModelChange"],["nz-input-number","","formControlName","unit_price",3,"ngModelChange"],["nz-input-number","","formControlName","discount",3,"ngModelChange"],["nz-checkbox","","formControlName","isCustom",4,"ngIf"],["nz-checkbox","","formControlName","isCustom"],["nz-input-number","","formControlName","name",3,"nzAutosize"],["formControlName","selected_item",3,"data","displayColumns","header","ngModelChange"],[3,"click",4,"ngIf"],[3,"click"],["nz-button","","nzType","primary","nzSize","small","nzShape","round",2,"float","right"],["nz-icon","","nzTheme","outline","nzType","minus"],["nz-icon","","nzTheme","outline","nzType","rollback"],[2,"background","lightcoral"],["formArrayName","return_details"],["nz-input","","formControlName","reason"],["nz-input-number","","formControlName","qty",3,"change"],["nz-input-number","","formControlName","charge",3,"change"],[2,"margin-top","12px !important",3,"nzTitle","nzActions"],["class","payment_history","style",`margin-bottom: 12px;
                                        padding: 12px;
                                        background: white;`,4,"ngIf"],[1,"payment_history",2,"margin-bottom","12px","padding","12px","background","white"],["style","float: right","nz-button","","nzType","primary","nzSize","small","nzShape","round",3,"click",4,"ngIf"],["formArrayName","payment_history"],["nz-button","","nzType","primary","nzSize","small","nzShape","round",2,"float","right",3,"click"],["nz-input","","formControlName","description",2,"width","auto"],["nz-input-number","","formControlName","total",3,"change"],[3,"src","ngStyle"],["nz-button","","nzType","primary","nzDanger","",2,"margin-bottom","12px","float","right",3,"click"],["nz-button","","nzType","primary",2,"margin-bottom","12px","float","right",3,"disabled","click"],["nz-button","","nzType","primary",2,"margin-bottom","12px","margin-right","12px",3,"disabled","click"],["type","text","nz-input",""],["inputElement",""],[1,"add-item",3,"click"]],template:function(r,o){if(r&1&&(T(0,"nz-spin",0)(1,"div",1)(2,"div",2)(3,"span")(4,"h4"),ct(5),A()(),T(6,"span")(7,"button",3),bt("click",function(){return o.generatePDF()}),_t(8,"span",4),A(),T(9,"button",5),bt("click",function(){return o.printCard()}),_t(10,"span",6),A(),T(11,"button",7),bt("click",function(){return o.close()}),_t(12,"span",8),A()()(),T(13,"div",9)(14,"nz-card",10)(15,"form",11),bt("ngSubmit",function(){return o.submitForm()}),T(16,"div",null,12)(18,"div",13)(19,"div",14)(20,"nz-form-item")(21,"nz-form-label",15),ct(22,"Created By"),A(),T(23,"nz-form-control",16)(24,"nz-select",17),yt(25,yy,1,2,"nz-option",18),A()()()(),T(26,"div",14)(27,"nz-form-item")(28,"nz-form-label",19),ct(29,"Date Created"),A(),T(30,"nz-form-control",16),_t(31,"nz-date-picker",20),A()()(),T(32,"div",14)(33,"nz-form-item")(34,"nz-form-label",21),ct(35,"Customer"),A(),T(36,"nz-form-control",16)(37,"nz-select",22),yt(38,by,1,2,"nz-option",18),A()()()(),T(39,"div",14)(40,"nz-form-item")(41,"nz-form-label",23),ct(42,"Invoice Date"),A(),T(43,"nz-form-control",16),_t(44,"nz-date-picker",24),A()()(),T(45,"div",14)(46,"nz-form-item")(47,"nz-form-label",25),ct(48,"Due Date"),A(),T(49,"nz-form-control",16),_t(50,"nz-date-picker",26),A()()(),T(51,"div",14)(52,"nz-form-item")(53,"nz-form-label",27),ct(54,"Title"),A(),T(55,"nz-form-control",16),_t(56,"input",28),A()()()(),T(57,"nz-table",29)(58,"thead")(59,"tr"),yt(60,Sy,2,0,"th",30),T(61,"th",31),ct(62,"Item"),A(),T(63,"th"),ct(64,"Quantity"),A(),T(65,"th"),ct(66,"Unit Price "),A(),T(67,"th"),ct(68," Discount % "),A(),T(69,"th"),ct(70,"Total "),A(),yt(71,Cy,1,0,"th",32),A()(),T(72,"tfoot")(73,"tr"),yt(74,wy,3,0,"td",30),_t(75,"td",31)(76,"td")(77,"td"),T(78,"td"),_t(79,"h5",33),ne(80,"currency"),A(),T(81,"td"),_t(82,"h5",33),ne(83,"currency"),A()()(),T(84,"tbody"),Ce(85,34),yt(86,Oy,19,12,"ng-container",35),Ie(),A()(),T(87,"nz-row",36)(88,"nz-col",37)(89,"nz-card",38)(90,"nz-form-item")(91,"nz-form-label",39),ct(92,"Shipping Charges "),A(),T(93,"nz-form-control",16)(94,"input",40),bt("change",function(){return o.calculateOverAllDiscountAndTotal()}),A()()(),T(95,"nz-form-item")(96,"nz-form-label",41),ct(97,"Additional Cost "),A(),T(98,"nz-form-control",42)(99,"input",43),bt("change",function(){return o.calculateOverAllDiscountAndTotal()}),A()()(),T(100,"nz-form-item")(101,"nz-form-label",41),ct(102,"Discount % "),A(),T(103,"nz-form-control",16)(104,"input",44),bt("change",function(){return o.calculateOverAllDiscountAndTotal()}),A()()(),_t(105,"div"),A()(),T(106,"nz-col",37),yt(107,By,2,6,"nz-card",45),A()(),yt(108,Vy,4,0,"ng-template",null,46,Qt)(110,qy,4,8,"ng-template",null,47,Qt)(112,Gy,1,1,"ng-template",null,48,Qt)(114,jy,4,0,"ng-template",null,49,Qt)(116,Uy,4,8,"ng-template",null,50,Qt),T(118,"nz-card",51)(119,"nz-form-item")(120,"nz-form-label",52),ct(121,"Customer Description"),A(),T(122,"nz-form-control",53),_t(123,"textarea",54),A()(),T(124,"nz-form-item")(125,"nz-form-label",55),ct(126,"Terms & Conditions"),A(),T(127,"nz-form-control",53),_t(128,"textarea",56),A()(),T(129,"nz-form-item")(130,"nz-form-label",25),ct(131,"Attachments"),A(),T(132,"nz-form-control",57)(133,"nz-upload",58),Le("nzFileListChange",function(p){return Oe(o.fileList,p)||(o.fileList=p),p}),bt("nzChange",function(p){return o.handleChange(p)}),T(134,"div"),_t(135,"span",59),T(136,"div",60),ct(137,"Upload"),A()()()()()()(),T(138,"nz-modal",61),bt("nzOnCancel",function(){return o.previewVisible=!1}),yt(139,Xy,1,3,"ng-template",null,62,Qt),A(),T(141,"span",63)(142,"span"),yt(143,$y,2,0,"button",64),A(),T(144,"span"),yt(145,Ky,2,1,"button",65)(146,Yy,2,1,"button",65)(147,Zy,2,1,"button",66)(148,Qy,2,1,"button",66),A()()()()(),yt(149,Jy,6,0,"ng-template",null,67,Qt)(151,tb,0,0,"ng-template",null,68,Qt),A()()),r&2){let h=$t(109),p=$t(111),x=$t(140),I=$t(152),P,et,Z;H("nzSpinning",o.isSpinning)("nzDelay",500),j(5),Jn(" SALE - ",((P=o.SaleRequestDetails.get("sale_no"))==null?null:P.value)||"New Quote"," / ",o.stateNames[(P=o.SaleRequestDetails.get("state"))==null?null:P.value]," "),j(10),H("formGroup",o.SaleRequestDetails),j(3),H("nzGutter",16),j(),H("nzSpan",12),j(6),H("ngForOf",o.created_by_users),j(),H("nzSpan",12),j(6),H("nzSpan",12),j(6),H("ngForOf",o.listOfData),j(),H("nzSpan",12),j(6),H("nzSpan",12),j(6),H("nzSpan",24),j(6),H("nzPageSize",1e3)("nzNoResult",I)("nzBordered",!0)("nzShowPagination",!1),j(3),H("ngIf",o.SaleRequestDetails.controls.state.value==o.SaleStates.Draft),j(11),H("ngIf",o.SaleRequestDetails.controls.state.value==o.SaleStates.Draft||o.SaleRequestDetails.controls.state.value==o.SaleStates.Invoiced),j(3),H("ngIf",o.SaleRequestDetails.controls.state.value==o.SaleStates.Draft),j(5),H("innerHTML",ue(80,66,(et=o.SaleRequestDetails.get("items_discount_total"))==null?null:et.value,"PKR "),sn),j(3),H("innerHTML",ue(83,69,(Z=o.SaleRequestDetails.get("item_cost"))==null?null:Z.value,"PKR "),sn),j(4),H("ngForOf",o.SaleRequestDetails.controls.items.controls),j(2),H("nzSm",24)("nzXs",24)("nzMd",8)("nzXl",8)("nzXXl",8),j(),H("nzActions",ml(72,cu,h,p)),j(17),H("nzSm",24)("nzXs",24)("nzMd",16)("nzXl",16)("nzXXl",16),j(),H("ngIf",o.SaleRequestDetails.controls.state.value!=o.SaleStates.Draft),j(15),H("nzSm",24)("nzXs",24)("nzMd",24)("nzXl",24)("nzXXl",24),j(5),H("nzSm",24)("nzXs",24)("nzMd",24)("nzXl",24)("nzXXl",24),j(5),H("nzSm",24)("nzXs",24)("nzMd",24)("nzXl",24)("nzXXl",24),j(),H("nzDisabled",o.SaleRequestDetails.controls.attachment.disabled),Pe("nzFileList",o.fileList),H("nzShowUploadList",bi(75,eb,!o.SaleRequestDetails.controls.attachment.disabled))("nzShowButton",!o.SaleRequestDetails.controls.attachment.disabled&&o.fileList.length<4)("nzPreview",o.handlePreview)("nzDownload",o.donwnloadFile)("nzBeforeUpload",o.beforeUpload),j(5),H("nzVisible",o.previewVisible)("nzContent",x)("nzFooter",null),j(5),H("ngIf",o.SaleRequestDetails.controls.state.value==o.SaleStates.PaymentConfirmation),j(2),H("ngIf",o.SaleRequestDetails.controls.state.value==o.SaleStates.Draft),j(),H("ngIf",o.SaleRequestDetails.controls.state.value==o.SaleStates.PaymentConfirmation),j(),H("ngIf",o.SaleRequestDetails.controls.state.value==o.SaleStates.Invoiced||o.SaleRequestDetails.controls.state.value==o.SaleStates.PaymentConfirmation),j(),H("ngIf",o.SaleRequestDetails.controls.state.value==o.SaleStates.Draft)}},dependencies:[hi,We,no,ui,je,di,mr,qd,Ri,fr,He,Ue,gr,fn,gn,mn,mi,dn,Bd,pr,hr,po,fo,go,yn,_n,vn,Sn,xn,bn,mo,Do,ur,pi,fi,an,ln,cn,Od,Ld,tu,er],styles:[".container[_ngcontent-%COMP%]{background:#f1e5ff;padding:5px}"]});let a=s;return a})();function nb(a,s){if(a&1){let l=At();T(0,"span",24),bt("click",function(){zt(l);let r=at(2);return r.searchValue="",It(r.search())}),A()}}function rb(a,s){a&1&&_t(0,"span",25)}function sb(a,s){if(a&1&&yt(0,nb,1,0,"span",23)(1,rb,1,0),a&2){let l=at();to(0,l.searchValue?0:1)}}function ob(a,s){a&1&&_t(0,"span",25)}function ab(a,s){if(a&1&&_t(0,"nz-list-item-meta-avatar",39),a&2){let l=at().$implicit,i=at();H("nzSrc",i.apiUrl+"/images/"+l.filename)}}function lb(a,s){if(a&1&&(T(0,"div",40),ct(1),A()),a&2){let l=at().$implicit,i=at();j(),te("",i.getInitials(l.assignee_name)," ")}}function cb(a,s){if(a&1&&(T(0,"span",41),ct(1),ne(2,"currency"),A()),a&2){let l=at().$implicit;j(),te(" ",ue(2,1,l.balance,"PKR ")," ")}}var hb=()=>["/","task","list","task"],db=a=>({PO:a});function ub(a,s){if(a&1){let l=At();T(0,"tr",26)(1,"td")(2,"nz-list",27)(3,"nz-list-item",28),bt("click",function(){zt(l);let r=at();return It(r.showSide=!0)}),T(4,"nz-list-item-meta"),yt(5,ab,1,1,"nz-list-item-meta-avatar",29)(6,lb,2,1,"ng-template",null,30,Qt),T(8,"nz-list-item-meta-title")(9,"span",31)(10,"span"),ct(11),A()()(),T(12,"nz-list-item-meta-description")(13,"span",31)(14,"span")(15,"span"),ct(16),A(),_t(17,"nz-divider",32),T(18,"span",33),ct(19),ne(20,"date"),A()()()()()()()(),T(21,"td",34)(22,"span",35)(23,"span",36)(24,"span"),ct(25),ne(26,"currency"),A(),yt(27,cb,3,4,"span",37),A(),T(28,"button",38),ct(29),A()()()()}if(a&2){let l=s.$implicit,i=$t(7),r=at();j(3),H("routerLink",pe(19,hb))("queryParams",bi(20,db,l.task_no)),j(2),H("ngIf",l.filename)("ngIfElse",i),j(6),Jn("",l.task_no," - ",l.title,""),j(5),te(" ",l.description,""),j(3),te(" ",ue(20,13,l.date_created,"dd MMM yyyy"),""),j(6),Ae(l.state===r.states.InProgress?"":ue(26,16,l.total,"PKR ")),j(2),H("ngIf",l.state===r.states.InTesting&&l.balance),j(),H("className",l.state===r.states.Completed?"green-button":"default")("nzDanger",l.state===r.states.Completed),j(),te(" ",r.stateNames[l.state]," ")}}function pb(a,s){if(a&1&&(T(0,"nz-col",42),_t(1,"router-outlet"),A()),a&2){let l=at();H("nzSpan",!l.isMobile()&&l.showSide?16:0)}}function fb(a,s){a&1&&(Ce(0),_t(1,"router-outlet"),Ie())}function mb(a,s){if(a&1){let l=At();T(0,"div")(1,"nz-drawer",43),bt("nzOnClose",function(){zt(l);let r=at();return It(r.showSide=!1)}),yt(2,fb,2,0,"ng-container",44),A()()}if(a&2){let l=at();j(),H("nzVisible",l.showSide)}}var gb=()=>["./task"],_b=()=>({PO:"new"}),vb=()=>({tracingId:2}),pu=(()=>{let s=class s{constructor(i,r,o,h,p){this.appService=i,this.media=r,this.route=o,this.router=h,this.exportSheetService=p,this.apiUrl=lr.apiUrl,this.pendingInvoices=[],this.stateNames=Ge,this.paymentConfirmations=[],this.states=ti,this.partialPayments=[],this.showSide=!1,this.searchVisible=!1,this.searchValue="",this.tabs=["Task Request","Task Returns","Sale Requests","Sale Return"],this.listOfDisplayData=[],this.total=1,this.loading=!0,this.pageSize=10,this.pageIndex=1,this.filterStates=Object.keys(Ge).map(x=>({text:Ge[x],value:x})),this.isMobile=this.appService.isMobile}loadTaskDataFromServer(i=1,r=1e3,o="id",h="asc",p=[]){this.loading=!0;let x=new ir().append("page",`${i}`).append("results",`${r}`).append("sortField",`${o}`).append("sortOrder",`${h}`);p.forEach(I=>{I.value.forEach(P=>{x=x.append(I.key,P)})}),this.getAndSetTaskOrders(x)}onTaskQueryParamsChange(i){console.log(i);let{pageSize:r,pageIndex:o,sort:h,filter:p}=i;if(this.sort&&this.appService.areArraysDifferent(this.sort,h)){this.sort=h,this.listOfDisplayData=this.appService.sortDataArray(this.listOfDisplayData,this.sort);return}this.sort=h;let x=h.find(et=>et.value!==null),I=x&&x.key||null,P=x&&x.value||null;this.loadTaskDataFromServer(o,r,I,P,p)}getInitials(i){return i?i.split(" ").map(o=>o[0]).join("").toUpperCase():""}export(){let i=this.listOfDisplayData;this.exportSheetService.exportDataToXLSX(i,"Task Request")}ngOnInit(){this.clientSubscription=this.appService.currentClient.subscribe(i=>{i&&i.id>0&&this.currentOrganizationId!=i.id&&(this.currentOrganizationId&&this.router.navigate(["/","task","list"],{queryParams:{PO:null},queryParamsHandling:"merge"}),this.currentOrganizationId=i.id,this.showSide=!1,this.route.queryParams.subscribe(r=>Pt(this,null,function*(){r.PO?this.showSide=!0:(this.showSide=!1,this.onTaskQueryParamsChange({pageIndex:0,pageSize:0,sort:[],filter:[]}))})))})}ngOnDestroy(){this.clientSubscription&&this.clientSubscription.unsubscribe()}ngAfterViewInit(){}getAndSetTaskOrders(i){return Pt(this,null,function*(){this.pendingInvoices=yield this.appService.retireveTaskByState(i),this.listOfDisplayData=[...this.pendingInvoices],this.loading=!1,this.total=this.pendingInvoices.length})}reset(){this.searchValue="",this.search()}search(){this.searchVisible=!1,this.searchValue?(this.listOfDisplayData=this.pendingInvoices.filter(i=>i.title&&i.title.toLowerCase().indexOf(this.searchValue.toLowerCase())>-1||i.project_name&&i.project_name.toLowerCase().indexOf(this.searchValue.toLowerCase())>-1),console.log(this.listOfDisplayData)):this.listOfDisplayData=this.pendingInvoices}};s.\u0275fac=function(r){return new(r||s)(Ct(Te),Ct(cr),Ct(Ti),Ct(ki),Ct(xr))},s.\u0275cmp=_e({type:s,selectors:[["app-listing"]],decls:32,vars:25,consts:[[2,"height","100%"],[2,"height","100%","overflow-y","auto",3,"nzSpan"],[1,"container"],[1,"section"],[1,"card-container"],[1,"flex","space-between",2,"margin-bottom","5px"],[2,"display","-webkit-box","width","100%"],[2,"margin-right","5px"],[3,"nzSuffix"],["type","text","placeholder","Search here","nz-input","",3,"ngModel","ngModelChange","keyup"],["inputClearTpl",""],["suffixIconSearch",""],[3,"routerLink","queryParams","state","click"],["nz-button","","nzType","primary",3,"nzSize"],["nz-icon","","nzType","plus"],[2,"margin-left","10px",3,"click"],["nz-icon","","nzType","download"],[3,"nzShowPagination","nzPageSize","nzData","nzFrontPagination","nzLoading","nzTotal","nzPageIndex","nzQueryParams"],["nzColumnKey","id","nzCustomFilter","","nzWidth","80%",3,"nzSortFn"],["nzColumnKey","state",3,"nzFilters","nzFilterFn"],["class","selectedItem",4,"ngFor","ngForOf"],["class","sidebarright",3,"nzSpan",4,"ngIf"],[4,"ngIf"],["nz-icon","","class","ant-input-clear-icon","nzTheme","fill","nzType","close-circle"],["nz-icon","","nzTheme","fill","nzType","close-circle",1,"ant-input-clear-icon",3,"click"],["nz-icon","","nzType","search"],[1,"selectedItem"],["nzItemLayout","horizontal"],[3,"routerLink","queryParams","click"],[3,"nzSrc",4,"ngIf","ngIfElse"],["initialsTemplate",""],[1,"flex","space-between"],["nzType","vertical"],[1,"dateDisplay"],[2,"text-align","end"],[1,"listSecondSection"],[2,"display","inline-grid","width","max-content"],["class","remainingAmount",4,"ngIf"],["nz-button","","nzType","primary","nzShape","round",3,"className","nzDanger"],[3,"nzSrc"],[1,"avatar-initials","ant-list-item-meta-avatar"],[1,"remainingAmount"],[1,"sidebarright",3,"nzSpan"],["nzWidth","100%","nzPlacement","right",3,"nzVisible","nzTitle","nzExtra","nzOnClose"],[4,"nzDrawerContent"]],template:function(r,o){if(r&1&&(T(0,"nz-row",0)(1,"nz-col",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"span",6)(7,"h3",7),ct(8," Tasks "),A(),T(9,"nz-input-group",8)(10,"input",9),Le("ngModelChange",function(p){return Oe(o.searchValue,p)||(o.searchValue=p),p}),bt("keyup",function(){return o.search()}),A()(),yt(11,sb,2,1,"ng-template",null,10,Qt)(13,ob,1,0,"ng-template",null,11,Qt),A(),T(15,"a",12),bt("click",function(){return o.showSide=!0}),T(16,"button",13),_t(17,"span",14),A()(),T(18,"a",15),bt("click",function(){return o.export()}),T(19,"button",13),_t(20,"span",16),A()()(),T(21,"nz-table",17),bt("nzQueryParams",function(p){return o.onTaskQueryParamsChange(p)}),T(22,"thead")(23,"tr")(24,"th",18),ct(25,"Task "),A(),T(26,"th",19),ct(27,"Status "),A()()(),T(28,"tbody"),yt(29,ub,30,22,"tr",20),A()()()()()(),yt(30,pb,2,1,"nz-col",21),A(),yt(31,mb,3,1,"div",22)),r&2){let h=$t(12),p=$t(14);j(),H("nzSpan",!o.isMobile()&&o.showSide?8:24),j(8),H("nzSuffix",p)("nzSuffix",h),j(),Pe("ngModel",o.searchValue),j(5),H("routerLink",pe(22,gb))("queryParams",pe(23,_b))("state",pe(24,vb)),j(),H("nzSize","small"),j(3),H("nzSize","small"),j(2),H("nzShowPagination",!1)("nzPageSize",1e3)("nzData",o.listOfDisplayData)("nzFrontPagination",!1)("nzLoading",o.loading)("nzTotal",o.total)("nzPageIndex",o.pageIndex),j(3),H("nzSortFn",!0),j(2),H("nzFilters",o.filterStates)("nzFilterFn",!0),j(3),H("ngForOf",o.listOfDisplayData),j(),H("ngIf",!o.isMobile()&&o.showSide),j(),H("ngIf",o.isMobile()&&o.showSide)}},dependencies:[nr,rr,hi,We,ui,je,di,Ri,jd,pn,un,He,Ue,mi,dn,pr,yo,bo,xo,_o,vo,Hd,yn,_r,_n,vn,Sn,xn,bn,pi,fi,dr,er,tr],styles:[".green-button[_ngcontent-%COMP%]{background-color:#72e272}.green-button[_ngcontent-%COMP%], .default[_ngcontent-%COMP%]{font-size:11px;text-wrap:nowrap;border:none}[_nghost-%COMP%]{display:block;height:100%}.card-container[_ngcontent-%COMP%]     p{margin:0}.card-container[_ngcontent-%COMP%]    >.ant-tabs-card .ant-tabs-content{margin-top:-16px;margin-bottom:16px}.card-container[_ngcontent-%COMP%]    >.ant-tabs-card .ant-tabs-content>.ant-tabs-tabpane{background:#ffffffb6;padding:16px}.card-container[_ngcontent-%COMP%]    >.ant-tabs-card>.ant-tabs-nav:before{display:none}.card-container[_ngcontent-%COMP%]    >.ant-tabs-card .ant-tabs-tab{border-color:transparent;background:transparent}.card-container[_ngcontent-%COMP%]    >.ant-tabs-card .ant-tabs-tab-active{background:#ffffffb6}"]});let a=s;return a})();var xb=new rn("cdk-dir-doc",{providedIn:"root",factory:yb});function yb(){return Zn(Ui)}var bb=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function Sb(a){let s=a?.toLowerCase()||"";return s==="auto"&&typeof navigator<"u"&&navigator?.language?bb.test(navigator.language)?"rtl":"ltr":s==="rtl"?"rtl":"ltr"}var Sl=(()=>{let s=class s{constructor(i){if(this.value="ltr",this.change=new Me,i){let r=i.body?i.body.dir:null,o=i.documentElement?i.documentElement.dir:null;this.value=Sb(r||o||"ltr")}}ngOnDestroy(){this.change.complete()}};s.\u0275fac=function(r){return new(r||s)(ze(xb,8))},s.\u0275prov=Ii({token:s,factory:s.\u0275fac,providedIn:"root"});let a=s;return a})();var Db=20,fu=(()=>{let s=class s{constructor(i,r,o){this._ngZone=i,this._platform=r,this._scrolled=new ie,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){let r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=Db){return this._platform.isBrowser?new Wi(r=>{this._globalSubscription||this._addGlobalListener();let o=i>0?this._scrolled.pipe(ll(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):dd()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){let o=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe(md(h=>!h||o.indexOf(h)>-1))}getAncestorScrollContainers(i){let r=[];return this.scrollContainers.forEach((o,h)=>{this._scrollableContainsElement(h,i)&&r.push(h)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,r){let o=Ei(r),h=i.getElementRef().nativeElement;do if(o==h)return!0;while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let i=this._getWindow();return pd(i.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};s.\u0275fac=function(r){return new(r||s)(ze(An),ze(_l),ze(Ui,8))},s.\u0275prov=Ii({token:s,factory:s.\u0275fac,providedIn:"root"});let a=s;return a})();var zb=20,mu=(()=>{let s=class s{constructor(i,r,o){this._platform=i,this._change=new ie,this._changeListener=h=>{this._change.next(h)},this._document=o,r.runOutsideAngular(()=>{if(i.isBrowser){let h=this._getWindow();h.addEventListener("resize",this._changeListener),h.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){let i=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+o,right:i.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let i=this._document,r=this._getWindow(),o=i.documentElement,h=o.getBoundingClientRect(),p=-h.top||i.body.scrollTop||r.scrollY||o.scrollTop||0,x=-h.left||i.body.scrollLeft||r.scrollX||o.scrollLeft||0;return{top:p,left:x}}change(i=zb){return i>0?this._change.pipe(ll(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}};s.\u0275fac=function(r){return new(r||s)(ze(_l),ze(An),ze(Ui,8))},s.\u0275prov=Ii({token:s,factory:s.\u0275fac,providedIn:"root"});let a=s;return a})();var gu=(()=>{let s=class s{};s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=Gi({type:s}),s.\u0275inj=ji({});let a=s;return a})();function _u(a){return a.buttons===0||a.detail===0}function vu(a){let s=a.touches&&a.touches[0]||a.changedTouches&&a.changedTouches[0];return!!s&&s.identifier===-1&&(s.radiusX==null||s.radiusX===1)&&(s.radiusY==null||s.radiusY===1)}function Ou(a){let s=a.cloneNode(!0),l=s.querySelectorAll("[id]"),i=a.nodeName.toLowerCase();s.removeAttribute("id");for(let r=0;r<l.length;r++)l[r].removeAttribute("id");return i==="canvas"?bu(a,s):(i==="input"||i==="select"||i==="textarea")&&yu(a,s),xu("canvas",a,s,bu),xu("input, textarea, select",a,s,yu),s}function xu(a,s,l,i){let r=s.querySelectorAll(a);if(r.length){let o=l.querySelectorAll(a);for(let h=0;h<r.length;h++)i(r[h],o[h])}}var Tb=0;function yu(a,s){s.type!=="file"&&(s.value=a.value),s.type==="radio"&&s.name&&(s.name=`mat-clone-${s.name}-${Tb++}`)}function bu(a,s){let l=s.getContext("2d");if(l)try{l.drawImage(a,0,0)}catch{}}function kl(a){let s=a.getBoundingClientRect();return{top:s.top,right:s.right,bottom:s.bottom,left:s.left,width:s.width,height:s.height,x:s.x,y:s.y}}function wl(a,s,l){let{top:i,bottom:r,left:o,right:h}=a;return l>=i&&l<=r&&s>=o&&s<=h}function ns(a,s,l){a.top+=s,a.bottom=a.top+a.height,a.left+=l,a.right=a.left+a.width}function Su(a,s,l,i){let{top:r,right:o,bottom:h,left:p,width:x,height:I}=a,P=x*s,et=I*s;return i>r-et&&i<h+et&&l>p-P&&l<o+P}var Ao=class{constructor(s){this._document=s,this.positions=new Map}clear(){this.positions.clear()}cache(s){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),s.forEach(l=>{this.positions.set(l,{scrollPosition:{top:l.scrollTop,left:l.scrollLeft},clientRect:kl(l)})})}handleScroll(s){let l=Kr(s),i=this.positions.get(l);if(!i)return null;let r=i.scrollPosition,o,h;if(l===this._document){let I=this.getViewportScrollPosition();o=I.top,h=I.left}else o=l.scrollTop,h=l.scrollLeft;let p=r.top-o,x=r.left-h;return this.positions.forEach((I,P)=>{I.clientRect&&l!==P&&l.contains(P)&&ns(I.clientRect,p,x)}),r.top=o,r.left=h,{top:p,left:x}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function Lu(a,s){let l=a.rootNodes;if(l.length===1&&l[0].nodeType===s.ELEMENT_NODE)return l[0];let i=s.createElement("div");return l.forEach(r=>i.appendChild(r)),i}function El(a,s,l){for(let i in s)if(s.hasOwnProperty(i)){let r=s[i];r?a.setProperty(i,r,l?.has(i)?"important":""):a.removeProperty(i)}return a}function wr(a,s){let l=s?"":"none";El(a.style,{"touch-action":s?"":"none","-webkit-user-drag":s?"":"none","-webkit-tap-highlight-color":s?"":"transparent","user-select":l,"-ms-user-select":l,"-webkit-user-select":l,"-moz-user-select":l})}function Cu(a,s,l){El(a.style,{position:s?"":"fixed",top:s?"":"0",opacity:s?"":"0",left:s?"":"-999em"},l)}function Po(a,s){return s&&s!="none"?a+" "+s:a}function wu(a,s){a.style.width=`${s.width}px`,a.style.height=`${s.height}px`,a.style.transform=Oo(s.left,s.top)}function Oo(a,s){return`translate3d(${Math.round(a)}px, ${Math.round(s)}px, 0)`}function Du(a){let s=a.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(a)*s}function kb(a){let s=getComputedStyle(a),l=Cl(s,"transition-property"),i=l.find(p=>p==="transform"||p==="all");if(!i)return 0;let r=l.indexOf(i),o=Cl(s,"transition-duration"),h=Cl(s,"transition-delay");return Du(o[r])+Du(h[r])}function Cl(a,s){return a.getPropertyValue(s).split(",").map(i=>i.trim())}var Eb=new Set(["position"]),Dl=class{get element(){return this._preview}constructor(s,l,i,r,o,h,p,x,I){this._document=s,this._rootElement=l,this._direction=i,this._initialDomRect=r,this._previewTemplate=o,this._previewClass=h,this._pickupPositionOnPage=p,this._initialTransform=x,this._zIndex=I}attach(s){this._preview=this._createPreview(),s.appendChild(this._preview),zu(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(s){this._preview.style.transform=s}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(s){this._preview.classList.add(s)}getTransitionDuration(){return kb(this._preview)}addEventListener(s,l){this._preview.addEventListener(s,l)}removeEventListener(s,l){this._preview.removeEventListener(s,l)}_createPreview(){let s=this._previewTemplate,l=this._previewClass,i=s?s.template:null,r;if(i&&s){let o=s.matchSize?this._initialDomRect:null,h=s.viewContainer.createEmbeddedView(i,s.context);h.detectChanges(),r=Lu(h,this._document),this._previewEmbeddedView=h,s.matchSize?wu(r,o):r.style.transform=Oo(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=Ou(this._rootElement),wu(r,this._initialDomRect),this._initialTransform&&(r.style.transform=this._initialTransform);return El(r.style,{"pointer-events":"none",margin:zu(r)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},Eb),wr(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("popover","manual"),r.setAttribute("dir",this._direction),l&&(Array.isArray(l)?l.forEach(o=>r.classList.add(o)):r.classList.add(l)),r}};function zu(a){return"showPopover"in a}var Iu=$r({passive:!0}),Eo=$r({passive:!1}),Tu=$r({passive:!1,capture:!0}),Rb=800,ku=new Set(["position"]),zl=class{get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(s){s!==this._disabled&&(this._disabled=s,this._toggleNativeDragInteractions(),this._handles.forEach(l=>wr(l,s)))}constructor(s,l,i,r,o,h){this._config=l,this._document=i,this._ngZone=r,this._viewportRuler=o,this._dragDropRegistry=h,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=ul(!1),this._moveEvents=new ie,this._pointerMoveSubscription=Mn.EMPTY,this._pointerUpSubscription=Mn.EMPTY,this._scrollSubscription=Mn.EMPTY,this._resizeSubscription=Mn.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this.scale=1,this._disabled=!1,this.beforeStarted=new ie,this.started=new ie,this.released=new ie,this.ended=new ie,this.entered=new ie,this.exited=new ie,this.dropped=new ie,this.moved=this._moveEvents,this._pointerDown=p=>{if(this.beforeStarted.next(),this._handles.length){let x=this._getTargetHandle(p);x&&!this._disabledHandles.has(x)&&!this.disabled&&this._initializeDragSequence(x,p)}else this.disabled||this._initializeDragSequence(this._rootElement,p)},this._pointerMove=p=>{let x=this._getPointerPositionOnPage(p);if(!this._hasStartedDragging()){let P=Math.abs(x.x-this._pickupPositionOnPage.x),et=Math.abs(x.y-this._pickupPositionOnPage.y);if(P+et>=this._config.dragStartThreshold){let M=Date.now()>=this._dragStartTime+this._getDragStartDelay(p),K=this._dropContainer;if(!M){this._endDragSequence(p);return}(!K||!K.isDragging()&&!K.isReceiving())&&(p.cancelable&&p.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(p)))}return}p.cancelable&&p.preventDefault();let I=this._getConstrainedPointerPosition(x);if(this._hasMoved=!0,this._lastKnownPointerPosition=x,this._updatePointerDirectionDelta(I),this._dropContainer)this._updateActiveDropContainer(I,x);else{let P=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,et=this._activeTransform;et.x=I.x-P.x+this._passiveTransform.x,et.y=I.y-P.y+this._passiveTransform.y,this._applyRootElementTransform(et.x,et.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:I,event:p,distance:this._getDragDistance(I),delta:this._pointerDirectionDelta})})},this._pointerUp=p=>{this._endDragSequence(p)},this._nativeDragStart=p=>{if(this._handles.length){let x=this._getTargetHandle(p);x&&!this._disabledHandles.has(x)&&!this.disabled&&p.preventDefault()}else this.disabled||p.preventDefault()},this.withRootElement(s).withParent(l.parentDragRef||null),this._parentPositions=new Ao(i),h.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(s){this._handles=s.map(i=>Ei(i)),this._handles.forEach(i=>wr(i,this.disabled)),this._toggleNativeDragInteractions();let l=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&l.add(i)}),this._disabledHandles=l,this}withPreviewTemplate(s){return this._previewTemplate=s,this}withPlaceholderTemplate(s){return this._placeholderTemplate=s,this}withRootElement(s){let l=Ei(s);return l!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{l.addEventListener("mousedown",this._pointerDown,Eo),l.addEventListener("touchstart",this._pointerDown,Iu),l.addEventListener("dragstart",this._nativeDragStart,Eo)}),this._initialTransform=void 0,this._rootElement=l),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(s){return this._boundaryElement=s?Ei(s):null,this._resizeSubscription.unsubscribe(),s&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(s){return this._parentDragRef=s,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(s){!this._disabledHandles.has(s)&&this._handles.indexOf(s)>-1&&(this._disabledHandles.add(s),wr(s,!0))}enableHandle(s){this._disabledHandles.has(s)&&(this._disabledHandles.delete(s),wr(s,this.disabled))}withDirection(s){return this._direction=s,this}_withDropContainer(s){this._dropContainer=s}getFreeDragPosition(){let s=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:s.x,y:s.y}}setFreeDragPosition(s){return this._activeTransform={x:0,y:0},this._passiveTransform.x=s.x,this._passiveTransform.y=s.y,this._dropContainer||this._applyRootElementTransform(s.x,s.y),this}withPreviewContainer(s){return this._previewContainer=s,this}_sortFromLastPointerPosition(){let s=this._lastKnownPointerPosition;s&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(s),s)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._getShadowRoot()?.removeEventListener("selectstart",Ru,Tu)}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(s){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:s}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(s),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let l=this._getPointerPositionOnPage(s);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(l),dropPoint:l,event:s})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(s){is(s)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let l=this._getShadowRoot(),i=this._dropContainer;if(l&&this._ngZone.runOutsideAngular(()=>{l.addEventListener("selectstart",Ru,Tu)}),i){let r=this._rootElement,o=r.parentNode,h=this._placeholder=this._createPlaceholderElement(),p=this._anchor=this._anchor||this._document.createComment("");o.insertBefore(p,r),this._initialTransform=r.style.transform||"",this._preview=new Dl(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3),this._preview.attach(this._getPreviewInsertionPoint(o,l)),Cu(r,!1,ku),this._document.body.appendChild(o.replaceChild(h,r)),this.started.next({source:this,event:s}),i.start(),this._initialContainer=i,this._initialIndex=i.getItemIndex(this)}else this.started.next({source:this,event:s}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(i?i.getScrollableParents():[])}_initializeDragSequence(s,l){this._parentDragRef&&l.stopPropagation();let i=this.isDragging(),r=is(l),o=!r&&l.button!==0,h=this._rootElement,p=Kr(l),x=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+Rb>Date.now(),I=r?vu(l):_u(l);if(p&&p.draggable&&l.type==="mousedown"&&l.preventDefault(),i||o||x||I)return;if(this._handles.length){let Z=h.style;this._rootElementTapHighlight=Z.webkitTapHighlightColor||"",Z.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(Z=>this._updateOnScroll(Z)),this._boundaryElement&&(this._boundaryRect=kl(this._boundaryElement));let P=this._previewTemplate;this._pickupPositionInElement=P&&P.template&&!P.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,s,l);let et=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(l);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:et.x,y:et.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,l)}_cleanupDragArtifacts(s){Cu(this._rootElement,!0,ku),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let l=this._dropContainer,i=l.getItemIndex(this),r=this._getPointerPositionOnPage(s),o=this._getDragDistance(r),h=l._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:o,dropPoint:r,event:s}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:l,previousContainer:this._initialContainer,isPointerOverContainer:h,distance:o,dropPoint:r,event:s}),l.drop(this,i,this._initialIndex,this._initialContainer,h,o,r,s),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:s,y:l},{x:i,y:r}){let o=this._initialContainer._getSiblingContainerFromPosition(this,s,l);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(s,l)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=o,this._dropContainer.enter(this,s,l,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,r),this._dropContainer._sortItem(this,s,l,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(s,l):this._applyPreviewTransform(s-this._pickupPositionInElement.x,l-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let s=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(s.left,s.top);let l=this._preview.getTransitionDuration();return l===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{let r=h=>{(!h||this._preview&&Kr(h)===this._preview.element&&h.propertyName==="transform")&&(this._preview?.removeEventListener("transitionend",r),i(),clearTimeout(o))},o=setTimeout(r,l*1.5);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){let s=this._placeholderTemplate,l=s?s.template:null,i;return l?(this._placeholderRef=s.viewContainer.createEmbeddedView(l,s.context),this._placeholderRef.detectChanges(),i=Lu(this._placeholderRef,this._document)):i=Ou(this._rootElement),i.style.pointerEvents="none",i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(s,l,i){let r=l===this._rootElement?null:l,o=r?r.getBoundingClientRect():s,h=is(i)?i.targetTouches[0]:i,p=this._getViewportScrollPosition(),x=h.pageX-o.left-p.left,I=h.pageY-o.top-p.top;return{x:o.left-s.left+x,y:o.top-s.top+I}}_getPointerPositionOnPage(s){let l=this._getViewportScrollPosition(),i=is(s)?s.touches[0]||s.changedTouches[0]||{pageX:0,pageY:0}:s,r=i.pageX-l.left,o=i.pageY-l.top;if(this._ownerSVGElement){let h=this._ownerSVGElement.getScreenCTM();if(h){let p=this._ownerSVGElement.createSVGPoint();return p.x=r,p.y=o,p.matrixTransform(h.inverse())}}return{x:r,y:o}}_getConstrainedPointerPosition(s){let l=this._dropContainer?this._dropContainer.lockAxis:null,{x:i,y:r}=this.constrainPosition?this.constrainPosition(s,this,this._initialDomRect,this._pickupPositionInElement):s;if(this.lockAxis==="x"||l==="x"?r=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||l==="y")&&(i=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:o,y:h}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,p=this._boundaryRect,{width:x,height:I}=this._getPreviewRect(),P=p.top+h,et=p.bottom-(I-h),Z=p.left+o,M=p.right-(x-o);i=Eu(i,Z,M),r=Eu(r,P,et)}return{x:i,y:r}}_updatePointerDirectionDelta(s){let{x:l,y:i}=s,r=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,h=Math.abs(l-o.x),p=Math.abs(i-o.y);return h>this._config.pointerDirectionChangeThreshold&&(r.x=l>o.x?1:-1,o.x=l),p>this._config.pointerDirectionChangeThreshold&&(r.y=i>o.y?1:-1,o.y=i),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let s=this._handles.length>0||!this.isDragging();s!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=s,wr(this._rootElement,s))}_removeRootElementListeners(s){s.removeEventListener("mousedown",this._pointerDown,Eo),s.removeEventListener("touchstart",this._pointerDown,Iu),s.removeEventListener("dragstart",this._nativeDragStart,Eo)}_applyRootElementTransform(s,l){let i=1/this.scale,r=Oo(s*i,l*i),o=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=o.transform&&o.transform!="none"?o.transform:""),o.transform=Po(r,this._initialTransform)}_applyPreviewTransform(s,l){let i=this._previewTemplate?.template?void 0:this._initialTransform,r=Oo(s,l);this._preview.setTransform(Po(r,i))}_getDragDistance(s){let l=this._pickupPositionOnPage;return l?{x:s.x-l.x,y:s.y-l.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:s,y:l}=this._passiveTransform;if(s===0&&l===0||this.isDragging()||!this._boundaryElement)return;let i=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(r.width===0&&r.height===0||i.width===0&&i.height===0)return;let o=r.left-i.left,h=i.right-r.right,p=r.top-i.top,x=i.bottom-r.bottom;r.width>i.width?(o>0&&(s+=o),h>0&&(s-=h)):s=0,r.height>i.height?(p>0&&(l+=p),x>0&&(l-=x)):l=0,(s!==this._passiveTransform.x||l!==this._passiveTransform.y)&&this.setFreeDragPosition({y:l,x:s})}_getDragStartDelay(s){let l=this.dragStartDelay;return typeof l=="number"?l:is(s)?l.touch:l?l.mouse:0}_updateOnScroll(s){let l=this._parentPositions.handleScroll(s);if(l){let i=Kr(s);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&ns(this._boundaryRect,l.top,l.left),this._pickupPositionOnPage.x+=l.left,this._pickupPositionOnPage.y+=l.top,this._dropContainer||(this._activeTransform.x-=l.left,this._activeTransform.y-=l.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=co(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(s,l){let i=this._previewContainer||"global";if(i==="parent")return s;if(i==="global"){let r=this._document;return l||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return Ei(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_getTargetHandle(s){return this._handles.find(l=>s.target&&(s.target===l||l.contains(s.target)))}};function Eu(a,s,l){return Math.max(s,Math.min(l,a))}function is(a){return a.type[0]==="t"}function Ru(a){a.preventDefault()}function Dr(a,s,l){let i=Lo(s,a.length-1),r=Lo(l,a.length-1);if(i===r)return;let o=a[i],h=r<i?-1:1;for(let p=i;p!==r;p+=h)a[p]=a[p+h];a[r]=o}function Fo(a,s,l,i){let r=Lo(l,a.length-1),o=Lo(i,s.length);a.length&&s.splice(o,0,a.splice(r,1)[0])}function Lo(a,s){return Math.max(0,Math.min(s,a))}var No=class{constructor(s){this._dragDropRegistry=s,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(s){this.withItems(s)}sort(s,l,i,r){let o=this._itemPositions,h=this._getItemIndexFromPointerPosition(s,l,i,r);if(h===-1&&o.length>0)return null;let p=this.orientation==="horizontal",x=o.findIndex(E=>E.drag===s),I=o[h],P=o[x].clientRect,et=I.clientRect,Z=x>h?1:-1,M=this._getItemOffsetPx(P,et,Z),K=this._getSiblingOffsetPx(x,o,Z),B=o.slice();return Dr(o,x,h),o.forEach((E,z)=>{if(B[z]===E)return;let O=E.drag===s,D=O?M:K,L=O?s.getPlaceholderElement():E.drag.getRootElement();E.offset+=D;let V=Math.round(E.offset*(1/E.drag.scale));p?(L.style.transform=Po(`translate3d(${V}px, 0, 0)`,E.initialTransform),ns(E.clientRect,0,D)):(L.style.transform=Po(`translate3d(0, ${V}px, 0)`,E.initialTransform),ns(E.clientRect,D,0))}),this._previousSwap.overlaps=wl(et,l,i),this._previousSwap.drag=I.drag,this._previousSwap.delta=p?r.x:r.y,{previousIndex:x,currentIndex:h}}enter(s,l,i,r){let o=r==null||r<0?this._getItemIndexFromPointerPosition(s,l,i):r,h=this._activeDraggables,p=h.indexOf(s),x=s.getPlaceholderElement(),I=h[o];if(I===s&&(I=h[o+1]),!I&&(o==null||o===-1||o<h.length-1)&&this._shouldEnterAsFirstChild(l,i)&&(I=h[0]),p>-1&&h.splice(p,1),I&&!this._dragDropRegistry.isDragging(I)){let P=I.getRootElement();P.parentElement.insertBefore(x,P),h.splice(o,0,s)}else this._element.appendChild(x),h.push(s);x.style.transform="",this._cacheItemPositions()}withItems(s){this._activeDraggables=s.slice(),this._cacheItemPositions()}withSortPredicate(s){this._sortPredicate=s}reset(){this._activeDraggables?.forEach(s=>{let l=s.getRootElement();if(l){let i=this._itemPositions.find(r=>r.drag===s)?.initialTransform;l.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(s){return(this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===s)}updateOnScroll(s,l){this._itemPositions.forEach(({clientRect:i})=>{ns(i,s,l)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}withElementContainer(s){this._element=s}_cacheItemPositions(){let s=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(l=>{let i=l.getVisibleElement();return{drag:l,offset:0,initialTransform:i.style.transform||"",clientRect:kl(i)}}).sort((l,i)=>s?l.clientRect.left-i.clientRect.left:l.clientRect.top-i.clientRect.top)}_getItemOffsetPx(s,l,i){let r=this.orientation==="horizontal",o=r?l.left-s.left:l.top-s.top;return i===-1&&(o+=r?l.width-s.width:l.height-s.height),o}_getSiblingOffsetPx(s,l,i){let r=this.orientation==="horizontal",o=l[s].clientRect,h=l[s+i*-1],p=o[r?"width":"height"]*i;if(h){let x=r?"left":"top",I=r?"right":"bottom";i===-1?p-=h.clientRect[x]-o[I]:p+=o[x]-h.clientRect[I]}return p}_shouldEnterAsFirstChild(s,l){if(!this._activeDraggables.length)return!1;let i=this._itemPositions,r=this.orientation==="horizontal";if(i[0].drag!==this._activeDraggables[0]){let h=i[i.length-1].clientRect;return r?s>=h.right:l>=h.bottom}else{let h=i[0].clientRect;return r?s<=h.left:l<=h.top}}_getItemIndexFromPointerPosition(s,l,i,r){let o=this.orientation==="horizontal",h=this._itemPositions.findIndex(({drag:p,clientRect:x})=>{if(p===s)return!1;if(r){let I=o?r.x:r.y;if(p===this._previousSwap.drag&&this._previousSwap.overlaps&&I===this._previousSwap.delta)return!1}return o?l>=Math.floor(x.left)&&l<Math.floor(x.right):i>=Math.floor(x.top)&&i<Math.floor(x.bottom)});return h===-1||!this._sortPredicate(h,s)?-1:h}},Il=class{constructor(s,l){this._document=s,this._dragDropRegistry=l,this._previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1},this._relatedNodes=[]}start(s){let l=this._element.childNodes;this._relatedNodes=[];for(let i=0;i<l.length;i++){let r=l[i];this._relatedNodes.push([r,r.nextSibling])}this.withItems(s)}sort(s,l,i,r){let o=this._getItemIndexFromPointerPosition(s,l,i),h=this._previousSwap;if(o===-1||this._activeItems[o]===s)return null;let p=this._activeItems[o];if(h.drag===p&&h.overlaps&&h.deltaX===r.x&&h.deltaY===r.y)return null;let x=this.getItemIndex(s),I=s.getPlaceholderElement(),P=p.getRootElement();o>x?P.after(I):P.before(I),Dr(this._activeItems,x,o);let et=this._getRootNode().elementFromPoint(l,i);return h.deltaX=r.x,h.deltaY=r.y,h.drag=p,h.overlaps=P===et||P.contains(et),{previousIndex:x,currentIndex:o}}enter(s,l,i,r){let o=r==null||r<0?this._getItemIndexFromPointerPosition(s,l,i):r;o===-1&&(o=this._getClosestItemIndexToPointer(s,l,i));let h=this._activeItems[o],p=this._activeItems.indexOf(s);p>-1&&this._activeItems.splice(p,1),h&&!this._dragDropRegistry.isDragging(h)?(this._activeItems.splice(o,0,s),h.getRootElement().before(s.getPlaceholderElement())):(this._activeItems.push(s),this._element.appendChild(s.getPlaceholderElement()))}withItems(s){this._activeItems=s.slice()}withSortPredicate(s){this._sortPredicate=s}reset(){let s=this._element,l=this._previousSwap;for(let i=this._relatedNodes.length-1;i>-1;i--){let[r,o]=this._relatedNodes[i];r.parentNode===s&&r.nextSibling!==o&&(o===null?s.appendChild(r):o.parentNode===s&&s.insertBefore(r,o))}this._relatedNodes=[],this._activeItems=[],l.drag=null,l.deltaX=l.deltaY=0,l.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(s){return this._activeItems.indexOf(s)}updateOnScroll(){this._activeItems.forEach(s=>{this._dragDropRegistry.isDragging(s)&&s._sortFromLastPointerPosition()})}withElementContainer(s){s!==this._element&&(this._element=s,this._rootNode=void 0)}_getItemIndexFromPointerPosition(s,l,i){let r=this._getRootNode().elementFromPoint(Math.floor(l),Math.floor(i)),o=r?this._activeItems.findIndex(h=>{let p=h.getRootElement();return r===p||p.contains(r)}):-1;return o===-1||!this._sortPredicate(o,s)?-1:o}_getRootNode(){return this._rootNode||(this._rootNode=co(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(s,l,i){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let r=1/0,o=-1;for(let h=0;h<this._activeItems.length;h++){let p=this._activeItems[h];if(p!==s){let{x,y:I}=p.getRootElement().getBoundingClientRect(),P=Math.hypot(l-x,i-I);P<r&&(r=P,o=h)}}return o}},Mu=.05,Nu=.05,gi=function(a){return a[a.NONE=0]="NONE",a[a.UP=1]="UP",a[a.DOWN=2]="DOWN",a}(gi||{}),Ne=function(a){return a[a.NONE=0]="NONE",a[a.LEFT=1]="LEFT",a[a.RIGHT=2]="RIGHT",a}(Ne||{}),Tl=class{constructor(s,l,i,r,o){this._dragDropRegistry=l,this._ngZone=r,this._viewportRuler=o,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new ie,this.entered=new ie,this.exited=new ie,this.dropped=new ie,this.sorted=new ie,this.receivingStarted=new ie,this.receivingStopped=new ie,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=Mn.EMPTY,this._verticalScrollDirection=gi.NONE,this._horizontalScrollDirection=Ne.NONE,this._stopScrollTimers=new ie,this._cachedShadowRoot=null,this._scrollableElements=[],this._direction="ltr",this._startScrollInterval=()=>{this._stopScrolling(),fd(0,al).pipe(Yn(this._stopScrollTimers)).subscribe(()=>{let p=this._scrollNode,x=this.autoScrollStep;this._verticalScrollDirection===gi.UP?p.scrollBy(0,-x):this._verticalScrollDirection===gi.DOWN&&p.scrollBy(0,x),this._horizontalScrollDirection===Ne.LEFT?p.scrollBy(-x,0):this._horizontalScrollDirection===Ne.RIGHT&&p.scrollBy(x,0)})};let h=this.element=Ei(s);this._document=i,this.withOrientation("vertical").withElementContainer(h),l.registerDropContainer(this),this._parentPositions=new Ao(i)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(s,l,i,r){this._draggingStarted(),r==null&&this.sortingDisabled&&(r=this._draggables.indexOf(s)),this._sortStrategy.enter(s,l,i,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:s,container:this,currentIndex:this.getItemIndex(s)})}exit(s){this._reset(),this.exited.next({item:s,container:this})}drop(s,l,i,r,o,h,p,x={}){this._reset(),this.dropped.next({item:s,currentIndex:l,previousIndex:i,container:this,previousContainer:r,isPointerOverContainer:o,distance:h,dropPoint:p,event:x})}withItems(s){let l=this._draggables;return this._draggables=s,s.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(l.filter(r=>r.isDragging()).every(r=>s.indexOf(r)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(s){return this._direction=s,this._sortStrategy instanceof No&&(this._sortStrategy.direction=s),this}connectedTo(s){return this._siblings=s.slice(),this}withOrientation(s){if(s==="mixed")this._sortStrategy=new Il(this._document,this._dragDropRegistry);else{let l=new No(this._dragDropRegistry);l.direction=this._direction,l.orientation=s,this._sortStrategy=l}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((l,i)=>this.sortPredicate(l,i,this)),this}withScrollableParents(s){let l=this._container;return this._scrollableElements=s.indexOf(l)===-1?[l,...s]:s.slice(),this}withElementContainer(s){if(s===this._container)return this;let l=Ei(this.element),i=this._scrollableElements.indexOf(this._container),r=this._scrollableElements.indexOf(s);return i>-1&&this._scrollableElements.splice(i,1),r>-1&&this._scrollableElements.splice(r,1),this._sortStrategy&&this._sortStrategy.withElementContainer(s),this._cachedShadowRoot=null,this._scrollableElements.unshift(s),this._container=s,this}getScrollableParents(){return this._scrollableElements}getItemIndex(s){return this._isDragging?this._sortStrategy.getItemIndex(s):this._draggables.indexOf(s)}isReceiving(){return this._activeSiblings.size>0}_sortItem(s,l,i,r){if(this.sortingDisabled||!this._domRect||!Su(this._domRect,Mu,l,i))return;let o=this._sortStrategy.sort(s,l,i,r);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:s})}_startScrollingIfNecessary(s,l){if(this.autoScrollDisabled)return;let i,r=gi.NONE,o=Ne.NONE;if(this._parentPositions.positions.forEach((h,p)=>{p===this._document||!h.clientRect||i||Su(h.clientRect,Mu,s,l)&&([r,o]=Mb(p,h.clientRect,this._direction,s,l),(r||o)&&(i=p))}),!r&&!o){let{width:h,height:p}=this._viewportRuler.getViewportSize(),x={width:h,height:p,top:0,right:h,bottom:p,left:0};r=Fu(x,l),o=Bu(x,s),i=window}i&&(r!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=o,this._scrollNode=i,(r||o)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let s=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=s.msScrollSnapType||s.scrollSnapType||"",s.scrollSnapType=s.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let s=this._container.style;s.scrollSnapType=s.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(l=>l._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(s,l){return this._domRect!=null&&wl(this._domRect,s,l)}_getSiblingContainerFromPosition(s,l,i){return this._siblings.find(r=>r._canReceive(s,l,i))}_canReceive(s,l,i){if(!this._domRect||!wl(this._domRect,l,i)||!this.enterPredicate(s,this))return!1;let r=this._getShadowRoot().elementFromPoint(l,i);return r?r===this._container||this._container.contains(r):!1}_startReceiving(s,l){let i=this._activeSiblings;!i.has(s)&&l.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(i.add(s),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:s,receiver:this,items:l}))}_stopReceiving(s){this._activeSiblings.delete(s),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:s,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(s=>{if(this.isDragging()){let l=this._parentPositions.handleScroll(s);l&&this._sortStrategy.updateOnScroll(l.top,l.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let s=co(this._container);this._cachedShadowRoot=s||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let s=this._sortStrategy.getActiveItemsSnapshot().filter(l=>l.isDragging());this._siblings.forEach(l=>l._startReceiving(this,s))}};function Fu(a,s){let{top:l,bottom:i,height:r}=a,o=r*Nu;return s>=l-o&&s<=l+o?gi.UP:s>=i-o&&s<=i+o?gi.DOWN:gi.NONE}function Bu(a,s){let{left:l,right:i,width:r}=a,o=r*Nu;return s>=l-o&&s<=l+o?Ne.LEFT:s>=i-o&&s<=i+o?Ne.RIGHT:Ne.NONE}function Mb(a,s,l,i,r){let o=Fu(s,r),h=Bu(s,i),p=gi.NONE,x=Ne.NONE;if(o){let I=a.scrollTop;o===gi.UP?I>0&&(p=gi.UP):a.scrollHeight-I>a.clientHeight&&(p=gi.DOWN)}if(h){let I=a.scrollLeft;l==="rtl"?h===Ne.RIGHT?I<0&&(x=Ne.RIGHT):a.scrollWidth+I>a.clientWidth&&(x=Ne.LEFT):h===Ne.LEFT?I>0&&(x=Ne.LEFT):a.scrollWidth-I>a.clientWidth&&(x=Ne.RIGHT)}return[p,x]}var Ro=$r({passive:!1,capture:!0}),Mo=new Set,Ab=(()=>{let s=class s{};s.\u0275fac=function(r){return new(r||s)},s.\u0275cmp=_e({type:s,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],standalone:!0,features:[fl],decls:0,vars:0,template:function(r,o){},styles:["@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}"],encapsulation:2,changeDetection:0});let a=s;return a})(),Pb=(()=>{let s=class s{constructor(i,r){this._ngZone=i,this._appRef=Zn(bd),this._environmentInjector=Zn(vd),this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=ul([]),this._globalListeners=new Map,this._draggingPredicate=o=>o.isDragging(),this.pointerMove=new ie,this.pointerUp=new ie,this.scroll=new ie,this._preventDefaultWhileDragging=o=>{this._activeDragInstances().length>0&&o.preventDefault()},this._persistentTouchmoveListener=o=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&o.preventDefault(),this.pointerMove.next(o))},this._document=r}registerDropContainer(i){this._dropInstances.has(i)||this._dropInstances.add(i)}registerDragItem(i){this._dragInstances.add(i),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,Ro)})}removeDropContainer(i){this._dropInstances.delete(i)}removeDragItem(i){this._dragInstances.delete(i),this.stopDragging(i),this._dragInstances.size===0&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Ro)}startDragging(i,r){if(!(this._activeDragInstances().indexOf(i)>-1)&&(this._loadResets(),this._activeDragInstances.update(o=>[...o,i]),this._activeDragInstances().length===1)){let o=r.type.startsWith("touch");this._globalListeners.set(o?"touchend":"mouseup",{handler:h=>this.pointerUp.next(h),options:!0}).set("scroll",{handler:h=>this.scroll.next(h),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Ro}),o||this._globalListeners.set("mousemove",{handler:h=>this.pointerMove.next(h),options:Ro}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((h,p)=>{this._document.addEventListener(p,h.handler,h.options)})})}}stopDragging(i){this._activeDragInstances.update(r=>{let o=r.indexOf(i);return o>-1?(r.splice(o,1),[...r]):r}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(i){return this._activeDragInstances().indexOf(i)>-1}scrolled(i){let r=[this.scroll];return i&&i!==this._document&&r.push(new Wi(o=>this._ngZone.runOutsideAngular(()=>{let p=x=>{this._activeDragInstances().length&&o.next(x)};return i.addEventListener("scroll",p,!0),()=>{i.removeEventListener("scroll",p,!0)}}))),$s(...r)}ngOnDestroy(){this._dragInstances.forEach(i=>this.removeDragItem(i)),this._dropInstances.forEach(i=>this.removeDropContainer(i)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((i,r)=>{this._document.removeEventListener(r,i.handler,i.options)}),this._globalListeners.clear()}_loadResets(){if(!Mo.has(this._appRef)){Mo.add(this._appRef);let i=Cd(Ab,{environmentInjector:this._environmentInjector});this._appRef.onDestroy(()=>{Mo.delete(this._appRef),Mo.size===0&&i.destroy()})}}};s.\u0275fac=function(r){return new(r||s)(ze(An),ze(Ui))},s.\u0275prov=Ii({token:s,factory:s.\u0275fac,providedIn:"root"});let a=s;return a})(),Ob={dragStartThreshold:5,pointerDirectionChangeThreshold:5},Rl=(()=>{let s=class s{constructor(i,r,o,h){this._document=i,this._ngZone=r,this._viewportRuler=o,this._dragDropRegistry=h}createDrag(i,r=Ob){return new zl(i,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(i){return new Tl(i,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}};s.\u0275fac=function(r){return new(r||s)(ze(Ui),ze(An),ze(mu),ze(Pb))},s.\u0275prov=Ii({token:s,factory:s.\u0275fac,providedIn:"root"});let a=s;return a})(),Au=new rn("CDK_DRAG_PARENT");var Lb=new rn("CdkDragHandle");var Vu=new rn("CDK_DRAG_CONFIG"),Nb="cdk-drag",qu=new rn("CdkDropList"),Wu=(()=>{let s=class s{get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(i){this._disabled=i,this._dragRef.disabled=this._disabled}constructor(i,r,o,h,p,x,I,P,et,Z,M){this.element=i,this.dropContainer=r,this._ngZone=h,this._viewContainerRef=p,this._dir=I,this._changeDetectorRef=et,this._selfHandle=Z,this._parentDrag=M,this._destroyed=new ie,this._handles=new hd([]),this.scale=1,this.started=new Me,this.released=new Me,this.ended=new Me,this.entered=new Me,this.exited=new Me,this.dropped=new Me,this.moved=new Wi(K=>{let B=this._dragRef.moved.pipe(ud(E=>({source:this,pointerPosition:E.pointerPosition,event:E.event,delta:E.delta,distance:E.distance}))).subscribe(K);return()=>{B.unsubscribe()}}),this._injector=Zn(xd),this._dragRef=P.createDrag(i,{dragStartThreshold:x&&x.dragStartThreshold!=null?x.dragStartThreshold:5,pointerDirectionChangeThreshold:x&&x.pointerDirectionChangeThreshold!=null?x.pointerDirectionChangeThreshold:5,zIndex:x?.zIndex}),this._dragRef.data=this,s._dragInstances.push(this),x&&this._assignDefaults(x),r&&(this._dragRef._withDropContainer(r._dropListRef),r.addItem(this),r._dropListRef.beforeStarted.pipe(Yn(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(i){this._dragRef.setFreeDragPosition(i)}ngAfterViewInit(){yd(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(i){let r=i.rootElementSelector,o=i.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,o&&!o.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);let i=s._dragInstances.indexOf(this);i>-1&&s._dragInstances.splice(i,1),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(i){let r=this._handles.getValue();r.push(i),this._handles.next(r)}_removeHandle(i){let r=this._handles.getValue(),o=r.indexOf(i);o>-1&&(r.splice(o,1),this._handles.next(r))}_setPreviewTemplate(i){this._previewTemplate=i}_resetPreviewTemplate(i){i===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(i){this._placeholderTemplate=i}_resetPlaceholderTemplate(i){i===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let i=this.element.nativeElement,r=i;this.rootElementSelector&&(r=i.closest!==void 0?i.closest(this.rootElementSelector):i.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||i)}_getBoundaryElement(){let i=this.boundaryElement;return i?typeof i=="string"?this.element.nativeElement.closest(i):Ei(i):null}_syncInputs(i){i.beforeStarted.subscribe(()=>{if(!i.isDragging()){let r=this._dir,o=this.dragStartDelay,h=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,p=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;i.disabled=this.disabled,i.lockAxis=this.lockAxis,i.scale=this.scale,i.dragStartDelay=typeof o=="object"&&o?o:lo(o),i.constrainPosition=this.constrainPosition,i.previewClass=this.previewClass,i.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(h).withPreviewTemplate(p).withPreviewContainer(this.previewContainer||"global"),r&&i.withDirection(r.value)}}),i.beforeStarted.pipe(gd(1)).subscribe(()=>{if(this._parentDrag){i.withParent(this._parentDrag._dragRef);return}let r=this.element.nativeElement.parentElement;for(;r;){if(r.classList.contains(Nb)){i.withParent(s._dragInstances.find(o=>o.element.nativeElement===r)?._dragRef||null);break}r=r.parentElement}})}_handleEvents(i){i.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),i.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),i.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),i.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),i.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),i.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(i){let{lockAxis:r,dragStartDelay:o,constrainPosition:h,previewClass:p,boundaryElement:x,draggingDisabled:I,rootElementSelector:P,previewContainer:et}=i;this.disabled=I??!1,this.dragStartDelay=o||0,r&&(this.lockAxis=r),h&&(this.constrainPosition=h),p&&(this.previewClass=p),x&&(this.boundaryElement=x),P&&(this.rootElementSelector=P),et&&(this.previewContainer=et)}_setupHandlesListener(){this._handles.pipe(_d(i=>{let r=i.map(o=>o.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),cl(i=>$s(...i.map(r=>r._stateChanges.pipe(Ks(r))))),Yn(this._destroyed)).subscribe(i=>{let r=this._dragRef,o=i.element.nativeElement;i.disabled?r.disableHandle(o):r.enableHandle(o)})}};s._dragInstances=[],s.\u0275fac=function(r){return new(r||s)(Ct(Ys),Ct(qu,12),Ct(Ui),Ct(An),Ct(dl),Ct(Vu,8),Ct(Sl,8),Ct(Rl),Ct(io),Ct(Lb,10),Ct(Au,12))},s.\u0275dir=Wr({type:s,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(r,o){r&2&&Js("cdk-drag-disabled",o.disabled)("cdk-drag-dragging",o._dragRef.isDragging())},inputs:{data:[se.None,"cdkDragData","data"],lockAxis:[se.None,"cdkDragLockAxis","lockAxis"],rootElementSelector:[se.None,"cdkDragRootElement","rootElementSelector"],boundaryElement:[se.None,"cdkDragBoundary","boundaryElement"],dragStartDelay:[se.None,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[se.None,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[se.HasDecoratorInputTransform,"cdkDragDisabled","disabled",Xr],constrainPosition:[se.None,"cdkDragConstrainPosition","constrainPosition"],previewClass:[se.None,"cdkDragPreviewClass","previewClass"],previewContainer:[se.None,"cdkDragPreviewContainer","previewContainer"],scale:[se.HasDecoratorInputTransform,"cdkDragScale","scale",Sd]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[Hr([{provide:Au,useExisting:s}]),Qs,hl]});let a=s;return a})(),Pu=new rn("CdkDropListGroup");var Fb=0,Gu=(()=>{let s=class s{get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(i){this._dropListRef.disabled=this._disabled=i}constructor(i,r,o,h,p,x,I){this.element=i,this._changeDetectorRef=o,this._scrollDispatcher=h,this._dir=p,this._group=x,this._destroyed=new ie,this.connectedTo=[],this.id=`cdk-drop-list-${Fb++}`,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new Me,this.entered=new Me,this.exited=new Me,this.sorted=new Me,this._unsortedItems=new Set,this._dropListRef=r.createDropList(i),this._dropListRef.data=this,I&&this._assignDefaults(I),this._dropListRef.enterPredicate=(P,et)=>this.enterPredicate(P.data,et.data),this._dropListRef.sortPredicate=(P,et,Z)=>this.sortPredicate(P,et.data,Z.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),s._dropLists.push(this),x&&x._items.add(this)}addItem(i){this._unsortedItems.add(i),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(i){this._unsortedItems.delete(i),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((i,r)=>i._dragRef.getVisibleElement().compareDocumentPosition(r._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let i=s._dropLists.indexOf(this);i>-1&&s._dropLists.splice(i,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(i){this._dir&&this._dir.change.pipe(Ks(this._dir.value),Yn(this._destroyed)).subscribe(r=>i.withDirection(r)),i.beforeStarted.subscribe(()=>{let r=kd(this.connectedTo).map(o=>{if(typeof o=="string"){let h=s._dropLists.find(p=>p.id===o);return h}return o});if(this._group&&this._group._items.forEach(o=>{r.indexOf(o)===-1&&r.push(o)}),!this._scrollableParentsResolved){let o=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(h=>h.getElementRef().nativeElement);this._dropListRef.withScrollableParents(o),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){let o=this.element.nativeElement.querySelector(this.elementContainerSelector);i.withElementContainer(o)}i.disabled=this.disabled,i.lockAxis=this.lockAxis,i.sortingDisabled=this.sortingDisabled,i.autoScrollDisabled=this.autoScrollDisabled,i.autoScrollStep=lo(this.autoScrollStep,2),i.connectedTo(r.filter(o=>o&&o!==this).map(o=>o._dropListRef)).withOrientation(this.orientation)})}_handleEvents(i){i.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),i.entered.subscribe(r=>{this.entered.emit({container:this,item:r.item.data,currentIndex:r.currentIndex})}),i.exited.subscribe(r=>{this.exited.emit({container:this,item:r.item.data}),this._changeDetectorRef.markForCheck()}),i.sorted.subscribe(r=>{this.sorted.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:r.item.data})}),i.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,item:r.item.data,isPointerOverContainer:r.isPointerOverContainer,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),$s(i.receivingStarted,i.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(i){let{lockAxis:r,draggingDisabled:o,sortingDisabled:h,listAutoScrollDisabled:p,listOrientation:x}=i;this.disabled=o??!1,this.sortingDisabled=h??!1,this.autoScrollDisabled=p??!1,this.orientation=x||"vertical",r&&(this.lockAxis=r)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(i=>i._dragRef))}};s._dropLists=[],s.\u0275fac=function(r){return new(r||s)(Ct(Ys),Ct(Rl),Ct(io),Ct(fu),Ct(Sl,8),Ct(Pu,12),Ct(Vu,8))},s.\u0275dir=Wr({type:s,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(r,o){r&2&&(pl("id",o.id),Js("cdk-drop-list-disabled",o.disabled)("cdk-drop-list-dragging",o._dropListRef.isDragging())("cdk-drop-list-receiving",o._dropListRef.isReceiving()))},inputs:{connectedTo:[se.None,"cdkDropListConnectedTo","connectedTo"],data:[se.None,"cdkDropListData","data"],orientation:[se.None,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[se.None,"cdkDropListLockAxis","lockAxis"],disabled:[se.HasDecoratorInputTransform,"cdkDropListDisabled","disabled",Xr],sortingDisabled:[se.HasDecoratorInputTransform,"cdkDropListSortingDisabled","sortingDisabled",Xr],enterPredicate:[se.None,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[se.None,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[se.HasDecoratorInputTransform,"cdkDropListAutoScrollDisabled","autoScrollDisabled",Xr],autoScrollStep:[se.None,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[se.None,"cdkDropListElementContainer","elementContainerSelector"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[Hr([{provide:Pu,useValue:void 0},{provide:qu,useExisting:s}]),Qs]});let a=s;return a})();var ju=(()=>{let s=class s{};s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=Gi({type:s}),s.\u0275inj=ji({providers:[Rl],imports:[gu]});let a=s;return a})();var Uu=()=>["/","task","board","task"],Hu=a=>({PO:a});function Vb(a,s){if(a&1){let l=At();T(0,"div",12)(1,"nz-list",13)(2,"nz-list-item",14),bt("click",function(){zt(l);let r=at(3);return It(r.showSide=!0)}),T(3,"nz-list-item-meta")(4,"nz-list-item-meta-title"),ct(5),A(),T(6,"nz-list-item-meta-description"),ct(7),A()()()()()}if(a&2){let l=s.$implicit,i=at(3);j(),Qn("border-left-color",i.taskTypeColors[l.type]||"green"),j(),H("routerLink",pe(6,Uu))("queryParams",bi(7,Hu,l.task_no)),j(3),te(" ",l.title," "),j(2),te(" ",l.description," ")}}function qb(a,s){if(a&1){let l=At();T(0,"div",11)(1,"h4",5),ct(2),A(),T(3,"div",6),bt("cdkDropListDropped",function(r){zt(l);let o=at(2);return It(o.drop(r))}),yt(4,Vb,8,9,"div",7),A()()}if(a&2){let l=at().$implicit,i=at();Qn("border-color",i.stateColors[l.value])("background-color",i.stateCardColors[l.value]),H("ngClass",i.showSide?" boardCard boardCardSmall":"boardCard"),j(2),Ae(i.stateNames[l.value]),j(),H("id",l.key)("cdkDropListConnectedTo",i.taskStatesConnectivity[l.value])("cdkDropListData",i.listOfDisplayData[l.value]),j(),H("ngForOf",i.listOfDisplayData[l.value])}}function Wb(a,s){if(a&1&&(Ce(0),yt(1,qb,5,10,"div",10),Ie()),a&2){let l=s.$implicit,i=at();j(),H("ngIf",l.value!==i.states.Backlog)}}function Gb(a,s){if(a&1){let l=At();T(0,"div",12)(1,"nz-list",13)(2,"nz-list-item",14),bt("click",function(){zt(l);let r=at();return It(r.showSide=!0)}),T(3,"nz-list-item-meta")(4,"nz-list-item-meta-title"),ct(5),A(),T(6,"nz-list-item-meta-description"),ct(7),A()()()()()}if(a&2){let l=s.$implicit,i=at();j(),Qn("border-left-color",i.taskTypeColors[l.type]||"green"),j(),H("routerLink",pe(6,Uu))("queryParams",bi(7,Hu,l.task_no)),j(3),te(" ",l.title," "),j(2),te(" ",l.description," ")}}function jb(a,s){if(a&1&&(T(0,"nz-col",15),_t(1,"router-outlet"),A()),a&2){let l=at();H("nzSpan",!l.isMobile()&&l.showSide?16:0)}}function Ub(a,s){a&1&&(Ce(0),_t(1,"router-outlet"),Ie())}function Hb(a,s){if(a&1){let l=At();T(0,"div")(1,"nz-drawer",16),bt("nzOnClose",function(){zt(l);let r=at();return It(r.showSide=!1)}),yt(2,Ub,2,0,"ng-container",17),A()()}if(a&2){let l=at();j(),H("nzVisible",l.showSide)}}var Xu=(()=>{let s=class s{constructor(i,r,o,h,p){this.appService=i,this.media=r,this.route=o,this.router=h,this.exportSheetService=p,this.apiUrl=lr.apiUrl,this.pendingInvoices=[],this.stateNames=Ge,this.paymentConfirmations=[],this.states=ti,this.stateColors=oo,this.stateCardColors=ao,this.taskTypeColors=or,this.partialPayments=[],this.showSide=!1,this.searchVisible=!1,this.searchValue="",this.tabs=["Task Request","Task Returns","Sale Requests","Sale Return"],this.listOfDisplayData={},this.taskStatesConnectivity=ar,this.total=1,this.loading=!0,this.pageSize=10,this.pageIndex=1,this.filterStates=Object.keys(Ge).map(x=>({text:Ge[x],value:x})),this.title="angular-drag-drop-tutorial",this.todo=["Get to work","Pick up groceries","Go home","Fall asleep"],this.done=["Get up","Brush teeth","Take a shower","Check e-mail","Walk dog"],this.sortByValue=(x,I)=>x.value<I.value?-1:x.value>I.value?1:0,this.isMobile=this.appService.isMobile}groupByState(i){let r=i.reduce((o,h)=>(o[h.state]||(o[h.state]=[]),o[h.state].push(h),o),{});return Object.keys(this.states).forEach(o=>{let p=this.states[o];r[p]||(r[p]=[])}),r}loadTaskDataFromServer(i=1,r=1e3,o="id",h="asc",p=[]){this.loading=!0;let x=new ir().append("page",`${i}`).append("results",`${r}`).append("sortField",`${o}`).append("sortOrder",`${h}`);p.forEach(I=>{I.value.forEach(P=>{x=x.append(I.key,P)})}),this.getAndSetTaskOrders(x)}drop(i){i.previousContainer===i.container?Dr(i.container.data,i.previousIndex,i.currentIndex):(Fo(i.previousContainer.data,i.container.data,i.previousIndex,i.currentIndex),this.updateDetails(i.container.data[i.currentIndex].id,ti[i.container.id]))}updateDetails(i,r){return Pt(this,null,function*(){let o={id:i,state:r},h=yield this.appService.updateTaskRequest(o)})}onTaskQueryParamsChange(i){console.log(i);let{pageSize:r,pageIndex:o,sort:h,filter:p}=i;if(this.sort&&this.appService.areArraysDifferent(this.sort,h)){this.sort=h,this.listOfDisplayData=this.groupByState(this.appService.sortDataArray(this.listOfDisplayData,this.sort));return}this.sort=h;let x=h.find(et=>et.value!==null),I=x&&x.key||null,P=x&&x.value||null;this.loadTaskDataFromServer(o,r,I,P,p)}getInitials(i){return i?i.split(" ").map(o=>o[0]).join("").toUpperCase():""}export(){let i=this.listOfDisplayData;this.exportSheetService.exportDataToXLSX(i,"Task Request")}ngOnInit(){this.clientSubscription=this.appService.currentClient.subscribe(i=>{i&&i.id>0&&this.currentOrganizationId!=i.id&&(this.currentOrganizationId&&this.router.navigate(["/","task","board"],{queryParams:{PO:null},queryParamsHandling:"merge"}),this.currentOrganizationId=i.id,this.showSide=!1,this.route.queryParams.subscribe(r=>Pt(this,null,function*(){r.PO?this.showSide=!0:(this.showSide=!1,this.onTaskQueryParamsChange({pageIndex:0,pageSize:0,sort:[],filter:[]}))})))})}ngOnDestroy(){this.clientSubscription&&this.clientSubscription.unsubscribe()}ngAfterViewInit(){}getAndSetTaskOrders(i){return Pt(this,null,function*(){this.pendingInvoices=yield this.appService.retireveTaskByState(i),this.listOfDisplayData=this.groupByState([...this.pendingInvoices]),this.loading=!1,this.total=this.pendingInvoices.length})}reset(){this.searchValue="",this.search()}search(){this.searchVisible=!1,this.searchValue?(this.listOfDisplayData=this.pendingInvoices.filter(i=>i.title&&i.title.toLowerCase().indexOf(this.searchValue.toLowerCase())>-1||i.project_name&&i.project_name.toLowerCase().indexOf(this.searchValue.toLowerCase())>-1),console.log(this.listOfDisplayData)):this.listOfDisplayData=this.pendingInvoices}};s.\u0275fac=function(r){return new(r||s)(Ct(Te),Ct(cr),Ct(Ti),Ct(ki),Ct(xr))},s.\u0275cmp=_e({type:s,selectors:[["app-board"]],decls:13,vars:16,consts:[[2,"height","100%"],[2,"height","100%","overflow-y","auto",3,"nzSpan"],["nz-row",""],[4,"ngFor","ngForOf"],["nz-col","","nz-col","","nzSpan","24",1,"boardCard"],[1,"tab-heading"],["cdkDropList","",2,"padding-bottom","50px",3,"id","cdkDropListConnectedTo","cdkDropListData","cdkDropListDropped"],["class","item","cdkDrag","",4,"ngFor","ngForOf"],["class","sidebarright",3,"nzSpan",4,"ngIf"],[4,"ngIf"],["nz-col","","class","boardCard","nz-col","",3,"ngClass","border-color","background-color",4,"ngIf"],["nz-col","","nz-col","",1,"boardCard",3,"ngClass"],["cdkDrag","",1,"item"],["nzItemLayout","horizontal",1,"listItem",2,"border-left","3px solid"],["nz-button","","nzType","text",1,"selectedItem",2,"padding","4px",3,"routerLink","queryParams","click"],[1,"sidebarright",3,"nzSpan"],["nzWidth","100%","nzPlacement","right",3,"nzVisible","nzTitle","nzExtra","nzOnClose"],[4,"nzDrawerContent"]],template:function(r,o){r&1&&(T(0,"nz-row",0)(1,"nz-col",1)(2,"div",2),yt(3,Wb,2,1,"ng-container",3),ne(4,"keyvalue"),A(),T(5,"div",2)(6,"div",4)(7,"h4",5),ct(8),A(),T(9,"div",6),bt("cdkDropListDropped",function(p){return o.drop(p)}),yt(10,Gb,8,9,"div",7),A()()()(),yt(11,jb,2,1,"nz-col",8),A(),yt(12,Hb,3,1,"div",9)),r&2&&(j(),H("nzSpan",!o.isMobile()&&o.showSide?8:24),j(2),H("ngForOf",ue(4,13,o.states,o.sortByValue)),j(3),Qn("border-color",o.stateColors[o.states.Backlog])("background-color",o.stateCardColors[o.states.Backlog]),j(2),Ae(o.stateNames[o.states.Backlog]),j(),H("id","Backlog")("cdkDropListConnectedTo",o.taskStatesConnectivity[o.states.Backlog])("cdkDropListData",o.listOfDisplayData[o.states.Backlog]),j(),H("ngForOf",o.listOfDisplayData[o.states.Backlog]),j(),H("ngIf",!o.isMobile()&&o.showSide),j(),H("ngIf",o.isMobile()&&o.showSide))},dependencies:[nr,rr,wd,hi,We,je,pn,un,He,Ue,yo,bo,xo,_o,vo,Gu,Wu,ro],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{width:50%;background-color:#6495ed;color:#fff;display:flex;justify-content:center;align-items:center;cursor:move;padding:1em;transition:transform .2s ease-in-out}.container[_ngcontent-%COMP%]   .item.cdk-drag-preview[_ngcontent-%COMP%]{opacity:.8;background-color:orange;box-shadow:0 4px 8px #0000001a}"]});let a=s;return a})();function Xb(a,s){if(a&1&&(T(0,"nz-form",3)(1,"div",4)(2,"div",5)(3,"nz-form-item")(4,"nz-form-label"),ct(5,"Name"),A(),T(6,"nz-form-control"),_t(7,"input",6),A()()(),T(8,"div",5)(9,"nz-form-item")(10,"nz-form-label"),ct(11,"Contact no"),A(),T(12,"nz-form-control"),_t(13,"input",7),A()()(),T(14,"div",5)(15,"nz-form-item")(16,"nz-form-label"),ct(17,"Account No"),A(),T(18,"nz-form-control"),_t(19,"input",8),A()()(),T(20,"div",5)(21,"nz-form-item")(22,"nz-form-label"),ct(23,"Address"),A(),T(24,"nz-form-control")(25,"textarea",9),ct(26," "),A()()()()()()),a&2){let l=at();H("formGroup",l.customerForm),j(),H("nzGutter",8)}}function $b(a,s){if(a&1){let l=At();T(0,"div",10)(1,"button",11),bt("click",function(){zt(l);let r=at();return It(r.close())}),ct(2,"Cancel"),A(),T(3,"button",12),bt("click",function(){zt(l);let r=at();return It(r.addCustomer())}),ct(4,"Submit"),A()()}if(a&2){let l=at();j(3),H("disabled",!l.customerForm.valid)}}var Kb=()=>({overflow:"auto"}),$u=(()=>{let s=class s{constructor(i,r){this.appService=i,this.fb=r,this.visible=!1,this.customers=[],this.closeDrawer=new Me,this.customerForm=this.fb.group({name:["",[ve.required]],account_no:[0,[ve.required]],contact_no:[null,[ve.required]],address:[null,[ve.required]]})}ngOnInit(){}close(){this.closeDrawer.emit(!1)}addCustomer(){return Pt(this,null,function*(){console.log(this.customerForm),yield this.appService.createCustomer(this.customerForm.value),this.closeDrawer.emit(!0)})}objectKeys(i){return Object.keys(i).map(r=>({key:r,value:i[r]}))}};s.\u0275fac=function(r){return new(r||s)(Ct(Te),Ct(hn))},s.\u0275cmp=_e({type:s,selectors:[["app-create-customer-drawer"]],inputs:{visible:"visible",customers:"customers"},outputs:{closeDrawer:"closeDrawer"},decls:4,vars:6,consts:[["nzTitle","Create",3,"nzBodyStyle","nzMaskClosable","nzWidth","nzVisible","nzFooter","nzOnClose"],[3,"formGroup",4,"nzDrawerContent"],["footerTpl",""],[3,"formGroup"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","24"],["formControlName","name","nz-input","","placeholder","please enter user name"],["formControlName","contact_no","nz-input","","placeholder","please enter contact no"],["formControlName","account_no","nz-input","","placeholder","please enter account no"],["nz-input","","rows","3","formControlName","address","placeholder","please enter account no"],[2,"float","right"],["nz-button","",2,"margin-right","8px",3,"click"],["nz-button","","nzType","primary",3,"disabled","click"]],template:function(r,o){if(r&1&&(T(0,"nz-drawer",0),bt("nzOnClose",function(){return o.close()}),yt(1,Xb,27,2,"nz-form",1)(2,$b,5,1,"ng-template",null,2,Qt),A()),r&2){let h=$t(3);H("nzBodyStyle",pe(5,Kb))("nzMaskClosable",!1)("nzWidth",720)("nzVisible",o.visible)("nzFooter",h)}},dependencies:[ui,je,di,pn,un,He,Ue,fn,gn,mn,mi,pi,fi,an,ln,cn]});let a=s;return a})();function Zb(a,s){if(a&1){let l=At();T(0,"span",15),bt("click",function(){zt(l);let r=at(2);return r.searchValue="",It(r.search())}),A()}}function Qb(a,s){a&1&&_t(0,"span",16)}function Jb(a,s){if(a&1&&yt(0,Zb,1,0,"span",14)(1,Qb,1,0),a&2){let l=at();to(0,l.searchValue?0:1)}}function t1(a,s){a&1&&_t(0,"span",16)}function e1(a,s){if(a&1){let l=At();T(0,"button",17),bt("click",function(){zt(l);let r=at();return It(r.open())}),_t(1,"span",18),ct(2," Add Customer "),A()}a&2&&H("nzSize","small")}function i1(a,s){if(a&1){let l=At();T(0,"app-create-customer-drawer",19),bt("closeDrawer",function(r){zt(l);let o=at();return It(o.close(r))}),A()}if(a&2){let l=at();H("visible",l.visible)("customers",l.listOfDisplayData)}}function n1(a,s){if(a&1&&(T(0,"th",20),ct(1),A()),a&2){let l=s.$implicit;H("nzSortFn",l.compare)("nzSortPriority",l.priority),j(),te(" ",l.title," ")}}function r1(a,s){if(a&1){let l=At();T(0,"td")(1,"a",37),bt("click",function(){zt(l);let r=at(2).$implicit,o=at();return It(o.startEdit(r.id))}),ct(2,"Edit"),A()()}}function s1(a,s){if(a&1){let l=At();Ce(0),T(1,"td",35),bt("nzExpandChange",function(r){zt(l);let o=at().index,h=at();return It(h.onExpandChange(o,r))}),A(),T(2,"td"),ct(3),A(),T(4,"td"),ct(5),A(),T(6,"td"),ct(7),A(),T(8,"td"),ct(9),A(),yt(10,r1,3,0,"td",36),Ie()}if(a&2){let l=at(),i=l.index,r=l.$implicit,o=at();j(),H("nzExpand",o.expandSet.has(i)),j(2),Ae(r.name),j(2),Ae(r.contact_no),j(2),Ae(r.address),j(2),Ae(r.account_no),j(),H("appHasPermission",o.appPermissions.AddCustomers)}}function o1(a,s){if(a&1){let l=At();T(0,"td")(1,"a",39),bt("click",function(){zt(l);let r=at(2).$implicit,o=at();return It(o.saveEdit(r.id))}),ct(2,"Save"),A(),ct(3," \xA0 "),T(4,"a",40),bt("nzOnConfirm",function(){zt(l);let r=at(2).$implicit,o=at();return It(o.cancelEdit(r.id))}),ct(5,"Cancel"),A()()}}function a1(a,s){if(a&1){let l=At();_t(0,"td"),T(1,"td")(2,"input",38),Le("ngModelChange",function(r){zt(l);let o=at().$implicit,h=at();return Oe(h.editCache[o.id].data.name,r)||(h.editCache[o.id].data.name=r),It(r)}),A()(),T(3,"td")(4,"input",38),Le("ngModelChange",function(r){zt(l);let o=at().$implicit,h=at();return Oe(h.editCache[o.id].data.contact_no,r)||(h.editCache[o.id].data.contact_no=r),It(r)}),A()(),T(5,"td")(6,"input",38),Le("ngModelChange",function(r){zt(l);let o=at().$implicit,h=at();return Oe(h.editCache[o.id].data.address,r)||(h.editCache[o.id].data.address=r),It(r)}),A()(),T(7,"td")(8,"input",38),Le("ngModelChange",function(r){zt(l);let o=at().$implicit,h=at();return Oe(h.editCache[o.id].data.account_no,r)||(h.editCache[o.id].data.account_no=r),It(r)}),A()(),yt(9,o1,6,0,"td",36)}if(a&2){let l=at().$implicit,i=at();j(2),Pe("ngModel",i.editCache[l.id].data.name),j(2),Pe("ngModel",i.editCache[l.id].data.contact_no),j(2),Pe("ngModel",i.editCache[l.id].data.address),j(2),Pe("ngModel",i.editCache[l.id].data.account_no),j(),H("appHasPermission",i.appPermissions.AddCustomers)}}var l1=()=>["/","task","sales","sale"],c1=a=>({SALE:a});function h1(a,s){if(a&1&&(T(0,"tr")(1,"td")(2,"a",41),ct(3),A()(),T(4,"td"),ct(5),ne(6,"date"),A(),T(7,"td"),ct(8),A(),T(9,"td")(10,"button",42),ct(11),A()(),T(12,"td")(13,"span"),ct(14),ne(15,"currency"),A()()()),a&2){let l=s.$implicit,i=at(2);j(2),H("routerLink",pe(16,l1))("queryParams",bi(17,c1,l.sale_no)),j(),te("SALE - ",l.sale_no,""),j(2),te(" ",ue(6,10,l.date_created,"dd MMM yyyy")," "),j(3),te(" ",l.title," "),j(2),H("className",l.state===i.states.Invoiced?"green-button":"default")("nzDanger",l.state===i.states.Cancelled)("nzSize","small"),j(),te(" ",i.stateNames[l.state]," "),j(3),Ae(ue(15,13,l.total,"PKR "))}}var d1=()=>[];function u1(a,s){if(a&1){let l=At();T(0,"tr"),yt(1,s1,11,6,"ng-container",21)(2,a1,10,5,"ng-template",null,22,Qt),A(),T(4,"tr",23)(5,"div",24),_t(6,"span"),T(7,"span")(8,"button",25),bt("click",function(){let o=zt(l).index,h=at();return It(h.generatePDF(o))}),_t(9,"span",26),A(),T(10,"button",27),bt("click",function(){let o=zt(l).index,h=at();return It(h.printCard(o))}),_t(11,"span",28),A()()(),T(12,"nz-table",29)(13,"thead")(14,"tr")(15,"th",30),ct(16,"Quote Number"),A(),T(17,"th",31),ct(18,"Date"),A(),T(19,"th",30),ct(20,"Title"),A(),T(21,"th",32),ct(22,"Status "),A(),T(23,"th",33),ct(24,"Amount"),A()()(),T(25,"tbody"),yt(26,h1,16,19,"tr",34),A()()()}if(a&2){let l=s.$implicit,i=$t(3),r=at();j(),H("ngIf",!(r.editCache[l.id]!=null&&r.editCache[l.id].edit))("ngIfElse",i),j(3),H("nzExpand",l.expand),j(8),H("nzShowPagination",!1)("nzData",l.details||pe(14,d1))("nzFrontPagination",!1)("nzPageSize",1e3)("nzLoading",l.loading),j(3),H("nzSortFn",!0),j(2),H("nzSortFn",!0),j(2),H("nzSortFn",!0),j(2),H("nzFilterFn",!0),j(2),H("nzSortFn",!0),j(3),H("ngForOf",l.details)}}var Ku=(()=>{let s=class s{onExpandChange(i,r){r?(this.expandSet.add(i),this.listOfDisplayData[i].expand=!0,this.listOfDisplayData[i].details||this.retireveCustomerOrders(i)):(this.expandSet.delete(i),this.listOfDisplayData[i].expand=!1)}constructor(i,r,o){this.appService=i,this.pdfGeneratorService=r,this.userService=o,this.currentOrganizationId=0,this.expandSet=new Set,this.listOfDisplayData=[],this.listOfColumn=[{title:"Name",compare:(h,p)=>h.name.localeCompare(p.name),priority:!1},{title:"Contact No",compare:(h,p)=>h.contact_no-p.contact_no,priority:2},{title:"Address",compare:(h,p)=>h.address.localeCompare(p.address),priority:3},{title:"Account No",compare:(h,p)=>h.account_no-p.account_no,priority:4},{title:"Action",compare:(h,p)=>h.account_no-p.account_no,priority:5}],this.listOfData=[],this.states=Si,this.stateNames=so,this.visible=!1,this.appPermissions=Hi,this.editCache={}}ngOnInit(){this.clientSubscription=this.appService.currentClient.subscribe(i=>{i&&i.id>0&&this.currentOrganizationId!=i.id&&(this.currentOrganizationId=i.id,this.populateCustomerData())})}printCard(i){this.makePdf("print",i)}generatePDF(i){this.makePdf("download",i)}makePdf(i,r){let o=this.listOfData[r];this.pdfGeneratorService.invoice={type:"customer",status:"",invoiceDetailLabel:"Client/Project Ledger",personName:o.name,address:o.address||"",contactNo:o.contact_no,date_created:new Date,terms:"",email:"",additionalDetails:" ",created_by:this.userService.loggedInUser,title:" Ledger"},this.pdfGeneratorService.generatePDF(i)}ngOnDestroy(){this.clientSubscription&&this.clientSubscription.unsubscribe()}retireveCustomerOrders(i){return Pt(this,null,function*(){this.listOfData[i].loading=!0;let r=yield this.appService.retireveSaleByCustomer(this.listOfData[i].id);this.listOfData[i].details=r,this.listOfData[i].loading=!1})}open(){this.visible=!0}close(i=!1){this.visible=!1,i&&this.populateCustomerData()}populateCustomerData(){return Pt(this,null,function*(){this.listOfData=yield this.appService.getOrganizationCustomers(),this.listOfDisplayData=this.listOfData,this.updateEditCache()})}startEdit(i){this.editCache[i].edit=!0}cancelEdit(i){this.editCache[i]={data:ce({},this.listOfDisplayData[i]),edit:!1}}saveEdit(i){return Pt(this,null,function*(){let r=this.listOfDisplayData.findIndex(o=>o.id===i);yield this.appService.updateCustomer({id:i,contact_no:this.editCache[i].data.contact_no,address:this.editCache[i].data.address,account_no:this.editCache[i].data.account_no,name:this.editCache[i].data.name}),this.editCache[i].edit=!1,Object.assign(this.listOfDisplayData[r],this.editCache[i].data),this.populateCustomerData()})}updateEditCache(){this.listOfDisplayData.forEach((i,r)=>{this.editCache[i.id]={edit:!1,data:ce({},i)}})}search(){this.searchVisible=!1,this.searchValue?(this.listOfDisplayData=this.listOfData.filter(i=>i.name&&i.name.toLowerCase().indexOf(this.searchValue.toLowerCase())>-1),console.log(this.listOfDisplayData)):this.listOfDisplayData=this.listOfData}};s.\u0275fac=function(r){return new(r||s)(Ct(Te),Ct(vr),Ct(on))},s.\u0275cmp=_e({type:s,selectors:[["app-customers"]],decls:22,vars:10,consts:[[1,"flex","space-between",2,"margin-bottom","5px"],[2,"display","-webkit-box","width","100%"],[2,"margin-right","5px"],[3,"nzSuffix"],["type","text","placeholder","Search here","nz-input","",3,"ngModel","ngModelChange","keyup"],["inputClearTpl",""],["suffixIconSearch",""],["nz-button","","nzType","primary",3,"nzSize","click",4,"appHasPermission"],[3,"visible","customers","closeDrawer",4,"ngIf"],["nzShowPagination","false",3,"nzPageSize","nzData"],["nestedTable","","editRowTable","","sortTable",""],[3,"width"],[3,"nzSortFn","nzSortPriority",4,"ngFor","ngForOf"],["ngFor","",3,"ngForOf"],["nz-icon","","class","ant-input-clear-icon","nzTheme","fill","nzType","close-circle"],["nz-icon","","nzTheme","fill","nzType","close-circle",1,"ant-input-clear-icon",3,"click"],["nz-icon","","nzType","search"],["nz-button","","nzType","primary",3,"nzSize","click"],["nz-icon","","nzType","plus"],[3,"visible","customers","closeDrawer"],[3,"nzSortFn","nzSortPriority"],[4,"ngIf","ngIfElse"],["editTemplate",""],[3,"nzExpand"],[1,"detailBar"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","download"],["nz-button","","nzType","primary",2,"margin-left","12px",3,"click"],["nz-icon","","nzType","printer"],[3,"nzShowPagination","nzData","nzFrontPagination","nzPageSize","nzLoading"],["nzColumnKey","id","nzWidth","20%",3,"nzSortFn"],["nzColumnKey","date_create","nzWidth","20%",3,"nzSortFn"],["nzColumnKey","state",3,"nzFilterFn"],["nzColumnKey","amount","nzWidth","20%",3,"nzSortFn"],[4,"ngFor","ngForOf"],[3,"nzExpand","nzExpandChange"],[4,"appHasPermission"],[3,"click"],["type","text","nz-input","",3,"ngModel","ngModelChange"],[1,"save",3,"click"],["nz-popconfirm","","nzPopconfirmTitle","Sure to cancel?",3,"nzOnConfirm"],["href","",3,"routerLink","queryParams"],["nz-button","","nzType","primary","nzShape","round",3,"className","nzDanger","nzSize"]],template:function(r,o){if(r&1&&(T(0,"div",0)(1,"span",1)(2,"h3",2),ct(3," Customers "),A(),T(4,"nz-input-group",3)(5,"input",4),Le("ngModelChange",function(p){return Oe(o.searchValue,p)||(o.searchValue=p),p}),bt("keyup",function(){return o.search()}),A()(),yt(6,Jb,2,1,"ng-template",null,5,Qt)(8,t1,1,0,"ng-template",null,6,Qt),A(),yt(10,e1,3,1,"button",7),A(),yt(11,i1,1,2,"app-create-customer-drawer",8),T(12,"nz-table",9,10)(16,"thead")(17,"tr"),_t(18,"th",11),yt(19,n1,2,3,"th",12),A()(),T(20,"tbody"),yt(21,u1,27,15,"ng-template",13),A()()),r&2){let h=$t(7),p=$t(9),x=$t(15);j(4),H("nzSuffix",p)("nzSuffix",h),j(),Pe("ngModel",o.searchValue),j(5),H("appHasPermission",o.appPermissions.AddCustomers),j(),H("ngIf",o.visible),j(),H("nzPageSize",1e3)("nzData",o.listOfDisplayData),j(6),H("width","2%"),j(),H("ngForOf",o.listOfColumn),j(2),H("ngForOf",x.data)}},dependencies:[rr,hi,We,ui,je,di,Ri,mi,dn,pr,wo,yn,_r,_n,vn,Xd,Sn,xn,bn,Kd,$d,pi,fi,dr,Zd,$u,er,tr]});let a=s;return a})();var rs=(()=>{let s=class s{canDeactivate(i){return i&&i.canDeactivate?i.canDeactivate():!0}};s.\u0275fac=function(r){return new(r||s)},s.\u0275prov=Ii({token:s,factory:s.\u0275fac,providedIn:"root"});let a=s;return a})();var Ml=Xs(Lx()),Zu=Xs(Yu()),Qu=Xs(Nx());function p1(a,s){if(a&1&&_t(0,"highcharts-chart",6),a&2){let l=at();H("Highcharts",l.Highcharts)("options",l.ganttChartOptions)("constructorType",l.chartConstructor)}}function f1(a,s){if(a&1&&(T(0,"nz-col",7),_t(1,"router-outlet"),A()),a&2){let l=at();H("nzSpan",!l.isMobile()&&l.showSide?16:0)}}function m1(a,s){a&1&&(Ce(0),_t(1,"router-outlet"),Ie())}function g1(a,s){if(a&1){let l=At();T(0,"div")(1,"nz-drawer",8),bt("nzOnClose",function(){zt(l);let r=at();return It(r.showSide=!1)}),yt(2,m1,2,0,"ng-container",9),A()()}if(a&2){let l=at();j(),H("nzVisible",l.showSide)}}(0,Qu.default)(Ml);var Ju=(()=>{let s=class s{constructor(i,r,o,h,p){this.appService=i,this.media=r,this.route=o,this.router=h,this.exportSheetService=p,this.apiUrl=lr.apiUrl,this.pendingInvoices=[],this.stateNames=Ge,this.chartConstructor="chart",this.Highcharts=Ml,this.paymentConfirmations=[],this.states=ti,this.stateColors=oo,this.stateCardColors=ao,this.taskTypeColors=or,this.partialPayments=[],this.showSide=!1,this.searchVisible=!1,this.searchValue="",this.tabs=["Task Request","Task Returns","Sale Requests","Sale Return"],this.listOfDisplayData={},this.taskStatesConnectivity=ar,this.ganttChartOptions={},this.showChart=!1,this.total=1,this.loading=!0,this.pageSize=10,this.pageIndex=1,this.filterStates=Object.keys(Ge).map(x=>({text:Ge[x],value:x})),this.title="angular-drag-drop-tutorial",this.todo=["Get to work","Pick up groceries","Go home","Fall asleep"],this.done=["Get up","Brush teeth","Take a shower","Check e-mail","Walk dog"],this.sortByValue=(x,I)=>x.value<I.value?-1:x.value>I.value?1:0,this.isMobile=this.appService.isMobile,(0,Zu.default)(Ml)}createGanttChart(){let i=this.pendingInvoices.map(o=>({name:o.task_no,start:new Date(o.start_date).getTime(),end:new Date(o.due_date).getTime()})),r=o=>{this.router.navigate(["/","task","report","task"],{queryParams:{PO:o.name},queryParamsHandling:"merge"}),this.showSide=!0};this.ganttChartOptions={chart:{type:"gantt",height:400},title:{text:"Tasks Timeline",align:"left",style:{fontSize:"12px",fontWeight:"bold"}},subtitle:{text:"",align:"left",style:{fontSize:"12px"}},credits:{enabled:!1},xAxis:{type:"datetime"},yAxis:{title:{text:"Tasks"},categories:i.map(o=>o.name)},series:[{type:"gantt",name:"Tasks",data:i.map(o=>({name:o.name,start:o.start,end:o.end,y:i.findIndex(h=>h.name===o.name)}))}],tooltip:{pointFormat:"<b>{point.name}</b>: {point.start:%e. %b %Y} - {point.end:%e. %b %Y}"},plotOptions:{series:{cursor:"pointer",point:{events:{click:function(){r(this)}}}}}},this.showChart=!0}groupByState(i){let r=i.reduce((o,h)=>(o[h.state]||(o[h.state]=[]),o[h.state].push(h),o),{});return Object.keys(this.states).forEach(o=>{let p=this.states[o];r[p]||(r[p]=[])}),r}loadTaskDataFromServer(i=1,r=1e3,o="id",h="asc",p=[]){this.loading=!0;let x=new ir().append("page",`${i}`).append("results",`${r}`).append("sortField",`${o}`).append("sortOrder",`${h}`);p.forEach(I=>{I.value.forEach(P=>{x=x.append(I.key,P)})}),this.getAndSetTaskOrders(x)}drop(i){i.previousContainer===i.container?Dr(i.container.data,i.previousIndex,i.currentIndex):(Fo(i.previousContainer.data,i.container.data,i.previousIndex,i.currentIndex),this.updateDetails(i.container.data[i.currentIndex].id,ti[i.container.id]))}updateDetails(i,r){return Pt(this,null,function*(){let o={id:i,state:r},h=yield this.appService.updateTaskRequest(o)})}onTaskQueryParamsChange(i){console.log(i);let{pageSize:r,pageIndex:o,sort:h,filter:p}=i;if(this.sort&&this.appService.areArraysDifferent(this.sort,h)){this.sort=h,this.listOfDisplayData=this.groupByState(this.appService.sortDataArray(this.listOfDisplayData,this.sort));return}this.sort=h;let x=h.find(et=>et.value!==null),I=x&&x.key||null,P=x&&x.value||null;this.loadTaskDataFromServer(o,r,I,P,p)}getInitials(i){return i?i.split(" ").map(o=>o[0]).join("").toUpperCase():""}export(){let i=this.listOfDisplayData;this.exportSheetService.exportDataToXLSX(i,"Task Request")}ngOnInit(){this.clientSubscription=this.appService.currentClient.subscribe(i=>{i&&i.id>0&&this.currentOrganizationId!=i.id&&(this.currentOrganizationId&&this.router.navigate(["/","task","report"],{queryParams:{PO:null},queryParamsHandling:"merge"}),this.currentOrganizationId=i.id,this.showSide=!1,this.route.queryParams.subscribe(r=>Pt(this,null,function*(){r.PO?this.showSide=!0:(this.showSide=!1,this.onTaskQueryParamsChange({pageIndex:0,pageSize:0,sort:[],filter:[]}))})))})}ngOnDestroy(){this.clientSubscription&&this.clientSubscription.unsubscribe()}ngAfterViewInit(){}getAndSetTaskOrders(i){return Pt(this,null,function*(){this.pendingInvoices=yield this.appService.retireveTaskByState(i),this.listOfDisplayData=this.groupByState([...this.pendingInvoices]),this.loading=!1,this.total=this.pendingInvoices.length,this.createGanttChart()})}reset(){this.searchValue="",this.search()}search(){this.searchVisible=!1,this.searchValue?(this.listOfDisplayData=this.pendingInvoices.filter(i=>i.title&&i.title.toLowerCase().indexOf(this.searchValue.toLowerCase())>-1||i.project_name&&i.project_name.toLowerCase().indexOf(this.searchValue.toLowerCase())>-1),console.log(this.listOfDisplayData)):this.listOfDisplayData=this.pendingInvoices}};s.\u0275fac=function(r){return new(r||s)(Ct(Te),Ct(cr),Ct(Ti),Ct(ki),Ct(xr))},s.\u0275cmp=_e({type:s,selectors:[["app-report"]],decls:6,vars:4,consts:[[2,"height","100%"],[2,"height","100%","overflow-y","auto",3,"nzSpan"],["nz-row",""],["style","width: 100%;display: block;",3,"Highcharts","options","constructorType",4,"ngIf"],["class","sidebarright",3,"nzSpan",4,"ngIf"],[4,"ngIf"],[2,"width","100%","display","block",3,"Highcharts","options","constructorType"],[1,"sidebarright",3,"nzSpan"],["nzWidth","100%","nzPlacement","right",3,"nzVisible","nzTitle","nzExtra","nzOnClose"],[4,"nzDrawerContent"]],template:function(r,o){r&1&&(T(0,"nz-row",0)(1,"nz-col",1)(2,"div",2),yt(3,p1,1,3,"highcharts-chart",3),A()(),yt(4,f1,2,1,"nz-col",4),A(),yt(5,g1,3,1,"div",5)),r&2&&(j(),H("nzSpan",!o.isMobile()&&o.showSide?8:24),j(2),H("ngIf",o.showChart),j(),H("ngIf",!o.isMobile()&&o.showSide),j(),H("ngIf",o.isMobile()&&o.showSide))},dependencies:[nr,We,pn,un,He,Ue,Qd],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{width:50%;background-color:#6495ed;color:#fff;display:flex;justify-content:center;align-items:center;cursor:move;padding:1em;transition:transform .2s ease-in-out}.container[_ngcontent-%COMP%]   .item.cdk-drag-preview[_ngcontent-%COMP%]{opacity:.8;background-color:orange;box-shadow:0 4px 8px #0000001a}"]});let a=s;return a})();var _1=[{path:"",data:{name:" "},children:[{path:"list",component:pu,data:{name:" ",permission:Hi.InventoryUpdates},canActivate:[Pn],children:[{path:"task",component:To,data:{name:" ",permission:Hi.AddTaskRequest},canActivate:[Pn],canDeactivate:[rs]}]},{path:"board",component:Xu,data:{name:" ",permission:Hi.ManageTasks},canActivate:[Pn],children:[{path:"task",component:To,data:{name:" ",permission:Hi.AddTaskRequest},canActivate:[Pn],canDeactivate:[rs]}]},{path:"report",component:Ju,data:{name:" ",permission:Hi.ManageTasks},canActivate:[Pn],children:[{path:"task",component:To,data:{name:" ",permission:Hi.AddTaskRequest},canActivate:[Pn],canDeactivate:[rs]}]},{path:"sale",component:hu,data:{name:" "},canDeactivate:[rs]},{path:"customers",component:Ku,data:{name:" "}}]}],tp=(()=>{let s=class s{};s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=Gi({type:s}),s.\u0275inj=ji({imports:[gl.forChild(_1),gl]});let a=s;return a})();var ep=Ed,v1=Object.keys(ep).map(a=>ep[a]),WC=(()=>{let s=class s{};s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=Gi({type:s}),s.\u0275inj=ji({providers:[{provide:Ad,useValue:Md},{provide:Rd,useValue:v1}],imports:[tp,Dd,Yd,Fd,iu,Nd,eu,ju,Jd]});let a=s;return a})();export{WC as TaskModule};
