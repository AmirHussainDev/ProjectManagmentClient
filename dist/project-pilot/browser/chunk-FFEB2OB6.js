import{a as dt}from"./chunk-NGE6N3H6.js";import{$ as f,Cb as k,Da as P,Ea as s,Eb as V,G as C,Gb as D,Hd as ft,K as w,L as M,Oc as at,Qb as L,R as d,S as g,Sb as A,Tb as R,Ub as B,Uc as st,Va as b,Vb as G,Vc as mt,Wb as U,X as S,Xb as Z,Xc as pt,Yb as J,Yc as lt,Zb as W,Zc as ct,_ as p,cb as O,dc as q,f as y,fa as u,fb as I,fc as H,hc as z,ia as m,ic as K,jc as $,mb as N,nb as v,nc as Q,oc as X,qb as T,ra as e,rc as Y,sa as i,sb as E,ta as l,tb as F,tc as tt,ub as j,uc as et,vc as it,wc as ot,xa as x,xc as nt,ya as h,yc as rt,za as _}from"./chunk-RYV5VKQF.js";function vt(t,ht){if(t&1){let o=x();e(0,"span",24),h("click",function(){d(o);let r=_();return g(r.passwordVisible=!r.passwordVisible)}),i()}if(t&2){let o=_();m("nzType",o.passwordVisible?"eye-invisible":"eye")}}function zt(t,ht){t&1&&(e(0,"nz-form-item")(1,"nz-form-control",25),l(2,"nz-alert",26),i()()),t&2&&(p(),m("nzSpan",24))}var gt=(()=>{class t{constructor(o,n,r,a,c){this.fb=o,this.http=n,this.platformId=r,this.router=a,this.appService=c,this.appurl=D.apiUrl,this.organization_id=0,this.showErrorMessage=!1,this.passwordVisible=!1,this.validateForm=this.fb.group({username:["",[z.required]],password:["",[z.required]],remember:[!0]}),v(this.platformId)&&(this.organization_id=parseInt(localStorage.getItem("organization_id")||""))}submitForm(){return y(this,null,function*(){this.showErrorMessage=!1;try{if(this.validateForm.valid){console.log("submit",this.validateForm.value);let o=20,n=this.validateForm.value.password||"",r=this.validateForm.value.username||"",a=yield this.http.post(`${this.appurl}/auth/login`,{organization_id:this.organization_id,username:r,password:n}).toPromise();if(v(this.platformId)&&a.access_token){localStorage.setItem("token",a.access_token),localStorage.setItem("user",JSON.stringify(a.user)),localStorage.setItem("permissions",JSON.stringify(a.user.role_permissions)),localStorage.setItem("client_id",JSON.stringify(a.user.client_id));let c=localStorage.getItem("redirectUrl");this.router.navigateByUrl(c&&c?.indexOf("login")==-1?c:"/")}}else Object.values(this.validateForm.controls).forEach(o=>{o.invalid&&(o.markAsDirty(),o.updateValueAndValidity({onlySelf:!0}),this.showErrorMessage=!0)})}catch{this.showErrorMessage=!0}})}static{this.\u0275fac=function(n){return new(n||t)(f(tt),f(T),f(S),f(k),f(L))}}static{this.\u0275cmp=w({type:t,selectors:[["app-login"]],decls:42,vars:6,consts:[["suffixTemplate",""],[1,"app-login"],[1,"flex","space-around"],["src","../../../assets/e (1).gif",1,"app-logo"],[1,"text-center","p4"],["nz-form","",1,"login-form",3,"ngSubmit","formGroup"],["nzErrorTip","Please input your username!"],["nzPrefixIcon","user"],["type","text","nz-input","","formControlName","username","placeholder","username"],["nzErrorTip","Please input your Password!"],["nzPrefixIcon","lock",3,"nzSuffix"],["nz-input","","formControlName","password","placeholder","Password",3,"type"],[4,"ngIf"],["nz-row","",1,"login-form-margin"],["nz-col","",3,"nzSpan"],["nz-checkbox","","formControlName","remember"],["nz-button","",1,"login-form-button","login-form-margin",3,"nzType"],[1,"rotatingText"],[1,"rotatingText-content"],[1,"rotatingText-description"],[1,"rotatingText-adjective"],["href","https://twitter.com/KeenanPayne_","title","Follow me on Twitter","target","_blank",1,"twitter"],["src","https://assets.codepen.io/174608/twitter.svg"],["src","../../../assets/LoginImage.png",1,"loginPageBg"],["nz-icon","",3,"click","nzType"],[3,"nzSpan"],["nzType","error","nzMessage","Incorrect credentials !"]],template:function(n,r){if(n&1){let a=x();e(0,"div",1)(1,"span",2),l(2,"img",3),i(),e(3,"h2",4),s(4," Welcome Back!"),i(),e(5,"form",5),h("ngSubmit",function(){return d(a),g(r.submitForm())}),e(6,"nz-form-item")(7,"nz-form-control",6)(8,"nz-input-group",7),l(9,"input",8),i()()(),e(10,"nz-form-item")(11,"nz-form-control",9)(12,"nz-input-group",10),l(13,"input",11),i(),u(14,vt,1,1,"ng-template",null,0,b),i()(),u(16,zt,3,1,"nz-form-item",12),e(17,"div",13)(18,"div",14)(19,"label",15)(20,"span"),s(21,"Remember me"),i()()()(),e(22,"button",16),s(23,"Log in"),i()()(),e(24,"section",17)(25,"div",18)(26,"p",19),s(27," Organize your projects\u2026 "),i(),e(28,"h5",20),s(29,"efficiently"),i(),e(30,"h5",20),s(31,"seamlessly"),i(),e(32,"h5",20),s(33,"successfully"),i(),e(34,"h5",20),s(35,"Achieve more with less effort. "),l(36,"br"),s(37," Start managing your projects like a pro today!"),i()()(),e(38,"a",21),l(39,"img",22),i(),e(40,"div"),l(41,"img",23),i()}if(n&2){let a=P(15);p(5),m("formGroup",r.validateForm),p(7),m("nzSuffix",a),p(),m("type",r.passwordVisible?"text":"password"),p(3),m("ngIf",r.showErrorMessage),p(2),m("nzSpan",12),p(4),m("nzType","primary")}},dependencies:[I,Q,H,K,$,X,Y,q,Z,G,U,at,B,mt,st,lt,pt,ct,ot,rt,nt],styles:[".login-form[_ngcontent-%COMP%]{max-width:300px}.login-form-margin[_ngcontent-%COMP%]{margin-bottom:16px}.login-form-forgot[_ngcontent-%COMP%]{float:right}.login-form-button[_ngcontent-%COMP%]{width:100%}.app-login[_ngcontent-%COMP%]{background:#fff;padding:32px;margin:50px;border-radius:12px;z-index:1000;position:relative}.app-logo[_ngcontent-%COMP%]{width:120px}@media (min-width:600px){.app-login[_ngcontent-%COMP%]{background:#fff;padding:32px;margin:50px;border-radius:12px;z-index:1000;position:relative;left:-40%}}@media (max-width:600px){.app-login[_ngcontent-%COMP%]{top:84px}.app-logo[_ngcontent-%COMP%]{width:40px}}.loginPageBg[_ngcontent-%COMP%]{position:fixed;bottom:0;right:0}.rotatingText[_ngcontent-%COMP%]{color:#fff8dc;text-shadow:0 0 3px #4e45a7,0 0 5px #000000;height:100vh;text-align:center;position:absolute;top:1%;right:20px;min-width:330px;display:flex;justify-content:end;z-index:2}@media (min-width: 768px){.rotatingText[_ngcontent-%COMP%]{font-size:18px;min-width:430px;top:10%!important}}.rotatingText-content[_ngcontent-%COMP%]{position:relative;width:100%}.rotatingText-description[_ngcontent-%COMP%]{font-family:Georgia,serif;font-style:italic;font-size:14px;margin:0}@media (min-width: 768px){.rotatingText-description[_ngcontent-%COMP%]{font-size:18px}}.rotatingText-adjective[_ngcontent-%COMP%]{color:#fff8dc;font-size:14px;text-shadow:0 0 3px #4e45a7,0 0 5px #000000;font-family:monospace;left:0;margin-bottom:0;margin-top:30px;opacity:0;position:absolute;right:0;text-align:center;text-transform:uppercase;top:0}@media (min-width: 768px){.rotatingText-adjective[_ngcontent-%COMP%]{font-size:20px}}.rotatingText-adjective[_ngcontent-%COMP%]:nth-of-type(1){animation:_ngcontent-%COMP%_rotate-text-up 1.5s .75s}.rotatingText-adjective[_ngcontent-%COMP%]:nth-of-type(2){animation:_ngcontent-%COMP%_rotate-text-up 1.5s 2s}.rotatingText-adjective[_ngcontent-%COMP%]:nth-of-type(3){animation:_ngcontent-%COMP%_fade-text-in 1.5s 3.25s}.rotatingText-adjective[_ngcontent-%COMP%]:nth-of-type(4){animation:_ngcontent-%COMP%_fade-text-in 1.5s 5.25s forwards}@keyframes _ngcontent-%COMP%_rotate-text-up{0%{transform:translate3d(0,80px,0);opacity:0}20%,80%{transform:translateZ(0);opacity:1}to{transform:translate3d(0,-40px,0);opacity:0}}@keyframes _ngcontent-%COMP%_fade-text-in{0%{opacity:0;transform:translate3d(0,80px,0)}50%,to{opacity:1;transform:translateZ(0)}}.twitter[_ngcontent-%COMP%]{bottom:0;position:fixed;right:0;width:50px}"]})}}return t})();var ut=[{path:"",component:gt}];O(dt);var xt=A,yt=Object.keys(xt).map(t=>xt[t]),oe=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=M({type:t})}static{this.\u0275inj=C({providers:[V(ut),{provide:W,useValue:J},{provide:R,useValue:yt},E(F(),j())],imports:[N,et,it,ft]})}}return t})();export{oe as a};
