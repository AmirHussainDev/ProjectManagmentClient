import{C as a,Fa as m,Ia as h,Qa as y,b as d,c as l,y as c}from"./chunk-ALXNCXXS.js";import{a as g,b as p,g as e}from"./chunk-MON7YFGF.js";var z={production:!1,apiUrl:"/api",allowMixedContent:!0};var S=(()=>{let n=class n{constructor(t,r){this.router=t,this.http=r,this.loggedInUser={}}logout(){localStorage.setItem("user","{}"),localStorage.setItem("token",""),this.router.navigate(["/login"])}getUserDetails(){if(localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user")||"{}"))return this.loggedInUser=JSON.parse(localStorage.getItem("user")||"{}"),this.loggedInUser}getOrganizationUsers(){return e(this,null,function*(){try{let t=localStorage.getItem("organization_id");return yield this.http.get(`/api/users/${t}`).toPromise()}catch(t){throw console.error("Error fetching organization users:",t),t}})}createUser(t){return e(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.post("/api/users",t).toPromise()}catch(r){throw console.error("Error fetching organization users:",r),r}})}updateUser(t){return e(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.put("/api/users",t).toPromise()}catch(r){throw console.error("Error fetching organization users:",r),r}})}};n.\u0275fac=function(r){return new(r||n)(a(y),a(h))},n.\u0275prov=c({token:n,factory:n.\u0275fac,providedIn:"root"});let i=n;return i})();var q=(()=>{let n=class n{constructor(t,r){this.http=t,this.userService=r,this.apiUrl=z.apiUrl,this.sites=new d,this.currentSite=new d,this.currentSiteId=0,this.currentSubOrgId=0,this.currentSubOrganization=new l({id:0,organization_id:0,name:""}),this.header=new m({accept:"application/json"})}getAndSetSites(){let t=localStorage.getItem("organization_id");return this.http.get(`/api/sites/${t}/${this.currentSubOrgId}`,{headers:this.header}).toPromise()}setSites(t){this.sites.next(t)}setCurrentSite(t){this.currentSite.next(t)}setSubOrganization(t){this.currentSubOrgId=t.id,this.currentSubOrganization.next(t)}getSubOrganizations(t=!1){return e(this,null,function*(){try{let r=localStorage.getItem("organization_id"),s=yield this.http.get(`/api/organizations/${r}`).toPromise();if(s&&s.length&&t&&localStorage.getItem("sub_organization_id")){let u=s.find(w=>w.id==(localStorage.getItem("sub_organization_id")||0));this.setSubOrganization(u||{id:0,name:"",organization_id:r||0})}return s}catch(r){throw console.error("Error fetching organization users:",r),r}})}createRole(t){return e(this,null,function*(){try{return yield this.http.post("/api/role-permissions",t).toPromise()}catch(r){throw console.error("Error fetching organization users:",r),r}})}updateRole(t){return e(this,null,function*(){try{return yield this.http.put("/api/role-permissions",t).toPromise()}catch(r){throw console.error("Error fetching organization users:",r),r}})}createVendor(t,r){return e(this,null,function*(){try{let o=new FormData;o.append("name",t),o.append("file",r);let s=localStorage.getItem("organization_id");return yield this.http.post(`/api/organizations/vendor/${s}`,o).toPromise()}catch(o){throw console.error("Error creating organization vendor:",o),o}})}updateVendor(t){return e(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.put(`/api/organizations/vendor/${r}/${t.id}`,t).toPromise()}catch(r){throw console.error("Error updating organization vendor:",r),r}})}getVendors(){return e(this,null,function*(){try{let t=localStorage.getItem("organization_id");return yield this.http.get(`/api/organizations/vendor/${t}`,{headers:this.header}).toPromise()}catch(t){throw console.error("Error fetching roles",t),t}})}getVendorItems(t){return e(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.get(`/api/organizations/vendor-items/${r}/${t}`,{headers:this.header}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}addVendorItem(t,r){return e(this,null,function*(){try{let o=localStorage.getItem("organization_id");return yield this.http.post(`/api/organizations/vendor-item/${o}/${t}`,{name:r},{headers:this.header}).toPromise()}catch(o){throw console.error("Error fetching roles",o),o}})}getSites(){return e(this,null,function*(){try{let t=localStorage.getItem("organization_id");return yield this.http.get(`/api/Sites/${t}/${this.currentSubOrgId}`,{headers:this.header}).toPromise()}catch(t){throw console.error("Error fetching roles",t),t}})}getRolesAndPermissions(){return e(this,null,function*(){try{let t=localStorage.getItem("organization_id");return yield this.http.get(`/api/role-permissions/${t}`,{headers:this.header}).toPromise()}catch(t){throw console.error("Error fetching roles",t),t}})}getRoles(){return e(this,null,function*(){try{let t=localStorage.getItem("organization_id");return yield this.http.get(`/api/role-permissions/roles/${t}`,{headers:this.header}).toPromise()}catch(t){throw console.error("Error fetching roles",t),t}})}getAndSetUserDefaultSubOrganization(){return e(this,null,function*(){try{let t=localStorage.getItem("organization_id"),r=localStorage.getItem("sub_organization_id"),s=yield this.http.get(`/api/organizations/${t}/${r}`,{headers:this.header}).toPromise();this.currentSubOrganization.next(s),this.currentSubOrgId=s.id}catch(t){throw console.error("Error fetching roles",t),t}})}addSaleRequest(t){return e(this,null,function*(){try{return yield this.http.post("/api/inventory-purchase/sale",t,{headers:this.header}).toPromise()}catch(r){throw console.error("Error posting purchase request",r),r}})}updateSaleRequest(t){return e(this,null,function*(){try{return yield this.http.put("/api/inventory-purchase/sale",t,{headers:this.header}).toPromise()}catch(r){throw console.error("Error posting purchase request",r),r}})}addPurchaseRequest(t){return e(this,null,function*(){try{return yield this.http.post("/api/inventory-purchase",t,{headers:this.header}).toPromise()}catch(r){throw console.error("Error posting purchase request",r),r}})}updatePurchaseRequest(t){return e(this,null,function*(){try{return yield this.http.put("/api/inventory-purchase",t,{headers:this.header}).toPromise()}catch(r){throw console.error("Error posting purchase request",r),r}})}retirevePOByState(t){return e(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.get(`/api/inventory-purchase/purchase-request-by-filter/${r}/${this.currentSubOrgId}`,{headers:this.header,params:t}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}retireveSaleByState(t){return e(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.get(`/api/inventory-purchase/sale-request-by-filter/${r}/${this.currentSubOrgId}`,{headers:this.header,params:t}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}retirevePOById(t){return e(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.get(`/api/inventory-purchase/purchase-request-by-id/${r}/${t}`,{headers:this.header}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}retireveSaleById(t){return e(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.get(`/api/inventory-purchase/sale-request-by-id/${r}/${t}`,{headers:this.header}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}getInventoryBySubOrganization(t){return e(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.get(`/api/inventory-purchase/inventory/${r}/${t}`,{headers:this.header}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}getInventory(t=0){return e(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.get(`/api/inventory-purchase/inventory/${r}/${t||this.currentSubOrgId}`,{headers:this.header}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}getInventoryItemDetails(t){return e(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.get(`/api/inventory-purchase/inventory-item-details/${r}/${this.currentSubOrgId}?name=${t}`,{headers:this.header}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}addInventory(t){return e(this,null,function*(){try{t=p(g({},t),{organization_id:localStorage.getItem("organization_id"),sub_organization_id:this.currentSubOrgId});let r=localStorage.getItem("organization_id");return yield this.http.post("/api/inventory-purchase/inventory",t,{headers:this.header}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}findObjectDifferences(t,r){let o={};for(let s in t)t.hasOwnProperty(s)&&r.hasOwnProperty(s)&&t[s]!==r[s]&&(o[s]=t[s]);for(let s in r)r.hasOwnProperty(s)&&(!t.hasOwnProperty(s)||t[s]!==r[s])&&(o[s]=r[s]);return o}createContract(t){return e(this,null,function*(){try{return yield this.http.post("/api/contractors",t,{headers:this.header}).toPromise()}catch(r){throw console.error("Error posting purchase request",r),r}})}retireveContracts(t){return e(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.get(`/api/contractors/${r}/${this.currentSubOrgId}`,{headers:this.header,params:t}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}retireveContractById(t){return e(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.get(`/api/contractors/contract/${r}/${t}`,{headers:this.header}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}updateContractRequest(t){return e(this,null,function*(){try{return yield this.http.put("/api/contractors/contract",t,{headers:this.header}).toPromise()}catch(r){throw console.error("Error posting purchase request",r),r}})}createSite(t){return e(this,null,function*(){try{let r=p(g({},t),{organization:parseInt(localStorage.getItem("organization_id")||"0"),subOrganization:this.currentSubOrgId,created_by:this.userService.loggedInUser.id});return yield this.http.post("/api/Sites",r,{headers:this.header}).toPromise()}catch(r){throw console.error("Error posting purchase request",r),r}})}retireveSites(t){return e(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.get(`/api/contractors/${r}/${this.currentSubOrgId}`,{headers:this.header,params:t}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}retireveSiteById(t){return e(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.get(`/api/Sites/${r}/${this.currentSubOrgId}/${t}`,{headers:this.header}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}updateSiteRequest(t){return e(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.put(`/api/Sites/${r}/${this.currentSubOrgId}/${t.id}`,t,{headers:this.header}).toPromise()}catch(r){throw console.error("Error posting purchase request",r),r}})}};n.\u0275fac=function(r){return new(r||n)(a(h),a(S))},n.\u0275prov=c({token:n,factory:n.\u0275fac,providedIn:"root"});let i=n;return i})();export{z as a,S as b,q as c};
