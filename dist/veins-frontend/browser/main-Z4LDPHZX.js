import{a as ce}from"./chunk-22B2H7LM.js";import{a as le}from"./chunk-TXA4HMSN.js";import"./chunk-NGE6N3H6.js";import{b as ae}from"./chunk-EQYIHIT4.js";import"./chunk-TBYNJ2CG.js";import{a as se}from"./chunk-YVG2UGZ2.js";import"./chunk-MI2CZ2YP.js";import{$a as N,Ba as T,Ca as $,D as u,Da as q,E as g,F as V,G as w,H as c,J as z,Ka as J,L as H,La as E,Mc as R,Na as Y,Oa as Q,Pa as X,Qa as ee,R as _,Sa as te,Ta as re,Xa as oe,a as D,ba as Z,bb as ne,ca as K,da as G,db as ie,g as F,h as S,i as x,j as l,k as U,l as O,m as P,n as k,o as m,p as h,q as p,r as W,s as L,t as b,u as C,w as B,x as d}from"./chunk-LS5T5ZRO.js";var Ee=[{path:"",loadChildren:()=>import("./chunk-OWY772HX.js").then(t=>t.ShellModule),canActivate:[se]},{path:"login",loadChildren:()=>import("./chunk-WPPR2DX4.js").then(t=>t.LoginModule)}],pe=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=d({type:e}),e.\u0275inj=g({imports:[N.forRoot(Ee),N]});let t=e;return t})();var ue=(()=>{let e=class e{constructor(){this.title="Veins"}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=B({type:e,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"main"],[1,"content"]],template:function(o,i){o&1&&(Z(0,"main",0)(1,"div",1),G(2,"router-outlet"),K()())},dependencies:[oe],styles:[`[_nghost-%COMP%] {
    font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
      Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
      "Segoe UI Symbol";
    box-sizing: border-box;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  

  .content[_ngcontent-%COMP%] {
    display: flex;
    width: 100%;
    justify-content: center;
    margin-bottom: 3rem;
    margin: auto;
  }

  @media screen and (max-width: 650px) {
    .content[_ngcontent-%COMP%] {
      flex-direction: column;
      width: 100%;
    }
  }`]});let t=e;return t})();var A=(()=>{let e=class e{constructor(r,o){this.http=r,this.platformId=o}fetchIntegrationDetails(){return this.http.get("/api/organizations").toPromise().then(r=>{E(this.platformId)&&(localStorage.setItem("organizations",JSON.stringify(r)),r&&r.length&&r.some(o=>o.domain_name==location.hostname)&&(localStorage.setItem("organization",r.find(o=>o.domain_name==location.hostname)),localStorage.setItem("organization_id",r.find(o=>o.domain_name==location.hostname).id),console.log("organization found")))})}};e.\u0275fac=function(o){return new(o||e)(c(Q),c(w))},e.\u0275prov=u({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var M="Service workers are disabled or not supported by this browser";function ye(t){return O(()=>x(new Error(t)))}var v=class{constructor(e){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=ye(M);else{let r=P(e,"controllerchange").pipe(l(()=>e.controller)),o=O(()=>S(e.controller)),i=U(o,r);this.worker=i.pipe(h(f=>!!f)),this.registration=this.worker.pipe(b(()=>e.getRegistration()));let j=P(e,"message").pipe(l(f=>f.data)).pipe(h(f=>f&&f.type)).pipe(L());j.connect(),this.events=j}}postMessage(e,n){return this.worker.pipe(p(1),C(r=>{r.postMessage(D({action:e},n))})).toPromise().then(()=>{})}postMessageWithOperation(e,n,r){let o=this.waitForOperationCompleted(r),i=this.postMessage(e,n);return Promise.all([i,o]).then(([,a])=>a)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let n;return typeof e=="string"?n=r=>r.type===e:n=r=>e.includes(r.type),this.events.pipe(h(n))}nextEventOfType(e){return this.eventsOfType(e).pipe(p(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(h(n=>n.nonce===e),p(1),l(n=>{if(n.result!==void 0)return n.result;throw new Error(n.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},de=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(r){if(this.sw=r,this.pushManager=null,this.subscriptionChanges=new F,!r.isEnabled){this.messages=m,this.notificationClicks=m,this.subscription=m;return}this.messages=this.sw.eventsOfType("PUSH").pipe(l(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(l(i=>i.data)),this.pushManager=this.sw.registration.pipe(l(i=>i.pushManager));let o=this.pushManager.pipe(b(i=>i.getSubscription()));this.subscription=k(o,this.subscriptionChanges)}requestSubscription(r){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(M));let o={userVisibleOnly:!0},i=this.decodeBase64(r.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),a=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)a[s]=i.charCodeAt(s);return o.applicationServerKey=a,this.pushManager.pipe(b(s=>s.subscribe(o)),p(1)).toPromise().then(s=>(this.subscriptionChanges.next(s),s))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(M));let r=o=>{if(o===null)throw new Error("Not subscribed to push notifications.");return o.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(p(1),b(r)).toPromise()}decodeBase64(r){return atob(r)}};e.\u0275fac=function(o){return new(o||e)(c(v))},e.\u0275prov=u({token:e,factory:e.\u0275fac});let t=e;return t})(),ge=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(r){if(this.sw=r,!r.isEnabled){this.versionUpdates=m,this.unrecoverable=m;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(M));let r=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:r},r)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(M));let r=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:r},r)}};e.\u0275fac=function(o){return new(o||e)(c(v))},e.\u0275prov=u({token:e,factory:e.\u0275fac});let t=e;return t})();var fe=new V("");function Ie(t,e,n,r){return()=>{if(!(E(r)&&"serviceWorker"in navigator&&n.enabled!==!1))return;navigator.serviceWorker.addEventListener("controllerchange",()=>{navigator.serviceWorker.controller!==null&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})});let o;if(typeof n.registrationStrategy=="function")o=n.registrationStrategy();else{let[a,...s]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":o=S(null);break;case"registerWithDelay":o=me(+s[0]||0);break;case"registerWhenStable":o=s[0]?k(he(t),me(+s[0])):he(t);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}t.get(_).runOutsideAngular(()=>o.pipe(p(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:n.scope}).catch(a=>console.error("Service worker registration failed with:",a))))}}function me(t){return S(null).pipe(W(t))}function he(t){return t.get($).isStable.pipe(h(n=>n))}function Me(t,e){return new v(E(e)&&t.enabled!==!1?navigator.serviceWorker:void 0)}var I=class{};function Se(t,e={}){return z([de,ge,{provide:fe,useValue:t},{provide:I,useValue:e},{provide:v,useFactory:Me,deps:[I,w]},{provide:T,useFactory:Ie,deps:[H,fe,I,w],multi:!0}])}var ve=(()=>{let e=class e{static register(r,o={}){return{ngModule:e,providers:[Se(r,o)]}}};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=d({type:e}),e.\u0275inj=g({providers:[de,ge]});let t=e;return t})();var be=(()=>{let e=class e{constructor(r){this.userService=r}intercept(r,o){let i=localStorage.getItem("token")?.toString(),a=r.clone({setHeaders:{Authorization:`Bearer ${i}`}});return o.handle(a).pipe(C(s=>{s instanceof Y},s=>{switch(s.status){case 401:this.userService.logout();break;case 500:break;case 600:break}console.error("Error Response:",s)}))}};e.\u0275fac=function(o){return new(o||e)(c(ne))},e.\u0275prov=u({token:e,factory:e.\u0275fac});let t=e;return t})();var Ce=t=>()=>t.fetchIntegrationDetails(),we=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=d({type:e,bootstrap:[ue]}),e.\u0275inj=g({providers:[A,{provide:T,useFactory:Ce,deps:[A],multi:!0},{provide:X,useClass:be,multi:!0}],imports:[J,re,ie,pe,ce,le,ee,R,ae,ve.register("ngsw-worker.js",{enabled:!q(),registrationStrategy:"registerWhenStable:30000"}),R]});let t=e;return t})();te().bootstrapModule(we).catch(t=>console.error(t));
