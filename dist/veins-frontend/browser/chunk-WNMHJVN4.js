import{$ as s,Bb as M,Cb as D,D as g,Da as v,Db as T,K as i,L as d,Q as z,R as t,Vb as I,Wb as A,Xb as j,Zb as V,_ as o,_a as S,_b as G,aa as c,ea as h,eb as P,fb as y,gb as m,hb as C,ib as N,ka as l,mc as L,nb as F,nc as R,qb as b,r as w,rb as _,rc as $,vb as E}from"./chunk-3TINHIPJ.js";import{g as f}from"./chunk-MON7YFGF.js";function k(p,n){p&1&&(o(0,"nz-form-item")(1,"nz-form-control",7),c(2,"nz-alert",9),s()()),p&2&&(i(),t("nzSpan",14))}var oe=(()=>{let n=class n{constructor(a,r,e,u){this.fb=a,this.modal=r,this.userService=e,this.notification=u,this.data=g(L),this.updating=!1}ngOnInit(){console.log(this.data),this.changePasswordForm=this.fb.group({password:["",[m.required,m.minLength(6),m.pattern(/^(?=.*[A-Z])(?=.*[!@#$&*]).+$/)]],changePassword:["",[m.required,m.minLength(6),m.pattern(/^(?=.*[A-Z])(?=.*[!@#$&*]).+$/)]]},{validators:this.passwordsMatchValidator()})}passwordsMatchValidator(){return a=>{let r=a.get("password")?.value,e=a.get("changePassword")?.value;return r&&e&&r!==e?{passwordsMismatch:!0}:null}}onSubmit(){return f(this,null,function*(){try{this.changePasswordForm.valid?(this.updating=!0,yield this.userService.createPassword({id:this.data.user.id,password:this.changePasswordForm.getRawValue().password}),this.notification.create("success","Password changed successfully",""),console.log("Form Submitted",this.changePasswordForm.value),this.modal.close(this.changePasswordForm.value)):console.log("Form is invalid")}catch{}finally{this.updating=!1}})}onCancel(){this.modal.destroy()}get password(){return this.changePasswordForm.get("password")}get changePassword(){return this.changePasswordForm.get("changePassword")}get passwordsMismatch(){return this.changePasswordForm.hasError("passwordsMismatch")}};n.\u0275fac=function(r){return new(r||n)(d(_),d(R),d(S),d($))},n.\u0275cmp=w({type:n,selectors:[["app-change-password"]],decls:16,vars:9,consts:[[3,"formGroup","ngSubmit"],["nzRequired","",3,"nzSpan"],["nzErrorTip","Please enter a valid password",3,"nzSpan"],["nz-input","","type","password","formControlName","password","placeholder","Enter your password"],[3,"nzSpan","nzErrorTip"],["nz-input","","type","password","formControlName","changePassword","placeholder","Enter new password"],[4,"ngIf"],[3,"nzSpan"],["nz-button","","nzType","primary",3,"disabled","click"],["nzType","error","nzMessage","Passwords must match"]],template:function(r,e){r&1&&(o(0,"nz-form",0),h("ngSubmit",function(){return e.onSubmit()}),o(1,"nz-form-item")(2,"nz-form-label",1),l(3,"Password"),s(),o(4,"nz-form-control",2),c(5,"input",3),s()(),o(6,"nz-form-item")(7,"nz-form-label",1),l(8,"Change Password"),s(),o(9,"nz-form-control",4),c(10,"input",5),s()(),z(11,k,3,1,"nz-form-item",6),o(12,"nz-form-item")(13,"nz-form-control",7)(14,"button",8),h("click",function(){return e.onSubmit()}),l(15,"Submit"),s()()()()),r&2&&(t("formGroup",e.changePasswordForm),i(2),t("nzSpan",6),i(2),t("nzSpan",14),i(3),t("nzSpan",6),i(2),t("nzSpan",14)("nzErrorTip",e.passwordsMismatch?"Passwords must match":"Please enter a valid password"),i(2),t("ngIf",e.passwordsMismatch),i(2),t("nzSpan",14),i(),t("disabled",!e.changePasswordForm.valid))},dependencies:[v,P,T,M,D,A,I,j,G,V,E,y,C,N,F,b]});let p=n;return p})();export{oe as a};
