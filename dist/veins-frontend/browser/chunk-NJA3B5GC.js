import{f as jt,g as Bt,j as re,k as se}from"./chunk-VP57HQK5.js";import{b as gt,c as N}from"./chunk-EMPMCSMU.js";import{$ as v,$a as Ct,Ab as ee,Bb as Q,Cb as H,Da as Qt,Db as Dt,Eb as Et,Fb as J,Gb as ne,Hb as ie,J as i,K as C,Lb as Nt,Mb as Tt,N as h,Nb as Mt,O as s,Oa as ft,Ob as Ft,Pb as Ot,Qa as ht,Qb as It,Ra as Ht,Ta as Lt,Va as Jt,W as a,Wa as Kt,X as o,Xa as W,Y as z,Ya as A,Z as mt,_ as pt,_a as q,a as st,aa as y,ab as yt,ac as Vt,ba as u,bb as m,bc as Pt,ca as dt,cb as St,da as ut,db as vt,ea as zt,eb as bt,ec as kt,fa as E,fc as Xt,ga as p,ha as b,hb as xt,ia as k,ib as wt,ic as K,ja as _t,ka as x,kb as Zt,kc as Rt,la as w,lb as Yt,lc as Z,ma as D,mb as L,na as B,nc as Y,oa as Gt,oc as tt,pc as et,qc as nt,s as M,t as lt,ta as O,tb as U,ub as $,v as _,vb as G,w as f,xc as ae,ya as X,yc as oe,z as ct,za as R,zb as te}from"./chunk-ALXNCXXS.js";import{a as le}from"./chunk-X5O7WZVH.js";import"./chunk-NFQMHT45.js";import{a as S,b as T,f as $t,g}from"./chunk-MON7YFGF.js";function Ne(l,c){if(l&1&&(a(0,"th"),p(1),o()),l&2){let r=c.$implicit;i(),k(" ",r.title," ")}}var Te=l=>["./",l],_e=()=>({tracingId:2});function Me(l,c){if(l&1&&(a(0,"tr")(1,"td")(2,"a",0)(3,"button",1),z(4,"span",6),o()()(),a(5,"td"),p(6),o(),a(7,"td"),p(8),o()()),l&2){let r=c.$implicit;i(2),s("routerLink",Gt(5,Te,r.id))("state",B(7,_e)),i(),s("nzSize","small"),i(3),b(r.id),i(2),b(r.name)}}var Fe=()=>["./","new"],fe=(()=>{let c=class c{constructor(t){this.appService=t,this.listOfColumn=[{title:"id"},{title:"Name"}],this.visible=!1}ngOnInit(){this.subOrgSubscription=this.appService.currentSubOrganization.subscribe(t=>{this.populateSiteData()})}ngOnDestroy(){this.subOrgSubscription&&this.subOrgSubscription.unsubscribe()}open(){this.visible=!0}close(t=!1){this.visible=!1,t&&this.populateSiteData()}populateSiteData(){return g(this,null,function*(){this.sites=yield this.appService.getSites()})}};c.\u0275fac=function(e){return new(e||c)(C(N))},c.\u0275cmp=M({type:c,selectors:[["app-sites"]],decls:12,vars:8,consts:[[3,"routerLink","state"],["nz-button","","nzType","primary",3,"nzSize"],["nz-icon","","nzType","plus"],["nzTableLayout","fixed",3,"nzData"],["sortTable",""],[4,"ngFor","ngForOf"],["nz-icon","","nzType","eye"]],template:function(e,n){if(e&1&&(a(0,"a",0)(1,"button",1),z(2,"span",2),p(3," New Site "),o()(),a(4,"nz-table",3,4)(6,"thead")(7,"tr"),z(8,"th"),h(9,Ne,2,1,"th",5),o()(),a(10,"tbody"),h(11,Me,9,8,"tr",5),o()()),e&2){let d=E(5);s("routerLink",B(6,Fe))("state",B(7,_e)),i(),s("nzSize","small"),i(3),s("nzData",n.sites),i(5),s("ngForOf",n.listOfColumn),i(2),s("ngForOf",d.data)}},dependencies:[X,Ht,G,U,$,W,tt,K,Z,nt,Y,et]});let l=c;return l})();var Ce=$t(le());var qe=["content"];function Le(l,c){if(l&1&&z(0,"nz-option",40),l&2){let r=c.$implicit;s("nzValue",r.id)("nzLabel",r.label)}}function je(l,c){if(l&1&&z(0,"nz-option",40),l&2){let r=c.$implicit;s("nzValue",r==null?null:r.id)("nzLabel",r==null?null:r.name)}}var Be=()=>({authorization:"authorization-text"});function We(l,c){if(l&1){let r=v();a(0,"nz-card",41)(1,"nz-form-item")(2,"nz-form-label",42),p(3,"Terms & Conditions"),o(),a(4,"nz-form-control",43),z(5,"textarea",44),o()(),a(6,"nz-form-item")(7,"nz-form-label",45),p(8,"Attachments"),o(),a(9,"nz-form-control",46)(10,"nz-upload",47),y("nzChange",function(e){_(r);let n=u();return f(n.handleChange(e))}),a(11,"button",48),z(12,"span",49),p(13," Click to Upload "),o()()()()()}l&2&&(i(4),s("nzMd",8)("nzSm",24)("nzXs",12)("nzMd",24)("nzXl",24)("nzXXl",24),i(5),s("nzMd",8)("nzSm",24)("nzXs",12)("nzMd",24)("nzXl",24)("nzXXl",24),i(),s("nzHeaders",B(13,Be)))}function Ue(l,c){if(l&1){let r=v();a(0,"button",50),y("click",function(){_(r);let e=u();return f(e.cancelPaymentDetails())}),p(1,"Cancel"),o()}}function $e(l,c){if(l&1){let r=v();a(0,"button",51),y("click",function(){_(r);let e=u();return f(e.submitRequest())}),p(1,"Submit"),o()}}function Ge(l,c){if(l&1){let r=v();a(0,"button",51),y("click",function(){_(r);let e=u();return f(e.confirmInvoiceDetails())}),p(1,"Confirm Contract"),o()}}function Qe(l,c){}var ye=(()=>{let c=class c{constructor(t,e,n,d,I,V,j,qt){this.appService=t,this.route=e,this.userService=n,this.fb=d,this.notification=I,this.router=V,this.msg=j,this.modal=qt,this.vendors=[],this.vendorItems=[],this.discountTotal=0,this.contractTotal=0,this.loading=!1,this.contractStates=jt,this.stateNames=Bt,this.listOfData=[],this.defaultItemValues={id:0,name:"",qty:0,contract_id:0,discount:0,total:0,date_created:new Date,isCustom:!1,unit_price:0},this.contractDetails=new yt({id:new m,contractor:new m,subject:new m,contract_type:new m,state:new m(this.contractStates.Draft),with_material:new m(0),payment_schedule:new m(0),amount_per_schedule:new m(0),amount_per_day:new m(0),created_by:new m(0),site_id:new m(0),total:new m(0),organization_id:new m(0),sub_organization_id:new m(0),contract_start_date:new m(new Date),contract_end_date:new m(new Date),attachment:new m,terms:new m("")}),this.beforeUpload=(P,Ee)=>new st(F=>{let at=P.type==="image/jpeg"||P.type==="image/png";if(!at){this.msg.error("You can only upload JPG file!"),F.complete();return}let ot=P.size/1024/1024<2;if(!ot){this.msg.error("Image must smaller than 2MB!"),F.complete();return}this.contractDetails.patchValue({attachment:P}),F.next(at&&ot),F.complete()}),this.contractDetails=this.fb.group({id:new m,contractor:new m,subject:new m,contract_type:new m,state:new m(this.contractStates.Draft),with_material:new m(0),payment_schedule:new m(0),amount_per_schedule:new m(0),amount_per_day:new m(0),created_by:new m(0),site_id:new m(0),total:new m(0),organization_id:new m(0),sub_organization_id:new m(0),contract_start_date:new m(new Date),contract_end_date:new m(new Date),attachment:new m,terms:new m("")})}submitForm(){}ngOnInit(){this.loadAndUsers(),this.setSitesData(),this.route.queryParams.subscribe(t=>{t.CR||(this.contractDetails.reset({state:this.contractStates.Draft,id:0}),this.contractDetails.enable(),this.contractDetails.updateValueAndValidity()),this.contractDetails.controls.id.setValue(t.CR||0),this.setContractRequestDetails()})}setSitesData(){return g(this,null,function*(){let t=yield this.appService.getAndSetSites(),e=t&&t.length?t.map(n=>S({label:n.name},n)):[];this.sites=[...e]})}setContractRequestDetails(){return g(this,null,function*(){this.loading=!0,this.contractDetails.controls.id.value?yield this.getExistingContract():(this.contractDetails.controls.organization_id.setValue(parseInt(localStorage.getItem("organization_id")||"")),this.currentSubOrganizationSubscription=this.appService.currentSubOrganization.subscribe(t=>{this.contractDetails.controls.sub_organization_id.setValue(t.id)}),this.contractDetails.controls.created_by.setValue(this.userService.loggedInUser.id)),this.disableAndEnableSpecificControls(),this.loading=!1})}getExistingContract(){return g(this,null,function*(){let t=yield this.appService.retireveContractById(this.contractDetails.controls.id.value);t&&this.contractDetails.patchValue({id:t.id,subject:t.subject,state:t.state,created_by:t.created_by,total:t.total,organization_id:t.organization_id,sub_organization_id:t.sub_organization_id,contractor:t.contractor,contract_type:t.contract_type,with_material:t.with_material,payment_schedule:t.payment_schedule,amount_per_schedule:t.amount_per_schedule,amount_per_day:t.amount_per_day,site_id:t.site_id,contract_start_date:t.contract_start_date,contract_end_date:t.contract_end_date,attachment:t.attachment,terms:t.terms}),this.previousContractDetails=this.contractDetails.getRawValue()})}loadAndUsers(){return g(this,null,function*(){this.listOfData=yield this.userService.getOrganizationUsers()})}submitRequest(){return g(this,null,function*(){let t=yield this.appService.createContract(T(S({},this.contractDetails.value),{state:this.contractStates.PendingApproval}));t&&this.notification.create("success","Contract Order - "+t.id,"Contract order submitted successfly. Please check for invoice and update later").onClose.subscribe(e=>{this.router.navigate(["/"])})})}cancelPaymentDetails(){return g(this,null,function*(){})}confirmInvoiceDetails(){return g(this,null,function*(){let t=this.appService.findObjectDifferences(this.previousContractDetails,this.contractDetails.getRawValue());console.log(t);let e=S({id:this.previousContractDetails.id},t);(yield this.appService.updateContractRequest(T(S({},e),{state:this.contractStates.Completed})))&&this.notification.create("success","Contract Order - "+this.previousContractDetails.id,"Contract order invoice submitted successfly. Please proceed next for payment details").onClose.subscribe(d=>{this.router.navigate(["/"])})})}printCard(){let t=this.content.nativeElement.innerHTML,e=window.open("","_blank","top=0,left=0,height=100%,width=auto");e&&(e.document.open(),e.document.write(`
      <html>
        <head>
          <title>Print</title>
          <style>
            /* Define print styles here */
          </style>
        </head>
        <body onload="window.print();window.close()">
          ${t}
        </body>
      </html>
    `),e.print())}generatePDF(){let t=this.content.nativeElement;(0,Ce.default)(t).then(e=>{let n=e.toDataURL("image/png")})}disableAndEnableSpecificControls(){let t=this.contractDetails.get("state");t&&t.value!==this.contractStates.Draft&&(console.log(this.contractDetails),Object.keys(this.contractDetails.controls).forEach(e=>{let n=this.contractDetails.get(e);n&&(e!=="attachment"&&e!=="terms"&&t.value===this.contractStates.PendingApproval||t.value===this.contractStates.Completed)&&n.disable()}),console.log(this.contractDetails),this.contractDetails.updateValueAndValidity())}getBase64(t,e){let n=new FileReader;n.addEventListener("load",()=>e(n.result.toString())),n.readAsDataURL(t)}handleChange(t){this.getBase64(t.file.originFileObj,e=>{this.loading=!1})}};c.\u0275fac=function(e){return new(e||c)(C(N),C(ft),C(gt),C(wt),C(kt),C(ht),C(Vt),C(Pt))},c.\u0275cmp=M({type:c,selectors:[["app-create-contract"]],viewQuery:function(e,n){if(e&1&&dt(qe,5),e&2){let d;ut(d=zt())&&(n.content=d.first)}},decls:90,vars:81,consts:[[1,"detailBar"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","download"],["nz-button","","nzType","primary","printSectionId","print-section","ngxPrint","","printTitle","MyTitle",2,"margin-left","12px"],["nz-icon","","nzType","printer","nzTheme","outline"],["id","print-section",1,"purchase-request"],[2,"width","100%"],["nz-form","",3,"formGroup","ngSubmit"],["content",""],["nzGutter","2",2,"margin-bottom","12px"],[3,"nzMd","nzSm","nzXs"],["nzRequired","","nzFor","contract_type",3,"nzMd","nzSm","nzXs"],["nzErrorTip","The input is not valid date!",3,"nzSm","nzXs"],["formControlName","site_id","placeholder","Select sites",1,"control","inputField"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["zShowSearch","","nzAllowClear","","nzPlaceHolder","Select a person","formControlName","contract_type",1,"control","inputField"],["nzLabel","Duration Based","nzValue","1"],["nzLabel","Measurement Based","nzValue","2"],["nzRequired","","nzFor","with_material"],["nzErrorTip","The input is not valid date!"],["nz-checkbox","","formControlName","with_material"],["nzRequired","","nzFor","contractor",3,"nzMd","nzSm","nzXs"],["d","contractor","formControlName","contractor","placeholder","Select user",1,"control","inputField"],["nzRequired","","nzFor","contract_start_date",3,"nzMd","nzSm","nzXs"],["formControlName","contract_start_date",1,"control","inputField"],["nzRequired","","nzFor","contract_end_date",3,"nzMd","nzSm","nzXs"],["formControlName","contract_end_date",1,"control","inputField"],["nzRequired","","nzFor","payment_schedule",3,"nzMd","nzSm","nzXs"],["nz-input","","formControlName","payment_schedule",1,"control","inputField"],["nzRequired","","nzFor","subject",3,"nzMd","nzSm","nzXs"],["z-input","","formControlName","subject",1,"control","inputField"],["nzRequired","","nzFor","amount_per_schedule",3,"nzMd","nzSm","nzXs"],["z-input","","formControlName","amount_per_schedule",1,"control","inputField"],["nzRequired","","nzFor","amount_per_day",3,"nzMd","nzSm","nzXs"],["z-input","","formControlName","amount_per_day",1,"control","inputField"],["style","width:100%;margin-bottom: 12px;",4,"ngIf"],[1,"flex","space-between"],["nz-button","","nzType","primary","nzDanger","","style","margin-bottom: 12px;float: right;",3,"click",4,"ngIf"],["nz-button","","nzType","primary","style","margin-bottom: 12px;float: right;",3,"click",4,"ngIf"],["customNoDataTemplate",""],[3,"nzValue","nzLabel"],[2,"width","100%","margin-bottom","12px"],["nzFor","terms"],["nzErrorTip","",3,"nzMd","nzSm","nzXs","nzXl","nzXXl"],["nz-input","","formControlName","terms","placeholder","textarea with clear icon"],["nzRequired","","nzFor","contract_start_date"],["nzErrorTip","The input is not valid date!",3,"nzMd","nzSm","nzXs","nzXl","nzXXl"],["nzAction","https://www.mocky.io/v2/5cc8019d300000980a055e76",3,"nzHeaders","nzChange"],["nz-button",""],["nz-icon","","nzType","upload"],["nz-button","","nzType","primary","nzDanger","",2,"margin-bottom","12px","float","right",3,"click"],["nz-button","","nzType","primary",2,"margin-bottom","12px","float","right",3,"click"]],template:function(e,n){if(e&1&&(a(0,"div",0)(1,"span")(2,"h4"),p(3),o()(),a(4,"span")(5,"button",1),y("click",function(){return n.generatePDF()}),z(6,"span",2),o(),a(7,"button",3),z(8,"span",4),o()()(),a(9,"div",5)(10,"nz-card",6)(11,"form",7),y("ngSubmit",function(){return n.submitForm()}),a(12,"div",null,8)(14,"nz-row",9)(15,"nz-col",10)(16,"nz-form-item")(17,"nz-form-label",11),p(18,"Site"),o(),a(19,"nz-form-control",12)(20,"nz-select",13),h(21,Le,1,2,"nz-option",14),o()()()(),a(22,"nz-col",10)(23,"nz-form-item")(24,"nz-form-label",11),p(25,"Contract Type"),o(),a(26,"nz-form-control",12)(27,"nz-select",15),z(28,"nz-option",16)(29,"nz-option",17),o()()()(),a(30,"nz-col",10)(31,"nz-form-item")(32,"nz-form-label",18),p(33,"with_material"),o(),a(34,"nz-form-control",19),z(35,"label",20),o()()()(),a(36,"nz-row",9)(37,"nz-col",10)(38,"nz-form-item")(39,"nz-form-label",21),p(40,"Contractor"),o(),a(41,"nz-form-control",12)(42,"nz-select",22),h(43,je,1,2,"nz-option",14),o()()()(),a(44,"nz-col",10)(45,"nz-form-item")(46,"nz-form-label",23),p(47,"contract_start_date"),o(),a(48,"nz-form-control",12),z(49,"nz-date-picker",24),o()()()(),a(50,"nz-row",9)(51,"nz-col",10)(52,"nz-form-item")(53,"nz-form-label",25),p(54,"contract_end_date"),o(),a(55,"nz-form-control",12),z(56,"nz-date-picker",26),o()()(),a(57,"nz-col",10)(58,"nz-form-item")(59,"nz-form-label",27),p(60,"payment_schedule"),o(),a(61,"nz-form-control",12),z(62,"input",28),o()()()(),a(63,"nz-row",9)(64,"nz-col",10)(65,"nz-form-item")(66,"nz-form-label",29),p(67,"Subject"),o(),a(68,"nz-form-control",12),z(69,"input",30),o()()(),a(70,"nz-col",10)(71,"nz-form-item")(72,"nz-form-label",31),p(73,"amount_per_schedule"),o(),a(74,"nz-form-control",12),z(75,"input",32),o()()()(),a(76,"nz-form-item")(77,"nz-form-label",33),p(78,"amount_per_day"),o(),a(79,"nz-form-control",12),z(80,"input",34),o()(),h(81,We,14,14,"nz-card",35),o(),a(82,"span",36)(83,"span"),h(84,Ue,2,0,"button",37),o(),a(85,"span"),h(86,$e,2,0,"button",38)(87,Ge,2,0,"button",38),o()()()()(),h(88,Qe,0,0,"ng-template",null,39,O)),e&2){let d;i(3),_t(" Site - ",((d=n.contractDetails.get("id"))==null?null:d.value)||"New"," / ",n.stateNames[(d=n.contractDetails.get("state"))==null?null:d.value]," "),i(8),s("formGroup",n.contractDetails),i(4),s("nzMd",12)("nzSm",24)("nzXs",12),i(2),s("nzMd",8)("nzSm",24)("nzXs",12),i(2),s("nzSm",14)("nzXs",24),i(2),s("ngForOf",n.sites),i(),s("nzMd",8)("nzSm",24)("nzXs",12),i(2),s("nzMd",8)("nzSm",24)("nzXs",12),i(2),s("nzSm",14)("nzXs",24),i(4),s("nzMd",4)("nzSm",24)("nzXs",12),i(7),s("nzMd",12)("nzSm",24)("nzXs",12),i(2),s("nzMd",8)("nzSm",24)("nzXs",12),i(2),s("nzSm",14)("nzXs",24),i(2),s("ngForOf",n.listOfData),i(),s("nzMd",12)("nzSm",24)("nzXs",12),i(2),s("nzMd",8)("nzSm",24)("nzXs",12),i(2),s("nzSm",14)("nzXs",24),i(3),s("nzMd",12)("nzSm",24)("nzXs",12),i(2),s("nzMd",8)("nzSm",24)("nzXs",12),i(2),s("nzSm",14)("nzXs",24),i(2),s("nzMd",12)("nzSm",24)("nzXs",12),i(2),s("nzMd",8)("nzSm",24)("nzXs",12),i(2),s("nzSm",14)("nzXs",24),i(3),s("nzMd",12)("nzSm",24)("nzXs",12),i(2),s("nzMd",8)("nzSm",24)("nzXs",12),i(2),s("nzSm",14)("nzXs",24),i(2),s("nzMd",12)("nzSm",24)("nzXs",12),i(2),s("nzMd",8)("nzSm",24)("nzXs",12),i(2),s("nzSm",14)("nzXs",24),i(3),s("nzMd",8)("nzSm",24)("nzXs",12),i(2),s("nzSm",14)("nzXs",24),i(2),s("ngIf",n.contractDetails.controls.state.value!==n.contractStates.Draft),i(3),s("ngIf",n.contractDetails.controls.state.value==n.contractStates.PendingApproval),i(2),s("ngIf",n.contractDetails.controls.state.value==n.contractStates.Draft),i(),s("ngIf",n.contractDetails.controls.state.value==n.contractStates.PendingApproval)}},dependencies:[X,R,G,U,$,Et,J,W,Dt,Tt,Nt,Ft,Mt,It,Ot,L,Q,H,ae,vt,A,q,Ct,bt,xt]});let l=c;return l})();var be=$t(le());function Je(l,c){if(l&1&&(a(0,"th",4),p(1),o()),l&2){let r=c.$implicit;s("nzSortFn",r.compare)("nzSortPriority",r.priority),i(),k(" ",r.title," ")}}function Ke(l,c){if(l&1){let r=v();mt(0),a(1,"td"),p(2),o(),a(3,"td"),p(4),o(),a(5,"td"),p(6),o(),a(7,"td"),p(8),o(),a(9,"td")(10,"label",7),D("ngModelChange",function(e){_(r);let n=u().$implicit,d=u();return w(d.editCache[n.id].data.is_paid,e)||(d.editCache[n.id].data.is_paid=e),f(e)}),o()(),a(11,"td")(12,"a",8),y("click",function(){_(r);let e=u().$implicit,n=u();return f(n.startEdit(e.id))}),p(13,"Edit"),o()(),pt()}if(l&2){let r=u().$implicit,t=u();i(2),b(r.refered_by),i(2),b(r.name),i(2),b(r.quantity),i(2),b(r.amount),i(2),s("nzChecked",t.editCache[r.id].data.is_paid),x("ngModel",t.editCache[r.id].data.is_paid)}}function Ze(l,c){if(l&1&&z(0,"nz-option",16),l&2){let r=c.$implicit;s("nzValue",(r==null?null:r.value)||0)("nzLabel",(r==null?null:r.key)||"")}}function Ye(l,c){if(l&1){let r=v();z(0,"td"),a(1,"td")(2,"nz-select",9),D("ngModelChange",function(e){_(r);let n=u().$implicit,d=u();return w(d.editCache[n.id].data.name,e)||(d.editCache[n.id].data.name=e),f(e)}),h(3,Ze,1,2,"nz-option",10),o()(),a(4,"td")(5,"input",11),D("ngModelChange",function(e){_(r);let n=u().$implicit,d=u();return w(d.editCache[n.id].data.amount,e)||(d.editCache[n.id].data.amount=e),f(e)}),o()(),a(6,"td")(7,"input",12),D("ngModelChange",function(e){_(r);let n=u().$implicit,d=u();return w(d.editCache[n.id].data.quantity,e)||(d.editCache[n.id].data.quantity=e),f(e)}),o()(),a(8,"td")(9,"label",13),D("ngModelChange",function(e){_(r);let n=u().$implicit,d=u();return w(d.editCache[n.id].data.is_paid,e)||(d.editCache[n.id].data.is_paid=e),f(e)}),o()(),a(10,"td")(11,"a",14),y("click",function(){_(r);let e=u().$implicit,n=u();return f(n.saveEdit(e.id))}),p(12,"Save"),o(),p(13," \xA0 "),a(14,"a",15),y("nzOnConfirm",function(){_(r);let e=u().$implicit,n=u();return f(n.cancelEdit(e.id))}),p(15,"Cancel"),o()()}if(l&2){let r=u().$implicit,t=u();i(2),x("ngModel",t.editCache[r.id].data.name),i(),s("ngForOf",t.subOrganizations),i(2),x("ngModel",t.editCache[r.id].data.amount),i(2),x("ngModel",t.editCache[r.id].data.quantity),i(2),s("nzChecked",t.editCache[r.id].data.is_paid),x("ngModel",t.editCache[r.id].data.is_paid)}}function tn(l,c){if(l&1&&(a(0,"tr"),h(1,Ke,14,6,"ng-container",5)(2,Ye,16,6,"ng-template",null,6,O),o()),l&2){let r=c.$implicit,t=E(3),e=u();i(),s("ngIf",!(e.editCache[r.id]!=null&&e.editCache[r.id].edit))("ngIfElse",t)}}var Se=(()=>{let c=class c{constructor(t){this.appService=t,this.listOfColumn=[{title:"Reference By",compare:(e,n)=>e.refered_by-n.refered_by,priority:3},{title:"Name",compare:(e,n)=>e.name.localeCompare(n.name),priority:!1},{title:"Quanitity",compare:(e,n)=>e.quantity-n.quantity,priority:2},{title:"Amount",compare:(e,n)=>e.amount-n.amount,priority:2},{title:"Paid",compare:(e,n)=>(e.is_paid?1:0)-(n.is_paid?1:0),priority:2},{title:"Action",compare:(e,n)=>e.refered_by-n.refered_by,priority:3}],this.listOfData=[],this.visible=!1,this.editCache={}}ngOnInit(){this.populateExpenseData()}open(){this.visible=!0}close(t=!1){this.visible=!1,t&&this.populateExpenseData()}populateExpenseData(){return g(this,null,function*(){this.listOfData=[{id:1,name:"Item",is_general:!1,quantity:10,amount:1e3,refered_by:1,purchase_id:36,is_paid:!0,site:11,organization:1,subOrganization:1,createdBy:1},{id:1,name:"Item",is_general:!1,quantity:10,amount:1e3,refered_by:1,purchase_id:36,is_paid:!0,site:11,organization:1,subOrganization:1,createdBy:1},{id:1,name:"Item",is_general:!1,quantity:10,amount:1e3,refered_by:1,purchase_id:36,is_paid:!0,site:11,organization:1,subOrganization:1,createdBy:1}],this.ExpenseRoles=yield this.appService.getRoles(),this.subOrganizations=yield this.appService.getSubOrganizations(),this.ExpenseRoles=this.ExpenseRoles.map(t=>({key:t.role_name,value:t.id})),this.subOrganizations=this.subOrganizations.map(t=>T(S({},t),{key:t.name,value:t.id})),this.updateEditCache()})}startEdit(t){this.editCache[t].edit=!0}cancelEdit(t){let e=this.listOfData.findIndex(n=>n.id===t);this.editCache[t]={data:S({},this.listOfData[e]),edit:!1}}saveEdit(t){return g(this,null,function*(){let e=this.listOfData.findIndex(n=>n.id===t);this.editCache[t].edit=!1,Object.assign(this.listOfData[e],this.editCache[t].data),this.populateExpenseData()})}updateEditCache(){this.listOfData.forEach(t=>{this.editCache[t.id]={edit:!1,data:S({},t)}})}};c.\u0275fac=function(e){return new(e||c)(C(N))},c.\u0275cmp=M({type:c,selectors:[["app-expenses"]],decls:10,vars:3,consts:[["nzShowPagination","false","nzTableLayout","fixed",3,"nzData"],["editRowTable","","sortTable",""],[3,"nzSortFn","nzSortPriority",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"nzSortFn","nzSortPriority"],[4,"ngIf","ngIfElse"],["editTemplate",""],["nz-checkbox","","disabled","",3,"nzChecked","ngModel","ngModelChange"],[3,"click"],["id","role_id","placeholder","Select role",3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nz-input","","id","amount",3,"ngModel","ngModelChange"],["nz-input","","id","quantity",3,"ngModel","ngModelChange"],["nz-checkbox","",3,"nzChecked","ngModel","ngModelChange"],[1,"save",3,"click"],["nz-popconfirm","","nzPopconfirmTitle","Sure to cancel?",3,"nzOnConfirm"],[3,"nzValue","nzLabel"]],template:function(e,n){if(e&1&&(a(0,"h3"),p(1,"Expense"),o(),a(2,"nz-table",0,1)(5,"thead")(6,"tr"),h(7,Je,2,3,"th",2),o()(),a(8,"tbody"),h(9,tn,4,2,"tr",3),o()()),e&2){let d=E(4);i(2),s("nzData",n.listOfData),i(5),s("ngForOf",n.listOfColumn),i(2),s("ngForOf",d.data)}},dependencies:[X,R,J,L,Xt,Q,H,tt,Rt,K,Z,nt,Y,et,A,q,St]});let l=c;return l})();function nn(l,c){if(l&1&&(a(0,"th",4),p(1),o()),l&2){let r=c.$implicit;s("nzSortFn",r.compare)("nzSortPriority",r.priority),i(),k(" ",r.title," ")}}function an(l,c){if(l&1){let r=v();mt(0),a(1,"td"),p(2),o(),a(3,"td"),p(4),o(),a(5,"td"),p(6),o(),a(7,"td"),p(8),o(),a(9,"td")(10,"label",7),D("ngModelChange",function(e){_(r);let n=u().$implicit,d=u();return w(d.editCache[n.id].data.is_paid,e)||(d.editCache[n.id].data.is_paid=e),f(e)}),o()(),a(11,"td")(12,"a",8),y("click",function(){_(r);let e=u().$implicit,n=u();return f(n.startEdit(e.id))}),p(13,"Edit"),o()(),pt()}if(l&2){let r=u().$implicit,t=u();i(2),b(r.refered_by),i(2),b(r.name),i(2),b(r.quantity),i(2),b(r.amount),i(2),s("nzChecked",t.editCache[r.id].data.is_paid),x("ngModel",t.editCache[r.id].data.is_paid)}}function on(l,c){if(l&1&&z(0,"nz-option",16),l&2){let r=c.$implicit;s("nzValue",(r==null?null:r.value)||0)("nzLabel",(r==null?null:r.key)||"")}}function rn(l,c){if(l&1){let r=v();z(0,"td"),a(1,"td")(2,"nz-select",9),D("ngModelChange",function(e){_(r);let n=u().$implicit,d=u();return w(d.editCache[n.id].data.name,e)||(d.editCache[n.id].data.name=e),f(e)}),h(3,on,1,2,"nz-option",10),o()(),a(4,"td")(5,"input",11),D("ngModelChange",function(e){_(r);let n=u().$implicit,d=u();return w(d.editCache[n.id].data.amount,e)||(d.editCache[n.id].data.amount=e),f(e)}),o()(),a(6,"td")(7,"input",12),D("ngModelChange",function(e){_(r);let n=u().$implicit,d=u();return w(d.editCache[n.id].data.quantity,e)||(d.editCache[n.id].data.quantity=e),f(e)}),o()(),a(8,"td")(9,"label",13),D("ngModelChange",function(e){_(r);let n=u().$implicit,d=u();return w(d.editCache[n.id].data.is_paid,e)||(d.editCache[n.id].data.is_paid=e),f(e)}),o()(),a(10,"td")(11,"a",14),y("click",function(){_(r);let e=u().$implicit,n=u();return f(n.saveEdit(e.id))}),p(12,"Save"),o(),p(13," \xA0 "),a(14,"a",15),y("nzOnConfirm",function(){_(r);let e=u().$implicit,n=u();return f(n.cancelEdit(e.id))}),p(15,"Cancel"),o()()}if(l&2){let r=u().$implicit,t=u();i(2),x("ngModel",t.editCache[r.id].data.name),i(),s("ngForOf",t.subOrganizations),i(2),x("ngModel",t.editCache[r.id].data.amount),i(2),x("ngModel",t.editCache[r.id].data.quantity),i(2),s("nzChecked",t.editCache[r.id].data.is_paid),x("ngModel",t.editCache[r.id].data.is_paid)}}function sn(l,c){if(l&1&&(a(0,"tr"),h(1,an,14,6,"ng-container",5)(2,rn,16,6,"ng-template",null,6,O),o()),l&2){let r=c.$implicit,t=E(3),e=u();i(),s("ngIf",!(e.editCache[r.id]!=null&&e.editCache[r.id].edit))("ngIfElse",t)}}var ve=(()=>{let c=class c{constructor(t){this.appService=t,this.listOfColumn=[{title:"Reference By",compare:(e,n)=>e.refered_by-n.refered_by,priority:3},{title:"Name",compare:(e,n)=>e.name.localeCompare(n.name),priority:!1},{title:"Quanitity",compare:(e,n)=>e.quantity-n.quantity,priority:2},{title:"Amount",compare:(e,n)=>e.amount-n.amount,priority:2},{title:"Paid",compare:(e,n)=>(e.is_paid?1:0)-(n.is_paid?1:0),priority:2},{title:"Action",compare:(e,n)=>e.refered_by-n.refered_by,priority:3}],this.listOfData=[],this.visible=!1,this.editCache={}}ngOnInit(){this.populateExpenseData()}open(){this.visible=!0}close(t=!1){this.visible=!1,t&&this.populateExpenseData()}populateExpenseData(){return g(this,null,function*(){this.listOfData=[{id:1,name:"Item",is_general:!1,quantity:10,amount:1e3,refered_by:1,purchase_id:36,is_paid:!0,site:11,organization:1,subOrganization:1,createdBy:1},{id:1,name:"Item",is_general:!1,quantity:10,amount:1e3,refered_by:1,purchase_id:36,is_paid:!0,site:11,organization:1,subOrganization:1,createdBy:1},{id:1,name:"Item",is_general:!1,quantity:10,amount:1e3,refered_by:1,purchase_id:36,is_paid:!0,site:11,organization:1,subOrganization:1,createdBy:1}],this.ExpenseRoles=yield this.appService.getRoles(),this.subOrganizations=yield this.appService.getSubOrganizations(),this.ExpenseRoles=this.ExpenseRoles.map(t=>({key:t.role_name,value:t.id})),this.subOrganizations=this.subOrganizations.map(t=>T(S({},t),{key:t.name,value:t.id})),this.updateEditCache()})}startEdit(t){this.editCache[t].edit=!0}cancelEdit(t){let e=this.listOfData.findIndex(n=>n.id===t);this.editCache[t]={data:S({},this.listOfData[e]),edit:!1}}saveEdit(t){return g(this,null,function*(){let e=this.listOfData.findIndex(n=>n.id===t);this.editCache[t].edit=!1,Object.assign(this.listOfData[e],this.editCache[t].data),this.populateExpenseData()})}updateEditCache(){this.listOfData.forEach(t=>{this.editCache[t.id]={edit:!1,data:S({},t)}})}};c.\u0275fac=function(e){return new(e||c)(C(N))},c.\u0275cmp=M({type:c,selectors:[["app-owner-payments"]],decls:10,vars:3,consts:[["nzShowPagination","false","nzTableLayout","fixed",3,"nzData"],["editRowTable","","sortTable",""],[3,"nzSortFn","nzSortPriority",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"nzSortFn","nzSortPriority"],[4,"ngIf","ngIfElse"],["editTemplate",""],["nz-checkbox","","disabled","",3,"nzChecked","ngModel","ngModelChange"],[3,"click"],["id","role_id","placeholder","Select role",3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nz-input","","id","amount",3,"ngModel","ngModelChange"],["nz-input","","id","quantity",3,"ngModel","ngModelChange"],["nz-checkbox","",3,"nzChecked","ngModel","ngModelChange"],[1,"save",3,"click"],["nz-popconfirm","","nzPopconfirmTitle","Sure to cancel?",3,"nzOnConfirm"],[3,"nzValue","nzLabel"]],template:function(e,n){if(e&1&&(a(0,"h3"),p(1,"Owner Payments"),o(),a(2,"nz-table",0,1)(5,"thead")(6,"tr"),h(7,nn,2,3,"th",2),o()(),a(8,"tbody"),h(9,sn,4,2,"tr",3),o()()),e&2){let d=E(4);i(2),s("nzData",n.listOfData),i(5),s("ngForOf",n.listOfColumn),i(2),s("ngForOf",d.data)}},dependencies:[X,R,J,L,Xt,Q,H,tt,Rt,K,Z,nt,Y,et,A,q,St]});let l=c;return l})();var cn=["content"];function mn(l,c){if(l&1){let r=v();a(0,"div",32)(1,"span")(2,"h4"),p(3),o()(),a(4,"span")(5,"button",33),y("click",function(){_(r);let e=u();return f(e.generatePDF())}),z(6,"span",34),o(),a(7,"button",35),z(8,"span",36),o()()()}if(l&2){let r=u(),t;i(3),_t(" ",((t=r.siteDetails.get("id"))==null?null:t.value)||"New"," - / ",(t=r.siteDetails.get("name"))==null?null:t.value," ")}}function pn(l,c){if(l&1){let r=v();a(0,"button",37),y("click",function(){_(r);let e=u();return f(e.cancelPaymentDetails())}),p(1,"Cancel"),o()}}function dn(l,c){if(l&1){let r=v();a(0,"button",38),y("click",function(){_(r);let e=u();return f(e.submitRequest())}),p(1,"Submit"),o()}}function un(l,c){if(l&1){let r=v();a(0,"button",38),y("click",function(){_(r);let e=u();return f(e.approveDetails())}),p(1,"Approve Site"),o()}}function zn(l,c){if(l&1&&(p(0),z(1,"span",39)),l&2){let r=c.$implicit;u();let t=E(4);k(" ",r," "),i(),s("nzRotate",t.nzActive?90:-90)}}function _n(l,c){l&1&&(a(0,"div",40)(1,"nz-row",41)(2,"nz-col",9)(3,"nz-card",5),z(4,"app-expenses"),o()(),a(5,"nz-col",9)(6,"nz-card",5),z(7,"app-owner-payments"),o()()()()),l&2&&(i(2),s("nzMd",12)("nzSm",24)("nzXs",24),i(3),s("nzMd",12)("nzSm",24)("nzXs",24))}var xe=(()=>{let c=class c{constructor(t,e,n,d,I,V,j,qt){this.appService=t,this.route=e,this.userService=n,this.fb=d,this.notification=I,this.router=V,this.msg=j,this.modal=qt,this.vendors=[],this.isActive=!1,this.vendorItems=[],this.discountTotal=0,this.siteTotal=0,this.loading=!1,this.siteStates=re,this.stateNames=se,this.listOfData=[],this.defaultItemValues={id:0,name:"",qty:0,discount:0,total:0,date_created:new Date,isCustom:!1,unit_price:0},this.siteDetails=new yt({id:new m,name:new m,budget:new m,owner:new m,contact_no:new m,state:new m(this.siteStates.Draft),address:new m,site_start_date:new m(new Date),site_end_date:new m(new Date),details:new m,created_by:new m(0),total:new m(0),organization:new m(0),subOrganization:new m(0)}),this.beforeUpload=(P,Ee)=>new st(F=>{let at=P.type==="image/jpeg"||P.type==="image/png";if(!at){this.msg.error("You can only upload JPG file!"),F.complete();return}let ot=P.size/1024/1024<2;if(!ot){this.msg.error("Image must smaller than 2MB!"),F.complete();return}F.next(at&&ot),F.complete()}),this.siteDetails=this.fb.group({id:new m,name:new m,budget:new m,owner:new m,contact_no:new m,state:new m(this.siteStates.Draft),address:new m,site_start_date:new m(new Date),site_end_date:new m(new Date),details:new m,created_by:new m(0),total:new m(0),organization:new m(0),subOrganization:new m(0)})}submitForm(){}ngOnInit(){this.loadAndUsers(),this.setSitesData(),this.route.paramMap.subscribe(t=>{t.get("siteId")||(this.siteDetails.reset({state:this.siteStates.Draft,id:0}),this.siteDetails.enable(),this.siteDetails.updateValueAndValidity()),this.siteDetails.controls.id.setValue(t.get("siteId")!=="new"?t.get("siteId"):0),this.setSiteDetails()})}ngOnDestroy(){}setSitesData(){return g(this,null,function*(){let t=yield this.appService.getAndSetSites(),e=t&&t.length?t.map(n=>S({label:n.name},n)):[];this.sites=[...e]})}setSiteDetails(){return g(this,null,function*(){this.loading=!0,this.siteDetails.controls.id.value&&(yield this.getExistingsite()),this.disableAndEnableSpecificControls(),this.loading=!1})}getExistingsite(){return g(this,null,function*(){let t=yield this.appService.retireveSiteById(this.siteDetails.controls.id.value);t&&this.siteDetails.patchValue({id:t.id,state:t.state,created_by:t.created_by,total:t.total,organization:t.organization_id,subOrganization:t.sub_organization_id,owner:t.owner,site_start_date:t.site_start_date,site_end_date:t.site_end_date,name:t.name,budget:t.budget,contact_no:t.contact_no,address:t.address,details:t.details}),this.previoussiteDetails=this.siteDetails.getRawValue()})}loadAndUsers(){return g(this,null,function*(){this.listOfData=yield this.userService.getOrganizationUsers()})}submitRequest(){return g(this,null,function*(){let t=yield this.appService.createSite(T(S({},this.siteDetails.value),{state:this.siteStates.PendingApproval}));t&&this.notification.create("success","site Order - "+t.id,"site order submitted successfly. Please check for invoice and update later").onClose.subscribe(e=>{this.router.navigate(["/"])})})}cancelPaymentDetails(){return g(this,null,function*(){})}approveDetails(){return g(this,null,function*(){let t=this.appService.findObjectDifferences(this.previoussiteDetails,this.siteDetails.getRawValue());console.log(t);let e=S({id:this.previoussiteDetails.id},t);(yield this.appService.updateSiteRequest(T(S({},e),{state:this.siteStates.Approved})))&&this.notification.create("success","site Order - "+this.previoussiteDetails.id,"site order invoice submitted successfly. Please proceed next for payment details").onClose.subscribe(d=>{this.router.navigate(["/"])})})}printCard(){let t=this.content.nativeElement.innerHTML,e=window.open("","_blank","top=0,left=0,height=100%,width=auto");e&&(e.document.open(),e.document.write(`
      <html>
        <head>
          <title>Print</title>
          <style>
            /* Define print styles here */
          </style>
        </head>
        <body onload="window.print();window.close()">
          ${t}
        </body>
      </html>
    `),e.print())}generatePDF(){let t=this.content.nativeElement;(0,be.default)(t).then(e=>{let n=e.toDataURL("image/png")})}disableAndEnableSpecificControls(){let t=this.siteDetails.get("state");t&&t.value!==this.siteStates.Draft&&(console.log(this.siteDetails),Object.keys(this.siteDetails.controls).forEach(e=>{let n=this.siteDetails.get(e);n&&(e!=="attachment"&&e!=="terms"&&t.value===this.siteStates.PendingApproval||t.value===this.siteStates.Completed)&&n.disable()}),console.log(this.siteDetails),this.siteDetails.updateValueAndValidity())}getBase64(t,e){let n=new FileReader;n.addEventListener("load",()=>e(n.result.toString())),n.readAsDataURL(t)}handleChange(t){this.getBase64(t.file.originFileObj,e=>{this.loading=!1})}};c.\u0275fac=function(e){return new(e||c)(C(N),C(ft),C(gt),C(wt),C(kt),C(ht),C(Vt),C(Pt))},c.\u0275cmp=M({type:c,selectors:[["app-site"]],viewQuery:function(e,n){if(e&1&&dt(cn,5),e&2){let d;ut(d=zt())&&(n.content=d.first)}},decls:73,vars:74,consts:[["renderHome",""],["nzAccordion",""],["nzExpandedIcon","double-right",3,"nzHeader","nzActive","nzDisabled"],["p",""],["id","print-section",1,"purchase-request"],[2,"width","100%"],["nz-form","",3,"formGroup","ngSubmit"],["content",""],["nzGutter","2",2,"margin-bottom","12px"],[3,"nzMd","nzSm","nzXs"],["nzRequired","","nzFor","name",3,"nzMd","nzSm","nzXs"],["nzErrorTip","The input is not valid date!",3,"nzSm","nzXs"],["nz-input","","formControlName","name",1,"control","inputField"],["nzRequired","","nzFor","budget",3,"nzMd","nzSm","nzXs"],["z-input","","formControlName","budget",1,"control","inputField"],["nzRequired","","nzFor","owner",3,"nzMd","nzSm","nzXs"],["nz-input","","formControlName","owner",1,"control","inputField"],["nzRequired","","nzFor","contact_no",3,"nzMd","nzSm","nzXs"],["nz-input","","formControlName","contact_no",1,"control","inputField"],["nzRequired","","nzFor","address",3,"nzMd","nzSm","nzXs"],["nz-input","","formControlName","address",1,"control","inputField",3,"rows"],["nzRequired","","nzFor","site_start_date",3,"nzMd","nzSm","nzXs"],["formControlName","site_start_date",1,"control","inputField"],["nzRequired","","nzFor","site_end_date",3,"nzMd","nzSm","nzXs"],["formControlName","site_end_date",1,"control","inputField"],["nzRequired","","nzFor","details",3,"nzMd","nzSm","nzXs"],["nz-input","","formControlName","details",1,"control","inputField",3,"rows"],[1,"flex","space-between"],["nz-button","","nzType","primary","nzDanger","","style","margin-bottom: 12px;float: right;",3,"click",4,"ngIf"],["nz-button","","nzType","primary","style","margin-bottom: 12px;float: right;",3,"click",4,"ngIf"],["expandedIcon",""],["style","margin-top: 12px;",4,"ngIf"],[1,"detailBar-collapsible"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","download"],["nz-button","","nzType","primary","printSectionId","print-section","ngxPrint","","printTitle","MyTitle",2,"margin-left","12px"],["nz-icon","","nzType","printer","nzTheme","outline"],["nz-button","","nzType","primary","nzDanger","",2,"margin-bottom","12px","float","right",3,"click"],["nz-button","","nzType","primary",2,"margin-bottom","12px","float","right",3,"click"],["nz-icon","","nzType","caret-right",1,"ant-collapse-arrow",3,"nzRotate"],[2,"margin-top","12px"],["nzGutter","4",2,"margin-bottom","12px"]],template:function(e,n){if(e&1&&(h(0,mn,9,2,"ng-template",null,0,O),a(2,"nz-collapse",1)(3,"nz-collapse-panel",2,3)(5,"div",4)(6,"nz-card",5)(7,"form",6),y("ngSubmit",function(){return n.submitForm()}),a(8,"div",null,7)(10,"nz-row",8)(11,"nz-col",9)(12,"nz-form-item")(13,"nz-form-label",10),p(14," Name"),o(),a(15,"nz-form-control",11),z(16,"input",12),o()()(),a(17,"nz-col",9)(18,"nz-form-item")(19,"nz-form-label",13),p(20,"budget"),o(),a(21,"nz-form-control",11),z(22,"input",14),o()()()(),a(23,"nz-row",8)(24,"nz-col",9)(25,"nz-form-item")(26,"nz-form-label",15),p(27,"owner"),o(),a(28,"nz-form-control",11),z(29,"input",16),o()()(),a(30,"nz-col",9)(31,"nz-form-item")(32,"nz-form-label",17),p(33,"Contact No"),o(),a(34,"nz-form-control",11),z(35,"input",18),o()()()(),a(36,"nz-row",8)(37,"nz-col",9)(38,"nz-form-item")(39,"nz-form-label",19),p(40," Address"),o(),a(41,"nz-form-control",11),z(42,"textarea",20),o()()()(),a(43,"nz-row",8)(44,"nz-col",9)(45,"nz-form-item")(46,"nz-form-label",21),p(47,"site_start_date"),o(),a(48,"nz-form-control",11),z(49,"nz-date-picker",22),o()()(),a(50,"nz-col",9)(51,"nz-form-item")(52,"nz-form-label",23),p(53,"site_end_date"),o(),a(54,"nz-form-control",11),z(55,"nz-date-picker",24),o()()()(),a(56,"nz-row",8)(57,"nz-col",9)(58,"nz-form-item")(59,"nz-form-label",25),p(60," Contract Details "),o(),a(61,"nz-form-control",11)(62,"textarea",26),p(63,"                        "),o()()()()()(),a(64,"span",27)(65,"span"),h(66,pn,2,0,"button",28),o(),a(67,"span"),h(68,dn,2,0,"button",29)(69,un,2,0,"button",29),o()()()()(),h(70,zn,2,2,"ng-template",null,30,O),o()(),h(72,_n,8,6,"div",31)),e&2){let d=E(1),I,V,j;i(3),s("nzHeader",d)("nzActive",n.isActive||((I=n.siteDetails.get("state"))==null?null:I.value)!==n.siteStates.Approved&&((I=n.siteDetails.get("state"))==null?null:I.value)!==n.siteStates.Completed)("nzDisabled",((V=n.siteDetails.get("state"))==null?null:V.value)!==n.siteStates.Approved&&((V=n.siteDetails.get("state"))==null?null:V.value)!==n.siteStates.Completed),i(4),s("formGroup",n.siteDetails),i(4),s("nzMd",12)("nzSm",24)("nzXs",12),i(2),s("nzMd",8)("nzSm",24)("nzXs",12),i(2),s("nzSm",14)("nzXs",24),i(2),s("nzMd",12)("nzSm",24)("nzXs",12),i(2),s("nzMd",8)("nzSm",24)("nzXs",12),i(2),s("nzSm",14)("nzXs",24),i(3),s("nzMd",12)("nzSm",24)("nzXs",12),i(2),s("nzMd",8)("nzSm",24)("nzXs",12),i(2),s("nzSm",14)("nzXs",24),i(2),s("nzMd",12)("nzSm",24)("nzXs",12),i(2),s("nzMd",8)("nzSm",24)("nzXs",12),i(2),s("nzSm",14)("nzXs",24),i(3),s("nzMd",12)("nzSm",24)("nzXs",12),i(2),s("nzMd",8)("nzSm",24)("nzXs",12),i(2),s("nzSm",14)("nzXs",24),i(),s("rows",2),i(2),s("nzMd",12)("nzSm",24)("nzXs",12),i(2),s("nzMd",8)("nzSm",24)("nzXs",12),i(2),s("nzSm",14)("nzXs",24),i(2),s("nzMd",12)("nzSm",24)("nzXs",12),i(2),s("nzMd",8)("nzSm",24)("nzXs",12),i(2),s("nzSm",14)("nzXs",24),i(3),s("nzMd",24)("nzSm",24)("nzXs",24),i(2),s("nzMd",4)("nzSm",24)("nzXs",24),i(2),s("nzSm",20)("nzXs",24),i(),s("rows",6),i(4),s("ngIf",n.siteDetails.controls.state.value==n.siteStates.PendingApproval),i(2),s("ngIf",n.siteDetails.controls.state.value==n.siteStates.Draft),i(),s("ngIf",n.siteDetails.controls.state.value==n.siteStates.PendingApproval),i(3),s("ngIf",((j=n.siteDetails.get("state"))==null?null:j.value)===n.siteStates.Approved)}},dependencies:[R,G,U,$,Et,ie,ne,W,Dt,Tt,Nt,Ft,Mt,It,Ot,L,vt,A,q,Ct,bt,xt,Se,ve],styles:[".ant-collapse-arrow{margin-top:10px}"]});let l=c;return l})();var fn=[{path:"",component:fe,data:{name:"All Sites"}},{path:":siteId",component:xe,data:{name:"Site"}},{path:":siteId/contract/:contractId",component:ye,data:{name:"Create Contract"}}],we=(()=>{let c=class c{};c.\u0275fac=function(e){return new(e||c)},c.\u0275mod=lt({type:c}),c.\u0275inj=ct({imports:[Lt.forChild(fn),Lt]});let l=c;return l})();var De=Jt,hn=Object.keys(De).map(l=>De[l]),pi=(()=>{let c=class c{};c.\u0275fac=function(e){return new(e||c)},c.\u0275mod=lt({type:c}),c.\u0275inj=ct({providers:[{provide:ee,useValue:te},{provide:Kt,useValue:hn}],imports:[Qt,we,oe,Yt,Zt]});let l=c;return l})();export{pi as SitesModule};
