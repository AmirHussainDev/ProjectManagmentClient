import{a as se}from"./chunk-LONHV6IL.js";import{a as ae}from"./chunk-5WPDTF6Q.js";import"./chunk-NGE6N3H6.js";import{b as ne}from"./chunk-NGFCCQQD.js";import"./chunk-GLCTGQCH.js";import{b as ie}from"./chunk-CRDSVG3H.js";import{A as V,Aa as Y,B as f,Ba as h,C as a,D as H,Ea as C,Fa as Q,G as Z,Ha as X,Ia as ee,Ka as te,L as K,La as re,Oa as k,T as _,U as G,V as J,b as x,d as M,e as F,f as l,g as U,h as T,i as j,ib as oe,j as P,k as d,l as g,m as u,n as L,o as W,p as E,q as z,qc as A,ra as O,s as B,sa as $,t as v,ta as q,y as p,z as b}from"./chunk-PKM5J5B2.js";import"./chunk-NFQMHT45.js";import{a as R}from"./chunk-MON7YFGF.js";var ce=(()=>{let e=class e{constructor(t,r,n){this.http=t,this.platformId=r,this.appService=n}isLoggedIn(){if(h(this.platformId)){let t=localStorage.getItem("token");if(t){let r=this.getTokenExpirationDate(t);return r===void 0||r<=new Date?(this.logout(),!1):(this.setUserSubOrganization(),!0)}}return!1}getTokenExpirationDate(t){try{let r=JSON.parse(atob(t.split(".")[1]));return r&&r.exp?new Date(r.exp*1e3):void 0}catch{return}}logout(){localStorage.removeItem("token")}setUserSubOrganization(){this.appService.getAndSetUserDefaultSubOrganization()}};e.\u0275fac=function(r){return new(r||e)(a(C),a(f),a(ie))},e.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var pe=(()=>{let e=class e{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return this.authService.isLoggedIn()?!0:(this.router.navigate(["/login"]),!1)}};e.\u0275fac=function(r){return new(r||e)(a(ce),a(re))},e.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Ie=[{path:"",loadChildren:()=>import("./chunk-EPZ2ZWUJ.js").then(i=>i.ShellModule),canActivate:[pe]},{path:"login",loadChildren:()=>import("./chunk-54PHISBT.js").then(i=>i.LoginModule)}],le=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=v({type:e}),e.\u0275inj=b({imports:[k.forRoot(Ie),k]});let i=e;return i})();var ue=(()=>{let e=class e{constructor(){this.title="Veins"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=B({type:e,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"main"],[1,"content"]],template:function(r,n){r&1&&(_(0,"main",0)(1,"div",1),J(2,"router-outlet"),G()())},dependencies:[te],styles:[`[_nghost-%COMP%] {
    font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
      Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
      "Segoe UI Symbol";
    box-sizing: border-box;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  

  .content[_ngcontent-%COMP%] {
    display: flex;
    width: 100%;
    justify-content: center;
    max-width: 1090px;
    margin-bottom: 3rem;
    margin: auto;
  }

  @media screen and (max-width: 650px) {
    .content[_ngcontent-%COMP%] {
      flex-direction: column;
      width: 100%;
    }
  }`]});let i=e;return i})();var D=(()=>{let e=class e{constructor(t,r){this.http=t,this.platformId=r}fetchIntegrationDetails(){return this.http.get("/api/organizations").toPromise().then(t=>{h(this.platformId)&&(localStorage.setItem("organizations",JSON.stringify(t)),t&&t.length&&t.some(r=>r.domain_name==location.hostname)&&(localStorage.setItem("organization",t.find(r=>r.domain_name==location.hostname)),localStorage.setItem("organization_id",t.find(r=>r.domain_name==location.hostname).id),console.log("organization found")))})}};e.\u0275fac=function(r){return new(r||e)(a(C),a(f))},e.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var S="Service workers are disabled or not supported by this browser";function Se(i){return T(()=>F(new Error(i)))}var y=class{constructor(e){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=Se(S);else{let t=j(e,"controllerchange").pipe(l(()=>e.controller)),r=T(()=>M(e.controller)),n=U(r,t);this.worker=n.pipe(g(m=>!!m)),this.registration=this.worker.pipe(E(()=>e.getRegistration()));let N=j(e,"message").pipe(l(m=>m.data)).pipe(g(m=>m&&m.type)).pipe(W());N.connect(),this.events=N}}postMessage(e,o){return this.worker.pipe(u(1),z(t=>{t.postMessage(R({action:e},o))})).toPromise().then(()=>{})}postMessageWithOperation(e,o,t){let r=this.waitForOperationCompleted(t),n=this.postMessage(e,o);return Promise.all([n,r]).then(([,c])=>c)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let o;return typeof e=="string"?o=t=>t.type===e:o=t=>e.includes(t.type),this.events.pipe(g(o))}nextEventOfType(e){return this.eventsOfType(e).pipe(u(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(g(o=>o.nonce===e),u(1),l(o=>{if(o.result!==void 0)return o.result;throw new Error(o.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},de=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,this.pushManager=null,this.subscriptionChanges=new x,!t.isEnabled){this.messages=d,this.notificationClicks=d,this.subscription=d;return}this.messages=this.sw.eventsOfType("PUSH").pipe(l(n=>n.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(l(n=>n.data)),this.pushManager=this.sw.registration.pipe(l(n=>n.pushManager));let r=this.pushManager.pipe(E(n=>n.getSubscription()));this.subscription=P(r,this.subscriptionChanges)}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(S));let r={userVisibleOnly:!0},n=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),c=new Uint8Array(new ArrayBuffer(n.length));for(let s=0;s<n.length;s++)c[s]=n.charCodeAt(s);return r.applicationServerKey=c,this.pushManager.pipe(E(s=>s.subscribe(r)),u(1)).toPromise().then(s=>(this.subscriptionChanges.next(s),s))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(S));let t=r=>{if(r===null)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(n=>{if(!n)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(u(1),E(t)).toPromise()}decodeBase64(t){return atob(t)}};e.\u0275fac=function(r){return new(r||e)(a(y))},e.\u0275prov=p({token:e,factory:e.\u0275fac});let i=e;return i})(),ge=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=d,this.unrecoverable=d;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(S));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(S));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}};e.\u0275fac=function(r){return new(r||e)(a(y))},e.\u0275prov=p({token:e,factory:e.\u0275fac});let i=e;return i})();var fe=new V("");function Me(i,e,o,t){return()=>{if(!(h(t)&&"serviceWorker"in navigator&&o.enabled!==!1))return;navigator.serviceWorker.addEventListener("controllerchange",()=>{navigator.serviceWorker.controller!==null&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})});let r;if(typeof o.registrationStrategy=="function")r=o.registrationStrategy();else{let[c,...s]=(o.registrationStrategy||"registerWhenStable:30000").split(":");switch(c){case"registerImmediately":r=M(null);break;case"registerWithDelay":r=he(+s[0]||0);break;case"registerWhenStable":r=s[0]?P(me(i),he(+s[0])):me(i);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${o.registrationStrategy}`)}}i.get(K).runOutsideAngular(()=>r.pipe(u(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:o.scope}).catch(c=>console.error("Service worker registration failed with:",c))))}}function he(i){return M(null).pipe(L(i))}function me(i){return i.get($).isStable.pipe(g(o=>o))}function Oe(i,e){return new y(h(e)&&i.enabled!==!1?navigator.serviceWorker:void 0)}var I=class{};function Ce(i,e={}){return H([de,ge,{provide:fe,useValue:i},{provide:I,useValue:e},{provide:y,useFactory:Oe,deps:[I,f]},{provide:O,useFactory:Me,deps:[Z,fe,I,f],multi:!0}])}var ve=(()=>{let e=class e{static register(t,r={}){return{ngModule:e,providers:[Ce(t,r)]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=v({type:e}),e.\u0275inj=b({providers:[de,ge]});let i=e;return i})();var Te=i=>()=>i.fetchIntegrationDetails(),be=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=v({type:e,bootstrap:[ue]}),e.\u0275inj=b({providers:[D,{provide:O,useFactory:Te,deps:[D],multi:!0}],imports:[Y,ee,oe,le,se,ae,Q,A,ne,ve.register("ngsw-worker.js",{enabled:!q(),registrationStrategy:"registerWhenStable:30000"}),A]});let i=e;return i})();X().bootstrapModule(be).catch(i=>console.error(i));
