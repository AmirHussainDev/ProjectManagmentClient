import{a as le}from"./chunk-YZALJV4B.js";import{a as ue}from"./chunk-6VC67D3V.js";import"./chunk-NGE6N3H6.js";import{b as pe}from"./chunk-H7GGHWDF.js";import"./chunk-D2NKW7XC.js";import"./chunk-D53UE3EU.js";import{a as ce}from"./chunk-ITJCNRHH.js";import"./chunk-KHERLNJF.js";import{D as u,E as g,Ea as T,F as B,Fa as G,G as w,Ga as q,I as c,K as V,M as H,Pa as J,Qa as E,Sa as Y,T as _,Ta as Q,Ua as X,Va as ee,Xa as te,Xc as A,Ya as re,a as D,bb as ie,da as Z,ea as K,fa as $,fb as k,g as F,gb as oe,h as M,hb as ne,i as U,j as p,jb as se,k as x,kb as ae,l as O,m as P,n as N,o as f,p as h,q as l,r as W,s as L,t as b,u as C,w as z,x as d}from"./chunk-4UTRXBH4.js";var Ie=[{path:"",loadChildren:()=>import("./chunk-SMGTQZKR.js").then(t=>t.ShellModule),canActivate:[ce]},{path:"login",loadChildren:()=>import("./chunk-QOHBSDZK.js").then(t=>t.LoginModule)}],me=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=d({type:e}),e.\u0275inj=g({imports:[k.forRoot(Ie),k]});let t=e;return t})();var fe=(()=>{let e=class e{constructor(){this.title="Veins"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=z({type:e,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"main"],[1,"content"]],template:function(i,o){i&1&&(Z(0,"main",0)(1,"div",1),$(2,"router-outlet"),K()())},dependencies:[ie],styles:[`[_nghost-%COMP%] {
    font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
      Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
      "Segoe UI Symbol";
    box-sizing: border-box;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  

  .content[_ngcontent-%COMP%] {
    display: flex;
    width: 100%;
    justify-content: center;
    margin-bottom: 3rem;
    margin: auto;
  }

  @media screen and (max-width: 650px) {
    .content[_ngcontent-%COMP%] {
      flex-direction: column;
      width: 100%;
    }
  }`]});let t=e;return t})();var R=(()=>{let e=class e{constructor(r,i,o){this.http=r,this.platformId=i,this.appService=o,this.appurl=oe.apiUrl}fetchIntegrationDetails(){return this.http.get(`${this.appurl}/organizations`).toPromise().then(r=>{if(E(this.platformId)&&(localStorage.setItem("organizations",JSON.stringify(r)),r&&r.length&&r.some(i=>i.domain_name==location.hostname))){let i=r.find(o=>o.domain_name==location.hostname);localStorage.setItem("organization",JSON.stringify(i)),localStorage.setItem("organization_id",r.find(o=>o.domain_name==location.hostname).id),console.log("organization found"),this.appService.setCurrentOrganization(i)}})}};e.\u0275fac=function(i){return new(i||e)(c(Q),c(w),c(se))},e.\u0275prov=u({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var S="Service workers are disabled or not supported by this browser";function Se(t){return O(()=>U(new Error(t)))}var v=class{constructor(e){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=Se(S);else{let r=P(e,"controllerchange").pipe(p(()=>e.controller)),i=O(()=>M(e.controller)),o=x(i,r);this.worker=o.pipe(h(m=>!!m)),this.registration=this.worker.pipe(b(()=>e.getRegistration()));let j=P(e,"message").pipe(p(m=>m.data)).pipe(h(m=>m&&m.type)).pipe(L());j.connect(),this.events=j}}postMessage(e,n){return this.worker.pipe(l(1),C(r=>{r.postMessage(D({action:e},n))})).toPromise().then(()=>{})}postMessageWithOperation(e,n,r){let i=this.waitForOperationCompleted(r),o=this.postMessage(e,n);return Promise.all([o,i]).then(([,a])=>a)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let n;return typeof e=="string"?n=r=>r.type===e:n=r=>e.includes(r.type),this.events.pipe(h(n))}nextEventOfType(e){return this.eventsOfType(e).pipe(l(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(h(n=>n.nonce===e),l(1),p(n=>{if(n.result!==void 0)return n.result;throw new Error(n.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},ve=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(r){if(this.sw=r,this.pushManager=null,this.subscriptionChanges=new F,!r.isEnabled){this.messages=f,this.notificationClicks=f,this.subscription=f;return}this.messages=this.sw.eventsOfType("PUSH").pipe(p(o=>o.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(p(o=>o.data)),this.pushManager=this.sw.registration.pipe(p(o=>o.pushManager));let i=this.pushManager.pipe(b(o=>o.getSubscription()));this.subscription=N(i,this.subscriptionChanges)}requestSubscription(r){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(S));let i={userVisibleOnly:!0},o=this.decodeBase64(r.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),a=new Uint8Array(new ArrayBuffer(o.length));for(let s=0;s<o.length;s++)a[s]=o.charCodeAt(s);return i.applicationServerKey=a,this.pushManager.pipe(b(s=>s.subscribe(i)),l(1)).toPromise().then(s=>(this.subscriptionChanges.next(s),s))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(S));let r=i=>{if(i===null)throw new Error("Not subscribed to push notifications.");return i.unsubscribe().then(o=>{if(!o)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(l(1),b(r)).toPromise()}decodeBase64(r){return atob(r)}};e.\u0275fac=function(i){return new(i||e)(c(v))},e.\u0275prov=u({token:e,factory:e.\u0275fac});let t=e;return t})(),be=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(r){if(this.sw=r,!r.isEnabled){this.versionUpdates=f,this.unrecoverable=f;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(S));let r=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:r},r)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(S));let r=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:r},r)}};e.\u0275fac=function(i){return new(i||e)(c(v))},e.\u0275prov=u({token:e,factory:e.\u0275fac});let t=e;return t})();var he=new B("");function Me(t,e,n,r){return()=>{if(!(E(r)&&"serviceWorker"in navigator&&n.enabled!==!1))return;navigator.serviceWorker.addEventListener("controllerchange",()=>{navigator.serviceWorker.controller!==null&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})});let i;if(typeof n.registrationStrategy=="function")i=n.registrationStrategy();else{let[a,...s]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":i=M(null);break;case"registerWithDelay":i=de(+s[0]||0);break;case"registerWhenStable":i=s[0]?N(ge(t),de(+s[0])):ge(t);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}t.get(_).runOutsideAngular(()=>i.pipe(l(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:n.scope}).catch(a=>console.error("Service worker registration failed with:",a))))}}function de(t){return M(null).pipe(W(t))}function ge(t){return t.get(G).isStable.pipe(h(n=>n))}function Ce(t,e){return new v(E(e)&&t.enabled!==!1?navigator.serviceWorker:void 0)}var I=class{};function Te(t,e={}){return V([ve,be,{provide:he,useValue:t},{provide:I,useValue:e},{provide:v,useFactory:Ce,deps:[I,w]},{provide:T,useFactory:Me,deps:[H,he,I,w],multi:!0}])}var we=(()=>{let e=class e{static register(r,i={}){return{ngModule:e,providers:[Te(r,i)]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=d({type:e}),e.\u0275inj=g({providers:[ve,be]});let t=e;return t})();var Ee=(()=>{let e=class e{constructor(r){this.userService=r}intercept(r,i){let o=localStorage.getItem("token")?.toString(),a=r.clone({setHeaders:{Authorization:`Bearer ${o}`}});return i.handle(a).pipe(C(s=>{s instanceof Y},s=>{switch(s.status){case 401:this.userService.logout();break;case 500:break;case 600:break}console.error("Error Response:",s)}))}};e.\u0275fac=function(i){return new(i||e)(c(ne))},e.\u0275prov=u({token:e,factory:e.\u0275fac});let t=e;return t})();var Oe=t=>()=>t.fetchIntegrationDetails(),ye=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=d({type:e,bootstrap:[fe]}),e.\u0275inj=g({providers:[R,{provide:T,useFactory:Oe,deps:[R],multi:!0},{provide:X,useClass:Ee,multi:!0}],imports:[J,re,ae,me,le,ue,ee,A,pe,we.register("ngsw-worker.js",{enabled:!q(),registrationStrategy:"registerWhenStable:30000"}),A]});let t=e;return t})();te().bootstrapModule(ye).catch(t=>console.error(t));
