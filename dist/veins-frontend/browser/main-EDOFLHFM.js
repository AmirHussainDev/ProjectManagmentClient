import{a as pe}from"./chunk-SSUQSWA5.js";import{a as le}from"./chunk-J6Y42BAW.js";import"./chunk-NGE6N3H6.js";import{b as ce}from"./chunk-4OAPOEO6.js";import"./chunk-HHOYGRZI.js";import"./chunk-PXUDIOMQ.js";import{a as ae}from"./chunk-F2IZWQUV.js";import"./chunk-7HYNQYBZ.js";import{$a as ie,Ca as T,D as u,Da as $,E as g,Ea as q,F as B,G as w,H as c,J as V,L as H,Na as J,Oa as E,Qa as Y,Ra as Q,S as _,Sa as X,Sc as A,Ta as ee,Va as te,Wa as re,a as D,ca as Z,da as K,db as k,ea as G,fb as oe,g as F,h as M,hb as ne,i as x,ib as se,j as p,k as U,l as O,m as P,n as N,o as m,p as h,q as l,r as W,s as L,t as b,u as C,w as z,x as d}from"./chunk-KPA6IJWL.js";var ye=[{path:"",loadChildren:()=>import("./chunk-MPD3CBGK.js").then(t=>t.ShellModule),canActivate:[ae]},{path:"login",loadChildren:()=>import("./chunk-ZN4EMMAF.js").then(t=>t.LoginModule)}],ue=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=d({type:e}),e.\u0275inj=g({imports:[k.forRoot(ye),k]});let t=e;return t})();var fe=(()=>{let e=class e{constructor(){this.title="Veins"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=z({type:e,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"main"],[1,"content"]],template:function(i,o){i&1&&(Z(0,"main",0)(1,"div",1),G(2,"router-outlet"),K()())},dependencies:[ie],styles:[`[_nghost-%COMP%] {
    font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
      Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
      "Segoe UI Symbol";
    box-sizing: border-box;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  

  .content[_ngcontent-%COMP%] {
    display: flex;
    width: 100%;
    justify-content: center;
    margin-bottom: 3rem;
    margin: auto;
  }

  @media screen and (max-width: 650px) {
    .content[_ngcontent-%COMP%] {
      flex-direction: column;
      width: 100%;
    }
  }`]});let t=e;return t})();var R=(()=>{let e=class e{constructor(r,i,o){this.http=r,this.platformId=i,this.appService=o}fetchIntegrationDetails(){return this.http.get("/api/organizations").toPromise().then(r=>{if(E(this.platformId)&&(localStorage.setItem("organizations",JSON.stringify(r)),r&&r.length&&r.some(i=>i.domain_name==location.hostname))){let i=r.find(o=>o.domain_name==location.hostname);localStorage.setItem("organization",JSON.stringify(i)),localStorage.setItem("organization_id",r.find(o=>o.domain_name==location.hostname).id),console.log("organization found"),this.appService.setCurrentOrganization(i)}})}};e.\u0275fac=function(i){return new(i||e)(c(Q),c(w),c(ne))},e.\u0275prov=u({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var S="Service workers are disabled or not supported by this browser";function Ie(t){return O(()=>x(new Error(t)))}var v=class{constructor(e){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=Ie(S);else{let r=P(e,"controllerchange").pipe(p(()=>e.controller)),i=O(()=>M(e.controller)),o=U(i,r);this.worker=o.pipe(h(f=>!!f)),this.registration=this.worker.pipe(b(()=>e.getRegistration()));let j=P(e,"message").pipe(p(f=>f.data)).pipe(h(f=>f&&f.type)).pipe(L());j.connect(),this.events=j}}postMessage(e,n){return this.worker.pipe(l(1),C(r=>{r.postMessage(D({action:e},n))})).toPromise().then(()=>{})}postMessageWithOperation(e,n,r){let i=this.waitForOperationCompleted(r),o=this.postMessage(e,n);return Promise.all([o,i]).then(([,a])=>a)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let n;return typeof e=="string"?n=r=>r.type===e:n=r=>e.includes(r.type),this.events.pipe(h(n))}nextEventOfType(e){return this.eventsOfType(e).pipe(l(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(h(n=>n.nonce===e),l(1),p(n=>{if(n.result!==void 0)return n.result;throw new Error(n.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},ge=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(r){if(this.sw=r,this.pushManager=null,this.subscriptionChanges=new F,!r.isEnabled){this.messages=m,this.notificationClicks=m,this.subscription=m;return}this.messages=this.sw.eventsOfType("PUSH").pipe(p(o=>o.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(p(o=>o.data)),this.pushManager=this.sw.registration.pipe(p(o=>o.pushManager));let i=this.pushManager.pipe(b(o=>o.getSubscription()));this.subscription=N(i,this.subscriptionChanges)}requestSubscription(r){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(S));let i={userVisibleOnly:!0},o=this.decodeBase64(r.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),a=new Uint8Array(new ArrayBuffer(o.length));for(let s=0;s<o.length;s++)a[s]=o.charCodeAt(s);return i.applicationServerKey=a,this.pushManager.pipe(b(s=>s.subscribe(i)),l(1)).toPromise().then(s=>(this.subscriptionChanges.next(s),s))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(S));let r=i=>{if(i===null)throw new Error("Not subscribed to push notifications.");return i.unsubscribe().then(o=>{if(!o)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(l(1),b(r)).toPromise()}decodeBase64(r){return atob(r)}};e.\u0275fac=function(i){return new(i||e)(c(v))},e.\u0275prov=u({token:e,factory:e.\u0275fac});let t=e;return t})(),ve=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(r){if(this.sw=r,!r.isEnabled){this.versionUpdates=m,this.unrecoverable=m;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(S));let r=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:r},r)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(S));let r=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:r},r)}};e.\u0275fac=function(i){return new(i||e)(c(v))},e.\u0275prov=u({token:e,factory:e.\u0275fac});let t=e;return t})();var me=new B("");function Se(t,e,n,r){return()=>{if(!(E(r)&&"serviceWorker"in navigator&&n.enabled!==!1))return;navigator.serviceWorker.addEventListener("controllerchange",()=>{navigator.serviceWorker.controller!==null&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})});let i;if(typeof n.registrationStrategy=="function")i=n.registrationStrategy();else{let[a,...s]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":i=M(null);break;case"registerWithDelay":i=he(+s[0]||0);break;case"registerWhenStable":i=s[0]?N(de(t),he(+s[0])):de(t);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}t.get(_).runOutsideAngular(()=>i.pipe(l(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:n.scope}).catch(a=>console.error("Service worker registration failed with:",a))))}}function he(t){return M(null).pipe(W(t))}function de(t){return t.get($).isStable.pipe(h(n=>n))}function Me(t,e){return new v(E(e)&&t.enabled!==!1?navigator.serviceWorker:void 0)}var I=class{};function Ce(t,e={}){return V([ge,ve,{provide:me,useValue:t},{provide:I,useValue:e},{provide:v,useFactory:Me,deps:[I,w]},{provide:T,useFactory:Se,deps:[H,me,I,w],multi:!0}])}var be=(()=>{let e=class e{static register(r,i={}){return{ngModule:e,providers:[Ce(r,i)]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=d({type:e}),e.\u0275inj=g({providers:[ge,ve]});let t=e;return t})();var we=(()=>{let e=class e{constructor(r){this.userService=r}intercept(r,i){let o=localStorage.getItem("token")?.toString(),a=r.clone({setHeaders:{Authorization:`Bearer ${o}`}});return i.handle(a).pipe(C(s=>{s instanceof Y},s=>{switch(s.status){case 401:this.userService.logout();break;case 500:break;case 600:break}console.error("Error Response:",s)}))}};e.\u0275fac=function(i){return new(i||e)(c(oe))},e.\u0275prov=u({token:e,factory:e.\u0275fac});let t=e;return t})();var Te=t=>()=>t.fetchIntegrationDetails(),Ee=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=d({type:e,bootstrap:[fe]}),e.\u0275inj=g({providers:[R,{provide:T,useFactory:Te,deps:[R],multi:!0},{provide:X,useClass:we,multi:!0}],imports:[J,re,se,ue,pe,le,ee,A,ce,be.register("ngsw-worker.js",{enabled:!q(),registrationStrategy:"registerWhenStable:30000"}),A]});let t=e;return t})();te().bootstrapModule(Ee).catch(t=>console.error(t));
