import{C as a,Ga as y,Ja as h,Ra as m,b as d,c as l,y as c}from"./chunk-FKVIMGRR.js";import{a as g,b as p,g as o}from"./chunk-MON7YFGF.js";var z={production:!1,apiUrl:"/api",allowMixedContent:!0};var S=(()=>{let i=class i{constructor(t,r){this.router=t,this.http=r,this.loggedInUser={}}logout(){localStorage.setItem("user","{}"),localStorage.setItem("token",""),this.router.navigate(["/login"])}getUserDetails(){if(localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user")||"{}"))return this.loggedInUser=JSON.parse(localStorage.getItem("user")||"{}"),this.loggedInUser}getOrganizationUsers(){return o(this,null,function*(){try{let t=localStorage.getItem("organization_id");return yield this.http.get(`/api/users/${t}`).toPromise()}catch(t){throw console.error("Error fetching organization users:",t),t}})}createUser(t){return o(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.post("/api/users",t).toPromise()}catch(r){throw console.error("Error fetching organization users:",r),r}})}updateUser(t){return o(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.put("/api/users",t).toPromise()}catch(r){throw console.error("Error fetching organization users:",r),r}})}};i.\u0275fac=function(r){return new(r||i)(a(m),a(h))},i.\u0275prov=c({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})();var q=(()=>{let i=class i{constructor(t,r){this.http=t,this.userService=r,this.apiUrl=z.apiUrl,this.sites=new d,this.currentSite=new d,this.currentSiteId=0,this.currentSubOrgId=0,this.currentSubOrganization=new l({id:0,organization_id:0,name:""}),this.header=new y({accept:"application/json"})}getAndSetSites(){let t=localStorage.getItem("organization_id");return this.http.get(`/api/sites/${t}/${this.currentSubOrgId}`,{headers:this.header}).toPromise()}setSites(t){this.sites.next(t)}setCurrentSite(t){this.currentSite.next(t)}setSubOrganization(t){this.currentSubOrgId=t.id,this.currentSubOrganization.next(t)}getSubOrganizations(t=!1){return o(this,null,function*(){try{let r=localStorage.getItem("organization_id"),s=yield this.http.get(`/api/organizations/${r}`).toPromise();if(s&&s.length&&t&&localStorage.getItem("sub_organization_id")){let u=s.find(w=>w.id==(localStorage.getItem("sub_organization_id")||0));this.setSubOrganization(u||{id:0,name:"",organization_id:r||0})}return s}catch(r){throw console.error("Error fetching organization users:",r),r}})}createRole(t){return o(this,null,function*(){try{return yield this.http.post("/api/role-permissions",t).toPromise()}catch(r){throw console.error("Error fetching organization users:",r),r}})}updateRole(t){return o(this,null,function*(){try{return yield this.http.put("/api/role-permissions",t).toPromise()}catch(r){throw console.error("Error fetching organization users:",r),r}})}createVendor(t,r){return o(this,null,function*(){try{let e=new FormData;e.append("name",t),e.append("file",r);let s=localStorage.getItem("organization_id");return yield this.http.post(`/api/organizations/vendor/${s}`,e).toPromise()}catch(e){throw console.error("Error creating organization vendor:",e),e}})}updateVendor(t){return o(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.put(`/api/organizations/vendor/${r}/${t.id}`,t).toPromise()}catch(r){throw console.error("Error updating organization vendor:",r),r}})}getVendors(){return o(this,null,function*(){try{let t=localStorage.getItem("organization_id");return yield this.http.get(`/api/organizations/vendor/${t}`,{headers:this.header}).toPromise()}catch(t){throw console.error("Error fetching roles",t),t}})}getVendorItems(t){return o(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.get(`/api/organizations/vendor-items/${r}/${t}`,{headers:this.header}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}addVendorItem(t,r){return o(this,null,function*(){try{let e=localStorage.getItem("organization_id");return yield this.http.post(`/api/organizations/vendor-item/${e}/${t}`,{name:r},{headers:this.header}).toPromise()}catch(e){throw console.error("Error fetching roles",e),e}})}getSites(){return o(this,null,function*(){try{let t=localStorage.getItem("organization_id");return yield this.http.get(`/api/Sites/${t}/${this.currentSubOrgId}`,{headers:this.header}).toPromise()}catch(t){throw console.error("Error fetching roles",t),t}})}getRolesAndPermissions(){return o(this,null,function*(){try{let t=localStorage.getItem("organization_id");return yield this.http.get(`/api/role-permissions/${t}`,{headers:this.header}).toPromise()}catch(t){throw console.error("Error fetching roles",t),t}})}getRoles(){return o(this,null,function*(){try{let t=localStorage.getItem("organization_id");return yield this.http.get(`/api/role-permissions/roles/${t}`,{headers:this.header}).toPromise()}catch(t){throw console.error("Error fetching roles",t),t}})}getAndSetUserDefaultSubOrganization(){return o(this,null,function*(){try{let t=localStorage.getItem("organization_id"),r=localStorage.getItem("sub_organization_id"),s=yield this.http.get(`/api/organizations/${t}/${r}`,{headers:this.header}).toPromise();this.currentSubOrganization.next(s),this.currentSubOrgId=s.id}catch(t){throw console.error("Error fetching roles",t),t}})}addSaleRequest(t){return o(this,null,function*(){try{return yield this.http.post("/api/inventory-purchase/sale",t,{headers:this.header}).toPromise()}catch(r){throw console.error("Error posting purchase request",r),r}})}updateSaleRequest(t){return o(this,null,function*(){try{return yield this.http.put("/api/inventory-purchase/sale",t,{headers:this.header}).toPromise()}catch(r){throw console.error("Error posting purchase request",r),r}})}addPurchaseRequest(t){return o(this,null,function*(){try{return yield this.http.post("/api/inventory-purchase",t,{headers:this.header}).toPromise()}catch(r){throw console.error("Error posting purchase request",r),r}})}updatePurchaseRequest(t){return o(this,null,function*(){try{return yield this.http.put("/api/inventory-purchase",t,{headers:this.header}).toPromise()}catch(r){throw console.error("Error posting purchase request",r),r}})}retirevePOByState(t){return o(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.get(`/api/inventory-purchase/purchase-request-by-filter/${r}/${this.currentSubOrgId}`,{headers:this.header,params:t}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}retireveSaleByState(t){return o(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.get(`/api/inventory-purchase/sale-request-by-filter/${r}/${this.currentSubOrgId}`,{headers:this.header,params:t}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}retirevePOById(t){return o(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.get(`/api/inventory-purchase/purchase-request-by-id/${r}/${t}`,{headers:this.header}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}retireveSaleById(t){return o(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.get(`/api/inventory-purchase/sale-request-by-id/${r}/${t}`,{headers:this.header}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}getInventoryBySubOrganization(t){return o(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.get(`/api/inventory-purchase/inventory/${r}/${t}`,{headers:this.header}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}getInventory(t=0){return o(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.get(`/api/inventory-purchase/inventory/${r}/${t||this.currentSubOrgId}`,{headers:this.header}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}getInventoryBySiteId(t=0){return o(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.get(`/api/inventory-purchase/inventory/${r}/${this.currentSubOrgId}/${t}`,{headers:this.header}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}getInventoryItemDetails(t){return o(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.get(`/api/inventory-purchase/inventory-item-details/${r}/${this.currentSubOrgId}?name=${t}`,{headers:this.header}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}addInventory(t){return o(this,null,function*(){try{t=p(g({},t),{organization_id:localStorage.getItem("organization_id"),sub_organization_id:this.currentSubOrgId});let r=localStorage.getItem("organization_id");return yield this.http.post("/api/inventory-purchase/inventory",t,{headers:this.header}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}findObjectDifferences(t,r){let e={};for(let s in t)t.hasOwnProperty(s)&&r.hasOwnProperty(s)&&t[s]!==r[s]&&(e[s]=t[s]);for(let s in r)r.hasOwnProperty(s)&&(!t.hasOwnProperty(s)||t[s]!==r[s])&&(e[s]=r[s]);return e}createContract(t){return o(this,null,function*(){try{return yield this.http.post("/api/sites/contractors",t,{headers:this.header}).toPromise()}catch(r){throw console.error("Error posting purchase request",r),r}})}retireveContracts(t,r){return o(this,null,function*(){try{let e=localStorage.getItem("organization_id");return yield this.http.get(`/api/sites/contracts/${e}/${this.currentSubOrgId}/${t}`,{headers:this.header,params:r}).toPromise()}catch(e){throw console.error("Error fetching roles",e),e}})}retireveContractById(t,r){return o(this,null,function*(){try{let e=localStorage.getItem("organization_id");return yield this.http.get(`/api/sites/contract/${e}/${t}/${r}`,{headers:this.header}).toPromise()}catch(e){throw console.error("Error fetching roles",e),e}})}updateContractRequest(t){return o(this,null,function*(){try{return yield this.http.put("/api/sites/contract",t,{headers:this.header}).toPromise()}catch(r){throw console.error("Error posting purchase request",r),r}})}createSite(t){return o(this,null,function*(){try{let r=p(g({},t),{organization:parseInt(localStorage.getItem("organization_id")||"0"),subOrganization:this.currentSubOrgId,created_by:this.userService.loggedInUser.id});return yield this.http.post("/api/Sites",r,{headers:this.header}).toPromise()}catch(r){throw console.error("Error posting purchase request",r),r}})}retireveSites(t){return o(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.get(`/api/contractors/${r}/${this.currentSubOrgId}`,{headers:this.header,params:t}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}retireveSiteById(t){return o(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.get(`/api/Sites/${r}/${this.currentSubOrgId}/${t}`,{headers:this.header}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}updateSiteRequest(t){return o(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.put(`/api/Sites/${r}/${this.currentSubOrgId}/${t.id}`,t,{headers:this.header}).toPromise()}catch(r){throw console.error("Error posting purchase request",r),r}})}};i.\u0275fac=function(r){return new(r||i)(a(h),a(S))},i.\u0275prov=c({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})();export{z as a,S as b,q as c};
