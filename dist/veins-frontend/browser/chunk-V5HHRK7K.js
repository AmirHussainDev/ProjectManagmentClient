import{$ as p,$b as q,Bb as G,Cb as H,D as S,Da as N,Eb as L,Fb as Z,Gb as $,Ha as b,Ic as W,K as n,L as a,M as C,O as y,Q as F,R as s,_ as m,_a as f,_b as k,aa as d,ac as U,cc as x,dc as B,ea as h,eb as I,fb as M,gb as D,ka as l,kb as E,lb as T,pb as j,qb as _,r as g,rb as c,rc as O,s as v,sb as R,t as z,tb as A,yb as V,z as P}from"./chunk-HDWWHYKZ.js";import{g as w}from"./chunk-MON7YFGF.js";function Q(i,e){i&1&&(m(0,"nz-form-item")(1,"nz-form-control",7),d(2,"nz-alert",9),p()()),i&2&&(n(),s("nzSpan",14))}var fe=(()=>{let e=class e{constructor(r,t,o,u){this.fb=r,this.modal=t,this.userService=o,this.notification=u,this.data=S(E),this.updating=!1}ngOnInit(){console.log(this.data),this.changePasswordForm=this.fb.group({password:["",[c.required,c.minLength(6),c.pattern(/^(?=.*[A-Z])(?=.*[!@#$&*]).+$/)]],changePassword:["",[c.required,c.minLength(6),c.pattern(/^(?=.*[A-Z])(?=.*[!@#$&*]).+$/)]]},{validators:this.passwordsMatchValidator()})}passwordsMatchValidator(){return r=>{let t=r.get("password")?.value,o=r.get("changePassword")?.value;return t&&o&&t!==o?{passwordsMismatch:!0}:null}}onSubmit(){return w(this,null,function*(){try{this.changePasswordForm.valid?(this.updating=!0,yield this.userService.createPassword({id:this.data.user.id,password:this.changePasswordForm.getRawValue().password}),this.notification.create("success","Password changed successfully",""),console.log("Form Submitted",this.changePasswordForm.value),this.modal.close(this.changePasswordForm.value)):console.log("Form is invalid")}catch{}finally{this.updating=!1}})}onCancel(){this.modal.destroy()}get password(){return this.changePasswordForm.get("password")}get changePassword(){return this.changePasswordForm.get("changePassword")}get passwordsMismatch(){return this.changePasswordForm.hasError("passwordsMismatch")}};e.\u0275fac=function(t){return new(t||e)(a(H),a(T),a(f),a(O))},e.\u0275cmp=g({type:e,selectors:[["app-change-password"]],decls:16,vars:9,consts:[[3,"formGroup","ngSubmit"],["nzRequired","",3,"nzSpan"],["nzErrorTip","Please enter a valid password",3,"nzSpan"],["nz-input","","type","password","formControlName","password","placeholder","Enter your password"],[3,"nzSpan","nzErrorTip"],["nz-input","","type","password","formControlName","changePassword","placeholder","Enter new password"],[4,"ngIf"],[3,"nzSpan"],["nz-button","","nzType","primary",3,"disabled","click"],["nzType","error","nzMessage","Passwords must match"]],template:function(t,o){t&1&&(m(0,"nz-form",0),h("ngSubmit",function(){return o.onSubmit()}),m(1,"nz-form-item")(2,"nz-form-label",1),l(3,"Password"),p(),m(4,"nz-form-control",2),d(5,"input",3),p()(),m(6,"nz-form-item")(7,"nz-form-label",1),l(8,"Change Password"),p(),m(9,"nz-form-control",4),d(10,"input",5),p()(),F(11,Q,3,1,"nz-form-item",6),m(12,"nz-form-item")(13,"nz-form-control",7)(14,"button",8),h("click",function(){return o.onSubmit()}),l(15,"Submit"),p()()()()),t&2&&(s("formGroup",o.changePasswordForm),n(2),s("nzSpan",6),n(2),s("nzSpan",14),n(3),s("nzSpan",6),n(2),s("nzSpan",14)("nzErrorTip",o.passwordsMismatch?"Passwords must match":"Please enter a valid password"),n(2),s("ngIf",o.passwordsMismatch),n(2),s("nzSpan",14),n(),s("disabled",!o.changePasswordForm.valid))},dependencies:[N,j,D,I,M,q,k,U,B,x,$,_,R,A,V,G]});let i=e;return i})();var we=(()=>{let e=class e{constructor(r,t,o){this.templateRef=r,this.viewContainer=t,this.userService=o}set appHasPermission(r){this.userService.loggedInUser.is_admin||this.userService.hasPermission(r)?this.viewContainer.createEmbeddedView(this.templateRef):this.viewContainer.clear()}};e.\u0275fac=function(t){return new(t||e)(a(C),a(y),a(f))},e.\u0275dir=z({type:e,selectors:[["","appHasPermission",""]],inputs:{appHasPermission:"appHasPermission"}});let i=e;return i})();var Ne=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=v({type:e}),e.\u0275inj=P({imports:[b,W,Z,L]});let i=e;return i})();export{fe as a,we as b,Ne as c};
