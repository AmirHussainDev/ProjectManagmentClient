import{C as l,Fa as u,Ia as y,b as a,c as p,y as d}from"./chunk-SHSOY4E3.js";import{a as h,b as g,g as o}from"./chunk-MON7YFGF.js";var m={production:!1,apiUrl:"/api",allowMixedContent:!0};var P=(()=>{let s=class s{constructor(t){this.http=t,this.apiUrl=m.apiUrl,this.sites=new a,this.currentSite=new a,this.currentSiteId=0,this.currentSubOrgId=0,this.currentSubOrganization=new p({id:0,organization_id:0,name:""}),this.header=new u({accept:"application/json"})}getAndSetSites(){let t=localStorage.getItem("organization_id");return this.http.get(`/api/sites/${t}`,{headers:this.header}).toPromise()}setSites(t){this.sites.next(t)}setCurrentSite(t){this.currentSite.next(t)}setSubOrganization(t){this.currentSubOrgId=t.id,this.currentSubOrganization.next(t)}getSubOrganizations(t=!1){return o(this,null,function*(){try{let r=localStorage.getItem("organization_id"),n=yield this.http.get(`/api/organizations/${r}`).toPromise();if(n&&n.length&&t&&localStorage.getItem("sub_organization_id")){let c=n.find(z=>z.id==(localStorage.getItem("sub_organization_id")||0));this.setSubOrganization(c||{id:0,name:"",organization_id:r||0})}return n}catch(r){throw console.error("Error fetching organization users:",r),r}})}createRole(t){return o(this,null,function*(){try{return yield this.http.post("/api/role-permissions",t).toPromise()}catch(r){throw console.error("Error fetching organization users:",r),r}})}updateRole(t){return o(this,null,function*(){try{return yield this.http.put("/api/role-permissions",t).toPromise()}catch(r){throw console.error("Error fetching organization users:",r),r}})}createVendor(t,r){return o(this,null,function*(){try{let e=new FormData;e.append("name",t),e.append("file",r);let n=localStorage.getItem("organization_id");return yield this.http.post(`/api/organizations/vendor/${n}`,e).toPromise()}catch(e){throw console.error("Error creating organization vendor:",e),e}})}updateVendor(t){return o(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.put(`/api/organizations/vendor/${r}/${t.id}`,t).toPromise()}catch(r){throw console.error("Error updating organization vendor:",r),r}})}getVendors(){return o(this,null,function*(){try{let t=localStorage.getItem("organization_id");return yield this.http.get(`/api/organizations/vendor/${t}`,{headers:this.header}).toPromise()}catch(t){throw console.error("Error fetching roles",t),t}})}getVendorItems(t){return o(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.get(`/api/organizations/vendor-items/${r}/${t}`,{headers:this.header}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}addVendorItem(t,r){return o(this,null,function*(){try{let e=localStorage.getItem("organization_id");return yield this.http.post(`/api/organizations/vendor-item/${e}/${t}`,{name:r},{headers:this.header}).toPromise()}catch(e){throw console.error("Error fetching roles",e),e}})}getSites(){return o(this,null,function*(){try{let t=localStorage.getItem("organization_id");return yield this.http.get(`/api/Sites/${t}`,{headers:this.header}).toPromise()}catch(t){throw console.error("Error fetching roles",t),t}})}getRolesAndPermissions(){return o(this,null,function*(){try{let t=localStorage.getItem("organization_id");return yield this.http.get(`/api/role-permissions/${t}`,{headers:this.header}).toPromise()}catch(t){throw console.error("Error fetching roles",t),t}})}getRoles(){return o(this,null,function*(){try{let t=localStorage.getItem("organization_id");return yield this.http.get(`/api/role-permissions/roles/${t}`,{headers:this.header}).toPromise()}catch(t){throw console.error("Error fetching roles",t),t}})}getAndSetUserDefaultSubOrganization(){return o(this,null,function*(){try{let t=localStorage.getItem("organization_id"),r=localStorage.getItem("sub_organization_id"),n=yield this.http.get(`/api/organizations/${t}/${r}`,{headers:this.header}).toPromise();this.currentSubOrganization.next(n),this.currentSubOrgId=n.id}catch(t){throw console.error("Error fetching roles",t),t}})}addSaleRequest(t){return o(this,null,function*(){try{return yield this.http.post("/api/inventory-purchase/sale",t,{headers:this.header}).toPromise()}catch(r){throw console.error("Error posting purchase request",r),r}})}updateSaleRequest(t){return o(this,null,function*(){try{return yield this.http.put("/api/inventory-purchase/sale",t,{headers:this.header}).toPromise()}catch(r){throw console.error("Error posting purchase request",r),r}})}addPurchaseRequest(t){return o(this,null,function*(){try{return yield this.http.post("/api/inventory-purchase",t,{headers:this.header}).toPromise()}catch(r){throw console.error("Error posting purchase request",r),r}})}updatePurchaseRequest(t){return o(this,null,function*(){try{return yield this.http.put("/api/inventory-purchase",t,{headers:this.header}).toPromise()}catch(r){throw console.error("Error posting purchase request",r),r}})}retirevePOByState(t){return o(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.get(`/api/inventory-purchase/purchase-request-by-filter/${r}/${this.currentSubOrgId}`,{headers:this.header,params:t}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}retireveSaleByState(t){return o(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.get(`/api/inventory-purchase/sale-request-by-filter/${r}/${this.currentSubOrgId}`,{headers:this.header,params:t}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}retirevePOById(t){return o(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.get(`/api/inventory-purchase/purchase-request-by-id/${r}/${t}`,{headers:this.header}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}retireveSaleById(t){return o(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.get(`/api/inventory-purchase/sale-request-by-id/${r}/${t}`,{headers:this.header}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}getInventoryBySubOrganization(t){return o(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.get(`/api/inventory-purchase/inventory/${r}/${t}`,{headers:this.header}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}getInventory(t=0){return o(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.get(`/api/inventory-purchase/inventory/${r}/${t||this.currentSubOrgId}`,{headers:this.header}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}getInventoryItemDetails(t){return o(this,null,function*(){try{let r=localStorage.getItem("organization_id");return yield this.http.get(`/api/inventory-purchase/inventory-item-details/${r}/${this.currentSubOrgId}?name=${t}`,{headers:this.header}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}addInventory(t){return o(this,null,function*(){try{t=g(h({},t),{organization_id:localStorage.getItem("organization_id"),sub_organization_id:this.currentSubOrgId});let r=localStorage.getItem("organization_id");return yield this.http.post("/api/inventory-purchase/inventory",t,{headers:this.header}).toPromise()}catch(r){throw console.error("Error fetching roles",r),r}})}findObjectDifferences(t,r){let e={};for(let n in t)t.hasOwnProperty(n)&&r.hasOwnProperty(n)&&t[n]!==r[n]&&(e[n]=t[n]);for(let n in r)r.hasOwnProperty(n)&&(!t.hasOwnProperty(n)||t[n]!==r[n])&&(e[n]=r[n]);return e}};s.\u0275fac=function(r){return new(r||s)(l(y))},s.\u0275prov=d({token:s,factory:s.\u0275fac,providedIn:"root"});let i=s;return i})();export{m as a,P as b};
